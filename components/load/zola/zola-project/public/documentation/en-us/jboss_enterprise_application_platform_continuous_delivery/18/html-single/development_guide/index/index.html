<!DOCTYPE html>
<html>
    <head>
        
        <link rel="stylesheet" type="text/css" media="screen" href="/mimir/styles/mimir.min.css">
        




    <link rel="stylesheet" type="text/css" media="screen" href="/sites/dxp-docs/files/css/css_87GMcmxT1ib8ziQiU2KUAnTDFtZQV6iP-KGslA9LigM.css" />

    <link rel="stylesheet" type="text/css" media="screen" href="/sites/dxp-docs/files/css/css_Bwzy34i9pSdDlzGALvqVwG4fpgGp08KLMAkClGNY9M4.css" />



<link rel="stylesheet" type="text/css" media="screen" href="/mimir/styles/mimir-doc-toc.min.css" />



        
        <!--#include virtual="/includes/head/index.html" -->

        
        <title>
Development Guide - JBoss Enterprise Application Platform Continuous Delivery 18
</title>
        
<meta name="product" content="JBoss Enterprise Application Platform Continuous Delivery" />
<meta name="documentation_version" content="18" />
<meta name="documentKind" content="documentation" />
<meta name="portal_content_subtype" content="title" />
<meta name="lastModifiedDate" content="2019-12-06T22:33:18.000Z" />


        
            
        
        
            
                
                
                <!-- mimir_solr_yesindex -->
                <meta name="mimir_solr_yesindex" content="true" />
            
        
    </head>

    <body class="mimir-body">

        
        

        
        <div id="page-wrap" class="page-wrap">
            <div id="pers-top-page-wrap" class="top-page-wrap pers-loader-bg">
                <div id="hero-bg-top-left" class="summit-bg-shapes"></div>
                <div id="hero-bg-top-right" class="summit-bg-shapes"></div>

                <header class="masthead" id="masthead">

                    
                    <!--#include virtual="/includes/header/index.html" -->

                    
                    
                    
                        
                    
                    
                        <div class="breadcrumbs">
                            <div id="breadcrumbs" class="container">
                                
                                <a href="/">Home</a>
                                
                                <a href="/products/">Product Documentation</a>
                                
                                <a href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/20/">JBoss Enterprise Application Platform Continuous Delivery</a>
                                
                                <a href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/">18</a>
                                
                                
                                Development Guide
                                
                            </div>
                        </div>
                    
                </header>

                <main id="cp-main" class="portal-content-area">
                    <div id="cp-content" class="main-content">
                        
                        <main class="container mimir-docs">
                            
                            <bdo>
                                

<script type="module" src="/mimir/scripts/mimir-doc-toc.min.js"></script>






<div class="docs-grid">

    <nav id="mimir-doc-toc" class="mimir-doc-toc">
      <div class="mimir-doc-toc-inner">
          <!-- single-page -->
        
            
              <ol>
                <li>
                        
                        <a href="#">Development Guide</a>
                    </li><li>
                        <a href="#idm140421283370080">
                            Preface
                        </a>
                    </li><li>
                        <a href="#get_started_developing_applications">
                            1. Get Started Developing Applications
                        </a><ol>
                <li>
                        <a href="#become_familiar_with_java_enterprise_edition_8">
                            1.1. Become Familiar with Java Enterprise Edition 8
                        </a><ol>
                <li>
                        <a href="#overview_of_ee_profiles">
                            1.1.1. Overview of Java EE 8 Profiles
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#setting_up_the_development_environment">
                            1.2. Setting Up the Development Environment
                        </a>
                    </li><li>
                        <a href="#configure_annotation_processing_in_jboss_developer_studio">
                            1.3. Configure Annotation Processing in Red Hat CodeReady Studio
                        </a>
                    </li><li>
                        <a href="#configure_the_default_welcome_Web_application">
                            1.4. Configure the Default Welcome Web Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#using_maven_with_eap">
                            2. Using Maven with JBoss EAP
                        </a><ol>
                <li>
                        <a href="#learn_about_maven">
                            2.1. Learn about Maven
                        </a><ol>
                <li>
                        <a href="#about_the_maven_repository">
                            2.1.1. About the Maven Repository
                        </a>
                    </li><li>
                        <a href="#about_the_maven_pom_file">
                            2.1.2. About the Maven POM File
                        </a>
                    </li><li>
                        <a href="#about_the_maven_settings_file">
                            2.1.3. About the Maven Settings File
                        </a>
                    </li><li>
                        <a href="#about_maven_repository_managers">
                            2.1.4. About Maven Repository Managers
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#install_maven_and_the_jboss_eap_maven_repository">
                            2.2. Install Maven and the JBoss EAP Maven Repository
                        </a><ol>
                <li>
                        <a href="#download_the_install_maven">
                            2.2.1. Download and Install Maven
                        </a>
                    </li><li>
                        <a href="#download_jboss_eap_maven_repository">
                            2.2.2. Download the JBoss EAP Maven Repository
                        </a><ol>
                <li>
                        <a href="#download_maven_zip_from_customer_portal">
                            2.2.2.1. Download the JBoss EAP Maven Repository ZIP File
                        </a>
                    </li><li>
                        <a href="#download_maven_using_script">
                            2.2.2.2. Download the JBoss EAP Maven Repository with the Offliner Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#install_the_jboss_eap_maven_repository">
                            2.2.3. Install the JBoss EAP Maven Repository
                        </a><ol>
                <li>
                        <a href="#install_the_jboss_eap_maven_repository_locally">
                            2.2.3.1. Install the JBoss EAP Maven Repository Locally
                        </a>
                    </li><li>
                        <a href="#install_the_jboss_eap_maven_repository_for_use_with_apache_httpd">
                            2.2.3.2. Install the JBoss EAP Maven Repository for Use with Apache httpd
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#use_the_maven_repository">
                            2.3. Use the Maven Repository
                        </a><ol>
                <li>
                        <a href="#configure_the_jboss_eap_maven_repository">
                            2.3.1. Configure the JBoss EAP Maven Repository
                        </a>
                    </li><li>
                        <a href="#configure_maven_for_use_with_red_hat_jboss_developer_studio">
                            2.3.2. Configure Maven for Use with Red Hat CodeReady Studio
                        </a>
                    </li><li>
                        <a href="#manage_project_dependencies">
                            2.3.3. Manage Project Dependencies
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#class_loading_and_modules">
                            3. Class Loading and Modules
                        </a><ol>
                <li>
                        <a href="#introduction">
                            3.1. Introduction
                        </a><ol>
                <li>
                        <a href="#overview_of_class_loading_and_modules">
                            3.1.1. Overview of Class Loading and Modules
                        </a>
                    </li><li>
                        <a href="#class_loading_in_deployments">
                            3.1.2. Class Loading in Deployments
                        </a>
                    </li><li>
                        <a href="#class_loading_precedence">
                            3.1.3. Class Loading Precedence
                        </a>
                    </li><li>
                        <a href="#jboss_deployment_structure_xml">
                            3.1.4. jboss-deployment-structure.xml
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#add_an_explicit_module_dependency_to_a_deployment">
                            3.2. Add an Explicit Module Dependency to a Deployment
                        </a>
                    </li><li>
                        <a href="#generate_manifest_mf_entries_using_maven">
                            3.3. Generate MANIFEST.MF entries using Maven
                        </a>
                    </li><li>
                        <a href="#prevent_a_module_being_implicitly_loaded">
                            3.4. Prevent a Module Being Implicitly Loaded
                        </a>
                    </li><li>
                        <a href="#exclude_a_subsystem_from_a_deployment">
                            3.5. Exclude a Subsystem from a Deployment
                        </a>
                    </li><li>
                        <a href="#use_the_class_loader_programmatically_in_a_deployment">
                            3.6. Use the Class Loader Programmatically in a Deployment
                        </a><ol>
                <li>
                        <a href="#programmatically_load_classes_and_resources_in_a_deployment">
                            3.6.1. Programmatically Load Classes and Resources in a Deployment
                        </a>
                    </li><li>
                        <a href="#programmatically_iterate_resources_in_a_deployment">
                            3.6.2. Programmatically Iterate Resources in a Deployment
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#class_loading_and_subdeployments">
                            3.7. Class Loading and Subdeployments
                        </a><ol>
                <li>
                        <a href="#modules_and_class_loading_in_enterprise_archives">
                            3.7.1. Modules and Class Loading in Enterprise Archives
                        </a>
                    </li><li>
                        <a href="#subdeployment_class_loader_isolation">
                            3.7.2. Subdeployment Class Loader Isolation
                        </a>
                    </li><li>
                        <a href="#enable_subdeployment_class_loader_isolation_within_a_ear">
                            3.7.3. Enable Subdeployment Class Loader Isolation Within a EAR
                        </a>
                    </li><li>
                        <a href="#configuring_session_sharing_between_subdeployments_in_enterprise_archives">
                            3.7.4. Configuring Session Sharing between Subdeployments in Enterprise Archives
                        </a><ol>
                <li>
                        <a href="#reference_of_shared_session_configuration_options">
                            3.7.4.1. Reference of Shared Session Configuration Options
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#deploy_tag_library_descriptors_TLDs_in_a_custom_module">
                            3.8. Deploy Tag Library Descriptors (TLDs) in a Custom Module
                        </a>
                    </li><li>
                        <a href="#display_modules_by_deployment-1">
                            3.9. Display Modules by Deployment
                        </a>
                    </li><li>
                        <a href="#class_loading_reference">
                            3.10. Class Loading Reference
                        </a><ol>
                <li>
                        <a href="#implicit_module_dependencies">
                            3.10.1. Implicit Module Dependencies
                        </a>
                    </li><li>
                        <a href="#included_modules">
                            3.10.2. Included Modules
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#logging_for_developers">
                            4. Logging
                        </a><ol>
                <li>
                        <a href="#about_logging">
                            4.1. About Logging
                        </a><ol>
                <li>
                        <a href="#supported_application_logging_frameworks">
                            4.1.1. Supported Application Logging Frameworks
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#logging_with_the_jboss_logging_framework">
                            4.2. Logging with the JBoss Logging Framework
                        </a><ol>
                <li>
                        <a href="#about_jboss_logging">
                            4.2.1. About JBoss Logging
                        </a>
                    </li><li>
                        <a href="#add_logging_to_an_application_with_jboss_logging">
                            4.2.2. Add Logging to an Application with JBoss Logging
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#about_per_deployment_logging">
                            4.3. Per-deployment Logging
                        </a><ol>
                <li>
                        <a href="#add_per_deployment_logging_to_an_application">
                            4.3.1. Add Per-deployment Logging to an Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#logging_profiles">
                            4.4. Logging Profiles
                        </a><ol>
                <li>
                        <a href="#specify_a_logging_profile_in_an_application">
                            4.4.1. Specify a Logging Profile in an Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#internationalization_and_localization">
                            4.5. Internationalization and Localization
                        </a><ol>
                <li>
                        <a href="#introduction_2">
                            4.5.1. Introduction
                        </a><ol>
                <li>
                        <a href="#about_internationalization">
                            4.5.1.1. About Internationalization
                        </a>
                    </li><li>
                        <a href="#about_localization">
                            4.5.1.2. About Localization
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#jboss_logging_tools_internationalization_and_localization">
                            4.5.2. JBoss Logging Tools Internationalization and Localization
                        </a>
                    </li><li>
                        <a href="#creating_internationalized_loggers_messages_and_exceptions">
                            4.5.3. Creating Internationalized Loggers, Messages and Exceptions
                        </a><ol>
                <li>
                        <a href="#create_internationalized_log_messages">
                            4.5.3.1. Create Internationalized Log Messages
                        </a>
                    </li><li>
                        <a href="#create_and_use_internationalized_messages">
                            4.5.3.2. Create and Use Internationalized Messages
                        </a>
                    </li><li>
                        <a href="#create_internationalized_exceptions">
                            4.5.3.3. Create Internationalized Exceptions
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#localizing_internationalized_loggers_messages_and_exceptions">
                            4.5.4. Localizing Internationalized Loggers, Messages and Exceptions
                        </a><ol>
                <li>
                        <a href="#generate_new_translation_properties_files_with_maven">
                            4.5.4.1. Generate New Translation Properties Files with Maven
                        </a>
                    </li><li>
                        <a href="#translate_an_internationalized_logger_exception_or_message">
                            4.5.4.2. Translate an Internationalized Logger, Exception, or Message
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#customizing_internationalized_log_messages">
                            4.5.5. Customizing Internationalized Log Messages
                        </a><ol>
                <li>
                        <a href="#add_message_ids_and_project_codes_to_log_messages">
                            4.5.5.1. Add Message IDs and Project Codes to Log Messages
                        </a>
                    </li><li>
                        <a href="#specify_the_log_level_for_a_message">
                            4.5.5.2. Specify the Log Level for a Message
                        </a>
                    </li><li>
                        <a href="#customize_log_messages_with_parameters">
                            4.5.5.3. Customize Log Messages with Parameters
                        </a>
                    </li><li>
                        <a href="#specify_an_exception_as_the_cause_of_a_log_message">
                            4.5.5.4. Specify an Exception as the Cause of a Log Message
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#customizing_internationalized_exceptions">
                            4.5.6. Customizing Internationalized Exceptions
                        </a><ol>
                <li>
                        <a href="#add_message_ids_and_project_codes_to_exception_messages">
                            4.5.6.1. Add Message IDs and Project Codes to Exception Messages
                        </a>
                    </li><li>
                        <a href="#customize_exception_messages_with_parameters">
                            4.5.6.2. Customize Exception Messages with Parameters
                        </a>
                    </li><li>
                        <a href="#specify_one_exception_as_the_cause_of_another_exception">
                            4.5.6.3. Specify One Exception as the Cause of Another Exception
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#jboss_logging_tools_references">
                            4.5.7. JBoss Logging Tools References
                        </a><ol>
                <li>
                        <a href="#jboss_logging_tools_maven_configuration">
                            4.5.7.1. JBoss Logging Tools Maven Configuration
                        </a>
                    </li><li>
                        <a href="#translation_property_file_format">
                            4.5.7.2. Translation Property File Format
                        </a>
                    </li><li>
                        <a href="#jboss_logging_tools_annotations_reference">
                            4.5.7.3. JBoss Logging Tools Annotations Reference
                        </a>
                    </li><li>
                        <a href="#project_codes_used_in_eap">
                            4.5.7.4. Project Codes Used in JBoss EAP
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#remote_jndi_lookup">
                            5. Remote JNDI lookup
                        </a><ol>
                <li>
                        <a href="#registering_objects_to_jndi">
                            5.1. Registering Objects to JNDI
                        </a>
                    </li><li>
                        <a href="#configuring_remote_jndi">
                            5.2. Configuring Remote JNDI
                        </a>
                    </li><li>
                        <a href="#jndi_invocation_over_http">
                            5.3. JNDI Invocation Over HTTP
                        </a><ol>
                <li>
                        <a href="#client_side_implementation">
                            5.3.1. Client-side Implementation
                        </a>
                    </li><li>
                        <a href="#server_side_implementation">
                            5.3.2. Server-side Implementation
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#clustering_in_web_applications">
                            6. Clustering in Web Applications
                        </a><ol>
                <li>
                        <a href="#session_replication">
                            6.1. Session Replication
                        </a><ol>
                <li>
                        <a href="#about_http_session_replication">
                            6.1.1. About HTTP Session Replication
                        </a>
                    </li><li>
                        <a href="#enable_session_replication_in_your_application">
                            6.1.2. Enable Session Replication in Your Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#http_session_passivation_and_activation">
                            6.2. HTTP Session Passivation and Activation
                        </a><ol>
                <li>
                        <a href="#about_http_session_passivation_and_activation">
                            6.2.1. About HTTP Session Passivation and Activation
                        </a>
                    </li><li>
                        <a href="#configure_httpsession_passivation_in_your_application">
                            6.2.2. Configure HTTP Session Passivation in Your Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#public_API_for_clustering-services">
                            6.3. Public API for Clustering Services
                        </a>
                    </li><li>
                        <a href="#clustered_ha_singleton_service">
                            6.4. HA Singleton Service
                        </a>
                    </li><li>
                        <a href="#ha_singleton_deployments">
                            6.5. HA Singleton Deployments
                        </a>
                    </li><li>
                        <a href="#apache_mod_cluster_manager_application">
                            6.6. Apache mod_cluster-manager Application
                        </a><ol>
                <li>
                        <a href="#about-mod_cluster-manager-application">
                            6.6.1. About mod_cluster-manager Application
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#distributable_web_subsystem">
                            6.7. The distributable-web subsystem for Distributable Web Session Configurations
                        </a><ol>
                <li>
                        <a href="#session-managenemt-via-hotrod">
                            6.7.1. Storing Web Session Data In a Remote Red Hat Data Grid
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#contexts_and_dependency_injection">
                            7. Contexts and Dependency Injection (CDI)
                        </a><ol>
                <li>
                        <a href="#introduction_to_cdi">
                            7.1. Introduction to CDI
                        </a><ol>
                <li>
                        <a href="#about_contexts_and_dependency_injection_cdi">
                            7.1.1. About Contexts and Dependency Injection (CDI)
                        </a>
                    </li><li>
                        <a href="#Relationship_between_weld_seam_2_and_javaserver_faces">
                            7.1.2. Relationship Between Weld, Seam 2, and JavaServer Faces
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#use_cdi_to_develop_application">
                            7.2. Use CDI to Develop an Application
                        </a><ol>
                <li>
                        <a href="#default_bean_discovery_mode">
                            7.2.1. Default Bean Discovery Mode
                        </a>
                    </li><li>
                        <a href="#exclude_beans_from_the_scanning_proces">
                            7.2.2. Exclude Beans From the Scanning Process
                        </a>
                    </li><li>
                        <a href="#use_an_injection_to_extend_an_implementation">
                            7.2.3. Use an Injection to Extend an Implementation
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#ambiguous_or_unsatisfied_dependencies">
                            7.3. Ambiguous or Unsatisfied Dependencies
                        </a><ol>
                <li>
                        <a href="#about_qualifiers">
                            7.3.1. Qualifiers
                        </a>
                    </li><li>
                        <a href="#use_a_qualifier_to_resolve_an_ambiguous_injection">
                            7.3.2. Use a Qualifier to Resolve an Ambiguous Injection
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#managed_beans">
                            7.4. Managed Beans
                        </a><ol>
                <li>
                        <a href="#types_of_classes_that_are_beans">
                            7.4.1. Types of Classes That are Beans
                        </a>
                    </li><li>
                        <a href="#use_cdi_to_inject_an_object_into_a_bean">
                            7.4.2. Use CDI to Inject an Object Into a Bean
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#contexts_and_scopes">
                            7.5. Contexts and Scopes
                        </a>
                    </li><li>
                        <a href="#about_named_beans">
                            7.6. Named Beans
                        </a><ol>
                <li>
                        <a href="#use_named_beans">
                            7.6.1. Use Named Beans
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#bean_lifecycle">
                            7.7. Bean Lifecycle
                        </a><ol>
                <li>
                        <a href="#user_a_producer_method">
                            7.7.1. Use a Producer Method
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#alternative_beans">
                            7.8. Alternative Beans
                        </a><ol>
                <li>
                        <a href="#override_injection_with_alternative">
                            7.8.1. Override an Injection with an Alternative
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#stereotypes">
                            7.9. Stereotypes
                        </a><ol>
                <li>
                        <a href="#use_stereotypes">
                            7.9.1. Use Stereotypes
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#observer_methods">
                            7.10. Observer Methods
                        </a><ol>
                <li>
                        <a href="#fire_and_observe_events">
                            7.10.1. Fire and Observe Events
                        </a>
                    </li><li>
                        <a href="#transactional_observers">
                            7.10.2. Transactional Observers
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#interceptors">
                            7.11. Interceptors
                        </a><ol>
                <li>
                        <a href="#use_interceptors_with_cdi">
                            7.11.1. Use Interceptors with CDI
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#decorators">
                            7.12. Decorators
                        </a>
                    </li><li>
                        <a href="#portable_extensions">
                            7.13. Portable Extensions
                        </a>
                    </li><li>
                        <a href="#bean_proxies">
                            7.14. Bean Proxies
                        </a>
                    </li><li>
                        <a href="#use_a_proxy_in_an_injection">
                            7.15. Use a Proxy in an Injection
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#jboss_eap_mbean_services">
                            8. JBoss EAP MBean Services
                        </a><ol>
                <li>
                        <a href="#writing_jboss_mbean_services">
                            8.1. Writing JBoss MBean Services
                        </a><ol>
                <li>
                        <a href="#a_standard_mbean_example">
                            8.1.1. A Standard MBean Example
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#deploying_jboss_mbean_services">
                            8.2. Deploying JBoss MBean Services
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#concurrency_utilities">
                            9. Concurrency Utilities
                        </a><ol>
                <li>
                        <a href="#context-service">
                            9.1. Context Service
                        </a>
                    </li><li>
                        <a href="#managed_thread_factory">
                            9.2. Managed Thread Factory
                        </a>
                    </li><li>
                        <a href="#managed_executor_service">
                            9.3. Managed Executor Service
                        </a>
                    </li><li>
                        <a href="#managed_scheduled_executor_service">
                            9.4. Managed Scheduled Executor Service
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#undertow">
                            10. Undertow
                        </a><ol>
                <li>
                        <a href="#introduction_undertow_handler">
                            10.1. Introduction to Undertow Handler
                        </a>
                    </li><li>
                        <a href="#using_existing_handlers_with_deployment">
                            10.2. Using Existing Undertow Handlers with a Deployment
                        </a>
                    </li><li>
                        <a href="#creating_custom_handler">
                            10.3. Creating Custom Handlers
                        </a>
                    </li><li>
                        <a href="#custom_http_mechanism">
                            10.4. Developing a Custom HTTP Mechanism
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#java_transaction_api">
                            11. Java Transaction API (JTA)
                        </a><ol>
                <li>
                        <a href="#overview">
                            11.1. Overview
                        </a><ol>
                <li>
                        <a href="#overview_of_java_transactions_api_jta">
                            11.1.1. Overview of Java Transaction API (JTA)
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#transaction_concepts">
                            11.2. Transaction Concepts
                        </a><ol>
                <li>
                        <a href="#about_transactions">
                            11.2.1. About Transactions
                        </a>
                    </li><li>
                        <a href="#about_acid_properties_for_transactions">
                            11.2.2. About ACID Properties for Transactions
                        </a>
                    </li><li>
                        <a href="#about_the_transaction_coordinator_or_transaction_manager">
                            11.2.3. About the Transaction Coordinator or Transaction Manager
                        </a>
                    </li><li>
                        <a href="#about_transaction_participants">
                            11.2.4. About Transaction Participants
                        </a>
                    </li><li>
                        <a href="#about_java_transactions_api_jta">
                            11.2.5. About Java Transaction API (JTA)
                        </a>
                    </li><li>
                        <a href="#about_java_transaction_service_jts">
                            11.2.6. About Java Transaction Service (JTS)
                        </a>
                    </li><li>
                        <a href="#about_xml_transaction_service">
                            11.2.7. About XML Transaction Service
                        </a><ol>
                <li>
                        <a href="#overview_protocols_used_by_xts">
                            11.2.7.1. Overview of Protocols Used by XTS
                        </a>
                    </li><li>
                        <a href="#web_services_atomic_transaction_process">
                            11.2.7.2. Web Services-Atomic Transaction Process
                        </a><ol>
                <li>
                        <a href="#atomic_transaction_process">
                            11.2.7.2.1. Atomic Transaction Process
                        </a>
                    </li><li>
                        <a href="#wsat_dotnet_clients">
                            11.2.7.2.2. WS-AT Interoperability with Microsoft .NET Clients
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#web_services_business_activity_process">
                            11.2.7.3. Web Services-Business Activity Process
                        </a><ol>
                <li>
                        <a href="#ws_ba_process">
                            11.2.7.3.1. WS-BA Process
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#transaction_bridging_overview">
                            11.2.7.4. Transaction Bridging Overview
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#about_xa_datasources_and_xa_transactions">
                            11.2.8. About XA Resources and XA Transactions
                        </a>
                    </li><li>
                        <a href="#about_xa_recovery">
                            11.2.9. About XA Recovery
                        </a>
                    </li><li>
                        <a href="#limitations_of_the_xa_recovery_process">
                            11.2.10. Limitations of the XA Recovery Process
                        </a>
                    </li><li>
                        <a href="#about_the_2_phase_commit_protocol">
                            11.2.11. About the 2-Phase Commit Protocol
                        </a>
                    </li><li>
                        <a href="#about_transaction_timeouts">
                            11.2.12. About Transaction Timeouts
                        </a>
                    </li><li>
                        <a href="#about_distributed_transactions">
                            11.2.13. About Distributed Transactions
                        </a>
                    </li><li>
                        <a href="#about_the_orb_portability_api">
                            11.2.14. About the ORB Portability API
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#transaction_optimizations">
                            11.3. Transaction Optimizations
                        </a><ol>
                <li>
                        <a href="#overview_of_transaction_optimizations">
                            11.3.1. Overview of Transaction Optimizations
                        </a>
                    </li><li>
                        <a href="#about_the_lrco_optimization_for_single_phase_commit_1pc">
                            11.3.2. About the LRCO Optimization for Single-phase Commit (1PC)
                        </a><ol>
                <li>
                        <a href="#commit_markable_resource">
                            11.3.2.1. Commit Markable Resource
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#about_the_presumed_abort_optimization">
                            11.3.3. About the Presumed-Abort Optimization
                        </a>
                    </li><li>
                        <a href="#about_the_read_only_optimization">
                            11.3.4. About the Read-Only Optimization
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#transaction_outcomes">
                            11.4. Transaction Outcomes
                        </a><ol>
                <li>
                        <a href="#about_transaction_outcomes">
                            11.4.1. About Transaction Outcomes
                        </a>
                    </li><li>
                        <a href="#about_transaction_commit">
                            11.4.2. About Transaction Commit
                        </a>
                    </li><li>
                        <a href="#about_transaction_roll_back">
                            11.4.3. About Transaction Rollback
                        </a>
                    </li><li>
                        <a href="#about_heuristic_outcomes">
                            11.4.4. About Heuristic Outcomes
                        </a>
                    </li><li>
                        <a href="#jboss_transactions_errors_and_exceptions">
                            11.4.5. JBoss Transactions Errors and Exceptions
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#overview_of_the_transaction_lifecycle">
                            11.5. Overview of the Transaction Lifecycle
                        </a><ol>
                <li>
                        <a href="#transaction_lifecycle">
                            11.5.1. Transaction Lifecycle
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#transactions_configuration_overview">
                            11.6. Transaction Subsystem Configuration
                        </a>
                    </li><li>
                        <a href="#transactions_usage_in_practice">
                            11.7. Transactions Usage In Practice
                        </a><ol>
                <li>
                        <a href="#transactions_usage_overview">
                            11.7.1. Transactions Usage Overview
                        </a>
                    </li><li>
                        <a href="#control_transactions">
                            11.7.2. Control Transactions
                        </a><ol>
                <li>
                        <a href="#begin_a_transaction">
                            11.7.2.1. Begin a Transaction
                        </a><ol>
                <li>
                        <a href="#nested_transactions">
                            11.7.2.1.1. Nested Transactions
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#commit_a_transaction">
                            11.7.2.2. Commit a Transaction
                        </a>
                    </li><li>
                        <a href="#roll_back_a_transaction">
                            11.7.2.3. Roll Back a Transaction
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#handle_a_heuristic_outcome_in_a_transaction">
                            11.7.3. Handle a Heuristic Outcome in a Transaction
                        </a>
                    </li><li>
                        <a href="#jta_transaction_error_handling">
                            11.7.4. JTA Transaction Error Handling
                        </a><ol>
                <li>
                        <a href="#handle_transaction_errors">
                            11.7.4.1. Handle Transaction Errors
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#transaction_references">
                            11.8. Transaction References
                        </a><ol>
                <li>
                        <a href="#jta_transaction_example">
                            11.8.1. JTA Transaction Example
                        </a>
                    </li><li>
                        <a href="#api_documentation_for_jboss_transactions_jta">
                            11.8.2. Transaction API Documentation
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#java_persistence_api">
                            12. Java Persistence API (JPA)
                        </a><ol>
                <li>
                        <a href="#about_jpa">
                            12.1. About Java Persistence API (JPA)
                        </a>
                    </li><li>
                        <a href="#create_a_simple_jpa_application">
                            12.2. Create a Simple JPA Application
                        </a>
                    </li><li>
                        <a href="#jpa-entities">
                            12.3. JPA Entities
                        </a>
                    </li><li>
                        <a href="#persistence-context">
                            12.4. Persistence Context
                        </a><ol>
                <li>
                        <a href="#transaction_scoped_persistence_context">
                            12.4.1. Transaction-Scoped Persistence Context
                        </a>
                    </li><li>
                        <a href="#extended_persistence_context">
                            12.4.2. Extended Persistence Context
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#jpa-entity-manager">
                            12.5. JPA EntityManager
                        </a><ol>
                <li>
                        <a href="#application_managed_entitymanager">
                            12.5.1. Application-Managed EntityManager
                        </a>
                    </li><li>
                        <a href="#container_managed_entitymanager">
                            12.5.2. Container-Managed EntityManager
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#working-with-entity-manager">
                            12.6. Working with the EntityManager
                        </a><ol>
                <li>
                        <a href="#binding_the_entitymanager_to_jndi">
                            12.6.1. Binding the EntityManager to JNDI
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#deploying_persistence_unit">
                            12.7. Deploying the Persistence Unit
                        </a>
                    </li><li>
                        <a href="#second_level_caches">
                            12.8. Second-level Caches
                        </a><ol>
                <li>
                        <a href="#about_second_level_caches">
                            12.8.1. About Second-level Caches
                        </a><ol>
                <li>
                        <a href="#default_second_level_cache_provider_infinispan">
                            12.8.1.1. Default Second-level Cache Provider
                        </a><ol>
                <li>
                        <a href="#configure_second_level_cache_persistence_unit">
                            12.8.1.1.1. Configuring a Second-level Cache in the Persistence Unit
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#bean_validation">
                            13. Bean Validation
                        </a><ol>
                <li>
                        <a href="#about_bean_validation">
                            13.1. About Bean Validation
                        </a>
                    </li><li>
                        <a href="#validation_constraints">
                            13.2. Validation Constraints
                        </a><ol>
                <li>
                        <a href="#about_validation_constraints">
                            13.2.1. About Validation Constraints
                        </a>
                    </li><li>
                        <a href="#hibernate_validator_constraints">
                            13.2.2. Hibernate Validator Constraints
                        </a>
                    </li><li>
                        <a href="#bean_validation_using_custom_constraint">
                            13.2.3. Bean Validation Using Custom Constraints
                        </a><ol>
                <li>
                        <a href="#creating_constraint_annotation">
                            13.2.3.1. Creating A Constraint Annotation
                        </a>
                    </li><li>
                        <a href="#implementing_constraint_validator">
                            13.2.3.2. Implementing A Constraint Validator
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#example_validation_configuration_file">
                            13.3. Validation Configuration
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#creating_websocket_applications">
                            14. Creating WebSocket Applications
                        </a>
                    </li><li>
                        <a href="#java_authorization_contract_for_containers_jacc">
                            15. Java Authorization Contract for Containers (JACC)
                        </a><ol>
                <li>
                        <a href="#about_java_authorization_contract_for_containers_jacc">
                            15.1. About Java Authorization Contract for Containers (JACC)
                        </a>
                    </li><li>
                        <a href="#configure_java_authorization_contract_for_containers_jacc_security">
                            15.2. Configure Java Authorization Contract for Containers (JACC) Security
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#java_authentication_spi_for_containers_jaspi">
                            16. Java Authentication SPI for Containers (JASPI)
                        </a><ol>
                <li>
                        <a href="#about_java_authentication_spi_for_containers_jaspi_security">
                            16.1. About Java Authentication SPI for Containers (JASPI) Security
                        </a>
                    </li><li>
                        <a href="#configure_java_authentication_spi_for_containers_jaspi_security">
                            16.2. Configure Java Authentication SPI for Containers (JASPI) Security
                        </a>
                    </li><li>
                        <a href="#configure_java_authentication_SPI_for_containers_JASPI_security_using_elytron">
                            16.3. Configure Java Authentication SPI for Containers (JASPI) Security Using Elytron
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#java_ee_security_api">
                            17. Java EE Security API
                        </a><ol>
                <li>
                        <a href="#about-java-ee-security-api">
                            17.1. About Java EE Security API
                        </a>
                    </li><li>
                        <a href="#configure-java-ee-security-api-using-elytron">
                            17.2. Configure Java EE Security API Using Elytron
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#java_batch_application_development">
                            18. Java Batch Application Development
                        </a><ol>
                <li>
                        <a href="#batch_required_dependencies">
                            18.1. Required Batch Dependencies
                        </a>
                    </li><li>
                        <a href="#batch_jsl_inheritance">
                            18.2. Job Specification Language (JSL) Inheritance
                        </a>
                    </li><li>
                        <a href="#batch_property_injections">
                            18.3. Batch Property Injections
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#configuring_clients">
                            19. Configuring Clients
                        </a><ol>
                <li>
                        <a href="#client_configuration_using_the_wildfly_config_file">
                            19.1. Client Configuration Using the wildfly-config.xml File
                        </a><ol>
                <li>
                        <a href="#client_authentication_configuration_using_the_wildfly_config_file">
                            19.1.1. Client Authentication Configuration Using the wildfly-config.xml File
                        </a>
                    </li><li>
                        <a href="#ejb_client_configuration_using_the_wildfly_config_file">
                            19.1.2. EJB Client Configuration Using the wildfly-config.xml File
                        </a>
                    </li><li>
                        <a href="#http_client_configuration_using_the_wildfly_config_file">
                            19.1.3. HTTP Client Configuration Using the wildfly-config.xml File
                        </a>
                    </li><li>
                        <a href="#remoting_client_configuration_using_the_wildfly_config_file">
                            19.1.4. Remoting Client Configuration Using the wildfly-config.xml File
                        </a>
                    </li><li>
                        <a href="#xnio_client_configuration_using_the_wildfly_config_file">
                            19.1.5. Default XNIO Worker Configuration Using the wildfly-config.xml File
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#eclipse_microprofile">
                            20. Eclipse MicroProfile
                        </a><ol>
                <li>
                        <a href="#using_microprofile_opentracing_smallrye_tracer">
                            20.1. Using Eclipse MicroProfile OpenTracing to Trace Requests
                        </a><ol>
                <li>
                        <a href="#microprofile_opentracing_smallrye_tracer_cdi">
                            20.1.1. Enable or Disable Tracing for CDI Beans
                        </a>
                    </li><li>
                        <a href="#microprofile_opentracing_smallrye_tracer_jaxrs_endpoints">
                            20.1.2. Enable or Disable Tracing for JAX-RS Endpoints
                        </a>
                    </li><li>
                        <a href="#microprofile_opentracing_smallrye_tracer_custom_implementation">
                            20.1.3. Implement a Custom Tracer
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#using_microprofile_health_smallrye">
                            20.2. Using Eclipse MicroProfile Health to Monitor Server Health
                        </a><ol>
                <li>
                        <a href="#microprofile_health_smallrye_custom_check">
                            20.2.1. Implement a Custom Health Check
                        </a>
                    </li>
            </ol>
                    </li>
            </ol>
                    </li><li>
                        <a href="#reference_material">
                            A. Reference Material
                        </a><ol>
                <li>
                        <a href="#undertow_available_handlers">
                            A.1. Provided Undertow Handlers
                        </a>
                    </li><li>
                        <a href="#persistence_unit_properties">
                            A.2. Persistence Unit Properties
                        </a>
                    </li><li>
                        <a href="#policy_provider_properties">
                            A.3. Policy Provider Properties
                        </a>
                    </li><li>
                        <a href="#java_ee_profiles_and_technologies_reference">
                            A.4. Java EE 8 Profiles and Technologies Reference
                        </a>
                    </li>
            </ol>
                    </li><li>
                        <a href="#idm140421288954720">
                            Legal Notice
                        </a>
                    </li>
            </ol>
            
        
      </div>
    </nav>

    
    <div class="pvof-doc__wrapper" id="doc-wrapper">
        <section class="mimir-doc-title" id="mimir-doc--development_guide">
            <h1 class="title">Development Guide</h1>
        </section>
        <body><div xml:lang="en-US" class="book" id="idm140421283622000"><div class="titlepage"><div><div class="producttitle"><span class="productname">JBoss Enterprise Application Platform Continuous Delivery</span> <span class="productnumber">18</span></div><div><h2 class="subtitle">For Use with JBoss Enterprise Application Platform Continuous Delivery 18</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services </span></div></div><div><a href="#idm140421288954720">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This document provides instructions and information for quickly developing secure and scalable Java EE applications. You will learn about <a class="link" href="#setting_up_the_development_environment" title="1.2. Setting Up the Development Environment">setting up the development environment</a>, <a class="link" href="#using_maven_with_eap" title="Chapter 2. Using Maven with JBoss EAP">using the Maven repository</a>, and <a class="link" href="#class_loading_in_deployments" title="3.1.2. Class Loading in Deployments">class loading in deployments</a>. The document also has detailed information about: 
				<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#logging_for_developers" title="Chapter 4. Logging">Logging</a></li><li class="listitem"><a class="link" href="#remote_jndi_lookup" title="Chapter 5. Remote JNDI lookup">Remote JNDI lookup</a></li><li class="listitem"><a class="link" href="#clustering_in_web_applications" title="Chapter 6. Clustering in Web Applications">Clustering in web applications</a></li><li class="listitem"><a class="link" href="#contexts_and_dependency_injection" title="Chapter 7. Contexts and Dependency Injection (CDI)">Contexts and dependency injection</a></li><li class="listitem">
						Java APIs such as <a class="link" href="#java_transaction_api" title="Chapter 11. Java Transaction API (JTA)">Java Transaction API</a> and <a class="link" href="#java_persistence_api" title="Chapter 12. Java Persistence API (JPA)">Java Persistence API</a></li></ul></div>

			</div></div></div></div><hr/></div><section class="preface" id="idm140421283370080"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p id="preface_cd">
			This document is intended for use with the JBoss Enterprise Application Platform continuous delivery release 18, which is a Technology Preview release available in the cloud only.
		</p><p>
			Some features described in this document might not work or might not be available on Red Hat OpenShift Online and Red Hat OpenShift Container Platform. For specific details about the feature differences in the JBoss EAP CD release, see the <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/jboss_eap_continuous_delivery_18_release_notes/index/#cd_release_limitations">Release Limitations</a> section in the <span class="emphasis"><em>JBoss EAP Continuous Delivery 18 Release Notes</em></span>.
		</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				This continuous delivery release for JBoss EAP is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
			</p><p>
				See <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
			</p></div></div></section><section class="chapter" id="get_started_developing_applications"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Get Started Developing Applications</h1></div></div></div><section class="section" id="become_familiar_with_java_enterprise_edition_8"><div class="titlepage"><div><div><h2 class="title">1.1. Become Familiar with Java Enterprise Edition 8</h2></div></div></div><section class="section" id="overview_of_ee_profiles"><div class="titlepage"><div><div><h3 class="title">1.1.1. Overview of Java EE 8 Profiles</h3></div></div></div><p>
					Java Enterprise Edition (Java EE) 8, as defined in <a class="link mimir-link-warn" href="http://www.jcp.org/en/jsr/detail?id=366" title="Mimir does not include content from: www.jcp.org">JSR 366</a>, includes support for profiles, which are subsets of APIs that represent configurations that are suited to specific classes of applications.
				</p><p>
					Java EE 8 defines specifications for the Web and the Full Platform profiles. A product can choose to implement the Full Platform, the Web Profile, or one or more custom profiles, in any combination.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The Web Profile includes a selected subset of APIs that are designed to be useful for web application development.
						</li><li class="listitem">
							The Full Platform profile includes the APIs defined by the Java EE 8 Web Profile, plus the complete set of Java EE 8 APIs that are useful for enterprise application development.
						</li></ul></div><p>
					JBoss EAP Continuous Delivery 18 implements the Java EE 8 Full Platform and the Web Profile specifications. See <a class="link" href="#java_ee_profiles_and_technologies_reference" title="A.4. Java EE 8 Profiles and Technologies Reference">Java EE 8 Profiles and Technologies Reference</a> for the list of Java EE 8 technologies, JSRs, and whether they are inluded in the Web and Full Platform profiles.
				</p><p>
					See <a class="link mimir-link-warn" href="https://www.oracle.com/technetwork/java/javaee/tech/index.html" title="Mimir does not include content from: www.oracle.com">Java™ EE 8 Technologies</a> for the complete list of Java EE 8 APIs.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Java EE also includes support for <a class="link mimir-link-warn" href="https://javaee.github.io/security-spec/" title="Mimir does not include content from: javaee.github.io">JSR 375</a>, which defines portable, plug-in interfaces for authentication and identity stores, and a new <code class="literal">injectable-type</code> <code class="literal">SecurityContext</code> interface that provides an access point for programmatic security. You can use the built-in implementations of these APIs, or define custom implementations.
					</p></div></div></section></section><section class="section" id="setting_up_the_development_environment"><div class="titlepage"><div><div><h2 class="title">1.2. Setting Up the Development Environment</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Download and install Red Hat CodeReady Studio.
					</p><p class="simpara">
						For instructions, see <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/red_hat_codeready_studio/12.11/html-single/installation_guide/#proc_installing-devstudio-stand-alone-using-the-installer" title="This content is not included in Mimir.">Installing CodeReady Studio stand-alone using the Installer</a> in the Red Hat CodeReady Studio <span class="emphasis"><em>Installation Guide</em></span>.
					</p></li><li class="listitem"><p class="simpara">
						Set up the JBoss EAP server in Red Hat CodeReady Studio.
					</p><p class="simpara">
						For instructions, see <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/red_hat_codeready_studio/12.11/html-single/getting_started_with_codeready_studio_tools/#proc_downloading-installing-and-setting-up-eap-from-within-the-ide" title="This content is not included in Mimir.">Downloading, Installing, and Setting Up JBoss EAP from within the IDE</a> in the <span class="emphasis"><em>Getting Started with CodeReady Studio Tools</em></span> guide.
					</p></li></ol></div></section><section class="section" id="configure_annotation_processing_in_jboss_developer_studio"><div class="titlepage"><div><div><h2 class="title">1.3. Configure Annotation Processing in Red Hat CodeReady Studio</h2></div></div></div><p>
				Annotation Processing (AP) is turned off by default in Eclipse. If your project generates implementation classes, this can result in <code class="literal">java.lang.ExceptionInInitializerError</code> exceptions, followed by <code class="literal"><span class="emphasis"><em>CLASS_NAME</em></span> (implementation not found)</code> error messages when you deploy your project.
			</p><p>
				You can resolve these issues in one of the following ways. You can <a class="link" href="#enable_annotation_processing_individual_project" title="Enable Annotation Processing for an Individual Project">enable annotation processing for the individual project</a> or you can <a class="link" href="#enable_annotation_processing_globally_in_jbds" title="Enable Annotation Processing Globally in Red Hat CodeReady Studio">enable annotation processing globally for all Red Hat CodeReady Studio projects</a>.
			</p><h4 id="enable_annotation_processing_individual_project">Enable Annotation Processing for an Individual Project</h4><p>
				To enable annotation processing for a specific project, you must add the <code class="literal">m2e.apt.activation</code> property with a value of <code class="literal">jdt_apt</code> to the project’s <code class="literal">pom.xml</code> file.
			</p><pre class="programlisting language-xml">&lt;properties&gt;
    &lt;m2e.apt.activation&gt;jdt_apt&lt;/m2e.apt.activation&gt;
&lt;/properties&gt;</pre><p>
				You can find examples of this technique in the <code class="literal">pom.xml</code> files for the <code class="literal">logging-tools</code> and <code class="literal">kitchensink-ml</code> quickstarts that ship with JBoss EAP.
			</p><h4 id="enable_annotation_processing_globally_in_jbds">Enable Annotation Processing Globally in Red Hat CodeReady Studio</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Select <span class="strong strong"><strong>Window</strong></span> → <span class="strong strong"><strong>Preferences</strong></span>.
					</li><li class="listitem">
						Expand <span class="strong strong"><strong>Maven</strong></span>, and select <span class="strong strong"><strong>Annotation Processing</strong></span>.
					</li><li class="listitem">
						Under <span class="strong strong"><strong>Select Annotation Processing Mode</strong></span>, select <span class="strong strong"><strong>Automatically configure JDT APT (builds faster , but outcome may differ from Maven builds)</strong></span>, then click <span class="strong strong"><strong>Apply and Close</strong></span>.
					</li></ol></div></section><section class="section" id="configure_the_default_welcome_Web_application"><div class="titlepage"><div><div><h2 class="title">1.4. Configure the Default Welcome Web Application</h2></div></div></div><p>
				JBoss EAP includes a default <code class="literal">Welcome</code> application, which displays at the root context on port <code class="literal">8080</code> by default.
			</p><p>
				This default <code class="literal">Welcome</code> application can be replaced with your own web application. This can be configured in one of two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#changing_the_welcome_content_file_handler" title="Change the welcome-content File Handler">Change the <code class="literal">welcome-content</code> file handler</a>
					</li><li class="listitem">
						<a class="link" href="#changing_the_default_web_module" title="Change the default-web-module">Change the <code class="literal">default-web-module</code></a>
					</li></ul></div><p>
				You can also <a class="link" href="#disable_welcome_app" title="Disable the Default Welcome Web Application">disable the welcome content</a>.
			</p><h4 id="changing_the_welcome_content_file_handler">Change the welcome-content File Handler</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Modify the existing <code class="literal">welcome-content</code> file handler’s path to point to the new deployment.
					</p><pre class="screen">/subsystem=undertow/configuration=handler/file=welcome-content:write-attribute(name=path,value="<span class="emphasis"><em>/path/to/content</em></span>")</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Alternatively, you could create a different file handler to be used by the server’s root.
						</p><pre class="screen">/subsystem=undertow/configuration=handler/file=<span class="emphasis"><em>NEW_FILE_HANDLER</em></span>:add(path="<span class="emphasis"><em>/path/to/content</em></span>")
/subsystem=undertow/server=default-server/host=default-host/location=\/:write-attribute(name=handler,value=<span class="emphasis"><em>NEW_FILE_HANDLER</em></span>)</pre></div></div></li><li class="listitem"><p class="simpara">
						Reload the server for the changes to take effect.
					</p><pre class="screen">reload</pre></li></ol></div><h4 id="changing_the_default_web_module">Change the default-web-module</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Map a deployed web application to the server’s root.
					</p><pre class="screen">/subsystem=undertow/server=default-server/host=default-host:write-attribute(name=default-web-module,value=hello.war)</pre></li><li class="listitem"><p class="simpara">
						Reload the server for the changes to take effect.
					</p><pre class="screen">reload</pre></li></ol></div><h4 id="disable_welcome_app">Disable the Default Welcome Web Application</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Disable the welcome application by removing the <code class="literal">location</code> entry <code class="literal">/</code> for the <code class="literal">default-host</code>.
					</p><pre class="screen">/subsystem=undertow/server=default-server/host=default-host/location=\/:remove</pre></li><li class="listitem"><p class="simpara">
						Reload the server for the changes to take effect.
					</p><pre class="screen">reload</pre></li></ol></div></section></section><section class="chapter" id="using_maven_with_eap"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Using Maven with JBoss EAP</h1></div></div></div><section class="section" id="learn_about_maven"><div class="titlepage"><div><div><h2 class="title">2.1. Learn about Maven</h2></div></div></div><section class="section" id="about_the_maven_repository"><div class="titlepage"><div><div><h3 class="title">2.1.1. About the Maven Repository</h3></div></div></div><p>
					Apache Maven is a distributed build automation tool used in Java application development to create, manage, and build software projects. Maven uses standard configuration files called Project Object Model, or POM, files to define projects and manage the build process. POMs describe the module and component dependencies, build order, and targets for the resulting project packaging and output using an XML file. This ensures that the project is built in a correct and uniform manner.
				</p><p>
					Maven achieves this by using a repository. A Maven repository stores Java libraries, plug-ins, and other build artifacts. The default public repository is the <a class="link mimir-link-warn" href="http://search.maven.org/#browse" title="Mimir does not include content from: search.maven.org">Maven 2 Central Repository</a>, but repositories can be private and internal within a company with a goal to share common artifacts among development teams. Repositories are also available from third-parties. JBoss EAP includes a Maven repository that contains many of the requirements that Java EE developers typically use to build applications on JBoss EAP. To configure your project to use this repository, see <a class="link" href="#configure_the_jboss_eap_maven_repository" title="2.3.1. Configure the JBoss EAP Maven Repository">Configure the JBoss EAP Maven Repository</a>.
				</p><p>
					For more information about Maven, see <a class="link mimir-link-warn" href="http://maven.apache.org/" title="Mimir does not include content from: maven.apache.org">Welcome to Apache Maven</a>.
				</p><p>
					For more information about Maven repositories, see <a class="link mimir-link-warn" href="http://maven.apache.org/guides/introduction/introduction-to-repositories.html" title="Mimir does not include content from: maven.apache.org">Apache Maven Project - Introduction to Repositories</a>.
				</p></section><section class="section" id="about_the_maven_pom_file"><div class="titlepage"><div><div><h3 class="title">2.1.2. About the Maven POM File</h3></div></div></div><p>
					The Project Object Model, or POM, file is a configuration file used by Maven to build projects. It is an XML file that contains information about the project and how to build it, including the location of the source, test, and target directories, the project dependencies, plug-in repositories, and goals it can execute. It can also include additional details about the project including the version, description, developers, mailing list, license, and more. A <code class="literal">pom.xml</code> file requires some configuration options and will default all others.
				</p><p>
					The schema for the <code class="literal">pom.xml</code> file can be found at <a class="link mimir-link-warn" href="http://maven.apache.org/maven-v4_0_0.xsd" title="Mimir does not include content from: maven.apache.org">http://maven.apache.org/maven-v4_0_0.xsd</a>.
				</p><p>
					For more information about POM files, see the <a class="link mimir-link-warn" href="http://maven.apache.org/pom.html" title="Mimir does not include content from: maven.apache.org">Apache Maven Project POM Reference</a>.
				</p><h5 id="minimum_requirements_of_a_maven_pom_file">Minimum Requirements of a Maven POM File</h5><p>
					The minimum requirements of a <code class="literal">pom.xml</code> file are as follows:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							project root
						</li><li class="listitem">
							modelVersion
						</li><li class="listitem">
							groupId - the ID of the project’s group
						</li><li class="listitem">
							artifactId - the ID of the artifact (project)
						</li><li class="listitem">
							version - the version of the artifact under the specified group
						</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Basic <code class="literal">pom.xml</code> File</strong></p><p>
						A basic <code class="literal">pom.xml</code> file might look like this:
					</p></div><pre class="screen">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.jboss.app&lt;/groupId&gt;
  &lt;artifactId&gt;my-app&lt;/artifactId&gt;
  &lt;version&gt;1&lt;/version&gt;
&lt;/project&gt;</pre></section><section class="section" id="about_the_maven_settings_file"><div class="titlepage"><div><div><h3 class="title">2.1.3. About the Maven Settings File</h3></div></div></div><p>
					The Maven <code class="literal">settings.xml</code> file contains user-specific configuration information for Maven. It contains information that must not be distributed with the <code class="literal">pom.xml</code> file, such as developer identity, proxy information, local repository location, and other settings specific to a user.
				</p><p>
					There are two locations where the <code class="literal">settings.xml</code> can be found:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>In the Maven installation:</strong></span> The settings file can be found in the <code class="literal">$M2_HOME/conf/</code> directory. These settings are referred to as <code class="literal">global</code> settings. The default Maven settings file is a template that can be copied and used as a starting point for the user settings file.
						</li><li class="listitem">
							<span class="strong strong"><strong>In the user’s installation:</strong></span> The settings file can be found in the <code class="literal">${user.home}/.m2/</code> directory. If both the Maven and user <code class="literal">settings.xml</code> files exist, the contents are merged. Where there are overlaps, the user’s <code class="literal">settings.xml</code> file takes precedence.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Maven Settings File</strong></p><p>
						
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"&gt;
  &lt;profiles&gt;
    &lt;!-- Configure the JBoss EAP Maven repository --&gt;
    &lt;profile&gt;
      &lt;id&gt;jboss-eap-maven-repository&lt;/id&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;jboss-eap&lt;/id&gt;
          &lt;url&gt;file:///path/to/repo/jboss-eap-cd18-maven-repository/maven-repository&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
      &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
          &lt;id&gt;jboss-eap-maven-plugin-repository&lt;/id&gt;
          &lt;url&gt;file:///path/to/repo/jboss-eap-cd18-maven-repository/maven-repository&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;false&lt;/enabled&gt;
          &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
      &lt;/pluginRepositories&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
  &lt;activeProfiles&gt;
    &lt;!-- Optionally, make the repository active by default --&gt;
    &lt;activeProfile&gt;jboss-eap-maven-repository&lt;/activeProfile&gt;
  &lt;/activeProfiles&gt;
&lt;/settings&gt;</pre>

					</p></div><p>
					The schema for the <code class="literal">settings.xml</code> file can be found at <a class="link mimir-link-warn" href="http://maven.apache.org/xsd/settings-1.0.0.xsd" title="Mimir does not include content from: maven.apache.org">http://maven.apache.org/xsd/settings-1.0.0.xsd</a>.
				</p></section><section class="section" id="about_maven_repository_managers"><div class="titlepage"><div><div><h3 class="title">2.1.4. About Maven Repository Managers</h3></div></div></div><p>
					A repository manager is a tool that allows you to easily manage Maven repositories. Repository managers are useful in multiple ways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							They provide the ability to configure proxies between your organization and remote Maven repositories. This provides a number of benefits, including faster and more efficient deployments and a better level of control over what is downloaded by Maven.
						</li><li class="listitem">
							They provide deployment destinations for your own generated artifacts, allowing collaboration between different development teams across an organization.
						</li></ul></div><p>
					For more information about Maven repository managers, see <a class="link mimir-link-warn" href="http://maven.apache.org/repository-management.html" title="Mimir does not include content from: maven.apache.org">Best Practice - Using a Repository Manager</a>.
				</p><h5 id="commonly_used_maven_repository_managers">Commonly used Maven repository managers</h5><div class="variablelist"><dl class="variablelist"><dt><span class="term">Sonatype Nexus</span></dt><dd>
								See <a class="link mimir-link-warn" href="http://www.sonatype.org/nexus/" title="Mimir does not include content from: www.sonatype.org">Sonatype Nexus documentation</a> for more information about Nexus.
							</dd><dt><span class="term">Artifactory</span></dt><dd>
								See <a class="link mimir-link-warn" href="https://www.jfrog.com/artifactory/" title="Mimir does not include content from: www.jfrog.com">JFrog Artifactory documentation</a> for more information about Artifactory.
							</dd><dt><span class="term">Apache Archiva</span></dt><dd>
								See <a class="link mimir-link-warn" href="http://archiva.apache.org/" title="Mimir does not include content from: archiva.apache.org">Apache Archiva: The Build Artifact Repository Manager</a> for more information about Apache Archiva.
							</dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In an enterprise environment, where a repository manager is usually used, Maven should query all artifacts for all projects using this manager. Because Maven uses all declared repositories to find missing artifacts, if it can not find what it is looking for, it will try and look for it in the repository <code class="literal">central</code> (defined in the built-in parent POM). To override this <code class="literal">central</code> location, you can add a definition with <code class="literal">central</code> so that the default repository <code class="literal">central</code> is now your repository manager as well. This works well for established projects, but for clean or 'new' projects it causes a problem as it creates a <code class="literal">cyclic</code> dependency.
					</p></div></div></section></section><section class="section" id="install_maven_and_the_jboss_eap_maven_repository"><div class="titlepage"><div><div><h2 class="title">2.2. Install Maven and the JBoss EAP Maven Repository</h2></div></div></div><section class="section" id="download_the_install_maven"><div class="titlepage"><div><div><h3 class="title">2.2.1. Download and Install Maven</h3></div></div></div><p>
					Follow these steps to download and install Maven:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							If you are using Red Hat CodeReady Studio to build and deploy your applications, skip this procedure. Maven is distributed with Red Hat CodeReady Studio.
						</li><li class="listitem"><p class="simpara">
							If you are using the Maven command line to build and deploy your applications to JBoss EAP, you must download and install Maven.
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Go to <a class="link mimir-link-warn" href="http://maven.apache.org/download.html" title="Mimir does not include content from: maven.apache.org">Apache Maven Project - Download Maven</a> and download the latest distribution for your operating system.
								</li><li class="listitem">
									See the Maven documentation for information on how to download and install Apache Maven for your operating system.
								</li></ol></div></li></ul></div></section><section class="section" id="download_jboss_eap_maven_repository"><div class="titlepage"><div><div><h3 class="title">2.2.2. Download the JBoss EAP Maven Repository</h3></div></div></div><p>
					You can use either method to download the JBoss EAP Maven repository:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#download_maven_zip_from_customer_portal" title="2.2.2.1. Download the JBoss EAP Maven Repository ZIP File">Download the JBoss EAP Maven repository ZIP file</a>.
						</li><li class="listitem">
							<a class="link" href="#download_maven_using_script" title="2.2.2.2. Download the JBoss EAP Maven Repository with the Offliner Application">Download the JBoss EAP Maven repository using the Offliner application</a>.
						</li></ul></div><section class="section" id="download_maven_zip_from_customer_portal"><div class="titlepage"><div><div><h4 class="title">2.2.2.1. Download the JBoss EAP Maven Repository ZIP File</h4></div></div></div><p>
						Follow these steps to download the JBoss EAP Maven repository.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Log in to the <a class="link mimir-link-warn" href="https://developers.redhat.com/products/eap/download/" title="Mimir does not include content from: developers.redhat.com">JBoss EAP download page</a> on the Red Hat Developer website.
							</li><li class="listitem">
								Find <span class="strong strong"><strong>EAP-CD 18</strong></span> in the table and click <span class="strong strong"><strong>Maven Repository</strong></span> to download a ZIP file containing the repository.
							</li><li class="listitem">
								Save the ZIP file to the desired directory.
							</li><li class="listitem">
								Extract the ZIP file.
							</li></ol></div></section><section class="section" id="download_maven_using_script"><div class="titlepage"><div><div><h4 class="title">2.2.2.2. Download the JBoss EAP Maven Repository with the Offliner Application</h4></div></div></div><p>
						The Offliner application is available as an alternative option to download the Maven artifacts for developing JBoss EAP applications using the Red Hat Maven repository.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The process of downloading the JBoss EAP Maven repository using the Offliner application is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
						</p><p>
							See <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Log in to the <a class="link mimir-link-warn" href="https://developers.redhat.com/products/eap/download/" title="Mimir does not include content from: developers.redhat.com">JBoss EAP download page</a> on the Red Hat Developer website.
							</li><li class="listitem">
								Find <span class="strong strong"><strong>EAP-CD 18</strong></span> in the table and click <span class="strong strong"><strong>Offliner Content List</strong></span> to start the download.
							</li><li class="listitem"><p class="simpara">
								Save the text file to the desired directory.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									This file does not contain license information. The artifacts downloaded by the Offliner application have the same licenses as specified in the Maven repository ZIP file that is distributed with JBoss EAP.
								</p></div></div></li><li class="listitem">
								Download the <a class="link mimir-link-warn" href="http://repo.maven.apache.org/maven2/com/redhat/red/offliner/offliner/1.3/offliner-1.3.jar" title="Mimir does not include content from: repo.maven.apache.org">Offliner</a> application from the Maven Central Repository.
							</li><li class="listitem"><p class="simpara">
								Run the Offliner application using the following command:
							</p><pre class="screen">$ java -jar offliner.jar -r http://repository.redhat.com/ga/ -d <span class="emphasis"><em>DOWNLOAD_FOLDER</em></span> jboss-eap-cd18-maven-repository-content-with-sha256-checksums.txt</pre><p class="simpara">
								The artifacts from the JBoss EAP Maven repository are downloaded into the <code class="literal"><span class="emphasis"><em>DOWNLOAD_FOLDER</em></span></code> directory.
							</p></li></ol></div><p>
						See the <a class="link mimir-link-warn" href="http://release-engineering.github.io/offliner/" title="Mimir does not include content from: release-engineering.github.io">Offliner documentation</a> for more information on running the Offliner application.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The generated JBoss EAP Maven repository will have the same content that is currently available in the JBoss EAP Maven repository ZIP file. It will not contain artifacts available in Maven Central repository.
						</p></div></div></section></section><section class="section" id="install_the_jboss_eap_maven_repository"><div class="titlepage"><div><div><h3 class="title">2.2.3. Install the JBoss EAP Maven Repository</h3></div></div></div><p>
					You can use the JBoss EAP Maven repository available online, or download and install it locally using any one of the three listed methods:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Install the JBoss EAP Maven repository on your local file system. For detailed instructions, see <a class="link" href="#install_the_jboss_eap_maven_repository_locally" title="2.2.3.1. Install the JBoss EAP Maven Repository Locally">Install the JBoss EAP Maven Repository Locally</a>.
						</li><li class="listitem">
							Install the JBoss EAP Maven repository on the Apache Web Server. For more information, see <a class="link" href="#install_the_jboss_eap_maven_repository_for_use_with_apache_httpd" title="2.2.3.2. Install the JBoss EAP Maven Repository for Use with Apache httpd">Install the JBoss EAP Maven Repository for Use with Apache httpd</a>.
						</li><li class="listitem">
							Install the JBoss EAP Maven repository using the Nexus Maven Repository Manager. For more information, see <a class="link mimir-link-warn" href="http://books.sonatype.com/nexus-book/3.0/reference/admin.html#admin-repositories" title="Mimir does not include content from: books.sonatype.com">Repository Management Using Nexus Maven Repository Manager</a>.
						</li></ul></div><section class="section" id="install_the_jboss_eap_maven_repository_locally"><div class="titlepage"><div><div><h4 class="title">2.2.3.1. Install the JBoss EAP Maven Repository Locally</h4></div></div></div><p>
						Use this option to install the JBoss EAP Maven Repository to the local file system. This is easy to configure and allows you to get up and running quickly on your local machine.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							This method can help you become familiar with using Maven for development but is not recommended for team production environments.
						</p></div></div><p>
						Before downloading a new Maven repository, remove the cached <code class="literal">repository/</code> subdirectory located under the <code class="literal">.m2/</code> directory before attempting to use it.
					</p><p>
						To install the JBoss EAP Maven repository to the local file system:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Make sure you have <a class="link" href="#download_maven_zip_from_customer_portal" title="2.2.2.1. Download the JBoss EAP Maven Repository ZIP File">downloaded the JBoss EAP Maven repository ZIP file</a> to your local file system.
							</li><li class="listitem"><p class="simpara">
								Unzip the file on the local file system of your choosing.
							</p><p class="simpara">
								This creates a new <code class="literal">jboss-eap-cd18-maven-repository/</code> directory, which contains the Maven repository in a subdirectory named <code class="literal">maven-repository/</code>.
							</p></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							If you want to use an older local repository, you must configure it separately in the Maven <code class="literal">settings.xml</code> configuration file. Each local repository must be configured within its own <code class="literal">&lt;repository&gt;</code> tag.
						</p></div></div></section><section class="section" id="install_the_jboss_eap_maven_repository_for_use_with_apache_httpd"><div class="titlepage"><div><div><h4 class="title">2.2.3.2. Install the JBoss EAP Maven Repository for Use with Apache httpd</h4></div></div></div><p>
						Installing the JBoss EAP Maven Repository for use with Apache httpd is a good option for multi-user and cross-team development environments because any developer that can access the web server can also access the Maven repository.
					</p><p>
						Before installing the JBoss EAP Maven Repository, you must first configure Apache httpd. See <a class="link mimir-link-warn" href="http://httpd.apache.org/" title="Mimir does not include content from: httpd.apache.org">Apache HTTP Server Project</a> documentation for instructions.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Ensure that you have <a class="link" href="#download_maven_zip_from_customer_portal" title="2.2.2.1. Download the JBoss EAP Maven Repository ZIP File">the JBoss EAP Maven repository ZIP file</a> downloaded to your local file system.
							</li><li class="listitem">
								Unzip the file in a directory that is web accessible on the Apache server.
							</li><li class="listitem"><p class="simpara">
								Configure Apache to allow read access and directory browsing in the created directory.
							</p><p class="simpara">
								This configuration allows a multi-user environment to access the Maven repository on Apache httpd.
							</p></li></ol></div></section></section></section><section class="section" id="use_the_maven_repository"><div class="titlepage"><div><div><h2 class="title">2.3. Use the Maven Repository</h2></div></div></div><section class="section" id="configure_the_jboss_eap_maven_repository"><div class="titlepage"><div><div><h3 class="title">2.3.1. Configure the JBoss EAP Maven Repository</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Overview</span></dt><dd><p class="simpara">
								There are two approaches to direct Maven to use the JBoss EAP Maven Repository in your project:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#configure_the_jboss_eap_maven_repository_using_the_maven_settings" title="Configure the JBoss EAP Maven Repository Using the Maven Settings">You can configure the repositories in the Maven global or user settings.</a>
									</li><li class="listitem">
										<a class="link" href="#configure_the_maven_repository_using_the_project_POM" title="Configure the JBoss EAP Maven Repository Using the Project POM">You can configure the repositories in the project’s POM file.</a>
									</li></ul></div></dd></dl></div><h5 id="configure_the_jboss_eap_maven_repository_using_the_maven_settings">Configure the JBoss EAP Maven Repository Using the Maven Settings</h5><p>
					This is the recommended approach. Maven settings used with a repository manager or repository on a shared server provide better control and manageability of projects. Settings also provide the ability to use an alternative mirror to redirect all lookup requests for a specific repository to your repository manager without changing the project files. For more information about mirrors, see <a class="link mimir-link-warn" href="http://maven.apache.org/guides/mini/guide-mirror-settings.html" title="Mimir does not include content from: maven.apache.org">http://maven.apache.org/guides/mini/guide-mirror-settings.html</a>.
				</p><p>
					This method of configuration applies across all Maven projects, as long as the project POM file does not contain repository configuration.
				</p><p>
					This section describes how to configure the Maven settings. You can configure the Maven install global settings or the user’s install settings.
				</p><div class="orderedlist"><p class="title"><strong>Configure the Maven Settings File</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Locate the Maven <code class="literal">settings.xml</code> file for your operating system. It is usually located in the <code class="literal">${user.home}/.m2/</code> directory.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									For Linux or Mac, this is <code class="literal">~/.m2/</code>
								</li><li class="listitem">
									For Windows, this is <code class="literal">\Documents and Settings\.m2\</code> or <code class="literal">\Users\.m2\</code>
								</li></ul></div></li><li class="listitem">
							If you do not find a <code class="literal">settings.xml</code> file, copy the <code class="literal">settings.xml</code> file from the <code class="literal">${user.home}/.m2/conf/</code> directory into the <code class="literal">${user.home}/.m2/</code> directory.
						</li><li class="listitem"><p class="simpara">
							Copy the following XML into the <code class="literal">&lt;profiles&gt;</code> element of the <code class="literal">settings.xml</code> file. <a class="link" href="#determine_the_url_of_repository" title="Determine the URL of the JBoss EAP Repository">Determine the URL of the JBoss EAP repository</a> and replace <code class="literal"><span class="emphasis"><em>JBOSS_EAP_REPOSITORY_URL</em></span></code> with it.
						</p><pre class="programlisting language-xml">&lt;!-- Configure the JBoss Enterprise Maven repository --&gt;
&lt;profile&gt;
  &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;
      &lt;url&gt;<span class="emphasis"><em>JBOSS_EAP_REPOSITORY_URL</em></span>&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
  &lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
      &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;
      &lt;url&gt;<span class="emphasis"><em>JBOSS_EAP_REPOSITORY_URL</em></span>&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/pluginRepository&gt;
  &lt;/pluginRepositories&gt;
&lt;/profile&gt;</pre><p class="simpara">
							The following is an example configuration that accesses the online JBoss EAP Maven repository.
						</p><pre class="programlisting language-xml">&lt;!-- Configure the JBoss Enterprise Maven repository --&gt;
&lt;profile&gt;
  &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;
      &lt;url&gt;https://maven.repository.redhat.com/ga/&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
  &lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
      &lt;id&gt;jboss-enterprise-maven-repository&lt;/id&gt;
      &lt;url&gt;https://maven.repository.redhat.com/ga/&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;false&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/pluginRepository&gt;
  &lt;/pluginRepositories&gt;
&lt;/profile&gt;</pre></li><li class="listitem"><p class="simpara">
							Copy the following XML into the <code class="literal">&lt;activeProfiles&gt;</code> element of the <code class="literal">settings.xml</code> file.
						</p><pre class="programlisting language-xml">&lt;activeProfile&gt;jboss-enterprise-maven-repository&lt;/activeProfile&gt;</pre></li><li class="listitem"><p class="simpara">
							If you modify the <code class="literal">settings.xml</code> file while Red Hat CodeReady Studio is running, you must refresh the user settings.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									From the menu, choose <span class="strong strong"><strong>Window</strong></span> → <span class="strong strong"><strong>Preferences</strong></span>.
								</li><li class="listitem">
									In the <span class="strong strong"><strong>Preferences</strong></span> window, expand <span class="strong strong"><strong>Maven</strong></span> and choose <span class="strong strong"><strong>User Settings</strong></span>.
								</li><li class="listitem">
									Click the <span class="strong strong"><strong>Update Settings</strong></span> button to refresh the Maven user settings in Red Hat CodeReady Studio.
								</li></ol></div></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						If your Maven repository contains outdated artifacts, you might encounter one of the following Maven error messages when you build or deploy your project:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Missing artifact <span class="emphasis"><em>ARTIFACT_NAME</em></span>
							</li><li class="listitem">
								[ERROR] Failed to execute goal on project <span class="emphasis"><em>PROJECT_NAME</em></span>; Could not resolve dependencies for <span class="emphasis"><em>PROJECT_NAME</em></span>
							</li></ul></div><p>
						To resolve the issue, delete the cached version of your local repository to force a download of the latest Maven artifacts. The cached repository is located here: <code class="literal">${user.home}/.m2/repository/</code>
					</p></div></div><h5 id="configure_the_maven_repository_using_the_project_POM">Configure the JBoss EAP Maven Repository Using the Project POM</h5><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						You should avoid this method of configuration as it overrides the global and user Maven settings for the configured project.
					</p></div></div><p>
					You must plan carefully if you decide to configure repositories using project POM file. Transitively included POMs are an issue with this type of configuration since Maven has to query the external repositories for missing artifacts and this slows the build process. It can also cause you to lose control over where your artifacts are coming from.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The URL of the repository will depend on where the repository is located: on the file system, or web server. For information on how to install the repository, see: <a class="link" href="#install_the_jboss_eap_maven_repository" title="2.2.3. Install the JBoss EAP Maven Repository">Install the JBoss EAP Maven Repository</a>. The following are examples for each of the installation options:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">File System</span></dt><dd>
									<span class="emphasis"><em>file:///path/to/repo/jboss-eap-maven-repository</em></span>
								</dd><dt><span class="term">Apache Web Server</span></dt><dd>
									<span class="emphasis"><em>http://intranet.acme.com/jboss-eap-maven-repository/</em></span>
								</dd><dt><span class="term">Nexus Repository Manager</span></dt><dd>
									<span class="emphasis"><em>https://intranet.acme.com/nexus/content/repositories/jboss-eap-maven-repository</em></span>
								</dd></dl></div></div></div><div class="orderedlist"><p class="title"><strong>Configuring the Project’s POM File</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open your project’s <code class="literal">pom.xml</code> file in a text editor.
						</li><li class="listitem"><p class="simpara">
							Add the following repository configuration. If there is already a <code class="literal">&lt;repositories&gt;</code> configuration in the file, then add the <code class="literal">&lt;repository&gt;</code> element to it. Be sure to change the <code class="literal">&lt;url&gt;</code> to the actual repository location.
						</p><pre class="programlisting language-xml">&lt;repositories&gt;
   &lt;repository&gt;
      &lt;id&gt;jboss-eap-repository-group&lt;/id&gt;
      &lt;name&gt;JBoss EAP Maven Repository&lt;/name&gt;
      &lt;url&gt;<span class="emphasis"><em>JBOSS_EAP_REPOSITORY_URL</em></span>&lt;/url&gt;
      &lt;layout&gt;default&lt;/layout&gt;
      &lt;releases&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
         &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
         &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
      &lt;/snapshots&gt;
   &lt;/repository&gt;
&lt;/repositories&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the following plug-in repository configuration. If there is already a <code class="literal">&lt;pluginRepositories&gt;</code> configuration in the file, then add the <code class="literal">&lt;pluginRepository&gt;</code> element to it.
						</p><pre class="programlisting language-xml">&lt;pluginRepositories&gt;
   &lt;pluginRepository&gt;
      &lt;id&gt;jboss-eap-repository-group&lt;/id&gt;
      &lt;name&gt;JBoss EAP Maven Repository&lt;/name&gt;
      &lt;url&gt;<span class="emphasis"><em>JBOSS_EAP_REPOSITORY_URL</em></span>&lt;/url&gt;
      &lt;releases&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
         &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/snapshots&gt;
   &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;</pre></li></ol></div><h5 id="determine_the_url_of_repository">Determine the URL of the JBoss EAP Repository</h5><p>
					The repository URL depends on where the repository is located. You can configure Maven to use any of the following repository locations.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							To use the online JBoss EAP Maven repository, specify the following URL: <a class="link mimir-link-warn" href="https://maven.repository.redhat.com/ga/" title="Mimir does not include content from: maven.repository.redhat.com">https://maven.repository.redhat.com/ga/</a>
						</li><li class="listitem">
							To use a JBoss EAP Maven repository installed on the local file system, you must download the repository and then use the local file path for the URL. For example: <span class="emphasis"><em>file:///path/to/repo/jboss-eap-cd18-maven-repository/maven-repository/</em></span>
						</li><li class="listitem">
							If you install the repository on an Apache Web Server, the repository URL will be similar to the following: <span class="emphasis"><em>http://intranet.acme.com/jboss-eap-cd18-maven-repository/maven-repository/</em></span>
						</li><li class="listitem">
							If you install the JBoss EAP Maven repository using the Nexus Repository Manager, the URL will look something like the following: <span class="emphasis"><em>https://intranet.acme.com/nexus/content/repositories/jboss-eap-cd18-maven-repository/maven-repository/</em></span>
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Remote repositories are accessed using common protocols such as <code class="literal">http://</code> for a repository on an HTTP server or <code class="literal">file://</code> for a repository on a file server.
					</p></div></div></section><section class="section" id="configure_maven_for_use_with_red_hat_jboss_developer_studio"><div class="titlepage"><div><div><h3 class="title">2.3.2. Configure Maven for Use with Red Hat CodeReady Studio</h3></div></div></div><p>
					The artifacts and dependencies needed to build and deploy applications to Red Hat JBoss Enterprise Application Platform are hosted on a public repository. You must direct Maven to use this repository when you build your applications. This section covers the steps to configure Maven if you plan to build and deploy applications using Red Hat CodeReady Studio.
				</p><p>
					Maven is distributed with Red Hat CodeReady Studio, so it is not necessary to install it separately. However, you must configure Maven for use by the Java EE Web Project wizard for deployments to JBoss EAP. The procedure below demonstrates how to configure Maven for use with JBoss EAP by editing the Maven configuration file from within Red Hat CodeReady Studio.
				</p><div class="orderedlist"><p class="title"><strong>Configure Maven in Red Hat CodeReady Studio</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Window</strong></span> → <span class="strong strong"><strong>Preferences</strong></span>, expand <span class="strong strong"><strong>JBoss Tools</strong></span> and select <span class="strong strong"><strong>JBoss Maven Integration</strong></span>.
						</p><div class="figure" id="idm140421286992464"><p class="title"><strong>Figure 2.1. JBoss Maven Integration Pane in the Preferences Window</strong></p><div class="figure-contents"><div class="mediaobject"><img src="/webassets/avalon/d/JBoss_Enterprise_Application_Platform_Continuous_Delivery-18-Development_Guide-en-US/images/4e82059614edbc955c5b5b46cda68fa2/3313.png" alt="JBoss Maven Integration Pane in the Preferences Window" /></div></div></div></li><li class="listitem">
							Click <span class="strong strong"><strong>Configure Maven Repositories</strong></span>.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>Add Repository</strong></span> to configure the JBoss Enterprise Maven repository. Complete the <span class="strong strong"><strong>Add Maven Repository</strong></span> dialog as follows:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Set the <span class="strong strong"><strong>Profile ID</strong></span>, <span class="strong strong"><strong>Repository ID</strong></span>, and <span class="strong strong"><strong>Repository Name</strong></span> values to <code class="literal">jboss-ga-repository</code>.
								</li><li class="listitem">
									Set the <span class="strong strong"><strong>Repository URL</strong></span> value to <code class="literal"><a class="link mimir-link-warn" href="http://maven.repository.redhat.com/ga" title="Mimir does not include content from: maven.repository.redhat.com">http://maven.repository.redhat.com/ga</a></code>.
								</li><li class="listitem">
									Click the <span class="strong strong"><strong>Active by default</strong></span> checkbox to enable the Maven repository.
								</li><li class="listitem"><p class="simpara">
									Click <span class="strong strong"><strong>OK</strong></span>.
								</p><div class="figure" id="idm140421282396848"><p class="title"><strong>Figure 2.2. Add Maven Repository</strong></p><div class="figure-contents"><div class="mediaobject"><img src="/webassets/avalon/d/JBoss_Enterprise_Application_Platform_Continuous_Delivery-18-Development_Guide-en-US/images/35dffcc751f8f37101f6f49fe279c198/4713.png" alt="Add Maven Repository" /></div></div></div></li></ol></div></li><li class="listitem">
							Review the repositories and click <span class="strong strong"><strong>Finish</strong></span>.
						</li><li class="listitem">
							You are prompted with the message <span class="strong strong"><strong><span class="emphasis"><em>"Are you sure you want to update the file <code class="literal">MAVEN_HOME/settings.xml</code>?"</em></span></strong></span>. Click <span class="strong strong"><strong>Yes</strong></span> to update the settings. Click <span class="strong strong"><strong>OK</strong></span> to close the dialog.
						</li></ol></div><p>
					The JBoss EAP Maven repository is now configured for use with Red Hat CodeReady Studio.
				</p></section><section class="section" id="manage_project_dependencies"><div class="titlepage"><div><div><h3 class="title">2.3.3. Manage Project Dependencies</h3></div></div></div><p>
					This section describes the usage of Bill of Materials (BOM) POMs for Red Hat JBoss Enterprise Application Platform.
				</p><p>
					A BOM is a Maven <code class="literal">pom.xml</code> (POM) file that specifies the versions of all runtime dependencies for a given module. Version dependencies are listed in the dependency management section of the file.
				</p><p>
					A project uses a BOM by adding its <code class="literal">groupId:artifactId:version</code> (GAV) to the dependency management section of the project <code class="literal">pom.xml</code> file and specifying the <code class="literal">&lt;scope&gt;import&lt;/scope&gt;</code> and <code class="literal">&lt;type&gt;pom&lt;/type&gt;</code> element values.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In many cases, dependencies in project POM files use the <code class="literal">provided</code> scope. This is because these classes are provided by the application server at runtime and it is not necessary to package them with the user application.
					</p></div></div><h5 id="supported_maven_artifacts">Supported Maven Artifacts</h5><p>
					As part of the product build process, all runtime components of JBoss EAP are built from source in a controlled environment. This helps to ensure that the binary artifacts do not contain any malicious code, and that they can be supported for the life of the product. These artifacts can be easily identified by the <code class="literal">-redhat</code> version qualifier, for example <code class="literal">1.0.0-redhat-1</code>.
				</p><p>
					Adding a supported artifact to the build configuration <code class="literal">pom.xml</code> file ensures that the build is using the correct binary artifact for local building and testing. Note that an artifact with a <code class="literal">-redhat</code> version is not necessarily part of the supported public API, and might change in future revisions. For information about the public supported API, see the <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/" title="This content is not included in Mimir.">Javadoc documentation</a> included in the release.
				</p><p>
					For example, to use the supported version of Hibernate, add something similar to the following to your build configuration.
				</p><pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
  &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
  &lt;version&gt;5.3.1.Final-redhat-1&lt;/version&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</pre><p>
					Notice that the above example includes a value for the <code class="literal">&lt;version/&gt;</code> field. However, it is recommended to use Maven dependency management for configuring dependency versions.
				</p><h5 id="dependency_management">Dependency Management</h5><p>
					Maven includes a mechanism for managing the versions of direct and transitive dependencies throughout the build. For general information about using dependency management, see the Apache Maven Project: <a class="link mimir-link-warn" href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" title="Mimir does not include content from: maven.apache.org">Introduction to the Dependency Mechanism</a>.
				</p><p>
					Using one or more supported Red Hat dependencies directly in your build does not guarantee that all transitive dependencies of the build will be fully supported Red Hat artifacts. It is common for Maven builds to use a mix of artifact sources from the Maven central repository and other Maven repositories.
				</p><p>
					There is a dependency management BOM included in the JBoss EAP Maven repository, which specifies all the supported JBoss EAP binary artifacts. This BOM can be used in a build to ensure that Maven will prioritize supported JBoss EAP dependencies for all direct and transitive dependencies in the build. In other words, transitive dependencies will be managed to the correct supported dependency version where applicable. The version of this BOM matches the version of the JBoss EAP release.
				</p><pre class="programlisting language-xml">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    ...
    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.bom&lt;/groupId&gt;
      &lt;artifactId&gt;eap-runtime-artifacts&lt;/artifactId&gt;
      &lt;version&gt;7.3.0.CD18&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt;
    ...
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In JBoss EAP 7 the name of this BOM was changed from <span class="strong strong"><strong>eap6-supported-artifacts</strong></span> to <span class="strong strong"><strong>eap-runtime-artifacts</strong></span>. The purpose of this change is to make it more clear that the artifacts in this POM are part of the JBoss EAP runtime, but are not necessarily part of the supported public API. Some of the JARs contain internal API and functionality, which might change between releases.
					</p></div></div><h5 id="jboss_eap_java_ee_specs_bom">JBoss EAP Java EE Specs BOM</h5><p>
					The <code class="literal">jboss-javaee-8.0</code> BOM contains the Java EE Specification API JARs used by JBoss EAP.
				</p><p>
					To use this BOM in a project, first add a dependency for the <code class="literal">jboss-javaee-8.0</code> BOM in the <code class="literal">dependencyManagement</code> section of the POM file, specifying <code class="literal">org.jboss.spec</code> for its <code class="literal">groupId</code>, and then add the dependencies for the specific APIs needed by the application. These dependencies do not require a version and use a scope of <code class="literal">provided</code> because the APIs are included in the <code class="literal">jboss-javaee-8.0</code> BOM.
				</p><p>
					The following example uses the <code class="literal">1.0.0.Alpha1</code> version of the <code class="literal">jboss-javaee-8.0</code> BOM, to add dependencies for the Servlet and JSP APIs.
				</p><pre class="programlisting language-xml">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.spec&lt;/groupId&gt;
      &lt;artifactId&gt;jboss-javaee-8.0&lt;/artifactId&gt;
      &lt;version&gt;1.0.0.Alpha1&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt;
    ...
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.jboss.spec.javax.servlet&lt;/groupId&gt;
    &lt;artifactId&gt;jboss-servlet-api_4.0_spec&lt;/artifactId&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.jboss.spec.javax.servlet.jsp&lt;/groupId&gt;
    &lt;artifactId&gt;jboss-jsp-api_2.3_spec&lt;/artifactId&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						JBoss EAP packages and provides BOMs for the APIs of most of the product components. Many of these BOMs are conveniently packaged into one larger <code class="literal">jboss-eap-javaee8</code> BOM with a <code class="literal">groupId</code> of <code class="literal">org.jboss.bom</code>. The <code class="literal">jboss-javaee-8.0</code> BOM, whose <code class="literal">groupId</code> is <code class="literal">org.jboss.spec</code>, is included in this larger BOM. This means that if you are using additional JBoss EAP dependencies that are packaged in this BOM, you can just add the one <code class="literal">jboss-eap-javaee8</code> BOM to your project’s POM file rather than separately adding the <code class="literal">jboss-javaee-8.0</code> and other BOM dependencies.
					</p></div></div><h5 id="jboss_eap_boms_available_for_application_development">JBoss EAP BOMs Available for Application Development</h5><p>
					The following table lists the Maven BOMs that are available for application development.
				</p><div class="table" id="idm140421280170768"><p class="title"><strong>Table 2.1. JBoss BOMs</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 34%; " class="col_1"><!--Empty--></col><col style="width: 66%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421280086656" scope="col">BOM Artifact ID</th><th align="left" valign="top" id="idm140421280085568" scope="col">Use Case</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421280086656"> <p>
									jboss-eap-javaee8
								</p>
								 </td><td align="left" valign="top" headers="idm140421280085568"> <p>
									Supported JBoss EAP Java EE 8 APIs plus additional JBoss EAP API JARs.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421280086656"> <p>
									jboss-eap-javaee8-with-spring4
								</p>
								 </td><td align="left" valign="top" headers="idm140421280085568"> <p>
									<code class="literal">jboss-eap-javaee8</code> plus recommended Spring 4 versions.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421280086656"> <p>
									jboss-eap-javaee8-with-tools
								</p>
								 </td><td align="left" valign="top" headers="idm140421280085568"> <p>
									<code class="literal">jboss-eap-javaee8</code> plus development tools such as Arquillian.
								</p>
								 </td></tr></tbody></table></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						These BOMs from JBoss EAP 6 have been consolidated into fewer BOMs to make usage simpler for most use cases. The Hibernate, logging, transactions, messaging, and other public API JARs are now included in the <code class="literal">jboss-eap-javaee8</code> BOM instead of a requiring a separate BOM for each case.
					</p></div></div><p>
					The following example uses the <code class="literal">7.3.0.CD18</code> version of the <code class="literal">jboss-eap-javaee8</code> BOM.
				</p><pre class="programlisting language-xml">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.bom&lt;/groupId&gt;
      &lt;artifactId&gt;jboss-eap-javaee8&lt;/artifactId&gt;
      &lt;version&gt;7.3.0.CD18&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt;
    ...
  &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;</pre><h5 id="jboss_eap_client_boms">JBoss EAP Client BOMs</h5><p>
					The client BOMs do not create a dependency management section or define dependencies. Instead, they are an aggregate of other BOMs and are used to package the set of dependencies necessary for a remote client use case.
				</p><p>
					The <code class="literal">wildfly-ejb-client-bom</code>, <code class="literal">wildfly-jms-client-bom</code>, and <code class="literal">wildfly-jaxws-client-bom</code> are managed by the <code class="literal">jboss-eap-javaee8</code> BOM, so you do not need to manage the versions in your project dependencies.
				</p><p>
					The following is an example of how to add the <code class="literal">wildfly-ejb-client-bom</code>, <code class="literal">wildfly-jms-client-bom</code>, and <code class="literal">wildfly-jaxws-client-bom</code> dependencies to your project.
				</p><pre class="programlisting language-xml">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;!-- JBoss stack of the Java EE APIs and related components.  --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.bom&lt;/groupId&gt;
      &lt;artifactId&gt;jboss-eap-javaee8&lt;/artifactId&gt;
      &lt;version&gt;7.3.0.CD18&lt;/version&gt;
      &lt;type&gt;pom&lt;/type&gt;
      &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  ...
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.jboss.eap&lt;/groupId&gt;
    &lt;artifactId&gt;wildfly-ejb-client-bom&lt;/artifactId&gt;
    &lt;type&gt;pom&lt;/type&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.jboss.eap&lt;/groupId&gt;
    &lt;artifactId&gt;wildfly-jms-client-bom&lt;/artifactId&gt;
    &lt;type&gt;pom&lt;/type&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.jboss.eap&lt;/groupId&gt;
    &lt;artifactId&gt;wildfly-jaxws-client-bom&lt;/artifactId&gt;
    &lt;type&gt;pom&lt;/type&gt;
  &lt;/dependency&gt;
  ...
&lt;/dependencies&gt;</pre><p>
					For more information about Maven Dependencies and BOM POM files, see <a class="link mimir-link-warn" href="http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html" title="Mimir does not include content from: maven.apache.org">Apache Maven Project - Introduction to the Dependency Mechanism</a>.
				</p></section></section></section><section class="chapter" id="class_loading_and_modules"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Class Loading and Modules</h1></div></div></div><section class="section" id="introduction"><div class="titlepage"><div><div><h2 class="title">3.1. Introduction</h2></div></div></div><section class="section" id="overview_of_class_loading_and_modules"><div class="titlepage"><div><div><h3 class="title">3.1.1. Overview of Class Loading and Modules</h3></div></div></div><p>
					JBoss EAP uses a modular class loading system for controlling the class paths of deployed applications. This system provides more flexibility and control than the traditional system of hierarchical class loaders. Developers have fine-grained control of the classes available to their applications, and can configure a deployment to ignore classes provided by the application server in favor of their own.
				</p><p>
					The modular class loader separates all Java classes into logical groups called modules. Each module can define dependencies on other modules in order to have the classes from that module added to its own class path. Because each deployed JAR and WAR file is treated as a module, developers can control the contents of their application’s class path by adding module configuration to their application.
				</p></section><section class="section" id="class_loading_in_deployments"><div class="titlepage"><div><div><h3 class="title">3.1.2. Class Loading in Deployments</h3></div></div></div><p>
					For the purposes of class loading, JBoss EAP treats all deployments as modules. These are called dynamic modules. Class loading behavior varies according to the deployment type.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">WAR Deployment</span></dt><dd>
								A WAR deployment is considered to be a single module. Classes in the <code class="literal">WEB-INF/lib</code> directory are treated the same as classes in the <code class="literal">WEB-INF/classes</code> directory. All classes packaged in the WAR will be loaded with the same class loader.
							</dd><dt><span class="term">EAR Deployment</span></dt><dd><p class="simpara">
								EAR deployments are made up of more than one module, and are defined by the following rules:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
										The <code class="literal">lib/</code> directory of the EAR is a single module called the parent module.
									</li><li class="listitem">
										Each WAR deployment within the EAR is a single module.
									</li><li class="listitem">
										Each EJB JAR deployment within the EAR is a single module.
									</li></ol></div></dd></dl></div><p>
					Subdeployment modules, for example the WAR and JAR deployments within the EAR, have an automatic dependency on the parent module. However, they do not have automatic dependencies on each other. This is called subdeployment isolation and can be disabled per deployment or for the entire application server.
				</p><p>
					Explicit dependencies between subdeployment modules can be added by the same means as any other module.
				</p></section><section class="section" id="class_loading_precedence"><div class="titlepage"><div><div><h3 class="title">3.1.3. Class Loading Precedence</h3></div></div></div><p>
					The JBoss EAP modular class loader uses a precedence system to prevent class loading conflicts.
				</p><p>
					During deployment, a complete list of packages and classes is created for each deployment and each of its dependencies. The list is ordered according to the class loading precedence rules. When loading classes at runtime, the class loader searches this list, and loads the first match. This prevents multiple copies of the same classes and packages within the deployments class path from conflicting with each other.
				</p><p>
					The class loader loads classes in the following order, from highest to lowest:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Implicit dependencies:</strong></span> These dependencies are automatically added by JBoss EAP, such as the JAVA EE APIs. These dependencies have the highest class loader precedence because they contain common functionality and APIs that are supplied by JBoss EAP.
						</p><p class="simpara">
							See <a class="link" href="#implicit_module_dependencies" title="3.10.1. Implicit Module Dependencies">Implicit Module Dependencies</a> for complete details about each implicit dependency.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Explicit dependencies:</strong></span> These dependencies are manually added to the application configuration using the application’s <code class="literal">MANIFEST.MF</code> file or the new optional JBoss deployment descriptor <code class="literal">jboss-deployment-structure.xml</code> file.
						</p><p class="simpara">
							See <a class="link" href="#add_an_explicit_module_dependency_to_a_deployment" title="3.2. Add an Explicit Module Dependency to a Deployment">Add an Explicit Module Dependency to a Deployment</a> to learn how to add explicit dependencies.
						</p></li><li class="listitem">
							<span class="strong strong"><strong>Local resources:</strong></span> These are class files packaged up inside the deployment itself, for example in the <code class="literal">WEB-INF/classes</code> or <code class="literal">WEB-INF/lib</code> directories of a WAR file.
						</li><li class="listitem">
							<span class="strong strong"><strong>Inter-deployment dependencies:</strong></span> These are dependencies on other deployments in a EAR deployment. This can include classes in the <code class="literal">lib</code> directory of the EAR or classes defined in other EJB jars.
						</li></ol></div></section><section class="section" id="jboss_deployment_structure_xml"><div class="titlepage"><div><div><h3 class="title">3.1.4. jboss-deployment-structure.xml</h3></div></div></div><p>
					The <code class="literal">jboss-deployment-structure.xml</code> file is an optional deployment descriptor for JBoss EAP. This deployment descriptor provides control over class loading in the deployment.
				</p><p>
					The XML schema for this deployment descriptor is located in the product install directory under <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/docs/schema/jboss-deployment-structure-1_2.xsd</code>.
				</p><p>
					The key tasks that can be performed using this deployment descriptor are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Defining explicit module dependencies.
						</li><li class="listitem">
							Preventing specific implicit dependencies from loading.
						</li><li class="listitem">
							Defining additional modules from the resources of that deployment.
						</li><li class="listitem">
							Changing the subdeployment isolation behavior in that EAR deployment.
						</li><li class="listitem">
							Adding additional resource roots to a module in an EAR.
						</li></ul></div></section></section><section class="section" id="add_an_explicit_module_dependency_to_a_deployment"><div class="titlepage"><div><div><h2 class="title">3.2. Add an Explicit Module Dependency to a Deployment</h2></div></div></div><p>
				Explicit module dependencies can be added to applications to add the classes of those modules to the class path of the application at deployment.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					JBoss EAP automatically adds some dependencies to deployments. See <a class="link" href="#implicit_module_dependencies" title="3.10.1. Implicit Module Dependencies">Implicit Module Dependencies</a> for details.
				</p></div></div><h4 id="prerequisites">Prerequisites</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						A working software project that you want to add a module dependency to.
					</li><li class="listitem">
						You must know the name of the module being added as a dependency. See <a class="link" href="#included_modules" title="3.10.2. Included Modules">Included Modules</a> for the list of static modules included with JBoss EAP. If the module is another deployment, then see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Dynamic Module Naming</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> to determine the module name.
					</li></ol></div><p>
				Dependencies can be configured using two methods:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Adding entries to the <code class="literal">MANIFEST.MF</code> file of the deployment.
					</li><li class="listitem">
						Adding entries to the <code class="literal">jboss-deployment-structure.xml</code> deployment descriptor.
					</li></ul></div><h4 id="add_dependency_manifest">Add a Dependency Configuration to MANIFEST.MF</h4><p>
				Maven projects can be configured to create the required dependency entries in the <code class="literal">MANIFEST.MF</code> file.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						If the project does not have one, create a file called <code class="literal">MANIFEST.MF</code>. For a web application (WAR), add this file to the <code class="literal">META-INF/</code> directory. For an EJB archive (JAR), add it to the <code class="literal">META-INF/</code> directory.
					</li><li class="listitem"><p class="simpara">
						Add a dependencies entry to the <code class="literal">MANIFEST.MF</code> file with a comma-separated list of dependency module names:
					</p><pre class="screen">Dependencies: org.javassist, org.apache.velocity, org.antlr</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To make a dependency optional, append <code class="literal">optional</code> to the module name in the dependency entry:
							</p><pre class="screen">Dependencies: org.javassist optional, org.apache.velocity</pre></li><li class="listitem"><p class="simpara">
								A dependency can be exported by appending <code class="literal">export</code> to the module name in the dependency entry:
							</p><pre class="screen">Dependencies: org.javassist, org.apache.velocity export</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">annotations</code> flag is needed when the module dependency contains annotations that need to be processed during annotation scanning, such as when declaring EJB interceptors. Without this, an EJB interceptor declared in a module cannot be used in a deployment. There are other situations involving annotation scanning when this is needed too.
							</p><pre class="screen">Dependencies: org.javassist, test.module annotations</pre></li><li class="listitem"><p class="simpara">
								By default items in the <code class="literal">META-INF</code> of a dependency are not accessible. The <code class="literal">services</code> dependency makes items from <code class="literal">META-INF/services</code> accessible so that <code class="literal">services</code> in the modules can be loaded.
							</p><pre class="screen">Dependencies: org.javassist, org.hibernate services</pre></li><li class="listitem"><p class="simpara">
								To scan a <code class="literal">beans.xml</code> file and make its resulting beans available to the application, the <code class="literal">meta-inf</code> dependency can be used.
							</p><pre class="screen">Dependencies: org.javassist, test.module meta-inf</pre></li></ul></div></li></ol></div><h4 id="add_dependency_jboss_deployment_structure">Add a Dependency Configuration to the jboss-deployment-structure.xml</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If the application does not have one, create a new file called <code class="literal">jboss-deployment-structure.xml</code> and add it to the project. This file is an XML file with the root element of <code class="literal">&lt;jboss-deployment-structure&gt;</code>.
					</p><pre class="programlisting language-xml">&lt;jboss-deployment-structure&gt;

&lt;/jboss-deployment-structure&gt;</pre><p class="simpara">
						For a web application (WAR), add this file to the <code class="literal">WEB-INF/</code> directory. For an EJB archive (JAR), add it to the <code class="literal">META-INF/</code> directory.
					</p></li><li class="listitem">
						Create a <code class="literal">&lt;deployment&gt;</code> element within the document root and a <code class="literal">&lt;dependencies&gt;</code> element within that.
					</li><li class="listitem"><p class="simpara">
						Within the <code class="literal">&lt;dependencies&gt;</code> node, add a module element for each module dependency. Set the <code class="literal">name</code> attribute to the name of the module.
					</p><pre class="programlisting language-xml">&lt;module name="org.javassist" /&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								A dependency can be made optional by adding the <code class="literal">optional</code> attribute to the module entry with the value of <code class="literal">true</code>. The default value for this attribute is <code class="literal">false</code>.
							</p><pre class="programlisting language-xml">&lt;module name="org.javassist" optional="true" /&gt;</pre></li><li class="listitem"><p class="simpara">
								A dependency can be exported by adding the <code class="literal">export</code> attribute to the module entry with the value of <code class="literal">true</code>. The default value for this attribute is <code class="literal">false</code>.
							</p><pre class="programlisting language-xml">&lt;module name="org.javassist" export="true" /&gt;</pre></li><li class="listitem"><p class="simpara">
								When the module dependency contains annotations that need to be processed during annotation scanning, the <code class="literal">annotations</code> flag is used.
							</p><pre class="programlisting language-xml">&lt;module name="test.module" annotations="true" /&gt;</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">services</code> dependency specifies whether and how <code class="literal">services</code> found in this dependency are used. The default is <code class="literal">none</code>. Specifying a value of <code class="literal">import</code> for this attribute is equivalent to adding a filter at the end of the import filter list which includes the <code class="literal">META-INF/services</code> path from the dependency module. Setting a value of <code class="literal">export</code> for this attribute is equivalent to the same action on the export filter list.
							</p><pre class="programlisting language-xml">&lt;module name="org.hibernate" services="import" /&gt;</pre></li><li class="listitem"><p class="simpara">
								The <code class="literal">META-INF</code> dependency specifies whether and how <code class="literal">META-INF</code> entries in this dependency are used. The default is <code class="literal">none</code>. Specifying a value of <code class="literal">import</code> for this attribute is equivalent to adding a filter at the end of the import filter list which includes the <code class="literal">META-INF/**</code> path from the dependency module. Setting a value of <code class="literal">export</code> for this attribute is equivalent to the same action on the export filter list.
							</p><pre class="programlisting language-xml">&lt;module name="test.module" meta-inf="import" /&gt;</pre></li></ul></div></li></ol></div><p>
				Example: <code class="literal">jboss-deployment-structure.xml</code> File with Two Dependencies
			</p><pre class="programlisting language-xml">&lt;jboss-deployment-structure&gt;
   &lt;deployment&gt;
      &lt;dependencies&gt;
         &lt;module name="org.javassist" /&gt;
         &lt;module name="org.apache.velocity" export="true" /&gt;
      &lt;/dependencies&gt;
   &lt;/deployment&gt;
&lt;/jboss-deployment-structure&gt;</pre><p>
				JBoss EAP adds the classes from the specified modules to the class path of the application when it is deployed.
			</p><h4 id="creating_a_jandex_index">Creating a Jandex Index</h4><p>
				The <code class="literal">annotations</code> flag requires that the module contain a Jandex index. In JBoss EAP 7.3, this is generated automatically. However, adding the index manually is still recommended for performance reasons because automatic scanning can be a long process that consumes the CPU and increases the deployment time.
			</p><p>
				To add the index manually, create a new "index JAR" to add to the module. Use the Jandex JAR to build the index, and then insert it into a new JAR file. In the current implementation, when an index is added to a JAR file inside a module, no scanning at all is executed.
			</p><div class="orderedlist"><p class="title"><strong>Creating a Jandex index::</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the index:
					</p><pre class="screen">java -jar modules/system/layers/base/org/jboss/jandex/main/jandex-jandex-2.0.0.Final-redhat-1.jar $JAR_FILE</pre></li><li class="listitem"><p class="simpara">
						Create a temporary working space:
					</p><pre class="screen">mkdir /tmp/META-INF</pre></li><li class="listitem"><p class="simpara">
						Move the index file to the working directory
					</p><pre class="screen">mv $JAR_FILE.ifx /tmp/META-INF/jandex.idx</pre><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Option 1: Include the index in a new JAR file
							</p><pre class="screen">jar cf index.jar -C /tmp META-INF/jandex.idx</pre><p class="simpara">
								Then place the JAR in the module directory and edit <code class="literal">module.xml</code> to add it to the resource roots.
							</p></li><li class="listitem"><p class="simpara">
								Option 2: Add the index to an existing JAR
							</p><pre class="screen">java -jar /modules/org/jboss/jandex/main/jandex-1.0.3.Final-redhat-1.jar -m $JAR_FILE</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Tell the module import to utilize the annotation index, so that annotation scanning can find the annotations.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Option 1: If you are adding a module dependency using <code class="literal">MANIFEST.MF</code>, add <code class="literal">annotations</code> after the module name. For example change:
							</p><pre class="screen">Dependencies: test.module, other.module</pre><p class="simpara">
								to
							</p><pre class="screen">Dependencies: test.module annotations, other.module</pre></li><li class="listitem"><p class="simpara">
								Option 2: If you are adding a module dependency using <code class="literal">jboss-deployment-structure.xml</code> add <code class="literal">annotations="true"</code> on the module dependency.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									An annotation index is required when an application wants to use annotated Java EE components defined in classes within the static module. In JBoss EAP 7.3, annotation indexes for static modules are automatically generated, so you do not need to create them. However, you must tell the module import to use the annotations by adding the dependencies to either the <code class="literal">MANIFEST.MF</code> or the <code class="literal">jboss-deployment-structure.xml</code> file.
								</p></div></div></li></ol></div></li></ol></div></section><section class="section" id="generate_manifest_mf_entries_using_maven"><div class="titlepage"><div><div><h2 class="title">3.3. Generate MANIFEST.MF entries using Maven</h2></div></div></div><p>
				Maven projects using the Maven JAR, EJB, or WAR packaging plug-ins can generate a <code class="literal">MANIFEST.MF</code> file with a <code class="literal">Dependencies</code> entry. This does not automatically generate the list of dependencies, but only creates the <code class="literal">MANIFEST.MF</code> file with the details specified in the <code class="literal">pom.xml</code>.
			</p><p>
				Before generating the <code class="literal">MANIFEST.MF</code> entries using Maven, you will require:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A working Maven project, which is using one of the JAR, EJB, or WAR plug-ins (<code class="literal">maven-jar-plugin</code>, <code class="literal">maven-ejb-plugin</code>, or <code class="literal">maven-war-plugin</code>).
					</li><li class="listitem">
						You must know the name of the project’s module dependencies. Refer to <a class="link" href="#included_modules" title="3.10.2. Included Modules">Included Modules</a> for the list of static modules included with JBoss EAP. If the module is another deployment, then refer to <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Dynamic Module Naming</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> to determine the module name.
					</li></ul></div><h4 id="generate_a_manifest_mf_file_containing_module_dependencies">Generate a MANIFEST.MF File Containing Module Dependencies</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the following configuration to the packaging plug-in configuration in the project’s <code class="literal">pom.xml</code> file.
					</p><pre class="programlisting language-xml">&lt;configuration&gt;
   &lt;archive&gt;
      &lt;manifestEntries&gt;
         &lt;Dependencies&gt;&lt;/Dependencies&gt;
      &lt;/manifestEntries&gt;
   &lt;/archive&gt;
&lt;/configuration&gt;</pre></li><li class="listitem"><p class="simpara">
						Add the list of module dependencies to the <code class="literal">&lt;Dependencies&gt;</code> element. Use the same format that is used when adding the dependencies to the <code class="literal">MANIFEST.MF</code> file:
					</p><pre class="programlisting language-xml">&lt;Dependencies&gt;org.javassist, org.apache.velocity&lt;/Dependencies&gt;</pre><p class="simpara">
						The <code class="literal">optional</code> and <code class="literal">export</code> attributes can also be used here:
					</p><pre class="programlisting language-xml">&lt;Dependencies&gt;org.javassist optional, org.apache.velocity export&lt;/Dependencies&gt;</pre></li><li class="listitem"><p class="simpara">
						Build the project using the Maven assembly goal:
					</p><pre class="programlisting language-java">[Localhost ]$ mvn assembly:single</pre><p class="simpara">
						When the project is built using the assembly goal, the final archive contains a <code class="literal">MANIFEST.MF</code> file with the specified module dependencies.
					</p><p class="simpara">
						Example: Configured Module Dependencies in <code class="literal">pom.xml</code>
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The example here shows the WAR plug-in but it also works with the JAR and EJB plug-ins (maven-jar-plugin and maven-ejb-plugin).
						</p></div></div><pre class="programlisting language-xml">&lt;plugins&gt;
   &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
         &lt;archive&gt;
            &lt;manifestEntries&gt;
               &lt;Dependencies&gt;org.javassist, org.apache.velocity&lt;/Dependencies&gt;
            &lt;/manifestEntries&gt;
         &lt;/archive&gt;
      &lt;/configuration&gt;
   &lt;/plugin&gt;
&lt;/plugins&gt;</pre></li></ol></div></section><section class="section" id="prevent_a_module_being_implicitly_loaded"><div class="titlepage"><div><div><h2 class="title">3.4. Prevent a Module Being Implicitly Loaded</h2></div></div></div><p>
				You can configure a deployable application to prevent implicit dependencies from being loaded. This can be useful when an application includes a different version of a library or framework than the one that will be provided by the application server as an implicit dependency.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A working software project that you want to exclude an implicit dependency from.
					</li><li class="listitem">
						You must know the name of the module to exclude. Refer to <a class="link" href="#implicit_module_dependencies" title="3.10.1. Implicit Module Dependencies">Implicit Module Dependencies</a> for a list of implicit dependencies and their conditions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Add dependency exclusion configuration to jboss-deployment-structure.xml</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If the application does not have one, create a new file called <code class="literal">jboss-deployment-structure.xml</code> and add it to the project. This is an XML file with the root element of <code class="literal">&lt;jboss-deployment-structure&gt;</code>.
					</p><pre class="programlisting language-xml">&lt;jboss-deployment-structure&gt;

&lt;/jboss-deployment-structure&gt;</pre><p class="simpara">
						For a web application (WAR), add this file to the <code class="literal">WEB-INF/</code> directory. For an EJB archive (JAR), add it to the <code class="literal">META-INF/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">&lt;deployment&gt;</code> element within the document root and an <code class="literal">&lt;exclusions&gt;</code> element within that.
					</p><pre class="programlisting language-xml">&lt;deployment&gt;
   &lt;exclusions&gt;

   &lt;/exclusions&gt;
&lt;/deployment&gt;</pre></li><li class="listitem"><p class="simpara">
						Within the exclusions element, add a <code class="literal">&lt;module&gt;</code> element for each module to be excluded. Set the <code class="literal">name</code> attribute to the name of the module.
					</p><pre class="programlisting language-xml">&lt;module name="org.javassist" /&gt;</pre><p class="simpara">
						Example: Excluding Two Modules
					</p><pre class="programlisting language-xml">&lt;jboss-deployment-structure&gt;
   &lt;deployment&gt;
      &lt;exclusions&gt;
         &lt;module name="org.javassist" /&gt;
         &lt;module name="org.dom4j" /&gt;
      &lt;/exclusions&gt;
   &lt;/deployment&gt;
&lt;/jboss-deployment-structure&gt;</pre></li></ol></div></section><section class="section" id="exclude_a_subsystem_from_a_deployment"><div class="titlepage"><div><div><h2 class="title">3.5. Exclude a Subsystem from a Deployment</h2></div></div></div><p>
				Excluding a subsystem provides the same effect as removing the subsystem, but it applies only to a single deployment. You can exclude a subsystem from a deployment by editing the <code class="literal">jboss-deployment-structure.xml</code> configuration file.
			</p><div class="orderedlist"><p class="title"><strong>Exclude a Subsystem</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Edit the <code class="literal">jboss-deployment-structure.xml</code> file.
					</li><li class="listitem"><p class="simpara">
						Add the following XML inside the <code class="literal">&lt;deployment&gt;</code> tags:
					</p><pre class="programlisting language-xml">&lt;exclude-subsystems&gt;
  &lt;subsystem name="<span class="emphasis"><em>SUBSYSTEM_NAME</em></span>" /&gt;
&lt;/exclude-subsystems&gt;</pre></li><li class="listitem">
						Save the <code class="literal">jboss-deployment-structure.xml</code> file.
					</li></ol></div><p>
				The subsystem’s deployment unit processors will no longer run on the deployment.
			</p><p>
				Example: <code class="literal">jboss-deployment-structure.xml</code> File
			</p><pre class="programlisting language-xml">&lt;jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2"&gt;
  &lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;
  &lt;deployment&gt;
    &lt;exclude-subsystems&gt;
      &lt;subsystem name="jaxrs" /&gt;
    &lt;/exclude-subsystems&gt;
    &lt;exclusions&gt;
      &lt;module name="org.javassist" /&gt;
    &lt;/exclusions&gt;
    &lt;dependencies&gt;
      &lt;module name="deployment.javassist.proxy" /&gt;
      &lt;module name="deployment.myjavassist" /&gt;
      &lt;module name="myservicemodule" services="import"/&gt;
    &lt;/dependencies&gt;
    &lt;resources&gt;
      &lt;resource-root path="my-library.jar" /&gt;
    &lt;/resources&gt;
  &lt;/deployment&gt;
  &lt;sub-deployment name="myapp.war"&gt;
    &lt;dependencies&gt;
      &lt;module name="deployment.myear.ear.myejbjar.jar" /&gt;
    &lt;/dependencies&gt;
    &lt;local-last value="true" /&gt;
  &lt;/sub-deployment&gt;
  &lt;module name="deployment.myjavassist" &gt;
    &lt;resources&gt;
     &lt;resource-root path="javassist.jar" &gt;
       &lt;filter&gt;
         &lt;exclude path="javassist/util/proxy" /&gt;
       &lt;/filter&gt;
     &lt;/resource-root&gt;
    &lt;/resources&gt;
  &lt;/module&gt;
  &lt;module name="deployment.javassist.proxy" &gt;
    &lt;dependencies&gt;
      &lt;module name="org.javassist" &gt;
        &lt;imports&gt;
          &lt;include path="javassist/util/proxy" /&gt;
          &lt;exclude path="/**" /&gt;
        &lt;/imports&gt;
      &lt;/module&gt;
    &lt;/dependencies&gt;
  &lt;/module&gt;
&lt;/jboss-deployment-structure&gt;</pre></section><section class="section" id="use_the_class_loader_programmatically_in_a_deployment"><div class="titlepage"><div><div><h2 class="title">3.6. Use the Class Loader Programmatically in a Deployment</h2></div></div></div><section class="section" id="programmatically_load_classes_and_resources_in_a_deployment"><div class="titlepage"><div><div><h3 class="title">3.6.1. Programmatically Load Classes and Resources in a Deployment</h3></div></div></div><p>
					You can programmatically find or load classes and resources in your application code. The method you choose depends on a number of factors. This section describes the methods available and provides guidelines for when to use them.
				</p><div class="formalpara"><p class="title"><strong>Load a Class Using the Class.forName() Method</strong></p><p>
						You can use the <code class="literal">Class.forName()</code> method to programmatically load and initialize classes. This method has two signatures:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">Class.forName(String className)</code>:
						</p><p class="simpara">
							This signature takes only one parameter, the name of the class you need to load. With this method signature, the class is loaded by the class loader of the current class and initializes the newly loaded class by default.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">Class.forName(String className, boolean initialize, ClassLoader loader)</code>:
						</p><p class="simpara">
							This signature expects three parameters: the class name, a boolean value that specifies whether to initialize the class, and the <code class="literal">ClassLoader</code> that should load the class.
						</p></li></ul></div><p>
					The three argument signature is the recommended way to programmatically load a class. This signature allows you to control whether you want the target class to be initialized upon load. It is also more efficient to obtain and provide the class loader because the JVM does not need to examine the call stack to determine which class loader to use. Assuming the class containing the code is named <code class="literal">CurrentClass</code>, you can obtain the class’s class loader using <code class="literal">CurrentClass.class.getClassLoader()</code> method.
				</p><p>
					The following example provides the class loader to load and initialize the <code class="literal">TargetClass</code> class:
				</p><pre class="programlisting language-java">Class&lt;?&gt; targetClass = Class.forName("com.myorg.util.TargetClass", true, CurrentClass.class.getClassLoader());</pre><div class="formalpara"><p class="title"><strong>Find All Resources with a Given Name</strong></p><p>
						If you know the name and path of a resource, the best way to load it directly is to use the standard Java Development Kit (JDK) <code class="literal">Class</code> or <code class="literal">ClassLoader</code> API.
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Load a single resource.
						</p><p class="simpara">
							To load a single resource located in the same directory as your class or another class in your deployment, you can use the <code class="literal">Class.getResourceAsStream()</code> method.
						</p><pre class="programlisting language-java">InputStream inputStream = CurrentClass.class.getResourceAsStream("targetResourceName");</pre></li><li class="listitem"><p class="simpara">
							Load all instances of a single resource.
						</p><p class="simpara">
							To load all instances of a single resource that are visible to your deployment’s class loader, use the <code class="literal">Class.getClassLoader().getResources(String resourceName)</code> method, where <code class="literal">resourceName</code> is the fully qualified path of the resource. This method returns an Enumeration of all <code class="literal">URL</code> objects for resources accessible by the class loader with the given name. You can then iterate through the array of URLs to open each stream using the <code class="literal">openStream()</code> method.
						</p><p class="simpara">
							The following example loads all instances of a resource and iterates through the results.
						</p><pre class="programlisting language-java">Enumeration&lt;URL&gt; urls = CurrentClass.class.getClassLoader().getResources("full/path/to/resource");
while (urls.hasMoreElements()) {
    URL url = urls.nextElement();
    InputStream inputStream = null;
    try {
        inputStream = url.openStream();
        // Process the inputStream
        ...
    } catch(IOException ioException) {
        // Handle the error
    } finally {
        if (inputStream != null) {
            try {
                inputStream.close();
            } catch (Exception e) {
                // ignore
            }
        }
    }
}</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								Because the URL instances are loaded from local storage, it is not necessary to use the <code class="literal">openConnection()</code> or other related methods. Streams are much simpler to use and minimize the complexity of the code.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Load a class file from the class loader.
						</p><p class="simpara">
							If a class has already been loaded, you can load the class file that corresponds to that class using the following syntax:
						</p><pre class="programlisting language-java">InputStream inputStream = CurrentClass.class.getResourceAsStream(TargetClass.class.getSimpleName() + ".class");</pre><p class="simpara">
							If the class is not yet loaded, you must use the class loader and translate the path:
						</p><pre class="programlisting language-java">String className = "com.myorg.util.TargetClass"
InputStream inputStream = CurrentClass.class.getClassLoader().getResourceAsStream(className.replace('.', '/') + ".class");</pre></li></ul></div></section><section class="section" id="programmatically_iterate_resources_in_a_deployment"><div class="titlepage"><div><div><h3 class="title">3.6.2. Programmatically Iterate Resources in a Deployment</h3></div></div></div><p>
					The JBoss Modules library provides several APIs for iterating all deployment resources. The JavaDoc for the JBoss Modules API is located here: <a class="link mimir-link-warn" href="http://docs.jboss.org/jbossmodules/1.3.0.Final/api/" title="Mimir does not include content from: docs.jboss.org">http://docs.jboss.org/jbossmodules/1.3.0.Final/api/</a>. To use these APIs, you must add the following dependency to the <code class="literal">MANIFEST.MF</code>:
				</p><pre class="screen">Dependencies: org.jboss.modules</pre><p>
					It is important to note that while these APIs provide increased flexibility, they also run much more slowly than a direct path lookup.
				</p><p>
					This section describes some of the ways you can programmatically iterate through resources in your application code.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							List resources within a deployment and within all imports.
						</p><p class="simpara">
							There are times when it is not possible to look up resources by the exact path. For example, the exact path might not be known or you might need to examine more than one file in a given path. In this case, the JBoss Modules library provides several APIs for iterating all deployment resources. You can iterate through resources in a deployment by utilizing one of two methods.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Iterate all resources found in a single module.
								</p><p class="simpara">
									The <code class="literal">ModuleClassLoader.iterateResources()</code> method iterates all the resources within this module class loader. This method takes two arguments: the starting directory name to search and a boolean that specifies whether it should recurse into subdirectories.
								</p><p class="simpara">
									The following example demonstrates how to obtain the ModuleClassLoader and obtain the iterator for resources in the <code class="literal">bin/</code> directory, recursing into subdirectories.
								</p><pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Iterator&lt;Resource&gt; mclResources = moduleClassLoader.iterateResources("bin",true);</pre><p class="simpara">
									The resultant iterator can be used to examine each matching resource and query its name and size (if available), open a readable stream, or acquire a URL for the resource.
								</p></li><li class="listitem"><p class="simpara">
									Iterate all resources found in a single module and imported resources.
								</p><p class="simpara">
									The <code class="literal">Module.iterateResources()</code> method iterates all the resources within this module class loader, including the resources that are imported into the module. This method returns a much larger set than the previous method. This method requires an argument, which is a filter that narrows the result to a specific pattern. Alternatively, PathFilters.acceptAll() can be supplied to return the entire set.
								</p><p class="simpara">
									The following example demonstrates how to find the entire set of resources in this module, including imports.
								</p><pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Module module = moduleClassLoader.getModule();
Iterator&lt;Resource&gt; moduleResources = module.iterateResources(PathFilters.acceptAll());</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Find all resources that match a pattern.
						</p><p class="simpara">
							If you need to find only specific resources within your deployment or within your deployment’s full import set, you need to filter the resource iteration. The JBoss Modules filtering APIs give you several tools to accomplish this.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Examine the full set of dependencies.
								</p><p class="simpara">
									If you need to examine the full set of dependencies, you can use the <code class="literal">Module.iterateResources()</code> method’s <code class="literal">PathFilter</code> parameter to check the name of each resource for a match.
								</p></li><li class="listitem"><p class="simpara">
									Examine deployment dependencies.
								</p><p class="simpara">
									If you need to look only within the deployment, use the <code class="literal">ModuleClassLoader.iterateResources()</code> method. However, you must use additional methods to filter the resultant iterator. The <code class="literal">PathFilters.filtered()</code> method can provide a filtered view of a resource iterator this case. The <code class="literal">PathFilters</code> class includes many static methods to create and compose filters that perform various functions, including finding child paths or exact matches, or matching an Ant-style "glob" pattern.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Additional code examples for filtering resources.
						</p><p class="simpara">
							The following examples demonstrate how to filter resources based on different criteria.
						</p><div class="formalpara"><p class="title"><strong>Example: Find All Files Named <code class="literal">messages.properties</code> in Your Deployment</strong></p><p>
								
<pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Iterator&lt;Resource&gt; mclResources = PathFilters.filtered(PathFilters.match("**/messages.properties"), moduleClassLoader.iterateResources("", true));</pre>

							</p></div><div class="formalpara"><p class="title"><strong>Example: Find All Files Named <code class="literal">messages.properties</code> in Your Deployment and Imports</strong></p><p>
								
<pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Module module = moduleClassLoader.getModule();
Iterator&lt;Resource&gt; moduleResources = module.iterateResources(PathFilters.match("**/message.properties"));</pre>

							</p></div><div class="formalpara"><p class="title"><strong>Example: Find All Files Inside Any Directory Named <code class="literal">my-resources</code> in Your Deployment</strong></p><p>
								
<pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Iterator&lt;Resource&gt; mclResources = PathFilters.filtered(PathFilters.match("**/my-resources/**"), moduleClassLoader.iterateResources("", true));</pre>

							</p></div><div class="formalpara"><p class="title"><strong>Example: Find All Files Named <code class="literal">messages</code> or <code class="literal">errors</code> in Your Deployment and Imports</strong></p><p>
								
<pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Module module = moduleClassLoader.getModule();
Iterator&lt;Resource&gt; moduleResources = module.iterateResources(PathFilters.any(PathFilters.match("**/messages"), PathFilters.match("**/errors"));</pre>

							</p></div><div class="formalpara"><p class="title"><strong>Example: Find All Files in a Specific Package in Your Deployment</strong></p><p>
								
<pre class="programlisting language-java">ModuleClassLoader moduleClassLoader = (ModuleClassLoader) TargetClass.class.getClassLoader();
Iterator&lt;Resource&gt; mclResources = moduleClassLoader.iterateResources("path/form/of/packagename", false);</pre>

							</p></div></li></ul></div></section></section><section class="section" id="class_loading_and_subdeployments"><div class="titlepage"><div><div><h2 class="title">3.7. Class Loading and Subdeployments</h2></div></div></div><section class="section" id="modules_and_class_loading_in_enterprise_archives"><div class="titlepage"><div><div><h3 class="title">3.7.1. Modules and Class Loading in Enterprise Archives</h3></div></div></div><p>
					Enterprise Archives (EAR) are not loaded as a single module like JAR or WAR deployments. They are loaded as multiple unique modules.
				</p><p>
					The following rules determine what modules exist in an EAR:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The contents of the <code class="literal">lib/</code> directory in the root of the EAR archive is a module. This is called the parent module.
						</li><li class="listitem">
							Each WAR and EJB JAR subdeployment is a module. These modules have the same behavior as any other module as well as implicit dependencies on the parent module.
						</li><li class="listitem">
							Subdeployments have implicit dependencies on the parent module and any other non-WAR subdeployments.
						</li></ul></div><p>
					The implicit dependencies on non-WAR subdeployments occur because JBoss EAP has subdeployment class loader isolation disabled by default. Dependencies on the parent module persist, regardless of subdeployment class loader isolation.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						No subdeployment ever gains an implicit dependency on a WAR subdeployment. Any subdeployment can be configured with explicit dependencies on another subdeployment as would be done for any other module.
					</p></div></div><p>
					Subdeployment class loader isolation can be enabled if strict compatibility is required. This can be enabled for a single EAR deployment or for all EAR deployments. The Java EE specification recommends that portable applications should not rely on subdeployments being able to access each other unless dependencies are explicitly declared as <code class="literal">Class-Path</code> entries in the <code class="literal">MANIFEST.MF</code> file of each subdeployment.
				</p></section><section class="section" id="subdeployment_class_loader_isolation"><div class="titlepage"><div><div><h3 class="title">3.7.2. Subdeployment Class Loader Isolation</h3></div></div></div><p>
					Each subdeployment in an Enterprise Archive (EAR) is a dynamic module with its own class loader. By default, a subdeployment can access the resources of other subdeployments.
				</p><p>
					If a subdeployment is not to be allowed to access the resources of other subdeployments, strict subdeployment isolation can be enabled.
				</p></section><section class="section" id="enable_subdeployment_class_loader_isolation_within_a_ear"><div class="titlepage"><div><div><h3 class="title">3.7.3. Enable Subdeployment Class Loader Isolation Within a EAR</h3></div></div></div><p>
					This task shows you how to enable subdeployment class loader isolation in an EAR deployment by using a special deployment descriptor in the EAR. This does not require any changes to be made to the application server and does not affect any other deployments.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Even when subdeployment class loader isolation is disabled, it is not possible to add a WAR deployment as a dependency.
					</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add the deployment descriptor file.
						</p><p class="simpara">
							Add the <code class="literal">jboss-deployment-structure.xml</code> deployment descriptor file to the <code class="literal">META-INF</code> directory of the EAR if it doesn’t already exist and add the following content:
						</p><pre class="screen">&lt;jboss-deployment-structure&gt;

&lt;/jboss-deployment-structure&gt;</pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal">&lt;ear-subdeployments-isolated&gt;</code> element.
						</p><p class="simpara">
							Add the <code class="literal">&lt;ear-subdeployments-isolated&gt;</code> element to the <code class="literal">jboss-deployment-structure.xml</code> file if it doesn’t already exist with the content of <code class="literal">true</code>.
						</p><pre class="screen">&lt;ear-subdeployments-isolated&gt;true&lt;/ear-subdeployments-isolated&gt;</pre></li></ol></div><p>
					Subdeployment class loader isolation is now enabled for this EAR deployment. This means that the subdeployments of the EAR will not have automatic dependencies on each of the non-WAR subdeployments.
				</p></section><section class="section" id="configuring_session_sharing_between_subdeployments_in_enterprise_archives"><div class="titlepage"><div><div><h3 class="title">3.7.4. Configuring Session Sharing between Subdeployments in Enterprise Archives</h3></div></div></div><p>
					JBoss EAP provides the ability to configure enterprise archives (EARs) to share sessions between WAR module subdeployments contained in the EAR. This functionality is disabled by default and must be explicitly enabled in the <code class="literal">META-INF/jboss-all.xml</code> file in the EAR.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						Since this feature is not a standard servlet feature, your applications might not be portable if this functionality is enabled.
					</p></div></div><p>
					To enable session sharing between WARs within an EAR, you need to declare a <code class="literal">shared-session-config</code> element in the <code class="literal">META-INF/jboss-all.xml</code> of the EAR:
				</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">META-INF/jboss-all.xml</code></strong></p><p>
						
<pre class="programlisting language-xml">&lt;jboss xmlns="urn:jboss:1.0"&gt;
  ...
  &lt;shared-session-config xmlns="urn:jboss:shared-session-config:2.0"&gt;
  &lt;/shared-session-config&gt;
  ...
&lt;/jboss&gt;</pre>

					</p></div><p>
					The <code class="literal">shared-session-config</code> element is used to configure the shared session manager for all WARs within the EAR. If the <code class="literal">shared-session-config</code> element is present, all WARs within the EAR will share the same session manager. Changes made here will affect all the WARs contained within the EAR.
				</p><section class="section" id="reference_of_shared_session_configuration_options"><div class="titlepage"><div><div><h4 class="title">3.7.4.1. Reference of Shared Session Configuration Options</h4></div></div></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">META-INF/jboss-all.xml</code></strong></p><p>
							
<pre class="programlisting language-xml">&lt;jboss xmlns="urn:jboss:1.0"&gt;
    &lt;shared-session-config xmlns="urn:jboss:shared-session-config:2.0"&gt;
    	&lt;distributable/&gt;
        &lt;max-active-sessions&gt;10&lt;/max-active-sessions&gt;
        &lt;session-config&gt;
            &lt;session-timeout&gt;0&lt;/session-timeout&gt;
            &lt;cookie-config&gt;
                &lt;name&gt;JSESSIONID&lt;/name&gt;
                &lt;domain&gt;domainName&lt;/domain&gt;
                &lt;path&gt;/cookiePath&lt;/path&gt;
                &lt;comment&gt;cookie comment&lt;/comment&gt;
                &lt;http-only&gt;true&lt;/http-only&gt;
                &lt;secure&gt;true&lt;/secure&gt;
                &lt;max-age&gt;-1&lt;/max-age&gt;
            &lt;/cookie-config&gt;
            &lt;tracking-mode&gt;COOKIE&lt;/tracking-mode&gt;
        &lt;/session-config&gt;
        &lt;replication-config&gt;
            &lt;cache-name&gt;web&lt;/cache-name&gt;
            &lt;replication-granularity&gt;SESSION&lt;/replication-granularity&gt;
        &lt;/replication-config&gt;
    &lt;/shared-session-config&gt;
&lt;/jboss&gt;</pre>

						</p></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"><!--Empty--></col><col style="width: 60%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421281410448" scope="col">Element</th><th align="left" valign="top" id="idm140421275750368" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										shared-session-config
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Root element for the shared session configuration. If this is present in the <code class="literal">META-INF/jboss-all.xml</code>, then all deployed WARs contained in the EAR will share a single session manager.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										distributable
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Specifies that a distributable session manager should be used. Starting with the version 2.0 of the schema, a non-distributable session manager is used by default. For version 1.0, the distributable session manager continues to be the default session manager.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										max-active-sessions
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Number of maximum sessions allowed.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										session-config
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Contains the session configuration parameters for all deployed WARs contained in the EAR.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										session-timeout
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Defines the default session timeout interval for all sessions created in the deployed WARs contained in the EAR. The specified timeout must be expressed in a whole number of minutes. If the timeout is <span class="emphasis"><em>0</em></span> or less, the container ensures the default behavior of sessions is to never time out. If this element is not specified, the container must set its default timeout period.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										cookie-config
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Contains the configuration of the session tracking cookies created by the deployed WARs contained in the EAR.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										name
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										The name that will be assigned to any session tracking cookies created by the deployed WARs contained in the EAR. The default is <code class="literal">JSESSIONID</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										domain
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										The domain name that will be assigned to any session tracking cookies created by the deployed WARs contained in the EAR.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										path
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										The path that will be assigned to any session tracking cookies created by the deployed WARs contained in the EAR.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										comment
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										The comment that will be assigned to any session tracking cookies created by the deployed WARs contained in the EAR.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										http-only
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Specifies whether any session tracking cookies created by the deployed WARs contained in the EAR will be marked as <code class="literal">HttpOnly</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										secure
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Specifies whether any session tracking cookies created by the deployed WARs contained in the EAR will be marked as secure even if the request that initiated the corresponding session is using plain HTTP instead of HTTPS.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										max-age
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										The lifetime (in seconds) that will be assigned to any session tracking cookies created by the deployed WARs contained in the EAR. Default is <code class="literal">-1</code>.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										tracking-mode
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Defines the tracking modes for sessions created by the deployed WARs contained in the EAR.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										replication-config
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										Contains the HTTP session clustering configuration.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										cache-name
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										This option is for use in clustering only. It specifies the name of the Infinispan container and cache in which to store session data. The default value, if not explicitly set, is determined by the application server. To use a specific cache within a cache container, use the form <code class="literal">container.cache</code>, for example <code class="literal">web.dist</code>. If name is unqualified, the default cache of the specified container is used.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421281410448"> <p>
										replication-granularity
									</p>
									 </td><td align="left" valign="top" headers="idm140421275750368"> <p>
										This option is for use in clustering only. It determines the session replication granularity level. The possible values are <code class="literal">SESSION</code> and <code class="literal">ATTRIBUTE</code> with <code class="literal">SESSION</code> being the default.
									</p>
									 <p>
										If <code class="literal">SESSION</code> granularity is used, all session attributes are replicated if any were modified within the scope of a request. This policy is required if an object reference is shared by multiple session attributes. However, this can be inefficient if session attributes are sufficiently large and/or are modified infrequently, since all attributes must be replicated regardless of whether they were modified or not.
									</p>
									 <p>
										If <code class="literal">ATTRIBUTE</code> granularity is used, only those attributes that were modified within the scope of a request are replicated. This policy is not appropriate if an object reference is shared by multiple session attributes. This can be more efficient than <code class="literal">SESSION</code> granularity if the session attributes are sufficiently large and/or are modified infrequently.
									</p>
									 </td></tr></tbody></table></div></section></section></section><section class="section" id="deploy_tag_library_descriptors_TLDs_in_a_custom_module"><div class="titlepage"><div><div><h2 class="title">3.8. Deploy Tag Library Descriptors (TLDs) in a Custom Module</h2></div></div></div><p>
				If you have multiple applications that use common Tag Library Descriptors (TLDs), it might be useful to separate the TLDs from the applications so that they are located in one central and unique location. This enables easier additions and updates to TLDs without necessarily having to update each individual application that uses them.
			</p><p>
				This can be done by creating a custom JBoss EAP module that contains the TLD JARs, and declaring a dependency on that module in the applications.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Ensure that at least one JAR contains TLDs and that the TLDs are packed in <code class="literal">META-INF</code>.
				</p></div></div><h4 id="deploy_tlds_in_a_custom_module">Deploy TLDs in a Custom Module</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Using the management CLI, connect to your JBoss EAP instance and execute the following command to create the custom module containing the TLD JAR:
					</p><pre class="screen">module add --name=MyTagLibs --resources=/path/to/TLDarchive.jar</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Using the <code class="literal">module</code> management CLI command to add and remove modules is provided as Technology Preview only. This command is not appropriate for use in a managed domain or when connecting to the management CLI remotely. Modules should be added and removed manually in a production environment. For more information, see the <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Create a Custom Module Manually</a> and <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Remove a Custom Module Manually</a> sections of the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
						</p><p>
							Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
						</p><p>
							See <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
						</p></div></div><p class="simpara">
						If the TLDs are packaged with classes that require dependencies, use the <code class="literal">--dependencies</code> option to ensure that you specify those dependencies when creating the custom module.
					</p><p class="simpara">
						When creating the module, you can specify multiple JAR resources by separating each one with the file system-specific separator for your system.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For linux - <code class="literal">:</code>. Example, <code class="literal">--resources=&lt;path-to-jar&gt;:&lt;path-to-another-jar&gt;</code>
							</li><li class="listitem"><p class="simpara">
								For Windows - <code class="literal">;</code>. Example, <code class="literal">--resources=&lt;path-to-jar&gt;;&lt;path-to-another-jar&gt;</code>
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">--resources</code></span></dt><dd>
												It is required unless <code class="literal">--module-xml</code> is used. It lists file system paths, usually JAR files, separated by a file system-specific path separator, for example <code class="literal">java.io.File.pathSeparatorChar</code>. The files specified will be copied to the created module’s directory.
											</dd><dt><span class="term"><code class="literal">--resource-delimiter</code></span></dt><dd>
												It is an optional user-defined path separator for the resources argument. If this argument is present, the command parser will use the value here instead of the file system-specific path separator. This allows the <code class="literal">modules</code> command to be used in cross-platform scripts.
											</dd></dl></div></div></div></li></ul></div></li><li class="listitem">
						In your applications, declare a dependency on the new MyTagLibs custom module using one of the methods described in <a class="link" href="#add_an_explicit_module_dependency_to_a_deployment" title="3.2. Add an Explicit Module Dependency to a Deployment">Add an Explicit Module Dependency to a Deployment</a>.
					</li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Ensure that you also import <code class="literal">META-INF</code> when declaring the dependency. For example, for <code class="literal">MANIFEST.MF</code>:
				</p><pre class="screen">Dependencies: com.MyTagLibs meta-inf</pre><p>
					Or, for <code class="literal">jboss-deployment-structure.xml</code>, use the <code class="literal">meta-inf</code> attribute.
				</p></div></div></section><section class="section" id="display_modules_by_deployment-1"><div class="titlepage"><div><div><h2 class="title">3.9. Display Modules by Deployment</h2></div></div></div><div id="display_modules_by_deployment" class="formalpara"><p class="title"><strong>Display Modules by Deployment</strong></p><p>
					You can use the <code class="literal">list-modules</code> management operation to display a list of modules according to each deployment.
				</p></div><pre class="programlisting language-java">:list-modules</pre><div class="formalpara"><p class="title"><strong>Example: Display Modules by Deployment for a Standalone Server</strong></p><p>
					
<pre class="programlisting language-java">/deployment=ejb-in-ear.ear:list-modules</pre>

				</p></div><pre class="programlisting language-java">/deployment=ejb-in-ear.ear/subdeployment=ejb-in-ear-web.war:list-modules</pre><div class="formalpara"><p class="title"><strong>Example: Display Modules by Deployment for a Managed Domain</strong></p><p>
					
<pre class="programlisting language-java">/host=master/server=server-one/deployment=ejb-in-ear.ear:list-modules</pre>

				</p></div><pre class="programlisting language-java">/host=master/server=server-one/deployment=ejb-in-ear.ear/subdeployment=ejb-in-ear-web.war:list-modules</pre><p>
				This operation displays the list in a compact view.
			</p><div class="formalpara"><p class="title"><strong>Example: Standard List Output</strong></p><p>
					
<pre class="programlisting language-java">[standalone@localhost:9990 /] /deployment=sample-ear-1.0.ear:list-modules
  {
      "outcome" =&gt; "success",
      "result" =&gt; {
          "system-dependencies" =&gt; [
              {"name" =&gt; "com.fasterxml.jackson.datatype.jackson-datatype-jdk8"},
              {"name" =&gt; "com.fasterxml.jackson.datatype.jackson-datatype-jsr310"},
              {"name" =&gt; "ibm.jdk"},
              {"name" =&gt; "io.jaegertracing.jaeger"},
              {"name" =&gt; "io.opentracing.contrib.opentracing-tracerresolver"},
              ...
          ],
          "local-dependencies" =&gt; [
              {"name" =&gt; "deployment.ejb-in-ear.ear.ejb-in-ear-ejb.jar"},
               ...
          ],
          "user-dependencies" =&gt; [
              {"name" =&gt; "com.fasterxml.jackson.datatype.jackson-datatype-jdk8"},
              {"name" =&gt; "org.hibernate:4.1"},
               ...
          ]
      }
  }</pre>

				</p></div><p>
				Using the <code class="literal">verbose=[false*|true]</code> attribute will result in a more detailed list.
			</p><div class="formalpara"><p class="title"><strong>Example: Detailed List Output</strong></p><p>
					
<pre class="programlisting language-java">[standalone@localhost:9990 /] /deployment=sample-ear-1.0.ear:list-modules(verbose=true)
  {
      "outcome" =&gt; "success",
      "result" =&gt; {
          "system-dependencies" =&gt; [
              {
                  "name" =&gt; "com.fasterxml.jackson.datatype.jackson-datatype-jdk8",
                  "optional" =&gt; true,
                  "export" =&gt; false,
                  "import-services" =&gt; true
              },
              {
                  "name" =&gt; "com.fasterxml.jackson.datatype.jackson-datatype-jsr310",
                  "optional" =&gt; true,
                  "export" =&gt; false,
                  "import-services" =&gt; true
              },
              ...
          ],
          "local-dependencies" =&gt; [
              {
                "name" =&gt; "deployment.ejb-in-ear.ear.ejb-in-ear-ejb.jar",
                "optional" =&gt; false,
                "export" =&gt; false,
                "import-services" =&gt; true
              },
              ...
          ],
          "user-dependencies" =&gt; [
              {
                  "name" =&gt; "com.fasterxml.jackson.datatype.jackson-datatype-jdk8",
                  "optional" =&gt; false,
                  "export" =&gt; false,
                  "import-services" =&gt; false
              },
              {
                  "name" =&gt; "org.hibernate:4.1",
                  "optional" =&gt; false,
                  "export" =&gt; false,
                  "import-services" =&gt; false
              },
              ...</pre>

				</p></div><p>
				The following table describes the categories of information provided in the output:
			</p><div class="table" id="idm140421276334608"><p class="title"><strong>Table 3.1. Table Categories of Output for <code class="literal">list-modules</code> Operation</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><tbody><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Category</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Description</strong></span>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								system-dependencies
							</p>
							 </td><td align="left" valign="top"> <p>
								Added by server implicitly.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								local-dependencies
							</p>
							 </td><td align="left" valign="top"> <p>
								Added by other parts of the deployment.
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								user-dependencies
							</p>
							 </td><td align="left" valign="top"> <p>
								Defined by user through the <code class="literal">MANIFEST.MF</code> or <code class="literal">deployment-structure.xml</code> file.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="class_loading_reference"><div class="titlepage"><div><div><h2 class="title">3.10. Class Loading Reference</h2></div></div></div><section class="section" id="implicit_module_dependencies"><div class="titlepage"><div><div><h3 class="title">3.10.1. Implicit Module Dependencies</h3></div></div></div><p>
					The following table lists the modules that are automatically added to deployments as dependencies and the conditions that trigger the dependency.
				</p><div class="table" id="idm140421284833536"><p class="title"><strong>Table 3.2. Implicit Module Dependencies</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 16%; " class="col_1"><!--Empty--></col><col style="width: 28%; " class="col_2"><!--Empty--></col><col style="width: 28%; " class="col_3"><!--Empty--></col><col style="width: 28%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421281632928" scope="col">Subsystem Responsible for Adding the Dependency</th><th align="left" valign="top" id="idm140421281631872" scope="col">Package Dependencies That Are Always Added</th><th align="left" valign="top" id="idm140421285459824" scope="col">Package Dependencies That Are Conditionally Added</th><th align="left" valign="top" id="idm140421285458768" scope="col">Conditions That Trigger the Addition of the Dependency</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Application Client
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.omg.api
										</li><li class="listitem">
											org.jboss.xnio
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Batch
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.batch.api
										</li><li class="listitem">
											org.jberet.jberet-core
										</li><li class="listitem">
											org.wildfly.jberet
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Bean Validation
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.hibernate.validator
										</li><li class="listitem">
											javax.validation.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Core Server
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.api
										</li><li class="listitem">
											sun.jdk
										</li><li class="listitem">
											org.jboss.vfs
										</li><li class="listitem">
											ibm.jdk
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									DriverDependenciesProcessor
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.transaction.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									EE
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.invocation (except org.jboss.invocation.proxy.classloading)
										</li><li class="listitem">
											org.jboss.as.ee (except org.jboss.as.ee.component.serialization, org.jboss.as.ee.concurrent, org.jboss.as.ee.concurrent.handle)
										</li><li class="listitem">
											org.wildfly.naming
										</li><li class="listitem">
											javax.annotation.api
										</li><li class="listitem">
											javax.enterprise.concurrent.api
										</li><li class="listitem">
											javax.interceptor.api
										</li><li class="listitem">
											javax.json.api
										</li><li class="listitem">
											javax.resource.api
										</li><li class="listitem">
											javax.rmi.api
										</li><li class="listitem">
											javax.xml.bind.api
										</li><li class="listitem">
											javax.api
										</li><li class="listitem">
											org.glassfish.javax.el
										</li><li class="listitem">
											org.glassfish.javax.enterprise.concurrent
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									EJB 3
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.ejb.api
										</li><li class="listitem">
											javax.xml.rpc.api
										</li><li class="listitem">
											org.jboss.ejb-client
										</li><li class="listitem">
											org.jboss.iiop-client
										</li><li class="listitem">
											org.jboss.as.ejb3
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.wildfly.iiop-openjdk
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									IIOP
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.omg.api
										</li><li class="listitem">
											javax.rmi.api
										</li><li class="listitem">
											javax.orb.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									JAX-RS (RESTEasy)
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.xml.bind.api
										</li><li class="listitem">
											javax.ws.rs.api
										</li><li class="listitem">
											javax.json.api
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-atom-provider
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-crypto
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-validator-provider-11
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-jaxrs
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-jaxb-provider
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-jackson2-provider
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-jsapi
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-json-p-provider
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-multipart-provider
										</li><li class="listitem">
											org.jboss.resteasy.resteasy-yaml-provider
										</li><li class="listitem">
											org.codehaus.jackson.jackson-core-asl
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.resteasy.resteasy-cdi
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									The presence of JAX-RS annotations in the deployment.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									JCA
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.resource.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.jms.api
										</li><li class="listitem">
											javax.validation.api
										</li><li class="listitem">
											org.jboss.ironjacamar.api
										</li><li class="listitem">
											org.jboss.ironjacamar.impl
										</li><li class="listitem">
											org.hibernate.validator
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									The deployment of a resource adapter (RAR) archive.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									JPA (Hibernate)
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.persistence.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.as.jpa
										</li><li class="listitem">
											org.jboss.as.jpa.spi
										</li><li class="listitem">
											org.javassist
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									The presence of an <code class="literal">@PersistenceUnit</code> or <code class="literal">@PersistenceContext</code> annotation, or a <code class="literal">&lt;persistence-unit-ref&gt;</code> or <code class="literal">&lt;persistence-context-ref&gt;</code> element in a deployment descriptor.
								</p>
								 <p>
									JBoss EAP maps persistence provider names to module names. If you name a specific provider in the <code class="literal">persistence.xml</code> file, a dependency is added for the appropriate module. If this not the desired behavior, you can exclude it using a <code class="literal">jboss-deployment-structure.xml</code> file.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									JSF (Java Server Faces)
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.faces.api
										</li><li class="listitem">
											com.sun.jsf-impl
										</li><li class="listitem">
											org.jboss.as.jsf
										</li><li class="listitem">
											org.jboss.as.jsf-injection
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									Added to EAR applications.
								</p>
								 <p>
									Added to WAR applications only if the <code class="literal">web.xml</code> file does NOT specify a <code class="literal">context-param</code> of <code class="literal">org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</code> with a value of <code class="literal">true</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									JSR-77
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.management.j2ee.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Logging
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.logging
										</li><li class="listitem">
											org.apache.commons.logging
										</li><li class="listitem">
											org.apache.log4j
										</li><li class="listitem">
											org.slf4j
										</li><li class="listitem">
											org.jboss.logging.jul-to-slf4j-stub
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Mail
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.mail.api
										</li><li class="listitem">
											javax.activation.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Messaging
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.jms.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.wildfly.extension.messaging-activemq
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									PicketLink Federation
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.picketlink
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Pojo
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.as.pojo
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									SAR
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.modules
										</li><li class="listitem">
											org.jboss.as.system-jmx
										</li><li class="listitem">
											org.jboss.common-beans
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									The deployment of a SAR archive that has a <code class="literal">jboss-service.xml</code>.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Seam2
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.vfs
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Security
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.picketbox
										</li><li class="listitem">
											org.jboss.as.security
										</li><li class="listitem">
											javax.security.jacc.api
										</li><li class="listitem">
											javax.security.auth.message.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									ServiceActivator
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.msc
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Transactions
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.transaction.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.xts
										</li><li class="listitem">
											org.jboss.jts
										</li><li class="listitem">
											org.jboss.narayana.compensations
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Undertow
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.servlet.jstl.api
										</li><li class="listitem">
											javax.servlet.api
										</li><li class="listitem">
											javax.servlet.jsp.api
										</li><li class="listitem">
											javax.websocket.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											io.undertow.core
										</li><li class="listitem">
											io.undertow.servlet
										</li><li class="listitem">
											io.undertow.jsp
										</li><li class="listitem">
											io.undertow.websocket
										</li><li class="listitem">
											io.undertow.js
										</li><li class="listitem">
											org.wildfly.clustering.web.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Web Services
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.jws.api
										</li><li class="listitem">
											javax.xml.soap.api
										</li><li class="listitem">
											javax.xml.ws.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											org.jboss.ws.api
										</li><li class="listitem">
											org.jboss.ws.spi
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									If it is not application client type, then it will add the conditional dependencies.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421281632928"> <p>
									Weld (CDI)
								</p>
								 </td><td align="left" valign="top" headers="idm140421281631872"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.enterprise.api
										</li><li class="listitem">
											javax.inject.api
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285459824"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											javax.persistence.api
										</li><li class="listitem">
											org.javassist
										</li><li class="listitem">
											org.jboss.as.weld
										</li><li class="listitem">
											org.jboss.weld.core
										</li><li class="listitem">
											org.jboss.weld.probe
										</li><li class="listitem">
											org.jboss.weld.api
										</li><li class="listitem">
											org.jboss.weld.spi
										</li><li class="listitem">
											org.hibernate.validator.cdi
										</li></ul></div>
								 </td><td align="left" valign="top" headers="idm140421285458768"> <p>
									The presence of a <code class="literal">beans.xml</code> file in the deployment.
								</p>
								 </td></tr></tbody></table></div></div></section><section class="section" id="included_modules"><div class="titlepage"><div><div><h3 class="title">3.10.2. Included Modules</h3></div></div></div><p>
					For the complete listing of the included modules and whether they are supported, see <a class="link mimir-link-warn" href="https://access.redhat.com/articles/2158031" title="This content is not included in Mimir.">Red Hat JBoss Enterprise Application Platform 7 Included Modules</a> on the Red Hat Customer Portal.
				</p></section></section></section><section class="chapter" id="logging_for_developers"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Logging</h1></div></div></div><section class="section" id="about_logging"><div class="titlepage"><div><div><h2 class="title">4.1. About Logging</h2></div></div></div><p>
				Logging is the practice of recording a series of messages from an application that provides a record, or log, of the application’s activities.
			</p><p>
				Log messages provide important information for developers when debugging an application and for system administrators maintaining applications in production.
			</p><p>
				Most modern Java logging frameworks also include details such as the exact time and the origin of the message.
			</p><section class="section" id="supported_application_logging_frameworks"><div class="titlepage"><div><div><h3 class="title">4.1.1. Supported Application Logging Frameworks</h3></div></div></div><p>
					JBoss LogManager supports the following logging frameworks:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							JBoss Logging (included with JBoss EAP)
						</li><li class="listitem">
							<a class="link mimir-link-warn" href="http://commons.apache.org/logging/" title="Mimir does not include content from: commons.apache.org">Apache Commons Logging</a>
						</li><li class="listitem">
							<a class="link mimir-link-warn" href="http://www.slf4j.org/" title="Mimir does not include content from: www.slf4j.org">Simple Logging Facade for Java (SLF4J)</a>
						</li><li class="listitem">
							<a class="link mimir-link-warn" href="http://logging.apache.org/log4j/1.2/" title="Mimir does not include content from: logging.apache.org">Apache log4j</a>
						</li><li class="listitem">
							<a class="link mimir-link-warn" href="https://docs.oracle.com/javase/8/docs/api/java/util/logging/package-summary.html" title="Mimir does not include content from: docs.oracle.com">Java SE Logging (java.util.logging)</a>
						</li></ul></div><p>
					JBoss LogManager supports the following APIs:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							JBoss Logging
						</li><li class="listitem">
							commons-logging
						</li><li class="listitem">
							SLF4J
						</li><li class="listitem">
							Log4j
						</li><li class="listitem">
							java.util.logging
						</li></ul></div><p>
					JBoss LogManager also supports the following SPIs:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							java.util.logging Handler
						</li><li class="listitem">
							Log4j Appender
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you are using the <code class="literal">Log4j API</code> and a <code class="literal">Log4J Appender</code>, then Objects will be converted to <code class="literal">string</code> before being passed.
					</p></div></div></section></section><section class="section" id="logging_with_the_jboss_logging_framework"><div class="titlepage"><div><div><h2 class="title">4.2. Logging with the JBoss Logging Framework</h2></div></div></div><section class="section" id="about_jboss_logging"><div class="titlepage"><div><div><h3 class="title">4.2.1. About JBoss Logging</h3></div></div></div><p>
					JBoss Logging is the application logging framework that is included in JBoss EAP. It provides an easy way to add logging to an application. You add code to your application that uses the framework to send log messages in a defined format. When the application is deployed to an application server, these messages can be captured by the server and displayed or written to file according to the server’s configuration.
				</p><p>
					JBoss Logging provides the following features:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							An innovative, easy-to-use typed logger. A typed logger is a logger interface annotated with <code class="literal">org.jboss.logging.annotations.MessageLogger</code>. For examples, see <a class="link" href="#creating_internationalized_loggers_messages_and_exceptions" title="4.5.3. Creating Internationalized Loggers, Messages and Exceptions">Creating Internationalized Loggers, Messages and Exceptions</a>.
						</li><li class="listitem">
							Full support for internationalization and localization. Translators work with message bundles in properties files while developers work with interfaces and annotations. For details, see <a class="link" href="#internationalization_and_localization" title="4.5. Internationalization and Localization">Internationalization and Localization</a>.
						</li><li class="listitem">
							Build-time tooling to generate typed loggers for production and runtime generation of typed loggers for development.
						</li></ul></div></section><section class="section" id="add_logging_to_an_application_with_jboss_logging"><div class="titlepage"><div><div><h3 class="title">4.2.2. Add Logging to an Application with JBoss Logging</h3></div></div></div><p>
					This procedure demonstrates how to add logging to an application using JBoss Logging.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						If you use Maven to build your project, you must configure Maven to use the JBoss EAP Maven repository. For more information, see <a class="link" href="#configure_the_jboss_eap_maven_repository" title="2.3.1. Configure the JBoss EAP Maven Repository">Configure the JBoss EAP Maven Repository</a>.
					</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							The JBoss Logging JAR files must be in the build path for your application.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If you build using Red Hat CodeReady Studio, select <span class="strong strong"><strong>Properties</strong></span> from the <span class="strong strong"><strong>Project</strong></span> menu, then select <span class="strong strong"><strong>Targeted Runtimes</strong></span> and ensure the runtime for JBoss EAP is checked.
								</li><li class="listitem"><p class="simpara">
									If you use Maven to build your project, make sure you add the <code class="literal">jboss-logging</code> dependency to your project’s <code class="literal">pom.xml</code> file for access to the JBoss Logging framework:
								</p><pre class="programlisting language-xml">&lt;dependency&gt;
	&lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;
	&lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;
	&lt;version&gt;3.3.0.Final-redhat-1&lt;/version&gt;
	&lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</pre><p class="simpara">
									The jboss-eap-javaee8 BOM manages the version of <code class="literal">jboss-logging</code>. For more details, see <a class="link" href="#manage_project_dependencies" title="2.3.3. Manage Project Dependencies">Manage Project Dependencies</a>. See the <code class="literal">logging</code> quickstart that ships with JBoss EAP for a working example of logging in an application.
								</p></li></ul></div><p class="simpara">
							You do not need to include the JARs in your built application because JBoss EAP provides them to deployed applications.
						</p></li><li class="listitem"><p class="simpara">
							For each class to which you want to add logging:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add the import statements for the JBoss Logging class namespaces that you will be using. At a minimum you will need the following import:
								</p><pre class="programlisting language-java">import org.jboss.logging.Logger;</pre></li><li class="listitem"><p class="simpara">
									Create an instance of <code class="literal">org.jboss.logging.Logger</code> and initialize it by calling the static method <code class="literal">Logger.getLogger(Class)</code>. It is recommended to create this as a single instance variable for each class.
								</p><pre class="programlisting language-java">private static final Logger LOGGER = Logger.getLogger(HelloWorld.class);</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Call the <code class="literal">Logger</code> object methods in your code where you want to send log messages.
						</p><p class="simpara">
							The <code class="literal">Logger</code> has many different methods with different parameters for different types of messages. Use the following methods to send a log message with the corresponding log level and the <code class="literal">message</code> parameter as a string:
						</p><pre class="programlisting language-java">LOGGER.debug("This is a debugging message.");
LOGGER.info("This is an informational message.");
LOGGER.error("Configuration file not found.");
LOGGER.trace("This is a trace message.");
LOGGER.fatal("A fatal error occurred.");</pre><p class="simpara">
							For the complete list of JBoss Logging methods, see the <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/org/jboss/logging/package-summary.html" title="This content is not included in Mimir.">Logging API</a> documentation.
						</p></li></ol></div><p>
					The following example loads customized configuration for an application from a properties file. If the specified file is not found, an <span class="strong strong"><strong>ERROR</strong></span> level log message is recorded.
				</p><div class="formalpara"><p class="title"><strong>Example: Application Logging with JBoss Logging</strong></p><p>
						
<pre class="programlisting language-java">import org.jboss.logging.Logger;
public class LocalSystemConfig
{
   private static final Logger LOGGER = Logger.getLogger(LocalSystemConfig.class);

   public Properties openCustomProperties(String configname) throws CustomConfigFileNotFoundException
   {
      Properties props = new Properties();
      try
      {
         LOGGER.info("Loading custom configuration from "+configname);
         props.load(new FileInputStream(configname));
      }
      catch(IOException e) //catch exception in case properties file does not exist
      {
         LOGGER.error("Custom configuration file ("+configname+") not found. Using defaults.");
         throw new CustomConfigFileNotFoundException(configname);
      }

      return props;
   }
}</pre>

					</p></div></section></section><section class="section" id="about_per_deployment_logging"><div class="titlepage"><div><div><h2 class="title">4.3. Per-deployment Logging</h2></div></div></div><p>
				Per-deployment logging allows a developer to configure the logging configuration for their application in advance. When the application is deployed, logging begins according to the defined configuration. The log files created through this configuration contain information only about the behavior of the application.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					If the per-deployment logging configuration is not done, the configuration from <code class="literal">logging</code> subsystem is used for all the applications as well as the server.
				</p></div></div><p>
				This approach has advantages and disadvantages over using system-wide logging. An advantage is that the administrator of the JBoss EAP instance does not need to configure any other logging than the server logging. A disadvantage is that the per-deployment logging configuration is read only on server startup, and so cannot be changed at runtime.
			</p><section class="section" id="add_per_deployment_logging_to_an_application"><div class="titlepage"><div><div><h3 class="title">4.3.1. Add Per-deployment Logging to an Application</h3></div></div></div><p>
					To configure per-deployment logging for an application, add the <code class="literal">logging.properties</code> configuration file to your deployment. This configuration file is recommended because it can be used with any logging facade where JBoss Log Manager is the underlying log manager.
				</p><p>
					The directory into which the configuration file is added depends on the deployment method.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							For EAR deployments, copy the logging configuration file to the <code class="literal">META-INF/</code> directory.
						</li><li class="listitem">
							For WAR or JAR deployments, copy the logging configuration file to the <code class="literal">WEB-INF/classes/</code> directory.
						</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you are using <code class="literal">Simple Logging Facade for Java (SLF4J)</code> or <code class="literal">Apache log4j</code>, the <code class="literal">logging.properties</code> configuration file is suitable. If you are using Apache log4j appenders then the configuration file <code class="literal">log4j.properties</code> is required. The configuration file <code class="literal">jboss-logging.properties</code> is supported only for legacy deployments.
					</p></div></div><h5 id="configuring_logging_properties_file">Configuring logging.properties</h5><p>
					The <code class="literal">logging.properties</code> file is used when the server boots, until the <code class="literal">logging</code> subsystem is started. If the <code class="literal">logging</code> subsystem is not included in your configuration, then the server uses the configuration in this file as the logging configuration for the entire server.
				</p><h6 id="jboss_log_manager_configuration_options">JBoss Log Manager Configuration Options</h6><div class="itemizedlist"><p class="title"><strong>Logger options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">loggers=&lt;category&gt;[,&lt;category&gt;,…​]</code> - Specify a comma-separated list of logger categories to be configured. Any categories not listed here will not be configured from the following properties.
						</li><li class="listitem">
							<code class="literal">logger.&lt;category&gt;.level=&lt;level&gt;</code> - Specify the level for a category. The level can be one of the valid levels. If unspecified, the level of the nearest parent will be inherited.
						</li><li class="listitem">
							<code class="literal">logger.&lt;category&gt;.handlers=&lt;handler&gt;[,&lt;handler&gt;,…​]</code> - Specify a comma-separated list of the handler names to be attached to this logger. The handlers must be configured in the same properties file.
						</li><li class="listitem">
							<code class="literal">logger.&lt;category&gt;.filter=&lt;filter&gt;</code> - Specify a filter for a category.
						</li><li class="listitem">
							<code class="literal">logger.&lt;category&gt;.useParentHandlers=(true|false)</code> - Specify whether log messages should cascade up to parent handlers. The default value is <code class="literal">true</code>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Handler options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<code class="literal">handler.&lt;name&gt;=&lt;className&gt;</code> - Specify the class name of the handler to instantiate. This option is mandatory.
						</p><div class="admonition note" id="handler_classnames"><div class="admonition_header">Note</div><div><div class="table" id="idm140421282066672"><p class="title"><strong>Table 4.1. Possible Class Names:</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"><!--Empty--></col><col style="width: 60%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421282061104" scope="col">Name</th><th style="text-align: left; vertical-align: top; " id="idm140421271764848" scope="col">Associated Class</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">Console</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.ConsoleHandler</code>
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">File</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.FileHandler</code>
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">Periodic</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.PeriodicRotatingFileHandler</code>
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">Size</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.SizeRotatingFileHandler</code>
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">Periodic Size</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.PeriodicSizeRotatingFileHandler</code>
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">Syslog</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.SyslogHandler</code>
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421282061104"> <p>
												<code class="literal">Async</code>
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271764848"> <p>
												<code class="literal">org.jboss.logmanager.handlers.AsyncHandler</code>
											</p>
											 </td></tr></tbody></table></div></div><p>
								The <code class="literal">Custom</code> handler can have any associated class or module. It is available in the <code class="literal">logging</code> subsystem for users to define their own log handlers.
							</p><p>
								For further information, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Log Handlers</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
							</p></div></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.level=&lt;level&gt;</code> - Restrict the level of this handler. If unspecified, the default value of ALL is retained.
						</li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.encoding=&lt;encoding&gt;</code> - Specify the character encoding, if it is supported by this handler type. If not specified, a handler-specific default is used.
						</li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.errorManager=&lt;name&gt;</code> - Specify the name of the error manager to use. The error manager must be configured in the same properties file. If unspecified, no error manager is configured.
						</li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.filter=&lt;name&gt;</code> - Specify a filter for a category. See the filter expressions for details on defining a filter.
						</li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.formatter=&lt;name&gt;</code> - Specify the name of the formatter to use, if it is supported by this handler type. The formatter must be configured in the same properties file. If not specified, messages will not be logged for most handler types.
						</li><li class="listitem"><p class="simpara">
							<code class="literal">handler.&lt;name&gt;.properties=&lt;property&gt;[,&lt;property&gt;,…​]</code> - Specify a list of JavaBean-style properties to additionally configure. A rudimentary type introspection is done to ascertain the appropriate conversion for the given property.
						</p><p class="simpara">
							In case of all file handlers in JBoss Log Manager, <code class="literal">append</code> needs to be set before the <code class="literal">fileName</code>. The order in which the properties appear in <code class="literal">handler.&lt;name&gt;.properties</code>, is the order in which the properties will be set.
						</p></li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.constructorProperties=&lt;property&gt;[,&lt;property&gt;,…​]</code> - Specify a list of properties that should be used as construction parameters. A rudimentary type introspection is done to ascertain the appropriate conversion for the given property.
						</li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.&lt;property&gt;=&lt;value&gt;</code> - Set the value of the named property.
						</li><li class="listitem">
							<code class="literal">handler.&lt;name&gt;.module=&lt;name&gt;</code> - Specify the name of the module the handler resides in.
						</li></ul></div><p>
					For further information, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Log Handler Attributes</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
				</p><div class="itemizedlist"><p class="title"><strong>Error manager options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">errorManager.&lt;name&gt;=&lt;className&gt;</code> - Specify the class name of the error manager to instantiate. This option is mandatory.
						</li><li class="listitem">
							<code class="literal">errorManager.&lt;name&gt;.properties=&lt;property&gt;[,&lt;property&gt;,…​]</code> - Specify a list of JavaBean-style properties to additionally configure. A rudimentary type introspection is done to ascertain the appropriate conversion for the given property.
						</li><li class="listitem">
							<code class="literal">errorManager.&lt;name&gt;.&lt;property&gt;=&lt;value&gt;</code> - Set the value of the named property.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Formatter options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">formatter.&lt;name&gt;=&lt;className&gt;</code> - Specify the class name of the formatter to instantiate. This option is mandatory.
						</li><li class="listitem">
							<code class="literal">formatter.&lt;name&gt;.properties=&lt;property&gt;[,&lt;property&gt;,…​]</code> - Specify a list of JavaBean-style properties to additionally configure. A rudimentary type introspection is done to ascertain the appropriate conversion for the given property.
						</li><li class="listitem">
							<code class="literal">formatter.&lt;name&gt;.constructorProperties=&lt;property&gt;[,&lt;property&gt;,…​]</code> - Specify a list of properties that should be used as construction parameters. A rudimentary type introspection is done to ascertain the appropriate conversion for the given property.
						</li><li class="listitem">
							<code class="literal">formatter.&lt;name&gt;.&lt;property&gt;=&lt;value&gt;</code> - Set the value of the named property.
						</li></ul></div><p>
					The following example shows the minimal configuration for <code class="literal">logging.properties</code> file that will log to the console.
				</p><div class="formalpara"><p class="title"><strong>Example: Minimal <code class="literal">logging.properties</code> Configuration</strong></p><p>
						
<pre class="screen"># Additional logger names to configure (root logger is always configured)
# loggers=

# Root logger level
logger.level=INFO

# Root logger handlers
logger.handlers=CONSOLE

# Console handler configuration
handler.CONSOLE=org.jboss.logmanager.handlers.ConsoleHandler
handler.CONSOLE.properties=autoFlush
handler.CONSOLE.autoFlush=true
handler.CONSOLE.formatter=PATTERN

# Formatter pattern configuration
formatter.PATTERN=org.jboss.logmanager.formatters.PatternFormatter
formatter.PATTERN.properties=pattern
formatter.PATTERN.pattern=%K{level}%d{HH:mm:ss,SSS} %-5p %C.%M(%L) [%c] %s%e%n</pre>

					</p></div></section></section><section class="section" id="logging_profiles"><div class="titlepage"><div><div><h2 class="title">4.4. Logging Profiles</h2></div></div></div><p>
				Logging profiles are independent sets of logging configurations that can be assigned to deployed applications. As with the regular <code class="literal">logging</code> subsystem, a logging profile can define handlers, categories, and a root logger, but it cannot refer to configurations in other profiles or the main <code class="literal">logging</code> subsystem. The design of logging profiles mimics the <code class="literal">logging</code> subsystem for ease of configuration.
			</p><p>
				Logging profiles allow administrators to create logging configurations that are specific to one or more applications without affecting any other logging configurations. Because each profile is defined in the server configuration, the logging configuration can be changed without requiring that the affected applications be redeployed.
			</p><p>
				For more information, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Configure a Logging Profile</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
			</p><p>
				Each logging profile can have:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A unique name. This value is required.
					</li><li class="listitem">
						Any number of log handlers.
					</li><li class="listitem">
						Any number of log categories.
					</li><li class="listitem">
						Up to one root logger.
					</li></ul></div><p>
				An application can specify a logging profile to use in its <code class="literal">MANIFEST.MF</code> file, using the <code class="literal">Logging-Profile</code> attribute.
			</p><section class="section" id="specify_a_logging_profile_in_an_application"><div class="titlepage"><div><div><h3 class="title">4.4.1. Specify a Logging Profile in an Application</h3></div></div></div><p>
					An application specifies the logging profile to use in its <code class="literal">MANIFEST.MF</code> file.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You must know the name of the logging profile that has been set up on the server for this application to use.
					</p></div></div><p>
					To add a logging profile configuration to an application, edit the <code class="literal">MANIFEST.MF</code> file.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If your application does not have a <code class="literal">MANIFEST.MF</code> file, create one with the following content to specify the logging profile name.
						</p><pre class="screen">Manifest-Version: 1.0
Logging-Profile: LOGGING_PROFILE_NAME</pre></li><li class="listitem"><p class="simpara">
							If your application already has a <code class="literal">MANIFEST.MF</code> file, add the following line to specify the logging profile name.
						</p><pre class="screen">Logging-Profile: LOGGING_PROFILE_NAME</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you are using Maven and the <code class="literal">maven-war-plugin</code>, put your <code class="literal">MANIFEST.MF</code> file in <code class="literal">src/main/resources/META-INF/</code> and add the following configuration to your <code class="literal">pom.xml</code> file:
					</p><pre class="programlisting language-xml">&lt;plugin&gt;
  &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;archive&gt;
      &lt;manifestFile&gt;src/main/resources/META-INF/MANIFEST.MF&lt;/manifestFile&gt;
    &lt;/archive&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;</pre></div></div><p>
					When the application is deployed, it will use the configuration in the specified logging profile for its log messages.
				</p><p>
					For an example of how to configure a logging profile and the application using it, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Example Logging Profile Configuration</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
				</p></section></section><section class="section" id="internationalization_and_localization"><div class="titlepage"><div><div><h2 class="title">4.5. Internationalization and Localization</h2></div></div></div><section class="section" id="introduction_2"><div class="titlepage"><div><div><h3 class="title">4.5.1. Introduction</h3></div></div></div><section class="section" id="about_internationalization"><div class="titlepage"><div><div><h4 class="title">4.5.1.1. About Internationalization</h4></div></div></div><p>
						Internationalization is the process of designing software so that it can be adapted to different languages and regions without engineering changes.
					</p></section><section class="section" id="about_localization"><div class="titlepage"><div><div><h4 class="title">4.5.1.2. About Localization</h4></div></div></div><p>
						Localization is the process of adapting internationalized software for a specific region or language by adding locale-specific components and translations of text.
					</p></section></section><section class="section" id="jboss_logging_tools_internationalization_and_localization"><div class="titlepage"><div><div><h3 class="title">4.5.2. JBoss Logging Tools Internationalization and Localization</h3></div></div></div><p>
					JBoss Logging Tools is a Java API that provides support for the internationalization and localization of log messages, exception messages, and generic strings. In addition to providing a mechanism for translation, JBoss Logging Tools also provides support for unique identifiers for each log message.
				</p><p>
					Internationalized messages and exceptions are created as method definitions inside of interfaces annotated using <code class="literal">org.jboss.logging.annotations</code> annotations. Implementing the interfaces is not necessary; JBoss Logging Tools does this at compile time. Once defined, you can use these methods to log messages or obtain exception objects in your code.
				</p><p>
					Internationalized logging and exception interfaces created with JBoss Logging Tools can be localized by creating a properties file for each bundle containing the translations for a specific language and region. JBoss Logging Tools can generate template property files for each bundle that can then be edited by a translator.
				</p><p>
					JBoss Logging Tools creates an implementation of each bundle for each corresponding translations property file in your project. All you have to do is use the methods defined in the bundles and JBoss Logging Tools ensures that the correct implementation is invoked for your current regional settings.
				</p><p>
					Message IDs and project codes are unique identifiers that are prepended to each log message. These unique identifiers can be used in documentation to make it easy to find information about log messages. With adequate documentation, the meaning of a log message can be determined from the identifiers regardless of the language that the message was written in.
				</p><p>
					The JBoss Logging Tools includes support for the following features:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">MessageLogger</span></dt><dd>
								This interface in the <code class="literal">org.jboss.logging.annotations</code> package is used to define internationalized log messages. A message logger interface is annotated with <code class="literal">@MessageLogger</code>.
							</dd><dt><span class="term">MessageBundle</span></dt><dd>
								This interface can be used to define generic translatable messages and Exception objects with internationalized messages. A message bundle is not used for creating log messages. A message bundle interface is annotated with <code class="literal">@MessageBundle</code>.
							</dd><dt><span class="term">Internationalized Log Messages</span></dt><dd><p class="simpara">
								These log messages are created by defining a method in a <code class="literal">MessageLogger</code>. The method must be annotated with the <code class="literal">@LogMessage</code> and <code class="literal">@Message</code> annotations and must specify the log message using the value attribute of <code class="literal">@Message</code>. Internationalized log messages are localized by providing translations in a properties file.
							</p><p class="simpara">
								JBoss Logging Tools generates the required logging classes for each translation at compile time and invokes the correct methods for the current locale at runtime.
							</p></dd><dt><span class="term">Internationalized Exceptions</span></dt><dd>
								An internationalized exception is an exception object returned from a method defined in a MessageBundle. These message bundles can be annotated to define a default exception message. The default message is replaced with a translation if one is found in a matching properties file for the current locale. Internationalized exceptions can also have project codes and message IDs assigned to them.
							</dd><dt><span class="term">Internationalized Messages</span></dt><dd>
								An internationalized message is a string returned from a method defined in a <code class="literal">MessageBundle</code>. Message bundle methods that return Java String objects can be annotated to define the default content of that string, known as the message. The default message is replaced with a translation if one is found in a matching properties file for the current locale.
							</dd><dt><span class="term">Translation Properties Files</span></dt><dd>
								Translation properties files are Java properties files that contain the translations of messages from one interface for one locale, country, and variant. Translation properties files are used by the JBoss Logging Tools to generate the classes that return the messages.
							</dd><dt><span class="term">JBoss Logging Tools Project Codes</span></dt><dd><p class="simpara">
								Project codes are strings of characters that identify groups of messages. They are displayed at the beginning of each log message, prepended to the message ID. Project codes are defined with the projectCode attribute of the <code class="literal">@MessageLogger</code> annotation.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									For a complete list of the new log message project code prefixes, see the <a class="link" href="#project_codes_used_in_eap" title="4.5.7.4. Project Codes Used in JBoss EAP">Project Codes</a> used in JBoss EAP 7.3.
								</p></div></div></dd><dt><span class="term">JBoss Logging Tools Message IDs</span></dt><dd>
								Message IDs are numbers that uniquely identify a log message when combined with a project code. Message IDs are displayed at the beginning of each log message, appended to the project code for the message. Message IDs are defined with the ID attribute of the <code class="literal">@Message</code> annotation.
							</dd></dl></div><p>
					The <code class="literal">logging-tools</code> quickstart that ships with JBoss EAP is a simple Maven project that provides a working example of many of the features of JBoss Logging Tools. The code examples that follow are taken from the <code class="literal">logging-tools</code> quickstart.
				</p></section><section class="section" id="creating_internationalized_loggers_messages_and_exceptions"><div class="titlepage"><div><div><h3 class="title">4.5.3. Creating Internationalized Loggers, Messages and Exceptions</h3></div></div></div><section class="section" id="create_internationalized_log_messages"><div class="titlepage"><div><div><h4 class="title">4.5.3.1. Create Internationalized Log Messages</h4></div></div></div><p>
						You can use JBoss Logging Tools to create internationalized log messages by creating <code class="literal">MessageLogger</code> interfaces.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This section does not cover all optional features or the localization of the log messages.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If you have not yet done so, configure your Maven settings to use the JBoss EAP Maven repository.
							</p><p class="simpara">
								For more information, see <a class="link" href="#configure_the_jboss_eap_maven_repository_using_the_maven_settings" title="Configure the JBoss EAP Maven Repository Using the Maven Settings">Configure the JBoss EAP Maven Repository Using the Maven Settings</a>.
							</p></li><li class="listitem"><p class="simpara">
								Configure the project’s <code class="literal">pom.xml</code> file to use JBoss Logging Tools.
							</p><p class="simpara">
								For details, see <a class="link" href="#jboss_logging_tools_maven_configuration" title="4.5.7.1. JBoss Logging Tools Maven Configuration">JBoss Logging Tools Maven Configuration</a>.
							</p></li><li class="listitem"><p class="simpara">
								Create a message logger interface by adding a Java interface to your project to contain the log message definitions.
							</p><p class="simpara">
								Name the interface to describe the log messages it will define. The log message interface has the following requirements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It must be annotated with <code class="literal">@org.jboss.logging.annotations.MessageLogger</code>.
									</li><li class="listitem">
										Optionally, it can extend <code class="literal">org.jboss.logging.BasicLogger</code>.
									</li><li class="listitem"><p class="simpara">
										The interface must define a field that is a message logger of the same type as the interface. Do this with the <code class="literal">getMessageLogger()</code> method of <code class="literal">@org.jboss.logging.Logger</code>.
									</p><div class="formalpara"><p class="title"><strong>Example: Creating a Message Logger</strong></p><p>
											
<pre class="programlisting language-java">package com.company.accounts.loggers;

import org.jboss.logging.BasicLogger;
import org.jboss.logging.Logger;
import org.jboss.logging.annotations.MessageLogger;

@MessageLogger(projectCode="")
interface AccountsLogger extends BasicLogger {
   AccountsLogger LOGGER = Logger.getMessageLogger(
         AccountsLogger.class,
         AccountsLogger.class.getPackage().getName() );
}</pre>

										</p></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Add a method definition to the interface for each log message.
							</p><p class="simpara">
								Name each method descriptively for the log message that it represents. Each method has the following requirements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The method must return <code class="literal">void</code>.
									</li><li class="listitem">
										It must be annotated with the <code class="literal">@org.jboss.logging.annotation.LogMessage</code> annotation.
									</li><li class="listitem">
										It must be annotated with the <code class="literal">@org.jboss.logging.annotations.Message</code> annotation.
									</li><li class="listitem">
										The default log level is <code class="literal">INFO</code>.
									</li><li class="listitem"><p class="simpara">
										The value attribute of <code class="literal">@org.jboss.logging.annotations.Message</code> contains the default log message, which is used if no translation is available.
									</p><pre class="programlisting language-java">@LogMessage
@Message(value = "Customer query failed, Database not available.")
void customerQueryFailDBClosed();</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								Invoke the methods by adding the calls to the interface methods in your code where the messages must be logged from.
							</p><p class="simpara">
								Creating implementations of the interfaces is not necessary, the annotation processor does this for you when the project is compiled.
							</p><pre class="programlisting language-java">AccountsLogger.LOGGER.customerQueryFailDBClosed();</pre><p class="simpara">
								The custom loggers are subclassed from <code class="literal">BasicLogger</code>, so the logging methods of <code class="literal">BasicLogger</code> can also be used. It is not necessary to create other loggers to log non-internationalized messages.
							</p><pre class="programlisting language-java">AccountsLogger.LOGGER.error("Invalid query syntax.");</pre></li><li class="listitem">
								The project now supports one or more internationalized loggers that can be localized.
							</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">logging-tools</code> quickstart that ships with JBoss EAP is a simple Maven project that provides a working example of how to use JBoss Logging Tools.
						</p></div></div></section><section class="section" id="create_and_use_internationalized_messages"><div class="titlepage"><div><div><h4 class="title">4.5.3.2. Create and Use Internationalized Messages</h4></div></div></div><p>
						This procedure demonstrates how to create and use internationalized messages.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This section does not cover all optional features or the process of localizing those messages.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								If you have not yet done so, configure your Maven settings to use the JBoss EAP Maven repository. For more information, see <a class="link" href="#configure_the_jboss_eap_maven_repository_using_the_maven_settings" title="Configure the JBoss EAP Maven Repository Using the Maven Settings">Configure the JBoss EAP Maven Repository Using the Maven Settings</a>.
							</li><li class="listitem">
								Configure the project’s <code class="literal">pom.xml</code> file to use JBoss Logging Tools. For details, see <a class="link" href="#jboss_logging_tools_maven_configuration" title="4.5.7.1. JBoss Logging Tools Maven Configuration">JBoss Logging Tools Maven Configuration</a>.
							</li><li class="listitem"><p class="simpara">
								Create an interface for the exceptions. JBoss Logging Tools defines internationalized messages in interfaces. Name each interface descriptively for the messages that it contains. The interface has the following requirements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It must be declared as <code class="literal">public</code>.
									</li><li class="listitem">
										It must be annotated with <code class="literal">@org.jboss.logging.annotations.MessageBundle</code>.
									</li><li class="listitem"><p class="simpara">
										The interface must define a field that is a message bundle of the same type as the interface.
									</p><div class="formalpara"><p class="title"><strong>Example: Create a <code class="literal">MessageBundle</code> Interface</strong></p><p>
											
<pre class="programlisting language-java">@MessageBundle(projectCode="")
public interface GreetingMessageBundle {
   GreetingMessageBundle MESSAGES = Messages.getBundle(GreetingMessageBundle.class);
}</pre>

										</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Calling <code class="literal">Messages.getBundle(GreetingMessagesBundle.class)</code> is equivalent to calling <code class="literal">Messages.getBundle(GreetingMessagesBundle.class, Locale.getDefault())</code>.
										</p><p>
											<code class="literal">Locale.getDefault()</code> gets the current value of the default locale for this instance of the Java Virtual Machine. The Java Virtual Machine sets the default locale during startup, based on the host environment. It is used by many locale-sensitive methods if no locale is explicitly specified. It can be changed using the <code class="literal">setDefault</code> method.
										</p><p>
											See <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Set the Default Locale of the Server</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for more information.
										</p></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Add a method definition to the interface for each message. Name each method descriptively for the message that it represents. Each method has the following requirements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It must return an object of type <code class="literal">String</code>.
									</li><li class="listitem">
										It must be annotated with the <code class="literal">@org.jboss.logging.annotations.Message</code> annotation.
									</li><li class="listitem"><p class="simpara">
										The value attribute of <code class="literal">@org.jboss.logging.annotations.Message</code> must be set to the default message. This is the message that is used if no translation is available.
									</p><pre class="programlisting language-java">@Message(value = "Hello world.")
String helloworldString();</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								Invoke the interface methods in your application where you need to obtain the message:
							</p><pre class="programlisting language-java">System.out.println(helloworldString());</pre></li></ol></div><p>
						The project now supports internationalized message strings that can be localized.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							See the <code class="literal">logging-tools</code> quickstart that ships with JBoss EAP for a complete working example.
						</p></div></div></section><section class="section" id="create_internationalized_exceptions"><div class="titlepage"><div><div><h4 class="title">4.5.3.3. Create Internationalized Exceptions</h4></div></div></div><p>
						You can use JBoss Logging Tools to create and use internationalized exceptions.
					</p><p>
						The following instructions assume that you want to add internationalized exceptions to an existing software project that is built using either Red Hat CodeReady Studio or Maven.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This section does not cover all optional features or the process of localization of those exceptions.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Configure the project’s <code class="literal">pom.xml</code> file to use JBoss Logging Tools. For details, see <a class="link" href="#jboss_logging_tools_maven_configuration" title="4.5.7.1. JBoss Logging Tools Maven Configuration">JBoss Logging Tools Maven Configuration</a>.
							</li><li class="listitem"><p class="simpara">
								Create an interface for the exceptions. JBoss Logging Tools defines internationalized exceptions in interfaces. Name each interface descriptively for the exceptions that it defines. The interface has the following requirements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It must be declared as <code class="literal">public</code>.
									</li><li class="listitem">
										It must be annotated with <code class="literal">@MessageBundle</code>.
									</li><li class="listitem"><p class="simpara">
										The interface must define a field that is a message bundle of the same type as the interface.
									</p><div class="formalpara"><p class="title"><strong>Example: Create an <code class="literal">ExceptionBundle</code> Interface</strong></p><p>
											
<pre class="programlisting language-java">@MessageBundle(projectCode="")
public interface ExceptionBundle {
   ExceptionBundle EXCEPTIONS = Messages.getBundle(ExceptionBundle.class);
}</pre>

										</p></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Add a method definition to the interface for each exception. Name each method descriptively for the exception that it represents. Each method has the following requirements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										It must return an <code class="literal">Exception</code> object, or a sub-type of <code class="literal">Exception</code>.
									</li><li class="listitem">
										It must be annotated with the <code class="literal">@org.jboss.logging.annotations.Message</code> annotation.
									</li><li class="listitem">
										The value attribute of <code class="literal">@org.jboss.logging.annotations.Message</code> must be set to the default exception message. This is the message that is used if no translation is available.
									</li><li class="listitem"><p class="simpara">
										If the exception being returned has a constructor that requires parameters in addition to a message string, then those parameters must be supplied in the method definition using the <code class="literal">@Param</code> annotation. The parameters must be the same type and order as they are in the constructor of the exception.
									</p><pre class="programlisting language-java">@Message(value = "The config file could not be opened.")
IOException configFileAccessError();

@Message(id = 13230, value = "Date string '%s' was invalid.")
ParseException dateWasInvalid(String dateString, @Param int errorOffset);</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								Invoke the interface methods in your code where you need to obtain one of the exceptions. The methods do not throw the exceptions, they return the exception object, which you can then throw.
							</p><pre class="programlisting language-java">try {
   propsInFile=new File(configname);
   props.load(new FileInputStream(propsInFile));
}
catch(IOException ioex) {
  //in case props file does not exist
   throw ExceptionBundle.EXCEPTIONS.configFileAccessError();
}</pre></li></ol></div><p>
						The project now supports internationalized exceptions that can be localized.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							See the <code class="literal">logging-tools</code> quickstart that ships with JBoss EAP for a complete working example.
						</p></div></div></section></section><section class="section" id="localizing_internationalized_loggers_messages_and_exceptions"><div class="titlepage"><div><div><h3 class="title">4.5.4. Localizing Internationalized Loggers, Messages and Exceptions</h3></div></div></div><section class="section" id="generate_new_translation_properties_files_with_maven"><div class="titlepage"><div><div><h4 class="title">4.5.4.1. Generate New Translation Properties Files with Maven</h4></div></div></div><p>
						Projects that are built using Maven can generate empty translation property files for each <code class="literal">MessageLogger</code> and <code class="literal">MessageBundle</code> it contains. These files can then be used as new translation property files.
					</p><p>
						The following procedure demonstrates how to configure a Maven project to generate new translation property files.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must already have a working Maven project.
							</li><li class="listitem">
								The project must already be configured for JBoss Logging Tools.
							</li><li class="listitem">
								The project must contain one or more interfaces that define internationalized log messages or exceptions.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Generate the Translation Properties Files</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Add the Maven configuration by adding the <code class="literal">-AgenereatedTranslationFilePath</code> compiler argument to the Maven compiler plug-in configuration, and assign it the path where the new files will be created.
							</p><p class="simpara">
								This configuration creates the new files in the <code class="literal">target/generated-translation-files</code> directory of your Maven project.
							</p><div class="formalpara"><p class="title"><strong>Example: Define the Translation File Path</strong></p><p>
									
<pre class="programlisting language-xml">&lt;plugin&gt;
   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
   &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
   &lt;version&gt;2.3.2&lt;/version&gt;
   &lt;configuration&gt;
      &lt;source&gt;1.6&lt;/source&gt;
      &lt;target&gt;1.6&lt;/target&gt;
      &lt;compilerArgument&gt;
      -AgeneratedTranslationFilesPath=${project.basedir}/target/generated-translation-files
      &lt;/compilerArgument&gt;
      &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;
   &lt;/configuration&gt;
&lt;/plugin&gt;</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Build the project using Maven:
							</p><pre class="screen">$ mvn compile</pre><p class="simpara">
								One properties file is created for each interface annotated with <code class="literal">@MessageBundle</code> or <code class="literal">@MessageLogger</code>.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The new files are created in a subdirectory corresponding to the Java package in which each interface is declared.
									</li><li class="listitem"><p class="simpara">
										Each new file is named using the following pattern where <code class="literal">INTERFACE_NAME</code> is the name of the interface used to generated the file.
									</p><pre class="screen">INTERFACE_NAME.i18n_locale_COUNTRY_VARIANT.properties</pre></li></ul></div></li></ol></div><p>
						The resulting files can now be copied into your project as the basis for new translations.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							See the <code class="literal">logging-tools</code> quickstart that ships with JBoss EAP for a complete working example.
						</p></div></div></section><section class="section" id="translate_an_internationalized_logger_exception_or_message"><div class="titlepage"><div><div><h4 class="title">4.5.4.2. Translate an Internationalized Logger, Exception, or Message</h4></div></div></div><p>
						Properties files can be used to provide translations for logging and exception messages defined in interfaces using JBoss Logging Tools.
					</p><p>
						The following procedure shows how to create and use a translation properties file, and assumes that you already have a project with one or more interfaces defined for internationalized exceptions or log messages.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								You must already have a working Maven project.
							</li><li class="listitem">
								The project must already be configured for JBoss Logging Tools.
							</li><li class="listitem">
								The project must contain one or more interfaces that define internationalized log messages or exceptions.
							</li><li class="listitem">
								The project must be configured to generate template translation property files.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Translate an Internationalized Logger, Exception, or Message</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Run the following command to create the template translation properties files:
							</p><pre class="screen">$ mvn compile</pre></li><li class="listitem">
								Copy the template for the interfaces that you want to translate from the directory where they were created into the <code class="literal">src/main/resources</code> directory of your project. The properties files must be in the same package as the interfaces they are translating.
							</li><li class="listitem">
								Rename the copied template file to indicate the language it will contain. For example: <code class="literal">GreeterLogger.i18n_fr_FR.properties</code>.
							</li><li class="listitem"><p class="simpara">
								Edit the contents of the new translation properties file to contain the appropriate translation:
							</p><pre class="screen"># Level: Logger.Level.INFO
# Message: Hello message sent.
logHelloMessageSent=Bonjour message envoyé.</pre></li><li class="listitem">
								Repeat the process of copying the template and modifying it for each translation in the bundle.
							</li></ol></div><p>
						The project now contains translations for one or more message or logger bundles. Building the project generates the appropriate classes to log messages with the supplied translations. It is not necessary to explicitly invoke methods or supply parameters for specific languages, JBoss Logging Tools automatically uses the correct class for the current locale of the application server.
					</p><p>
						The source code of the generated classes can be viewed under <code class="literal">target/generated-sources/annotations/</code>.
					</p></section></section><section class="section" id="customizing_internationalized_log_messages"><div class="titlepage"><div><div><h3 class="title">4.5.5. Customizing Internationalized Log Messages</h3></div></div></div><section class="section" id="add_message_ids_and_project_codes_to_log_messages"><div class="titlepage"><div><div><h4 class="title">4.5.5.1. Add Message IDs and Project Codes to Log Messages</h4></div></div></div><p>
						This procedure demonstrates how to add message IDs and project codes to internationalized log messages created using JBoss Logging Tools. A log message must have both a project code and message ID to be displayed in the log. If a message does not have both a project code and a message ID, then neither is displayed.
					</p><div class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								You must already have a project with internationalized log messages. For details, see <a class="link" href="#create_internationalized_log_messages" title="4.5.3.1. Create Internationalized Log Messages">Create Internationalized Log Messages</a>.
							</li><li class="listitem">
								You need to know the project code you will be using. You can use a single project code, or define different ones for each interface.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Add Message IDs and Project Codes to Log Messages</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Specify the project code for the interface by using the projectCode attribute of the <code class="literal">@MessageLogger</code> annotation attached to a custom logger interface. All messages that are defined in the interface will use that project code.
							</p><pre class="programlisting language-java">@MessageLogger(projectCode="ACCNTS")
interface AccountsLogger extends BasicLogger {

}</pre></li><li class="listitem"><p class="simpara">
								Specify a message ID for each message using the <code class="literal">id</code> attribute of the <code class="literal">@Message</code> annotation attached to the method that defines the message.
							</p><pre class="programlisting language-java">@LogMessage
@Message(id=43, value = "Customer query failed, Database not available.")  void customerQueryFailDBClosed();</pre></li><li class="listitem"><p class="simpara">
								The log messages that have both a message ID and project code associated with them will prepend these to the logged message.
							</p><pre class="screen">10:55:50,638 INFO  [com.company.accounts.ejb] (MSC service thread 1-4) ACCNTS000043: Customer query failed, Database not available.</pre></li></ol></div></section><section class="section" id="specify_the_log_level_for_a_message"><div class="titlepage"><div><div><h4 class="title">4.5.5.2. Specify the Log Level for a Message</h4></div></div></div><p>
						The default log level of a message defined by an interface by JBoss Logging Tools is <code class="literal">INFO</code>. A different log level can be specified with the <code class="literal">level</code> attribute of the <code class="literal">@LogMessage</code> annotation attached to the logging method. Use the following procedure to specify a different log level.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Add the <code class="literal">level</code> attribute to the <code class="literal">@LogMessage</code> annotation of the log message method definition.
							</li><li class="listitem"><p class="simpara">
								Assign the log level for this message using the <code class="literal">level</code> attribute. The valid values for <code class="literal">level</code> are the six enumerated constants defined in <code class="literal">org.jboss.logging.Logger.Level</code>: <code class="literal">DEBUG</code>, <code class="literal">ERROR</code>, <code class="literal">FATAL</code>, <code class="literal">INFO</code>, <code class="literal">TRACE</code>, and <code class="literal">WARN</code>.
							</p><pre class="programlisting language-java">import org.jboss.logging.Logger.Level;

@LogMessage(level=Level.ERROR)
@Message(value = "Customer query failed, Database not available.")
void customerQueryFailDBClosed();</pre></li></ol></div><p>
						Invoking the logging method in the above example will produce a log message at the level of <code class="literal">ERROR</code>.
					</p><pre class="screen">10:55:50,638 ERROR  [com.company.app.Main] (MSC service thread 1-4)
 Customer query failed, Database not available.</pre></section><section class="section" id="customize_log_messages_with_parameters"><div class="titlepage"><div><div><h4 class="title">4.5.5.3. Customize Log Messages with Parameters</h4></div></div></div><p>
						Custom logging methods can define parameters. These parameters are used to pass additional information to be displayed in the log message. Where the parameters appear in the log message is specified in the message itself using either explicit or ordinary indexing.
					</p><div class="orderedlist"><p class="title"><strong>Customize Log Messages with Parameters</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Add parameters of any type to the method definition. Regardless of type, the String representation of the parameter is what is displayed in the message.
							</li><li class="listitem"><p class="simpara">
								Add parameter references to the log message. References can use explicit or ordinary indexes.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To use ordinary indexes, insert <code class="literal">%s</code> characters in the message string where you want each parameter to appear. The first instance of <code class="literal">%s</code> will insert the first parameter, the second instance will insert the second parameter, and so on.
									</li><li class="listitem">
										To use explicit indexes, insert <code class="literal">%#$s</code> characters in the message, where # indicates the number of the parameter that you wish to appear.
									</li></ul></div></li></ol></div><p>
						Using explicit indexes allows the parameter references in the message to be in a different order than they are defined in the method. This is important for translated messages that might require different ordering of parameters.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The number of parameters must match the number of references to the parameters in the specified message or the code will not compile. A parameter marked with the <code class="literal">@Cause</code> annotation is not included in the number of parameters.
						</p></div></div><p>
						The following is an example of message parameters using ordinary indexes:
					</p><pre class="programlisting language-java">@LogMessage(level=Logger.Level.DEBUG)
@Message(id=2, value="Customer query failed, customerid:%s, user:%s")
void customerLookupFailed(Long customerid, String username);</pre><p>
						The following is an example of message parameters using explicit indexes:
					</p><pre class="programlisting language-java">@LogMessage(level=Logger.Level.DEBUG)
@Message(id=2, value="Customer query failed, user:%2$s, customerid:%1$s")
void customerLookupFailed(Long customerid, String username);</pre></section><section class="section" id="specify_an_exception_as_the_cause_of_a_log_message"><div class="titlepage"><div><div><h4 class="title">4.5.5.4. Specify an Exception as the Cause of a Log Message</h4></div></div></div><p>
						JBoss Logging Tools allows one parameter of a custom logging method to be defined as the cause of the message. This parameter must be the <code class="literal">Throwable</code> type or any of its sub-classes, and is marked with the <code class="literal">@Cause</code> annotation. This parameter cannot be referenced in the log message like other parameters, and is displayed after the log message.
					</p><p>
						The following procedure shows how to update a logging method using the <code class="literal">@Cause</code> parameter to indicate the "causing" exception. It is assumed that you have already created internationalized logging messages to which you want to add this functionality.
					</p><div class="orderedlist"><p class="title"><strong>Specify an Exception as the Cause of a Log Message</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Add a parameter of the type <code class="literal">Throwable</code> or its subclass to the method.
							</p><pre class="programlisting language-java">@LogMessage
@Message(id=404, value="Loading configuration failed. Config file:%s")
void loadConfigFailed(Exception ex, File file);</pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">@Cause</code> annotation to the parameter.
							</p><pre class="programlisting language-java">import org.jboss.logging.annotations.Cause

@LogMessage
@Message(value = "Loading configuration failed. Config file: %s")
void loadConfigFailed(@Cause Exception ex, File file);</pre></li><li class="listitem"><p class="simpara">
								Invoke the method. When the method is invoked in your code, an object of the correct type must be passed and will be displayed after the log message.
							</p><pre class="programlisting language-java">try
{
   confFile=new File(filename);
   props.load(new FileInputStream(confFile));
}
catch(Exception ex) //in case properties file cannot be read
{
     ConfigLogger.LOGGER.loadConfigFailed(ex, filename);
}</pre></li></ol></div><p>
						The following is the output of the above code example if the code throws an exception of type <code class="literal">FileNotFoundException</code>:
					</p><pre class="screen">10:50:14,675 INFO [com.company.app.Main] (MSC service thread 1-3) Loading configuration failed. Config file: customised.properties
java.io.FileNotFoundException: customised.properties (No such file or directory)
   at java.io.FileInputStream.open(Native Method)
   at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:120)
   at com.company.app.demo.Main.openCustomProperties(Main.java:70)
   at com.company.app.Main.go(Main.java:53)
   at com.company.app.Main.main(Main.java:43)</pre></section></section><section class="section" id="customizing_internationalized_exceptions"><div class="titlepage"><div><div><h3 class="title">4.5.6. Customizing Internationalized Exceptions</h3></div></div></div><section class="section" id="add_message_ids_and_project_codes_to_exception_messages"><div class="titlepage"><div><div><h4 class="title">4.5.6.1. Add Message IDs and Project Codes to Exception Messages</h4></div></div></div><p>
						Message IDs and project codes are unique identifiers that are prepended to each message displayed by internationalized exceptions. These identifying codes make it possible to create a reference for all the exception messages in an application. This allows someone to look up the meaning of an exception message written in language that they do not understand.
					</p><p>
						The following procedure demonstrates how to add message IDs and project codes to internationalized exception messages created using JBoss Logging Tools.
					</p><div class="orderedlist"><p class="title"><strong>Prerequisites</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								You must already have a project with internationalized exceptions. For details, see <a class="link" href="#create_internationalized_exceptions" title="4.5.3.3. Create Internationalized Exceptions">Create Internationalized Exceptions</a>.
							</li><li class="listitem">
								You need to know the project code you will be using. You can use a single project code, or define different ones for each interface.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Add Message IDs and Project Codes to Exception Messages</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Specify the project code using the <code class="literal">projectCode</code> attribute of the <code class="literal">@MessageBundle</code> annotation attached to a exception bundle interface. All messages that are defined in the interface will use that project code.
							</p><pre class="programlisting language-java">@MessageBundle(projectCode="ACCTS")
interface ExceptionBundle
{
   ExceptionBundle EXCEPTIONS = Messages.getBundle(ExceptionBundle.class);
}</pre></li><li class="listitem"><p class="simpara">
								Specify message IDs for each exception using the <code class="literal">id</code> attribute of the <code class="literal">@Message</code> annotation attached to the method that defines the exception.
							</p><pre class="programlisting language-java">@Message(id=143, value = "The config file could not be opened.")
IOException configFileAccessError();</pre></li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							A message that has both a project code and message ID displays them prepended to the message. If a message does not have both a project code and a message ID, neither is displayed.
						</p></div></div><div class="formalpara"><p class="title"><strong>Example: Internationalized Exception</strong></p><p>
							This exception bundle interface example uses the project code of "ACCTS". It contains a single exception method with the ID of "143".
						</p></div><pre class="programlisting language-java">@MessageBundle(projectCode="ACCTS")
interface ExceptionBundle
{
    ExceptionBundle EXCEPTIONS = Messages.getBundle(ExceptionBundle.class);

    @Message(id=143, value = "The config file could not be opened.")
    IOException configFileAccessError();
}</pre><p>
						The exception object can be obtained and thrown using the following code:
					</p><pre class="programlisting language-java">throw ExceptionBundle.EXCEPTIONS.configFileAccessError();</pre><p>
						This would display an exception message like the following:
					</p><pre class="screen">Exception in thread "main" java.io.IOException: ACCTS000143: The config file could not be opened.
at com.company.accounts.Main.openCustomProperties(Main.java:78)
at com.company.accounts.Main.go(Main.java:53)
at com.company.accounts.Main.main(Main.java:43)</pre></section><section class="section" id="customize_exception_messages_with_parameters"><div class="titlepage"><div><div><h4 class="title">4.5.6.2. Customize Exception Messages with Parameters</h4></div></div></div><p>
						Exception bundle methods that define exceptions can specify parameters to pass additional information to be displayed in the exception message. The exact position of the parameters in the exception message is specified in the message itself using either explicit or ordinary indexing.
					</p><div class="orderedlist"><p class="title"><strong>Customize Exception Messages with Parameters</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								Add parameters of any type to the method definition. Regardless of type, the String representation of the parameter is what is displayed in the message.
							</li><li class="listitem"><p class="simpara">
								Add parameter references to the exception message. References can use explicit or ordinary indexes.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										To use ordinary indexes, insert <code class="literal">%s</code> characters in the message string where you want each parameter to appear. The first instance of <code class="literal">%s</code> will insert the first parameter, the second instance will insert the second parameter, and so on.
									</li><li class="listitem">
										To use explicit indexes, insert <code class="literal">%#$s</code> characters in the message, where # indicates the number of the parameter that you wish to appear.
									</li></ul></div></li></ol></div><p>
						Using explicit indexes allows the parameter references in the message to be in a different order than they are defined in the method. This is important for translated messages that might require different ordering of parameters.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							The number of parameters must match the number of references to the parameters in the specified message, or the code will not compile. A parameter marked with the <code class="literal">@Cause</code> annotation is not included in the number of parameters.
						</p></div></div><div class="formalpara"><p class="title"><strong>Example: Using Ordinary Indexes</strong></p><p>
							
<pre class="programlisting language-java">@Message(id=2, value="Customer query failed, customerid:%s, user:%s")
void customerLookupFailed(Long customerid, String username);</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: Using Explicit Indexes</strong></p><p>
							
<pre class="programlisting language-java">@Message(id=2, value="Customer query failed, user:%2$s, customerid:%1$s")
void customerLookupFailed(Long customerid, String username);</pre>

						</p></div></section><section class="section" id="specify_one_exception_as_the_cause_of_another_exception"><div class="titlepage"><div><div><h4 class="title">4.5.6.3. Specify One Exception as the Cause of Another Exception</h4></div></div></div><p>
						Exceptions returned by exception bundle methods can have another exception specified as the underlying cause. This is done by adding a parameter to the method and annotating the parameter with <code class="literal">@Cause</code>. This parameter is used to pass the causing exception, and cannot be referenced in the exception message.
					</p><p>
						The following procedure shows how to update a method from an exception bundle using the <code class="literal">@Cause</code> parameter to indicate the causing exception. It is assumed that you have already created an exception bundle to which you want to add this functionality.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Add a parameter of the type <code class="literal">Throwable</code> or its subclass to the method.
							</p><pre class="programlisting language-java">@Message(id=328, value = "Error calculating: %s.")
ArithmeticException calculationError(Throwable cause, String msg);</pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">@Cause</code> annotation to the parameter.
							</p><pre class="programlisting language-java">import org.jboss.logging.annotations.Cause

@Message(id=328, value = "Error calculating: %s.")
ArithmeticException calculationError(@Cause Throwable cause, String msg);</pre></li><li class="listitem"><p class="simpara">
								Invoke the interface method to obtain an exception object. The most common use case is to throw a new exception from a <code class="literal">catch</code> block, specifying the caught exception as the cause.
							</p><pre class="programlisting language-java">try
{
   ...
}
catch(Exception ex)
{
   throw ExceptionBundle.EXCEPTIONS.calculationError(
                                    ex, "calculating payment due per day");
}</pre></li></ol></div><p>
						The following is an example of specifying an exception as the cause of another exception. This exception bundle defines a single method that returns an exception of type <code class="literal">ArithmeticException</code>.
					</p><pre class="programlisting language-java">@MessageBundle(projectCode = "TPS")
interface CalcExceptionBundle
{
    CalcExceptionBundle EXCEPTIONS = Messages.getBundle(CalcExceptionBundle.class);

    @Message(id=328, value = "Error calculating: %s.")
    ArithmeticException calcError(@Cause Throwable cause, String value);
}</pre><p>
						The following example demonstrates an operation that throws an exception because it attempts to divide an integer by zero. The exception is caught, and a new exception is created using the first one as the cause.
					</p><pre class="programlisting language-java">int totalDue = 5;
int daysToPay = 0;
int amountPerDay;

try
{
   amountPerDay = totalDue/daysToPay;
}
catch (Exception ex)
{
   throw CalcExceptionBundle.EXCEPTIONS.calcError(ex, "payments per day");
}</pre><p>
						The following is the exception message generated from the previous example:
					</p><pre class="screen">Exception in thread "main" java.lang.ArithmeticException: TPS000328: Error calculating: payments per day.
    at com.company.accounts.Main.go(Main.java:58)
    at com.company.accounts.Main.main(Main.java:43)
Caused by: java.lang.ArithmeticException: / by zero
    at com.company.accounts.Main.go(Main.java:54)
    ... 1 more</pre></section></section><section class="section" id="jboss_logging_tools_references"><div class="titlepage"><div><div><h3 class="title">4.5.7. JBoss Logging Tools References</h3></div></div></div><section class="section" id="jboss_logging_tools_maven_configuration"><div class="titlepage"><div><div><h4 class="title">4.5.7.1. JBoss Logging Tools Maven Configuration</h4></div></div></div><p>
						The following procedure configures a Maven project to use JBoss Logging and JBoss Logging Tools for internationalization.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If you have not yet done so, configure your Maven settings to use the JBoss EAP repository. For more information, see <a class="link" href="#configure_the_jboss_eap_maven_repository_using_the_maven_settings" title="Configure the JBoss EAP Maven Repository Using the Maven Settings">Configure the JBoss EAP Maven Repository Using the Maven Settings</a>.
							</p><p class="simpara">
								Include the <code class="literal">jboss-eap-javaee8</code> BOM in the <code class="literal">&lt;dependencyManagement&gt;</code> section of the project’s <code class="literal">pom.xml</code> file.
							</p><pre class="programlisting language-xml">&lt;dependencyManagement&gt;
  &lt;dependencies&gt;
    &lt;!-- JBoss distributes a complete set of Java EE APIs including
      a Bill of Materials (BOM). A BOM specifies the versions of a "stack" (or
      a collection) of artifacts. We use this here so that we always get the correct versions of artifacts.
      Here we use the jboss-javaee-7.0 stack (you can
      read this as the JBoss stack of the Java EE APIs). You can actually
      use this stack with any version of JBoss EAP that implements Java EE. --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.jboss.bom&lt;/groupId&gt;
       &lt;artifactId&gt;jboss-eap-javaee8&lt;/artifactId&gt;
       &lt;version&gt;7.3.0.CD18&lt;/version&gt;
       &lt;type&gt;pom&lt;/type&gt;
       &lt;scope&gt;import&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;dependencies&gt;
&lt;dependencyManagement&gt;</pre></li><li class="listitem"><p class="simpara">
								Add the Maven dependencies to the project’s <code class="literal">pom.xml</code> file:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Add the <code class="literal">jboss-logging</code> dependency for access to JBoss Logging framework.
									</li><li class="listitem"><p class="simpara">
										If you plan to use the JBoss Logging Tools, also add the <code class="literal">jboss-logging-processor</code> dependency.
									</p><p class="simpara">
										Both of these dependencies are available in JBoss EAP BOM that was added in the previous step, so the scope element of each can be set to <code class="literal">provided</code> as shown.
									</p><pre class="programlisting language-xml">&lt;!-- Add the JBoss Logging Tools dependencies --&gt;
&lt;!-- The jboss-logging API --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;
   &lt;artifactId&gt;jboss-logging&lt;/artifactId&gt;
   &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;!-- Add the jboss-logging-tools processor if you are using JBoss Tools  --&gt;
&lt;dependency&gt;
   &lt;groupId&gt;org.jboss.logging&lt;/groupId&gt;
   &lt;artifactId&gt;jboss-logging-processor&lt;/artifactId&gt;
   &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</pre></li></ol></div></li><li class="listitem"><p class="simpara">
								The maven-compiler-plugin must be at least version <code class="literal">3.1</code> and configured for target and generated sources of <code class="literal">1.8</code>.
							</p><pre class="programlisting language-xml">&lt;plugin&gt;
   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
   &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
   &lt;version&gt;3.1&lt;/version&gt;
   &lt;configuration&gt;
      &lt;source&gt;1.8&lt;/source&gt;
      &lt;target&gt;1.8&lt;/target&gt;
   &lt;/configuration&gt;
&lt;/plugin&gt;</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For a complete working example of a <code class="literal">pom.xml</code> file that is configured to use JBoss Logging Tools, see the <code class="literal">logging-tools</code> quickstart that ships with JBoss EAP.
						</p></div></div></section><section class="section" id="translation_property_file_format"><div class="titlepage"><div><div><h4 class="title">4.5.7.2. Translation Property File Format</h4></div></div></div><p>
						The property files used for the translation of messages in JBoss Logging Tools are standard Java property files. The format of the file is the simple line-oriented, <code class="literal">key=value</code> pair format described in the <a class="link mimir-link-warn" href="https://docs.oracle.com/javase/8/docs/api/java/util/Properties.html" title="Mimir does not include content from: docs.oracle.com"><code class="literal">java.util.Properties</code> class documentation</a>.
					</p><p>
						The file name format has the following format:
					</p><pre class="screen">InterfaceName.i18n_locale_COUNTRY_VARIANT.properties</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">InterfaceName</code> is the name of the interface that the translations apply to.
							</li><li class="listitem">
								<code class="literal">locale</code>, <code class="literal">COUNTRY</code>, and <code class="literal">VARIANT</code> identify the regional settings that the translation applies to.
							</li><li class="listitem">
								<code class="literal">locale</code> and <code class="literal">COUNTRY</code> specify the language and country using the ISO-639 and ISO-3166 Language and Country codes respectively. <code class="literal">COUNTRY</code> is optional.
							</li><li class="listitem">
								<code class="literal">VARIANT</code> is an optional identifier that can be used to identify translations that only apply to a specific operating system or browser.
							</li></ul></div><p>
						The properties contained in the translation file are the names of the methods from the interface being translated. The assigned value of the property is the translation. If a method is overloaded, then this is indicated by appending a dot and then the number of parameters to the name. Methods for translation can only be overloaded by supplying a different number of parameters.
					</p><div class="formalpara"><p class="title"><strong>Example: Translation Properties File</strong></p><p>
							File name: <code class="literal">GreeterService.i18n_fr_FR_POSIX.properties</code>.
						</p></div><pre class="screen"># Level: Logger.Level.INFO
# Message: Hello message sent.
logHelloMessageSent=Bonjour message envoyé.</pre></section><section class="section" id="jboss_logging_tools_annotations_reference"><div class="titlepage"><div><div><h4 class="title">4.5.7.3. JBoss Logging Tools Annotations Reference</h4></div></div></div><p>
						The following annotations are defined in JBoss Logging for use with internationalization and localization of log messages, strings, and exceptions.
					</p><div class="table" id="idm140421275321120"><p class="title"><strong>Table 4.2. JBoss Logging Tools Annotations</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 35%; " class="col_1"><!--Empty--></col><col style="width: 16%; " class="col_2"><!--Empty--></col><col style="width: 33%; " class="col_3"><!--Empty--></col><col style="width: 16%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265044576" scope="col">Annotation</th><th align="left" valign="top" id="idm140421265043488" scope="col">Target</th><th align="left" valign="top" id="idm140421265042400" scope="col">Description</th><th align="left" valign="top" id="idm140421265041312" scope="col">Attributes</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265044576"> <p>
										@MessageBundle
									</p>
									 </td><td align="left" valign="top" headers="idm140421265043488"> <p>
										Interface
									</p>
									 </td><td align="left" valign="top" headers="idm140421265042400"> <p>
										Defines the interface as a message bundle.
									</p>
									 </td><td align="left" valign="top" headers="idm140421265041312"> <p>
										projectCode
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421265044576"> <p>
										@MessageLogger
									</p>
									 </td><td align="left" valign="top" headers="idm140421265043488"> <p>
										Interface
									</p>
									 </td><td align="left" valign="top" headers="idm140421265042400"> <p>
										Defines the interface as a message logger.
									</p>
									 </td><td align="left" valign="top" headers="idm140421265041312"> <p>
										projectCode
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421265044576"> <p>
										@Message
									</p>
									 </td><td align="left" valign="top" headers="idm140421265043488"> <p>
										Method
									</p>
									 </td><td align="left" valign="top" headers="idm140421265042400"> <p>
										Can be used in message bundles and message loggers. In a message bundle it defines the method as being one that returns a localized String or Exception object. In a message logger it defines a method as being a localized logger.
									</p>
									 </td><td align="left" valign="top" headers="idm140421265041312"> <p>
										value, id
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421265044576"> <p>
										@LogMessage
									</p>
									 </td><td align="left" valign="top" headers="idm140421265043488"> <p>
										Method
									</p>
									 </td><td align="left" valign="top" headers="idm140421265042400"> <p>
										Defines a method in a message logger as being a logging method.
									</p>
									 </td><td align="left" valign="top" headers="idm140421265041312"> <p>
										level (default <code class="literal">INFO</code>)
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421265044576"> <p>
										@Cause
									</p>
									 </td><td align="left" valign="top" headers="idm140421265043488"> <p>
										Parameter
									</p>
									 </td><td align="left" valign="top" headers="idm140421265042400"> <p>
										Defines a parameter as being one that passes an Exception as the cause of either a Log message or another Exception.
									</p>
									 </td><td align="left" valign="top" headers="idm140421265041312"> <p>
										-
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421265044576"> <p>
										@Param
									</p>
									 </td><td align="left" valign="top" headers="idm140421265043488"> <p>
										Parameter
									</p>
									 </td><td align="left" valign="top" headers="idm140421265042400"> <p>
										Defines a parameter as being one that is passed to the constructor of the Exception.
									</p>
									 </td><td align="left" valign="top" headers="idm140421265041312"> <p>
										-
									</p>
									 </td></tr></tbody></table></div></div></section><section class="section" id="project_codes_used_in_eap"><div class="titlepage"><div><div><h4 class="title">4.5.7.4. Project Codes Used in JBoss EAP</h4></div></div></div><p>
						The following table lists all the project codes used in JBoss EAP 7.3, along with the Maven modules they belong to.
					</p><div class="table" id="idm140421280516480"><p class="title"><strong>Table 4.3. Project Codes Used in JBoss EAP</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421278368992" scope="col">Maven Module</th><th align="left" valign="top" id="idm140421278367904" scope="col">Project Code</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										appclient
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYAC
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										batch/extension-jberet
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYBATCH
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										batch/extension
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYBATCH-DEPRECATED
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										batch/jberet
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYBAT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										bean-validation
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYBV
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										controller-client
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCC
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										controller
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCTL
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										clustering/common
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCLCOM
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										clustering/ejb/infinispan
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCLEJBINF
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										clustering/infinispan/extension
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCLINF
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										clustering/jgroups/extension
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCLJG
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										clustering/server
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCLSV
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										clustering/web/infinispan
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCLWEBINF
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										connector
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYJCA
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										deployment-repository
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYDR
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										deployment-scanner
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYDS
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										domain-http
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYDMHTTP
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										domain-management
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYDM
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										ee
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYEE
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										ejb3
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYEJB
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										embedded
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYEMB
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										host-controller
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYDC
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										host-controller
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYHC
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										iiop-openjdk
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYIIOP
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										io/subsystem
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYIO
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jaxrs
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYRS
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jdr
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYJDR
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jmx
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYJMX
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jpa/hibernate5
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										JIPI
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jpa/spi/src/main/java/org/jipijapa/JipiLogger.java
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										JIPI
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jpa/subsystem
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYJPA
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jsf/subsystem
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYJSF
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										jsr77
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYEEMGMT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										launcher
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYLNCHR
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										legacy/jacorb
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYORB
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										legacy/messaging
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYMSG
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										legacy/web
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYWEB
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										logging
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYLOG
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										mail
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYMAIL
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										management-client-content
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYCNT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										messaging-activemq
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYMSGAMQ
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										mod_cluster/extension
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYMODCLS
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										naming
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYNAM
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										network
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYNET
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										patching
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYPAT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										picketlink
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYPL
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										platform-mbean
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYPMB
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										pojo
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYPOJO
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										process-controller
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYPC
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										protocol
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYPRT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										remoting
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYRMT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										request-controller
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYREQCON
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										rts
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYRTS
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										sar
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYSAR
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										security-manager
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYSM
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										security
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYSEC
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										server
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYSRV
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										system-jmx
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYSYSJMX
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										threads
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYTHR
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										transactions
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYTX
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										undertow
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYUT
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										webservices/server-integration
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYWS
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										weld
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYWELD
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140421278368992"> <p>
										xts
									</p>
									 </td><td align="left" valign="top" headers="idm140421278367904"> <p>
										WFLYXTS
									</p>
									 </td></tr></tbody></table></div></div></section></section></section></section><section class="chapter" id="remote_jndi_lookup"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Remote JNDI lookup</h1></div></div></div><section class="section" id="registering_objects_to_jndi"><div class="titlepage"><div><div><h2 class="title">5.1. Registering Objects to JNDI</h2></div></div></div><p>
				The Java Naming and Directory Interface (JNDI) is a Java API for a directory service that allows Java software clients to discover and look up objects using a name.
			</p><p>
				If an object registered to JNDI needs to be looked up by remote JNDI clients, for example clients that run in a separate JVM, then it must be registered under the <code class="literal">java:jboss/exported</code> context.
			</p><p>
				For example, if a JMS queue in the <code class="literal">messaging-activemq</code> subsystem must be exposed for remote JNDI clients, then it must be registered to JNDI using <code class="literal">java:jboss/exported/jms/queue/myTestQueue</code>. The remote JNDI client can then look it up by the name <code class="literal">jms/queue/myTestQueue</code>.
			</p><div class="formalpara"><p class="title"><strong>Example: Configuration of the Queue in <code class="literal">standalone-full(-ha).xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:messaging-activemq:4.0"&gt;
  &lt;server name="default"&gt;
    ...
    &lt;jms-queue name="myTestQueue" entries="java:jboss/exported/jms/queue/myTestQueue"/&gt;
    ...
  &lt;/server&gt;
&lt;/subsystem&gt;</pre>

				</p></div></section><section class="section" id="configuring_remote_jndi"><div class="titlepage"><div><div><h2 class="title">5.2. Configuring Remote JNDI</h2></div></div></div><p>
				A remote JNDI client can connect and look up objects by name from JNDI. To use a remote JNDI client to look up objects, it must have the <code class="literal">jboss-client.jar</code> in its class path. The <code class="literal">jboss-client.jar</code> is available at <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/bin/client/jboss-client.jar</code>.
			</p><p>
				The following example shows how to look up the <code class="literal">myTestQueue</code> queue from JNDI in a remote JNDI client:
			</p><div class="formalpara"><p class="title"><strong>Example: Configuration for an MDB Resource Adapter</strong></p><p>
					
<pre class="programlisting language-java">Properties properties = new Properties();
properties.put(Context.INITIAL_CONTEXT_FACTORY, "org.wildfly.naming.client.WildFlyInitialContextFactory");
properties.put(Context.PROVIDER_URL, "remote+http://<span class="emphasis"><em>HOST_NAME</em></span>:8080");
context = new InitialContext(properties);
Queue myTestQueue = (Queue) context.lookup("jms/queue/myTestQueue");</pre>

				</p></div></section><section class="section" id="jndi_invocation_over_http"><div class="titlepage"><div><div><h2 class="title">5.3. JNDI Invocation Over HTTP</h2></div></div></div><p>
				JNDI invocation over HTTP includes two distinct parts: the client-side and the server-side implementations.
			</p><section class="section" id="client_side_implementation"><div class="titlepage"><div><div><h3 class="title">5.3.1. Client-side Implementation</h3></div></div></div><p>
					The client-side implementation is similar to the remote naming implementation, but based on HTTP using the Undertow HTTP client.
				</p><p>
					Connection management is implicit rather than direct, using a caching approach similar to the one used in the existing remote naming implementation. Connection pools are cached based on connection parameters. If they are not used in the specified timeout period, they are discarded.
				</p><p>
					In order to configure a remote JNDI client application to use HTTP transport, you must add the following dependency on the HTTP transport implementation:
				</p><pre class="screen">&lt;dependency&gt;
    &lt;groupId&gt;org.wildfly.wildfly-http-client&lt;/groupId&gt;
    &lt;artifactId&gt;wildfly-http-naming-client&lt;/artifactId&gt;
&lt;/dependency&gt;</pre><p>
					To perform the HTTP invocation, you must use the <code class="literal">http</code> URL scheme and include the context name of the HTTP invoker, <code class="literal">wildfly-services</code>. For example, if you are using <code class="literal">remote+http://localhost:8080</code> as the target URL, in order to use HTTP transport, you must update this to <code class="literal">http://localhost:8080/wildfly-services</code>.
				</p></section><section class="section" id="server_side_implementation"><div class="titlepage"><div><div><h3 class="title">5.3.2. Server-side Implementation</h3></div></div></div><p>
					The server-side implementation is similar to the existing remote naming implementation but with an HTTP transport.
				</p><p>
					In order to configure the server, you must enable the <code class="literal">http-invoker</code> on each of the virtual hosts that you wish to use in the <code class="literal">undertow</code> subsystem. This is enabled by default in the standard configurations. If it is disabled, you can re-enable it using the following management CLI command:
				</p><pre class="screen">/subsystem=undertow/server=default-server/host=default-host/setting=http-invoker:add(http-authentication-factory=myfactory, path="/wildfly-services")</pre><p>
					The <code class="literal">http-invoker</code> attribute takes two parameters: a <code class="literal">path</code> that defaults to <code class="literal">/wildfly-services</code> and an <code class="literal">http-authentication-factory</code> that must be a reference to an Elytron <code class="literal">http-authentication-factory</code>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Any deployment that aims to use the <code class="literal">http-authentication-factory</code> must use Elytron security with the same security domain corresponding to the specified HTTP authentication factory.
					</p></div></div></section></section></section><section class="chapter" id="clustering_in_web_applications"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Clustering in Web Applications</h1></div></div></div><section class="section" id="session_replication"><div class="titlepage"><div><div><h2 class="title">6.1. Session Replication</h2></div></div></div><section class="section" id="about_http_session_replication"><div class="titlepage"><div><div><h3 class="title">6.1.1. About HTTP Session Replication</h3></div></div></div><p>
					Session replication ensures that client sessions of distributable applications are not disrupted by failovers of nodes in a cluster. Each node in the cluster shares information about ongoing sessions, and can take over sessions if a node disappears.
				</p><p>
					Session replication is the mechanism by which mod_cluster, mod_jk, mod_proxy, ISAPI, and NSAPI clusters provide high availability.
				</p></section><section class="section" id="enable_session_replication_in_your_application"><div class="titlepage"><div><div><h3 class="title">6.1.2. Enable Session Replication in Your Application</h3></div></div></div><p>
					To take advantage of JBoss EAP High Availability (HA) features and enable clustering of your web application, you must configure your application to be distributable. If your application is not marked as distributable, its sessions will never be distributed.
				</p><h5 id="make_your_application_distributable">Make your Application Distributable</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Add the <code class="literal">&lt;distributable/&gt;</code> element inside the <code class="literal">&lt;web-app&gt;</code> tag of your application’s <code class="literal">web.xml</code> descriptor file:
						</p><div class="formalpara"><p class="title"><strong>Example: Minimum Configuration for a Distributable Application</strong></p><p>
								
<pre class="programlisting language-xml">&lt;?xml version="1.0"?&gt;
&lt;web-app  xmlns="http://java.sun.com/xml/ns/j2ee"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
                              http://java.sun.com/xml/ns/j2ee/web-app_3_0.xsd"
          version="3.0"&gt;

      &lt;distributable/&gt;

&lt;/web-app&gt;</pre>

							</p></div></li><li class="listitem"><p class="simpara">
							Next, if desired, modify the default replication behavior. If you want to change any of the values affecting session replication, you can override them inside a <code class="literal">&lt;replication-config&gt;</code> element inside <code class="literal">&lt;jboss-web&gt;</code> in an application’s <code class="literal">WEB-INF/jboss-web.xml</code> file. For a given element, only include it if you want to override the defaults.
						</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">&lt;replication-config&gt;</code> Values</strong></p><p>
								
<pre class="programlisting language-xml">&lt;jboss-web xmlns="http://www.jboss.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-web_10_0.xsd"&gt;
   &lt;replication-config&gt;
      &lt;replication-granularity&gt;SESSION&lt;/replication-granularity&gt;
    &lt;/replication-config&gt;
&lt;/jboss-web&gt;</pre>

							</p></div></li></ol></div><p>
					The <code class="literal">&lt;replication-granularity&gt;</code> parameter determines the granularity of data that is replicated. It defaults to <code class="literal">SESSION</code>, but can be set to <code class="literal">ATTRIBUTE</code> to increase performance on sessions where most attributes remain unchanged.
				</p><p>
					Valid values for <code class="literal">&lt;replication-granularity&gt;</code> can be :
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">SESSION</code>: The default value. The entire session object is replicated if any attribute is dirty. This policy is required if an object reference is shared by multiple session attributes. The shared object references are maintained on remote nodes since the entire session is serialized in one unit.
						</li><li class="listitem">
							<code class="literal">ATTRIBUTE</code>: This is only for dirty attributes in the session and for some session data, such as the last-accessed timestamp.
						</li></ul></div><h5 id="immutable_session_attributes">Immutable Session Attributes</h5><p>
					For JBoss EAP 7, session replication is triggered when the session is mutated or when any mutable attribute of the session is accessed. Session attributes are assumed to be mutable unless one of the following is true:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The value is a known immutable value:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">null</code>
								</li><li class="listitem">
									<code class="literal">java.util.Collections.EMPTY_LIST</code>, <code class="literal">EMPTY_MAP</code>, <code class="literal">EMPTY_SET</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The value type is or implements a known immutable type:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">java.lang.Boolean</code>, <code class="literal">Character</code>, <code class="literal">Byte</code>, <code class="literal">Short</code>, <code class="literal">Integer</code>, <code class="literal">Long</code>, <code class="literal">Float</code>, <code class="literal">Double</code>
								</li><li class="listitem">
									<code class="literal">java.lang.Class</code>, <code class="literal">Enum</code>, <code class="literal">StackTraceElement</code>, <code class="literal">String</code>
								</li><li class="listitem">
									<code class="literal">java.io.File</code>, <code class="literal">java.nio.file.Path</code>
								</li><li class="listitem">
									<code class="literal">java.math.BigDecimal</code>, <code class="literal">BigInteger</code>, <code class="literal">MathContext</code>
								</li><li class="listitem">
									<code class="literal">java.net.Inet4Address</code>, <code class="literal">Inet6Address</code>, <code class="literal">InetSocketAddress</code>, <code class="literal">URI</code>, <code class="literal">URL</code>
								</li><li class="listitem">
									<code class="literal">java.security.Permission</code>
								</li><li class="listitem">
									<code class="literal">java.util.Currency</code>, <code class="literal">Locale</code>, <code class="literal">TimeZone</code>, <code class="literal">UUID</code>
								</li><li class="listitem">
									<code class="literal">java.time.Clock</code>, <code class="literal">Duration</code>, <code class="literal">Instant</code>, <code class="literal">LocalDate</code>, <code class="literal">LocalDateTime</code>, <code class="literal">LocalTime</code>, <code class="literal">MonthDay</code>, <code class="literal">Period</code>, <code class="literal">Year</code>, <code class="literal">YearMonth</code>, <code class="literal">ZoneId</code>, <code class="literal">ZoneOffset</code>, <code class="literal">ZonedDateTime</code>
								</li><li class="listitem">
									<code class="literal">java.time.chrono.ChronoLocalDate</code>, <code class="literal">Chronology</code>, <code class="literal">Era</code>
								</li><li class="listitem">
									<code class="literal">java.time.format.DateTimeFormatter</code>, <code class="literal">DecimalStyle</code>
								</li><li class="listitem">
									<code class="literal">java.time.temporal.TemporalField</code>, <code class="literal">TemporalUnit</code>, <code class="literal">ValueRange</code>, <code class="literal">WeekFields</code>
								</li><li class="listitem">
									<code class="literal">java.time.zone.ZoneOffsetTransition</code>, <code class="literal">ZoneOffsetTransitionRule</code>, <code class="literal">ZoneRules</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The value type is annotated with:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">@org.wildfly.clustering.web.annotation.Immutable</code>
								</li><li class="listitem">
									<code class="literal">@net.jcip.annotations.Immutable</code>
								</li></ul></div></li></ul></div></section></section><section class="section" id="http_session_passivation_and_activation"><div class="titlepage"><div><div><h2 class="title">6.2. HTTP Session Passivation and Activation</h2></div></div></div><section class="section" id="about_http_session_passivation_and_activation"><div class="titlepage"><div><div><h3 class="title">6.2.1. About HTTP Session Passivation and Activation</h3></div></div></div><p>
					<span class="emphasis"><em>Passivation</em></span> is the process of controlling memory usage by removing relatively unused sessions from memory while storing them in persistent storage.
				</p><p>
					<span class="emphasis"><em>Activation</em></span> is when passivated data is retrieved from persisted storage and put back into memory.
				</p><p>
					Passivation occurs at different times in an HTTP session’s lifetime:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							When the container requests the creation of a new session, if the number of currently active sessions exceeds a configurable limit, the server attempts to passivate some sessions to make room for the new one.
						</li><li class="listitem">
							When a web application is deployed and a backup copy of sessions active on other servers is acquired by the newly deploying web application’s session manager, sessions might be passivated.
						</li></ul></div><p>
					A session is passivated if the number of active sessions exceeds a configurable maximum.
				</p><p>
					Sessions are always passivated using a Least Recently Used (LRU) algorithm.
				</p></section><section class="section" id="configure_httpsession_passivation_in_your_application"><div class="titlepage"><div><div><h3 class="title">6.2.2. Configure HTTP Session Passivation in Your Application</h3></div></div></div><p>
					HTTP session passivation is configured in your application’s <code class="literal">WEB-INF/jboss-web.xml</code> and <code class="literal">META-INF/jboss-web.xml</code> file.
				</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">jboss-web.xml</code> File</strong></p><p>
						
<pre class="programlisting language-xml">&lt;jboss-web xmlns="http://www.jboss.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.jboss.com/xml/ns/javaee http://www.jboss.org/j2ee/schema/jboss-web_10_0.xsd"&gt;

   &lt;max-active-sessions&gt;20&lt;/max-active-sessions&gt;
&lt;/jboss-web&gt;</pre>

					</p></div><p>
					The <code class="literal">&lt;max-active-sessions&gt;</code> element dictates the maximum number of active sessions allowed, and is used to enable session passivation. If session creation would cause the number of active sessions to exceed <code class="literal">&lt;max-active-sessions&gt;</code>, then the oldest session known to the session manager will passivate to make room for the new session.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The total number of sessions in memory includes sessions replicated from other cluster nodes that are not being accessed on this node. Take this into account when setting <code class="literal">&lt;max-active-sessions&gt;</code>. The number of sessions replicated from other nodes also depends on whether <code class="literal">REPL</code> or <code class="literal">DIST</code> cache mode is enabled. In <code class="literal">REPL</code> cache mode, each session is replicated to each node. In <code class="literal">DIST</code> cache mode, each session is replicated only to the number of nodes specified by the <code class="literal">owners</code> parameter. See <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Configure the Cache Mode</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for information on configuring session cache modes. For example, consider an eight node cluster, where each node handles requests from 100 users. With <code class="literal">REPL</code> cache mode, each node would store 800 sessions in memory. With <code class="literal">DIST</code> cache mode enabled, and the default <code class="literal">owners</code> setting of <code class="literal">2</code>, each node stores 200 sessions in memory.
					</p></div></div></section></section><section class="section" id="public_API_for_clustering-services"><div class="titlepage"><div><div><h2 class="title">6.3. Public API for Clustering Services</h2></div></div></div><p>
				JBoss EAP 7 introduced a refined public clustering API for use by applications. The new services are designed to be lightweight, easily injectable, with no external dependencies.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">org.wildfly.clustering.group.Group</code></span></dt><dd><p class="simpara">
							The group service provides a mechanism to view the cluster topology for a JGroups channel, and to be notified when the topology changes.
						</p><pre class="programlisting language-java">@Resource(lookup = "java:jboss/clustering/group/channel-name")
private Group channelGroup;</pre></dd><dt><span class="term"><code class="literal">org.wildfly.clustering.dispatcher.CommandDispatcher</code></span></dt><dd><p class="simpara">
							The <code class="literal">CommandDispatcherFactory</code> service provides a mechanism to create a dispatcher for executing commands on nodes in the cluster. The resulting <code class="literal">CommandDispatcher</code> is a command-pattern analog to the reflection-based <code class="literal">GroupRpcDispatcher</code> from previous JBoss EAP releases.
						</p><pre class="programlisting language-java">@Resource(lookup = "java:jboss/clustering/dispatcher/channel-name")
private CommandDispatcherFactory factory;

public void foo() {
    String context = "Hello world!";
    // Exclude node1 and node3 from the executeOnCluster
    try (CommandDispatcher&lt;String&gt; dispatcher = this.factory.createCommandDispatcher(context)) {
        dispatcher.executeOnGroup(new StdOutCommand(), node1, node3);

    }
}

public static class StdOutCommand implements Command&lt;Void, String&gt; {
    @Override
    public Void execute(String context) {
        System.out.println(context);
        return null;
    }
}</pre></dd></dl></div></section><section class="section" id="clustered_ha_singleton_service"><div class="titlepage"><div><div><h2 class="title">6.4. HA Singleton Service</h2></div></div></div><p>
				A clustered singleton service, also known as a high-availability (HA) singleton, is a service deployed on multiple nodes in a cluster. The service is provided on only one of the nodes. The node running the singleton service is usually called the <span class="emphasis"><em>master</em></span> node.
			</p><p>
				When the <span class="emphasis"><em>master</em></span> node either fails or shuts down, another master is selected from the remaining nodes and the service is restarted on the new master. Other than a brief interval when one master has stopped and another has yet to take over, the service is provided by one, and only one, node.
			</p><h4 id="ha_singleton_servicebuilder_api">HA Singleton ServiceBuilder API</h4><p>
				JBoss EAP 7 introduced a new public API for building singleton services that simplifies the process significantly.
			</p><p>
				The <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/org/wildfly/clustering/singleton/service/SingletonServiceConfigurator.html" title="This content is not included in Mimir."><code class="literal">SingletonServiceConfigurator</code></a> implementation installs its services so they will start asynchronously, preventing deadlocking of the Modular Service Container (MSC).
			</p><h4 id="ha_singleton_service_election_policies">HA Singleton Service Election Policies</h4><p>
				If there is a preference for which node should start the HA singleton, you can set the election policy in the <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/org/jboss/msc/service/ServiceActivator.html" title="This content is not included in Mimir."><code class="literal">ServiceActivator</code></a> class.
			</p><p>
				JBoss EAP provides two election policies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Simple election policy
					</p><p class="simpara">
						The simple election policy selects a master node based on the relative age. The required age is configured in the position property, which is the index in the list of available nodes, where:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								position = 0 – refers to the oldest node. This is the default.
							</li><li class="listitem">
								position = 1 – refers to the 2nd oldest, and so on.
							</li></ul></div><p class="simpara">
						Position can also be negative to indicate the youngest nodes.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								position = -1 – refers to the youngest node.
							</li><li class="listitem">
								position = -2 – refers to the 2nd youngest node, and so on.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Random election policy
					</p><p class="simpara">
						The random election policy elects a random member to be the provider of a singleton service.
					</p></li></ul></div><h4 id="ha_singleton_service_preferences">HA Singleton Service Preferences</h4><p>
				An HA singleton service election policy may optionally specify one or more preferred servers. This preferred server, when available, will be the master for all singleton applications under that policy.
			</p><p>
				You can define the preferences either through the node name or through the outbound socket binding name.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Node preferences always take precedence over the results of an election policy.
				</p></div></div><p>
				By default, JBoss EAP high availability configurations provide a simple election policy named <code class="literal">default</code> with no preferred server. You can set the preference by creating a custom policy and defining the preferred server.
			</p><h4 id="quorum">Quorum</h4><p>
				A potential issue with a singleton service arises when there is a network partition. In this situation, also known as the split-brain scenario, subsets of nodes cannot communicate with each other. Each set of servers consider all servers from the other set failed and continue to work as the surviving cluster. This might result in data consistency issues.
			</p><p>
				JBoss EAP allows you to specify a quorum in the election policy to prevent the split-brain scenario. The quorum specifies a minimum number of nodes to be present before a singleton provider election can take place.
			</p><p>
				A typical deployment scenario uses a quorum of N/2 + 1, where N is the anticipated cluster size. This value can be updated at runtime, and will immediately affect any active singleton services.
			</p><h4 id="singleton_election_listener">HA Singleton Service Election Listener</h4><p>
				After electing a new primary singleton service provider, any registered <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/org/wildfly/clustering/singleton/SingletonElectionListener.html" title="This content is not included in Mimir."><code class="literal">SingletonElectionListener</code></a> is triggered, notifying every member of the cluster about the new primary provider. The following example illustrates the usage of <code class="literal">SingletonElectionListener</code>:
			</p><pre class="programlisting language-java">public class MySingletonElectionListener implements SingletonElectionListener {
    @Override
    public void elected(List&lt;Node&gt; candidates, Node primary) {
        // ...
    }
}

public class MyServiceActivator implements ServiceActivator {
    @Override
    public void activate(ServiceActivatorContext context) {
        String containerName = "foo";
        SingletonElectionPolicy policy = new MySingletonElectionPolicy();
        SingletonElectionListener listener = new MySingletonElectionListener();
        int quorum = 3;
        ServiceName name = ServiceName.parse("my.service.name");
        // Use a SingletonServiceConfiguratorFactory backed by default cache of "foo" container
        Supplier&lt;SingletonServiceConfiguratorFactory&gt; factory = new ActiveServiceSupplier&lt;&gt;(context.getServiceTarget(), ServiceName.parse(SingletonDefaultCacheRequirement.SINGLETON_SERVICE_CONFIGURATOR_FACTORY.resolve(containerName).getName()));
        ServiceBuilder&lt;?&gt; builder = factory.get().createSingletonServiceConfigurator(name)
                .electionListener(listener)
                .electionPolicy(policy)
                .requireQuorum(quorum)
                .build(context.getServiceTarget());
        Service service = new MyService();
        builder.setInstance(service).install();
    }
}</pre><h4 id="create_an_ha_singleton_service_application">Create an HA Singleton Service Application</h4><p>
				The following is an abbreviated example of the steps required to create and deploy an application as a cluster-wide singleton service. This example demonstrates a querying service that regularly queries a singleton service to get the name of the node on which it is running.
			</p><p>
				To see the singleton behavior, you must deploy the application to at least two servers. It is transparent whether the singleton service is running on the same node or whether the value is obtained remotely.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">SingletonService</code> class. The <code class="literal">getValue()</code> method, which is called by the querying service, provides information about the node on which it is running.
					</p><pre class="programlisting language-java">class SingletonService implements Service {
    private Logger LOG = Logger.getLogger(this.getClass());
    private Node node;

    private Supplier&lt;Group&gt; groupSupplier;
    private Consumer&lt;Node&gt; nodeConsumer;

    SingletonService(Supplier&lt;Group&gt; groupSupplier, Consumer&lt;Node&gt; nodeConsumer) {
       this.groupSupplier = groupSupplier;
       this.nodeConsumer = nodeConsumer;
    }

    @Override
    public void start(StartContext context) {
        this.node = this.groupSupplier.get().getLocalMember();

        this.nodeConsumer.accept(this.node);

        LOG.infof("Singleton service is started on node '%s'.", this.node);
    }

    @Override
    public void stop(StopContext context) {
      LOG.infof("Singleton service is stopping on node '%s'.", this.node);


        this.node = null;
    }
}</pre></li><li class="listitem"><p class="simpara">
						Create the querying service. It calls the <code class="literal">getValue()</code> method of the singleton service to get the name of the node on which it is running, and then writes the result to the server log.
					</p><pre class="programlisting language-java">class QueryingService implements Service {

    private Logger LOG = Logger.getLogger(this.getClass());
    private ScheduledExecutorService executor;

    @Override
    public void start(StartContext context) throws {
        LOG.info("Querying service is starting.");

        executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleAtFixedRate(() -&gt; {

          Supplier&lt;Node&gt; node = new PassiveServiceSupplier&lt;&gt;(context.getController().getServiceContainer(), SingletonServiceActivator.SINGLETON_SERVICE_NAME);
         if (node.get() != null) {
             LOG.infof("Singleton service is running on this (%s) node.", node.get());
         } else {
             LOG.infof("Singleton service is not running on this node.");
            }

        }, 5, 5, TimeUnit.SECONDS);
    }

    @Override
    public void stop(StopContext context) {
        LOG.info("Querying service is stopping.");

        executor.shutdown();
    }

}</pre></li><li class="listitem"><p class="simpara">
						Implement the <code class="literal">SingletonServiceActivator</code> class to build and install both the singleton service and the querying service.
					</p><pre class="programlisting language-java">public class SingletonServiceActivator implements ServiceActivator {

    private final Logger LOG = Logger.getLogger(SingletonServiceActivator.class);

    static final ServiceName SINGLETON_SERVICE_NAME =
            ServiceName.parse("org.jboss.as.quickstarts.ha.singleton.service");
    private static final ServiceName QUERYING_SERVICE_NAME =
            ServiceName.parse("org.jboss.as.quickstarts.ha.singleton.service.querying");

    @Override
    public void activate(ServiceActivatorContext serviceActivatorContext) {
        SingletonPolicy policy = new ActiveServiceSupplier&lt;SingletonPolicy&gt;(
                serviceActivatorContext.getServiceRegistry(),
                ServiceName.parse(SingletonDefaultRequirement.POLICY.getName())).get();

        ServiceTarget target = serviceActivatorContext.getServiceTarget();
        ServiceBuilder&lt;?&gt; builder = policy.createSingletonServiceConfigurator(SINGLETON_SERVICE_NAME).build(target);
        Consumer&lt;Node&gt; member = builder.provides(SINGLETON_SERVICE_NAME);
        Supplier&lt;Group&gt; group = builder.requires(ServiceName.parse("org.wildfly.clustering.default-group"));
        builder.setInstance(new SingletonService(group, member)).install();

        serviceActivatorContext.getServiceTarget()
                .addService(QUERYING_SERVICE_NAME, new QueryingService())
                .setInitialMode(ServiceController.Mode.ACTIVE)
                .install();

        serviceActivatorContext.getServiceTarget().addService(QUERYING_SERVICE_NAME).setInstance(new QueryingService()).install();

        LOG.info("Singleton and querying services activated.");

    }
}</pre></li><li class="listitem">
						Create a file in the <code class="literal">META-INF/services/</code> directory named <code class="literal">org.jboss.msc.service.ServiceActivator</code> that contains the name of the <code class="literal">ServiceActivator</code> class, for example, <code class="literal">org.jboss.as.quickstarts.ha.singleton.service.SingletonServiceActivator</code>.
					</li></ol></div><p>
				See the <code class="literal">ha-singleton-service</code> quickstart that ships with JBoss EAP for the complete working example. This quickstart also provides a second example that demonstrates a singleton service that is installed with a backup service. The backup service is running on all nodes that are not elected to be running the singleton service. Finally, this quickstart also demonstrates how to configure a few different election policies.
			</p></section><section class="section" id="ha_singleton_deployments"><div class="titlepage"><div><div><h2 class="title">6.5. HA Singleton Deployments</h2></div></div></div><p>
				JBoss EAP 7 adds the ability to deploy a given application as a singleton deployment.
			</p><p>
				When deployed to a group of clustered servers, a singleton deployment will only deploy on a single node at any given time. If the node on which the deployment is active stops or fails, the deployment will automatically start on another node.
			</p><p>
				The policies for controlling HA singleton behavior are managed by a new <code class="literal">singleton</code> subsystem. A deployment can either specify a specific singleton policy or use the default subsystem policy. A deployment identifies itself as a singleton deployment by using a <code class="literal">META-INF/singleton-deployment.xml</code> deployment descriptor, which is most easily applied to an existing deployment as a deployment overlay. Alternatively, the requisite singleton configuration can be embedded within an existing <code class="literal">jboss-all.xml</code> file.
			</p><h4 id="defining_or_choosing_a_singleton_deployment">Defining or Choosing a Singleton Deployment</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To define a deployment as a singleton deployment, include a <code class="literal">META-INF/singleton-deployment.xml</code> descriptor in your application archive.
					</p><div class="formalpara"><p class="title"><strong>Example: Singleton Deployment Descriptor</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;singleton-deployment xmlns="urn:jboss:singleton-deployment:1.0"/&gt;</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: Singleton Deployment Descriptor with a Specific Singleton Policy</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;singleton-deployment policy="my-new-policy" xmlns="urn:jboss:singleton-deployment:1.0"/&gt;</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Alternatively, you can also add a <code class="literal">singleton-deployment</code> element to your <code class="literal">jboss-all.xml</code> descriptor file.
					</p><div class="formalpara"><p class="title"><strong>Example: Defining <code class="literal">singleton-deployment</code> in <code class="literal">jboss-all.xml</code></strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jboss xmlns="urn:jboss:1.0"&gt;
    &lt;singleton-deployment xmlns="urn:jboss:singleton-deployment:1.0"/&gt;
&lt;/jboss&gt;</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: Defining <code class="literal">singleton-deployment</code> in <code class="literal">jboss-all.xml</code> with a Specific Singleton Policy</strong></p><p>
							
<pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jboss xmlns="urn:jboss:1.0"&gt;
    &lt;singleton-deployment policy="my-new-policy" xmlns="urn:jboss:singleton-deployment:1.0"/&gt;
&lt;/jboss&gt;</pre>

						</p></div></li></ul></div><h4 id="creating_a_singleton_deployment">Creating a Singleton Deployment</h4><p>
				JBoss EAP provides two election policies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Simple election policy
					</p><p class="simpara">
						The <code class="literal">simple-election-policy</code> chooses a specific member, indicated by the <code class="literal">position</code> attribute, on which a given application will be deployed. The <code class="literal">position</code> attribute determines the index of the node to be elected from a list of candidates sorted by descending age, where <code class="literal">0</code> indicates the oldest node, <code class="literal">1</code> indicates the second oldest node, <code class="literal">-1</code> indicates the youngest node, <code class="literal">-2</code> indicates the second youngest node, and so on. If the specified position exceeds the number of candidates, a modulus operation is applied.
					</p><div class="formalpara"><p class="title"><strong>Example: Create a New Singleton Policy with a <code class="literal">simple-election-policy</code> and Position Set to <code class="literal">-1</code>, Using the Management CLI</strong></p><p>
							
<pre class="screen">batch
/subsystem=singleton/singleton-policy=my-new-policy:add(cache-container=server)
/subsystem=singleton/singleton-policy=my-new-policy/election-
policy=simple:add(position=-1)
run-batch</pre>

						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							To set the newly created policy <code class="literal">my-new-policy</code> as the default, run this command:
						</p><pre class="screen">/subsystem=singleton:write-attribute(name=default, value=my-new-policy)</pre></div></div><div class="formalpara"><p class="title"><strong>Example: Configure a <code class="literal">simple-election-policy</code> with Position Set to <code class="literal">-1</code> Using <code class="literal">standalone-ha.xml</code></strong></p><p>
							
<pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:singleton:1.0"&gt;
   &lt;singleton-policies default="my-new-policy"&gt;
      &lt;singleton-policy name="my-new-policy" cache-container="server"&gt;
         &lt;simple-election-policy position="-1"/&gt;
      &lt;/singleton-policy&gt;
   &lt;/singleton-policies&gt;
&lt;/subsystem&gt;</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						Random election policy
					</p><p class="simpara">
						The <code class="literal">random-election-policy</code> chooses a random member on which a given application will be deployed.
					</p><div class="formalpara"><p class="title"><strong>Example: Creating a New Singleton Policy with a <code class="literal">random-election-policy</code>, Using the Management CLI</strong></p><p>
							
<pre class="screen">batch
/subsystem=singleton/singleton-policy=my-other-new-policy:add(cache-container=server)
/subsystem=singleton/singleton-policy=my-other-new-policy/election-policy=random:add()
run-batch</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: Configure a <code class="literal">random-election-policy</code> Using <code class="literal">standalone-ha.xml</code></strong></p><p>
							
<pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:singleton:1.0"&gt;
   &lt;singleton-policies default="my-other-new-policy"&gt;
      &lt;singleton-policy name="my-other-new-policy" cache-container="server"&gt;
         &lt;random-election-policy/&gt;
      &lt;/singleton-policy&gt;
   &lt;/singleton-policies&gt;
&lt;/subsystem&gt;</pre>

						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">default-cache</code> attribute of the <code class="literal">cache-container</code> needs to be defined before trying to add the policy. Without this, if you are using a custom cache container, you might end up getting error messages.
						</p></div></div></li></ul></div><h5 id="preferences">Preferences</h5><p>
				Additionally, any singleton election policy can indicate a preference for one or more members of a cluster. Preferences can be defined either by using the node name or by using the outbound socket binding name. Node preferences always take precedent over the results of an election policy.
			</p><div class="formalpara"><p class="title"><strong>Example: Indicate Preference in the Existing Singleton Policy Using the Management CLI</strong></p><p>
					
<pre class="screen">/subsystem=singleton/singleton-policy=foo/election-policy=simple:list-add(name=name-preferences, value=nodeA)

/subsystem=singleton/singleton-policy=bar/election-policy=random:list-add(name=socket-binding-preferences, value=binding1)</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Create a New Singleton Policy with a <code class="literal">simple-election-policy</code> and <code class="literal">name-preferences</code>, Using the Management CLI</strong></p><p>
					
<pre class="screen">batch
/subsystem=singleton/singleton-policy=my-new-policy:add(cache-container=server)
/subsystem=singleton/singleton-policy=my-new-policy/election-policy=simple:add(name-preferences=[node1, node2, node3, node4])
run-batch</pre>

				</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To set the newly created policy <code class="literal">my-new-policy</code> as the default, run this command:
				</p><pre class="screen">/subsystem=singleton:write-attribute(name=default, value=my-new-policy)</pre></div></div><div class="formalpara"><p class="title"><strong>Example: Configure a <code class="literal">random-election-policy</code> with <code class="literal">socket-binding-preferences</code> Using <code class="literal">standalone-ha.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:singleton:1.0"&gt;
   &lt;singleton-policies default="my-other-new-policy"&gt;
      &lt;singleton-policy name="my-other-new-policy" cache-container="server"&gt;
         &lt;random-election-policy&gt;
            &lt;socket-binding-preferences&gt;binding1 binding2 binding3 binding4&lt;/socket-binding-preferences&gt;
         &lt;/random-election-policy&gt;
      &lt;/singleton-policy&gt;
   &lt;/singleton-policies&gt;
&lt;/subsystem&gt;</pre>

				</p></div><h5 id="define_quorum">Define a Quorum</h5><p>
				Network partitions are particularly problematic for singleton deployments, since they can trigger multiple singleton providers for the same deployment to run at the same time. To defend against this scenario, a singleton policy can define a quorum that requires a minimum number of nodes to be present before a singleton provider election can take place. A typical deployment scenario uses a quorum of N/2 + 1, where N is the anticipated cluster size. This value can be updated at runtime, and will immediately affect any singleton deployments using the respective singleton policy.
			</p><div class="formalpara"><p class="title"><strong>Example: Quorum Declaration in the <code class="literal">standalone-ha.xml</code> File</strong></p><p>
					
<pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:singleton:1.0"&gt;
   &lt;singleton-policies default="default"&gt;
      &lt;singleton-policy name="default" cache-container="server" quorum="4"&gt;
         &lt;simple-election-policy/&gt;
      &lt;/singleton-policy&gt;
   &lt;/singleton-policies&gt;
&lt;/subsystem&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Quorum Declaration Using the Management CLI</strong></p><p>
					
<pre class="screen">/subsystem=singleton/singleton-policy=foo:write-attribute(name=quorum, value=3)</pre>

				</p></div><p>
				See the <code class="literal">ha-singleton-deployment</code> quickstart that ships with JBoss EAP for a complete working example of a service packaged in an application as a cluster-wide singleton using singleton deployments.
			</p><h5 id="determine_primary_singleton_service_provider">Determine the Primary Singleton Service Provider Using the CLI</h5><p>
				The <code class="literal">singleton</code> subsystem exposes a runtime resource for each singleton deployment or service created from a particular singleton policy. This helps you determine the primary singleton provider using the CLI.
			</p><p>
				You can view the name of the cluster member currently acting as the singleton provider. For example:
			</p><pre class="screen">/subsystem=singleton/singleton-policy=default/deployment=singleton.jar:read-attribute(name=primary-provider)
{
    "outcome" =&gt; "success",
    "result" =&gt; "node1"
}</pre><p>
				You can also view the names of the nodes on which the singleton deployment or service is installed. For example:
			</p><pre class="screen">/subsystem=singleton/singleton-policy=default/deployment=singleton.jar:read-attribute(name=providers)
{
    "outcome" =&gt; "success",
    "result" =&gt; [
        "node1",
        "node2"
    ]
}</pre></section><section class="section" id="apache_mod_cluster_manager_application"><div class="titlepage"><div><div><h2 class="title">6.6. Apache mod_cluster-manager Application</h2></div></div></div><section class="section" id="about-mod_cluster-manager-application"><div class="titlepage"><div><div><h3 class="title">6.6.1. About mod_cluster-manager Application</h3></div></div></div><p>
					The mod_cluster-manager application is an administration web page, which is available on Apache HTTP Server. It is used for monitoring the connected worker nodes and performing various administration tasks, such as enabling or disabling contexts, and configuring the load-balancing properties of worker nodes in a cluster.
				</p><h5 id="exploring_mod_cluster_manager_application">Exploring mod_cluster-manager Application</h5><p>
					The mod_cluster-manager application can be used for performing various administration tasks on worker nodes.
				</p><p>
					<span class="inlinemediaobject"><img src="/webassets/avalon/d/JBoss_Enterprise_Application_Platform_Continuous_Delivery-18-Development_Guide-en-US/images/5164b1933af5b7e9c306e3fb7f6c50cd/5242.png" alt="mod_cluster Administration Web Page" /></span>
					 <span class="strong strong"><strong>Figure - mod_cluster Administration Web Page</strong></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							[1] <span class="strong strong"><strong>mod_cluster/1.3.1.Final</strong></span>: The version of the mod_cluster native library.
						</li><li class="listitem">
							[2] <span class="strong strong"><strong>ajp://192.168.122.204:8099</strong></span>: The protocol used (either AJP, HTTP, or HTTPS), hostname or IP address of the worker node, and the port.
						</li><li class="listitem">
							[3] <span class="strong strong"><strong>jboss-eap-7.0-2</strong></span>: The worker node’s JVMRoute.
						</li><li class="listitem">
							[4] <span class="strong strong"><strong>Virtual Host 1</strong></span>: The virtual host(s) configured on the worker node.
						</li><li class="listitem">
							[5] <span class="strong strong"><strong>Disable</strong></span>: An administration option that can be used to disable the creation of new sessions on the particular context. However, the ongoing sessions do not get disabled and remain intact.
						</li><li class="listitem">
							[6] <span class="strong strong"><strong>Stop</strong></span>: An administration option that can be used to stop the routing of session requests to the context. The remaining sessions will fail over to another node unless the <code class="literal">sticky-session-force</code> property is set to <code class="literal">true</code>.
						</li><li class="listitem">
							[7] <span class="strong strong"><strong>Enable Contexts Disable Contexts Stop Contexts</strong></span>: The operations that can be performed on the whole node. Selecting one of these options affects all the contexts of a node in all its virtual hosts.
						</li><li class="listitem"><p class="simpara">
							[8] <span class="strong strong"><strong>Load balancing group (LBGroup)</strong></span>: The <code class="literal">load-balancing-group</code> property is set in the <code class="literal">modcluster</code> subsystem in JBoss EAP configuration to group all worker nodes into custom load balancing groups. Load balancing group (LBGroup) is an informational field that gives information about all set load balancing groups. If this field is not set, then all worker nodes are grouped into a single default load balancing group.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								This is only an informational field and thus cannot be used to set <code class="literal">load-balancing-group</code> property. The property has to be set in <code class="literal">modcluster</code> subsystem in JBoss EAP configuration.
							</p></div></div></li><li class="listitem"><p class="simpara">
							[9] <span class="strong strong"><strong>Load (value)</strong></span>: The load factor on the worker node. The load factors are evaluated as below:
						</p><pre class="screen">-load &gt; 0 : A load factor with value 1 indicates that the worker node is overloaded. A load factor of 100 denotes a free and not-loaded node.
-load = 0 : A load factor of value 0 indicates that the worker node is in standby mode. This means that no session requests will be routed to this node until and unless the other worker nodes are unavailable.
-load = -1 : A load factor of value -1 indicates that the worker node is in an error state.
-load = -2 : A load factor of value -2 indicates that the worker node is undergoing CPing/CPong and is in a transition state.</pre></li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						For JBoss EAP 7.3, it is also possible to use Undertow as load balancer.
					</p></div></div></section></section><section class="section" id="distributable_web_subsystem"><div class="titlepage"><div><div><h2 class="title">6.7. The distributable-web subsystem for Distributable Web Session Configurations</h2></div></div></div><p>
				The <code class="literal">distributable-web</code> subsystem facilitates flexible and distributable web session configurations. The subsystem defines a set of distributable web session management profiles. One of these profiles is designated as the default profile. It defines the default behavior of a distributable web application. For example:
			</p><pre class="screen">[standalone@embedded /] /subsystem=distributable-web:read-attribute(name=default-session-management)
{
    "outcome" =&gt; "success",
    "result" =&gt; "default"
}</pre><p>
				The default session management stores web session data within an Infinispan cache as the following example illustrates:
			</p><pre class="screen">[standalone@embedded /] /subsystem=distributable-web/infinispan-session-management=default:read-resource
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "cache" =&gt; undefined,
        "cache-container" =&gt; "web",
        "granularity" =&gt; "SESSION",
        "affinity" =&gt; {"primary-owner" =&gt; undefined}
    }
}</pre><p>
				The attributes used in this example and the possible values are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">cache</code>: A cache within the associated cache-container. The web application’s cache is based on the configuration of this cache. If undefined, the default cache of the associated cache container is used.
					</li><li class="listitem">
						<code class="literal">cache-container</code>: A cache-container defined in the <code class="literal">Infinispan</code> subsystem into which session data is stored.
					</li><li class="listitem"><p class="simpara">
						<code class="literal">granularity</code>: Defines how the session manager maps a session into individual cache entries. The possible values are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">SESSION</code>: Stores all session attributes within a single cache entry. More expensive than the <code class="literal">ATTRIBUTE</code> granularity, but preserves any cross-attribute object references.
							</li><li class="listitem">
								<code class="literal">ATTRIBUTE</code>: Stores each session attribute within a separate cache entry. More efficient than the <code class="literal">SESSION</code> granularity, but does not preserve any cross-attribute object references.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						<code class="literal">affinity</code>: Defines the affinity that a web request must have for a server. The affinity of the associated web session determines the algorithm for generating the route to be appended onto the session ID. The possible values are:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">affinity=none</code>: Web requests do not have any affinity to any node. Use this if web session state is not maintained within the application server.
							</li><li class="listitem">
								<code class="literal">affinity=local</code>: Web requests have an affinity to the server that last handled a request for a session. This option corresponds to the sticky session behavior.
							</li><li class="listitem">
								<code class="literal">affinity=primary-owner</code>: Web requests have an affinity to the primary owner of a session. This is the default affinity for this distributed session manager. Behaves the same as <code class="literal">affinity=local</code> if the backing cache is not distributed or replicated.
							</li><li class="listitem">
								<code class="literal">affinity=ranked</code>: Web requests have an affinity for the first available member in a list that include the primary and the backup owners, and for the member that last handled a session.
							</li><li class="listitem">
								<code class="literal">affinity=ranked delimiter</code>: The delimiter used to separate the individual routes within the encoded session identifier.
							</li><li class="listitem">
								<code class="literal">Affinity=ranked max routes</code>: The maximum number of routes to encode into the session identifier.
							</li></ul></div></li></ul></div><p>
				You must enable ranked session affinity in your load balancer to have session affinity with multiple, ordered routes. For more information, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Enabling Ranked Session Affinity in Your Load Balancer</a> in the <span class="emphasis"><em>Configuration Guide</em></span> for JBoss EAP.
			</p><p>
				You can override the default distributable session management behavior by referencing a session management profile by name or by providing a deployment-specific session management configuration. For more information, see <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/migration_guide/#override_default_distributable_session_management_behavior.adoc" title="This content is not included in Mimir.">Overide Default Distributable Session Management Behavior</a>.
			</p><section class="section" id="session-managenemt-via-hotrod"><div class="titlepage"><div><div><h3 class="title">6.7.1. Storing Web Session Data In a Remote Red Hat Data Grid</h3></div></div></div><p>
					The <code class="literal">distributable-web</code> subsystem can be configured to store web session data in a remote Red Hat Data Grid cluster using the HotRod protocol. Storing web session data in a remote cluster allows the cache layer to scale independently of the application servers.
				</p><p>
					Example configuration:
				</p><pre class="screen">[standalone@embedded /]/subsystem=distributable-web/hotrod-session-management=ExampleRemoteSessionStore:add(remote-cache-container=datagrid, cache-configuration=__REMOTE_CACHE_CONFIG_NAME__, granularity=ATTRIBUTE)
{
    "outcome" =&gt; "success"
}</pre><p>
					The attributes used in this example and the possible values are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">remote-cache-container</code>: The remote cache container defined in the <code class="literal">Infinispan</code> subsystem to store the web session data.
						</li><li class="listitem"><p class="simpara">
							<code class="literal">cache-configuration</code>: Name of the cache configuration in Red Hat Data Grid cluster. The newly created deployment-specific caches are based on this configuration.
						</p><p class="simpara">
							If a remote cache configuration matching the name is not found, a new cache configuration is created in the remote container.
						</p></li><li class="listitem"><p class="simpara">
							<code class="literal">granularity</code>: Defines how the session manager maps a session into individual cache entries. The possible values are:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">SESSION</code>: Stores all session attributes within a single cache entry. More expensive than the <code class="literal">ATTRIBUTE</code> granularity, but preserves any cross-attribute object references.
								</li><li class="listitem">
									<code class="literal">ATTRIBUTE</code>: Stores each session attribute within a separate cache entry. More efficient than the <code class="literal">SESSION</code> granularity, but does not preserve any cross-attribute object references.
								</li></ul></div></li></ul></div></section></section></section><section class="chapter" id="contexts_and_dependency_injection"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Contexts and Dependency Injection (CDI)</h1></div></div></div><section class="section" id="introduction_to_cdi"><div class="titlepage"><div><div><h2 class="title">7.1. Introduction to CDI</h2></div></div></div><section class="section" id="about_contexts_and_dependency_injection_cdi"><div class="titlepage"><div><div><h3 class="title">7.1.1. About Contexts and Dependency Injection (CDI)</h3></div></div></div><p>
					Contexts and Dependency Injection (CDI) 2.0 is a specification designed to enable Enterprise Java Beans (EJB) 3 components to be used as Java Server Faces (JSF) managed beans. CDI unifies the two component models and enables a considerable simplification to the programming model for web-based applications in Java. Details about CDI 2.0 can be found in <a class="link mimir-link-warn" href="http://docs.jboss.org/cdi/spec/2.0/cdi-spec.html" title="Mimir does not include content from: docs.jboss.org">JSR 365: Contexts and Dependency Injection for Java 2.0</a>.
				</p><p>
					JBoss EAP includes Weld, which is the reference implementation of JSR-365.
				</p><h5 id="benefits_of_cdi">Benefits of CDI</h5><p>
					The benefits of CDI include:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Simplifying and shrinking your code base by replacing big chunks of code with annotations.
						</li><li class="listitem">
							Flexibility, allowing you to disable and enable injections and events, use alternative beans, and inject non-CDI objects easily.
						</li><li class="listitem">
							Optionally, allowing you to include a <code class="literal">beans.xml</code> file in your <code class="literal">META-INF/</code> or <code class="literal">WEB-INF/</code> directory if you need to customize the configuration to differ from the default. The file can be empty.
						</li><li class="listitem">
							Simplifying packaging and deployments and reducing the amount of XML you need to add to your deployments.
						</li><li class="listitem">
							Providing lifecycle management via contexts. You can tie injections to requests, sessions, conversations, or custom contexts.
						</li><li class="listitem">
							Providing type-safe dependency injection, which is safer and easier to debug than string-based injection.
						</li><li class="listitem">
							Decoupling interceptors from beans.
						</li><li class="listitem">
							Providing complex event notification.
						</li></ul></div></section><section class="section" id="Relationship_between_weld_seam_2_and_javaserver_faces"><div class="titlepage"><div><div><h3 class="title">7.1.2. Relationship Between Weld, Seam 2, and JavaServer Faces</h3></div></div></div><p>
					Weld is the reference implementation of CDI, which is defined in <a class="link mimir-link-warn" href="https://www.jcp.org/en/jsr/detail?id=346" title="Mimir does not include content from: www.jcp.org">JSR 346: Contexts and Dependency Injection for Java™ EE 1.1</a>. Weld was inspired by Seam 2 and other dependency injection frameworks, and is included in JBoss EAP.
				</p><p>
					The goal of Seam 2 was to unify Enterprise Java Beans and JavaServer Faces managed beans.
				</p><p>
					JavaServer Faces 2.2 implements <a class="link mimir-link-warn" href="https://www.jcp.org/en/jsr/detail?id=344" title="Mimir does not include content from: www.jcp.org">JSR-344: JavaServer™ Faces 2.2</a>. It is an API for building server-side user interfaces.
				</p></section></section><section class="section" id="use_cdi_to_develop_application"><div class="titlepage"><div><div><h2 class="title">7.2. Use CDI to Develop an Application</h2></div></div></div><p>
				Contexts and Dependency Injection (CDI) gives you tremendous flexibility in developing applications, reusing code, adapting your code at deployment or runtime, and unit testing. JBoss EAP includes Weld, the reference implementation of CDI. These tasks show you how to use CDI in your enterprise applications.
			</p><p>
				Weld comes with a special mode for application development. When enabled, certain built-in tools, which facilitate the development of CDI applications, are available.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The development mode should not be used in production as it can have a negative impact on the performance of the application. Make sure to disable the development mode before deploying to production.
				</p></div></div><div class="formalpara"><p class="title"><strong>Enabling the Development Mode for a Web Application:</strong></p><p>
					For a web application, set the servlet initialization parameter <code class="literal">org.jboss.weld.development</code> to <code class="literal">true</code>:
				</p></div><pre class="programlisting language-xml">&lt;web-app&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;org.jboss.weld.development&lt;/param-name&gt;
        &lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/context-param&gt;
&lt;/web-app&gt;</pre><div class="formalpara"><p class="title"><strong>Enabling Development Mode for JBoss EAP Using the Management CLI:</strong></p><p>
					It is possible to enable the Weld development mode globally for all the applications deployed by setting <code class="literal">development-mode</code> attribute to <code class="literal">true</code>:
				</p></div><pre class="screen">/subsystem=weld:write-attribute(name=development-mode,value=true)</pre><section class="section" id="default_bean_discovery_mode"><div class="titlepage"><div><div><h3 class="title">7.2.1. Default Bean Discovery Mode</h3></div></div></div><p>
					The default bean discovery mode for a bean archive is <code class="literal">annotated</code>. Such a bean archive is said to be an <code class="literal">implicit bean archive</code>.
				</p><p>
					If the bean discovery mode is <code class="literal">annotated</code>, then:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Bean classes that do not have <code class="literal">bean defining annotation</code> and are not bean classes of sessions beans are not discovered.
						</li><li class="listitem">
							Producer methods that are not on a session bean and whose bean class does not have a bean defining annotation are not discovered.
						</li><li class="listitem">
							Producer fields that are not on a session bean and whose bean class does not have a bean defining annotation are not discovered.
						</li><li class="listitem">
							Disposer methods that are not on a session bean and whose bean class does not have a bean defining annotation are not discovered.
						</li><li class="listitem">
							Observer methods that are not on a session bean and whose bean class does not have a bean defining annotation are not discovered.
						</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						All examples in the CDI section are valid only when you have a discovery mode set to <code class="literal">all</code>.
					</p></div></div><h5 id="bean_defining_annotations">Bean Defining Annotations</h5><p>
					A bean class can have a <code class="literal">bean defining annotation</code>, allowing it to be placed anywhere in an application, as defined in bean archives. A bean class with a bean defining annotation is said to be an implicit bean.
				</p><p>
					The set of bean defining annotations contains:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">@ApplicationScoped</code>, <code class="literal">@SessionScoped</code>, <code class="literal">@ConversationScoped</code> and <code class="literal">@RequestScoped</code> annotations.
						</li><li class="listitem">
							All other normal scope types.
						</li><li class="listitem">
							<code class="literal">@Interceptor</code> and <code class="literal">@Decorator</code> annotations.
						</li><li class="listitem">
							All stereotype annotations, i.e. annotations annotated with <code class="literal">@Stereotype</code>.
						</li><li class="listitem">
							The <code class="literal">@Dependent</code> scope annotation.
						</li></ul></div><p>
					If one of these annotations is declared on a bean class, then the bean class is said to have a bean defining annotation.
				</p><div class="formalpara"><p class="title"><strong>Example: Bean Defining Annotation</strong></p><p>
						
<pre class="programlisting language-java">@Dependent
public class BookShop
        extends Business
        implements Shop&lt;Book&gt; {
    ...
}</pre>

					</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						To ensure compatibility with other <a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=330" title="Mimir does not include content from: jcp.org">JSR-330</a> implementations, all pseudo-scope annotations, except <code class="literal">@Dependent</code>, are not bean defining annotations. However, a stereotype annotation, including a pseudo-scope annotation, is a bean defining annotation.
					</p></div></div></section><section class="section" id="exclude_beans_from_the_scanning_proces"><div class="titlepage"><div><div><h3 class="title">7.2.2. Exclude Beans From the Scanning Process</h3></div></div></div><p>
					Exclude filters are defined by <code class="literal">&lt;exclude&gt;</code> elements in the <code class="literal">beans.xml</code> file for the bean archive as children of the <code class="literal">&lt;scan&gt;</code> element. By default an exclude filter is active. The exclude filter becomes inactive, if its definition contains:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A child element named <code class="literal">&lt;if-class-available&gt;</code> with a <code class="literal">name</code> attribute, and the class loader for the bean archive can not load a class for that name, or
						</li><li class="listitem">
							A child element named <code class="literal">&lt;if-class-not-available&gt;</code> with a <code class="literal">name</code> attribute, and the class loader for the bean archive can load a class for that name, or
						</li><li class="listitem">
							A child element named <code class="literal">&lt;if-system-property&gt;</code> with a <code class="literal">name</code> attribute, and there is no system property defined for that name, or
						</li><li class="listitem">
							A child element named <code class="literal">&lt;if-system-property&gt;</code> with a <code class="literal">name</code> attribute and a value attribute, and there is no system property defined for that name with that value.
						</li></ul></div><p>
					The type is excluded from discovery, if the filter is active, and:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The fully qualified name of the type being discovered matches the value of the name attribute of the exclude filter, or
						</li><li class="listitem">
							The package name of the type being discovered matches the value of the name attribute with a suffix ".*" of the exclude filter, or
						</li><li class="listitem">
							The package name of the type being discovered starts with the value of the name attribute with a suffix ".**" of the exclude filter
						</li></ul></div><div class="example" id="idm140421275822560"><p class="title"><strong>Example 7.1. Example: <code class="literal">beans.xml</code> File</strong></p><div class="example-contents"><pre class="programlisting language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://xmlns.jcp.org/xml/ns/javaee"&gt;

    &lt;scan&gt;
        &lt;exclude name="com.acme.rest.*" /&gt; <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>

        &lt;exclude name="com.acme.faces.**"&gt; <span id="CO1-2"><!--Empty--></span><span class="callout">2</span>
            &lt;if-class-not-available name="javax.faces.context.FacesContext"/&gt;
        &lt;/exclude&gt;

        &lt;exclude name="com.acme.verbose.*"&gt; <span id="CO1-3"><!--Empty--></span><span class="callout">3</span>
            &lt;if-system-property name="verbosity" value="low"/&gt;
        &lt;/exclude&gt;

        &lt;exclude name="com.acme.ejb.**"&gt; <span id="CO1-4"><!--Empty--></span><span class="callout">4</span>
            &lt;if-class-available name="javax.enterprise.inject.Model"/&gt;
            &lt;if-system-property name="exclude-ejbs"/&gt;
        &lt;/exclude&gt;
    &lt;/scan&gt;

&lt;/beans&gt;</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The first exclude filter will exclude all classes in <code class="literal">com.acme.rest</code> package.
							</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The second exclude filter will exclude all classes in the <code class="literal">com.acme.faces</code> package, and any subpackages, but only if JSF is not available.
							</div></dd><dt><a href="#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The third exclude filter will exclude all classes in the <code class="literal">com.acme.verbose</code> package if the system property <code class="literal">verbosity</code> has the value <code class="literal">low</code>.
							</div></dd><dt><a href="#CO1-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The fourth exclude filter will exclude all classes in the <code class="literal">com.acme.ejb</code> package, and any subpackages, if the system property <code class="literal">exclude-ejbs</code> is set with any value and if at the same time, the <code class="literal">javax.enterprise.inject.Model</code> class is also available to the classloader.
							</div></dd></dl></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						It is safe to annotate Java EE components with <code class="literal">@Vetoed</code> to prevent them being considered beans. An event is not fired for any type annotated with <code class="literal">@Vetoed</code>, or in a package annotated with <code class="literal">@Vetoed</code>. For more information, see <a class="link" href="#vetoed" title="@Vetoed"><code class="literal">@Vetoed</code></a>.
					</p></div></div></section><section class="section" id="use_an_injection_to_extend_an_implementation"><div class="titlepage"><div><div><h3 class="title">7.2.3. Use an Injection to Extend an Implementation</h3></div></div></div><p>
					You can use an injection to add or change a feature of your existing code.
				</p><p>
					The following example adds a translation ability to an existing class, and assumes you already have a <code class="literal">Welcome</code> class, which has a method <code class="literal">buildPhrase</code>. The <code class="literal">buildPhrase</code> method takes as an argument the name of a city, and outputs a phrase like "Welcome to Boston!".
				</p><p>
					This example injects a hypothetical <code class="literal">Translator</code> object into the <code class="literal">Welcome</code> class. The <code class="literal">Translator</code> object can be an EJB stateless bean or another type of bean, which can translate sentences from one language to another. In this instance, the <code class="literal">Translator</code> is used to translate the entire greeting, without modifying the original <code class="literal">Welcome</code> class. The <code class="literal">Translator</code> is injected before the <code class="literal">buildPhrase</code> method is called.
				</p><div class="formalpara"><p class="title"><strong>Example: Inject a Translator Bean into the <code class="literal">Welcome</code> Class</strong></p><p>
						
<pre class="programlisting language-java">public class TranslatingWelcome extends Welcome {

    @Inject Translator translator;

    public String buildPhrase(String city) {
        return translator.translate("Welcome to " + city + "!");
    }
    ...
}</pre>

					</p></div></section></section><section class="section" id="ambiguous_or_unsatisfied_dependencies"><div class="titlepage"><div><div><h2 class="title">7.3. Ambiguous or Unsatisfied Dependencies</h2></div></div></div><p>
				Ambiguous dependencies exist when the container is unable to resolve an injection to exactly one bean.
			</p><p>
				Unsatisfied dependencies exist when the container is unable to resolve an injection to any bean at all.
			</p><p>
				The container takes the following steps to try to resolve dependencies:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						It resolves the qualifier annotations on all beans that implement the bean type of an injection point.
					</li><li class="listitem">
						It filters out disabled beans. Disabled beans are <code class="literal">@Alternative</code> beans which are not explicitly enabled.
					</li></ol></div><p>
				In the event of an ambiguous or unsatisfied dependency, the container aborts deployment and throws an exception.
			</p><p>
				To fix an ambiguous dependency, see <a class="link" href="#use_a_qualifier_to_resolve_an_ambiguous_injection" title="7.3.2. Use a Qualifier to Resolve an Ambiguous Injection">Use a Qualifier to Resolve an Ambiguous Injection</a>.
			</p><section class="section" id="about_qualifiers"><div class="titlepage"><div><div><h3 class="title">7.3.1. Qualifiers</h3></div></div></div><p>
					Qualifiers are annotations used to avoid ambiguous dependencies when the container can resolve multiple beans, which fit into an injection point. A qualifier declared at an injection point provides the set of eligible beans, which declare the same qualifier.
				</p><p>
					Qualifiers must be declared with a retention and target as shown in the example below.
				</p><div class="formalpara"><p class="title"><strong>Example: Define the <code class="literal">@Synchronous</code> and <code class="literal">@Asynchronous</code> Qualifiers</strong></p><p>
						
<pre class="programlisting language-java">@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Synchronous {}</pre>

					</p></div><pre class="programlisting language-java">@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Asynchronous {}</pre><div class="formalpara"><p class="title"><strong>Example: Use the <code class="literal">@Synchronous</code> and <code class="literal">@Asynchronous</code> Qualifiers</strong></p><p>
						
<pre class="programlisting language-java">@Synchronous
public class SynchronousPaymentProcessor implements PaymentProcessor {
   public void process(Payment payment) { ... }
}</pre>

					</p></div><pre class="programlisting language-java">@Asynchronous
public class AsynchronousPaymentProcessor implements PaymentProcessor {
   public void process(Payment payment) { ... }
}</pre><h5 id="any_qualifier">'@Any'</h5><p>
					Whenever a bean or injection point does not explicitly declare a qualifier, the container assumes the qualifier <code class="literal">@Default</code>. From time to time, you will need to declare an injection point without specifying a qualifier. There is a qualifier for that too. All beans have the qualifier <code class="literal">@Any</code>. Therefore, by explicitly specifying <code class="literal">@Any</code> at an injection point, you suppress the default qualifier, without otherwise restricting the beans that are eligible for injection.
				</p><p>
					This is especially useful if you want to iterate over all beans of a certain bean type.
				</p><pre class="programlisting language-java">import javax.enterprise.inject.Instance;
...

@Inject

void initServices(@Any Instance&lt;Service&gt; services) {

   for (Service service: services) {

      service.init();

   }

}</pre><p>
					Every bean has the qualifier <code class="literal">@Any</code>, even if it does not explicitly declare this qualifier.
				</p><p>
					Every event also has the qualifier <code class="literal">@Any</code>, even if it was raised without explicit declaration of this qualifier.
				</p><pre class="programlisting language-java">@Inject @Any Event&lt;User&gt; anyUserEvent;</pre><p>
					The <code class="literal">@Any</code> qualifier allows an injection point to refer to all beans or all events of a certain bean type.
				</p><pre class="programlisting language-java">@Inject @Delegate @Any Logger logger;</pre></section><section class="section" id="use_a_qualifier_to_resolve_an_ambiguous_injection"><div class="titlepage"><div><div><h3 class="title">7.3.2. Use a Qualifier to Resolve an Ambiguous Injection</h3></div></div></div><p>
					You can resolve an ambiguous injection using a qualifier. Read more about ambiguous injections at <a class="link" href="#ambiguous_or_unsatisfied_dependencies" title="7.3. Ambiguous or Unsatisfied Dependencies">Ambiguous or Unsatisfied Dependencies</a>.
				</p><p>
					The following example is ambiguous and features two implementations of <code class="literal">Welcome</code>, one which translates and one which does not. The injection needs to be specified to use the translating <code class="literal">Welcome</code>.
				</p><div class="formalpara"><p class="title"><strong>Example: Ambiguous Injection</strong></p><p>
						
<pre class="programlisting language-java">public class Greeter {
  private Welcome welcome;

  @Inject
  void init(Welcome welcome) {
    this.welcome = welcome;
  }
  ...
}</pre>

					</p></div><h5 id="resolve_an_ambiguous_injection_with_a_qualifier">Resolve an Ambiguous Injection with a Qualifier</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To resolve the ambiguous injection, create a qualifier annotation called <code class="literal">@Translating</code>:
						</p><pre class="programlisting language-java">@Qualifier
@Retention(RUNTIME)
@Target({TYPE,METHOD,FIELD,PARAMETERS})
public @interface Translating{}</pre></li><li class="listitem"><p class="simpara">
							Annotate your translating <code class="literal">Welcome</code> with the <code class="literal">@Translating</code> annotation:
						</p><pre class="programlisting language-java">@Translating
public class TranslatingWelcome extends Welcome {
    @Inject Translator translator;
    public String buildPhrase(String city) {
        return translator.translate("Welcome to " + city + "!");
    }
    ...
}</pre></li><li class="listitem"><p class="simpara">
							Request the translating <code class="literal">Welcome</code> in your injection. You must request a qualified implementation explicitly, similar to the factory method pattern. The ambiguity is resolved at the injection point.
						</p><pre class="programlisting language-java">public class Greeter {
  private Welcome welcome;
  @Inject
  void init(@Translating Welcome welcome) {
    this.welcome = welcome;
  }
  public void welcomeVisitors() {
    System.out.println(welcome.buildPhrase("San Francisco"));
  }
}</pre></li></ol></div></section></section><section class="section" id="managed_beans"><div class="titlepage"><div><div><h2 class="title">7.4. Managed Beans</h2></div></div></div><p>
				Java EE establishes a common definition in the Managed Beans specification. Managed beans are defined as container-managed objects with minimal programming restrictions, otherwise known by the acronym POJO (Plain Old Java Object). They support a small set of basic services, such as resource injection, lifecycle callbacks, and interceptors. Companion specifications, such as EJB and CDI, build on this basic model.
			</p><p>
				With very few exceptions, almost every concrete Java class that has a constructor with no parameters, or a constructor designated with the annotation <code class="literal">@Inject</code>, is a bean. This includes every JavaBean and every EJB session bean.
			</p><section class="section" id="types_of_classes_that_are_beans"><div class="titlepage"><div><div><h3 class="title">7.4.1. Types of Classes That are Beans</h3></div></div></div><p>
					A managed bean is a Java class. The basic lifecycle and semantics of a managed bean are defined by the Managed Beans specification. You can explicitly declare a managed bean by annotating the bean class <code class="literal">@ManagedBean</code>, but in CDI you do not need to. According to the specification, the CDI container treats any class that satisfies the following conditions as a managed bean:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							It is not a non-static inner class.
						</li><li class="listitem">
							It is a concrete class or is annotated with <code class="literal">@Decorator</code>.
						</li><li class="listitem">
							It is not annotated with an EJB component-defining annotation or declared as an EJB bean class in the <code class="literal">ejb-jar.xml</code> file.
						</li><li class="listitem">
							It does not implement the interface <code class="literal">javax.enterprise.inject.spi.Extension</code>.
						</li><li class="listitem">
							It has either a constructor with no parameters, or a constructor annotated with <code class="literal">@Inject</code>.
						</li><li class="listitem">
							It is not annotated with <code class="literal">@Vetoed</code> or in a package annotated with <code class="literal">@Vetoed</code> .
						</li></ul></div><p>
					The unrestricted set of bean types for a managed bean contains the bean class, every superclass, and all interfaces it implements directly or indirectly.
				</p><p>
					If a managed bean has a public field, it must have the default scope <code class="literal">@Dependent</code>.
				</p><h5 id="vetoed">@Vetoed</h5><p>
					The <code class="literal">@Vetoed</code> annotation was introduced in CDI 1.1. You can prevent a bean from injection by adding this annotation:
				</p><pre class="programlisting language-java">@Vetoed
public class SimpleGreeting implements Greeting {
    ...
}</pre><p>
					In this code, the <code class="literal">SimpleGreeting</code> bean is not considered for injection.
				</p><p>
					All beans in a package can be prevented from injection:
				</p><pre class="programlisting language-java">@Vetoed
package org.sample.beans;

import javax.enterprise.inject.Vetoed;</pre><p>
					This code in <code class="literal">package-info.java</code> in the <code class="literal">org.sample.beans</code> package will prevent all beans inside this package from injection.
				</p><p>
					Java EE components, such as stateless EJBs or JAX-RS resource endpoints, can be marked with <code class="literal">@Vetoed</code> to prevent them from being considered beans. Adding the <code class="literal">@Vetoed</code> annotation to all persistent entities prevents the <code class="literal">BeanManager</code> from managing an entity as a CDI Bean. When an entity is annotated with <code class="literal">@Vetoed</code>, no injections take place. The reasoning behind this is to prevent the <code class="literal">BeanManager</code> from performing the operations that might cause the JPA provider to break.
				</p></section><section class="section" id="use_cdi_to_inject_an_object_into_a_bean"><div class="titlepage"><div><div><h3 class="title">7.4.2. Use CDI to Inject an Object Into a Bean</h3></div></div></div><p>
					CDI is activated automatically if CDI components are detected in an application. If you want to customize your configuration to differ from the default, you can include a <code class="literal">META-INF/beans.xml</code> file or a <code class="literal">WEB-INF/beans.xml</code> file in your deployment archive.
				</p><h5 id="inject_objects_into_other_objects">Inject Objects into Other Objects</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To obtain an instance of a class, annotate the field with <code class="literal">@Inject</code> within your bean:
						</p><pre class="programlisting language-java">public class TranslateController {
   @Inject TextTranslator textTranslator;
   ...</pre></li><li class="listitem"><p class="simpara">
							Use your injected object’s methods directly. Assume that <code class="literal">TextTranslator</code> has a method <code class="literal">translate</code>:
						</p><pre class="programlisting language-java">// in TranslateController class

public void translate() {
   translation = textTranslator.translate(inputText);
}</pre></li><li class="listitem"><p class="simpara">
							Use an injection in the constructor of a bean. You can inject objects into the constructor of a bean as an alternative to using a factory or service locator to create them:
						</p><pre class="programlisting language-java">public class TextTranslator {

   private SentenceParser sentenceParser;
   private Translator sentenceTranslator;

   @Inject
   TextTranslator(SentenceParser sentenceParser, Translator sentenceTranslator) {
      this.sentenceParser = sentenceParser;
      this.sentenceTranslator = sentenceTranslator;
   }

   // Methods of the TextTranslator class
   ...
}</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">Instance(&lt;T&gt;)</code> interface to get instances programmatically. The <code class="literal">Instance</code> interface can return an instance of <code class="literal">TextTranslator</code> when parameterized with the bean type.
						</p><pre class="programlisting language-java">@Inject Instance&lt;TextTranslator&gt; textTranslatorInstance;
...
public void translate() {
   textTranslatorInstance.get().translate(inputText);
}</pre></li></ol></div><p>
					When you inject an object into a bean, all of the object’s methods and properties are available to your bean. If you inject into your bean’s constructor, instances of the injected objects are created when your bean’s constructor is called, unless the injection refers to an instance that already exists. For instance, a new instance would not be created if you inject a session-scoped bean during the lifetime of the session.
				</p></section></section><section class="section" id="contexts_and_scopes"><div class="titlepage"><div><div><h2 class="title">7.5. Contexts and Scopes</h2></div></div></div><p>
				A context, in terms of CDI, is a storage area that holds instances of beans associated with a specific scope.
			</p><p>
				A scope is the link between a bean and a context. A scope/context combination can have a specific lifecycle. Several predefined scopes exist, and you can create your own. Examples of predefined scopes are <code class="literal">@RequestScoped</code>, <code class="literal">@SessionScoped</code>, and <code class="literal">@ConversationScope</code>.
			</p><div class="table" id="idm140421279595936"><p class="title"><strong>Table 7.1. Available Scopes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421279590368" scope="col">Scope</th><th align="left" valign="top" id="idm140421279589280" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421279590368"> <p>
								<code class="literal">@Dependent</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421279589280"> <p>
								The bean is bound to the lifecycle of the bean holding the reference. The default scope for an injected bean is <code class="literal">@Dependent</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421279590368"> <p>
								<code class="literal">@ApplicationScoped</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421279589280"> <p>
								The bean is bound to the lifecycle of the application.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421279590368"> <p>
								<code class="literal">@RequestScoped</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421279589280"> <p>
								The bean is bound to the lifecycle of the request.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421279590368"> <p>
								<code class="literal">@SessionScoped</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421279589280"> <p>
								The bean is bound to the lifecycle of the session.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421279590368"> <p>
								<code class="literal">@ConversationScoped</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421279589280"> <p>
								The bean is bound to the lifecycle of the conversation. The conversation scope is between the lengths of the request and the session, and is controlled by the application.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421279590368"> <p>
								Custom scopes
							</p>
							 </td><td align="left" valign="top" headers="idm140421279589280"> <p>
								If the above contexts do not meet your needs, you can define custom scopes.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="about_named_beans"><div class="titlepage"><div><div><h2 class="title">7.6. Named Beans</h2></div></div></div><p>
				You can name a bean by using the <code class="literal">@Named</code> annotation. Naming a bean allows you to use it directly in Java Server Faces (JSF) and Expression Language (EL).
			</p><p>
				The <code class="literal">@Named</code> annotation takes an optional parameter, which is the bean name. If this parameter is omitted, the bean name defaults to the class name of the bean with its first letter converted to lowercase.
			</p><section class="section" id="use_named_beans"><div class="titlepage"><div><div><h3 class="title">7.6.1. Use Named Beans</h3></div></div></div><h5 id="configure_bean_names_using_the_named_annotation">Configure Bean Names Using the @Named Annotation</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">@Named</code> annotation to assign a name to a bean.
						</p><pre class="programlisting language-java">@Named("greeter")
public class GreeterBean {
  private Welcome welcome;

  @Inject
  void init (Welcome welcome) {
    this.welcome = welcome;
  }

  public void welcomeVisitors() {
    System.out.println(welcome.buildPhrase("San Francisco"));
  }
}</pre><p class="simpara">
							In the example above, the default name would be <code class="literal">greeterBean</code> if no name had been specified.
						</p></li><li class="listitem"><p class="simpara">
							Use the named bean in a JSF view.
						</p><pre class="screen">&lt;h:form&gt;
  &lt;h:commandButton value="Welcome visitors" action="#{greeter.welcomeVisitors}"/&gt;
&lt;/h:form&gt;</pre></li></ol></div></section></section><section class="section" id="bean_lifecycle"><div class="titlepage"><div><div><h2 class="title">7.7. Bean Lifecycle</h2></div></div></div><p>
				This task shows you how to save a bean for the life of a request.
			</p><p>
				The default scope for an injected bean is <code class="literal">@Dependent</code>. This means that the bean’s lifecycle is dependent upon the lifecycle of the bean that holds the reference. Several other scopes exist, and you can define your own scopes. For more information, see <a class="link" href="#contexts_and_scopes" title="7.5. Contexts and Scopes">Contexts and Scopes</a>.
			</p><h4 id="manage_bean_lifecycles">Manage Bean Lifecycles</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Annotate the bean with the desired scope.
					</p><pre class="programlisting language-java">@RequestScoped
@Named("greeter")
public class GreeterBean {
  private Welcome welcome;
  private String city; // getter &amp; setter not shown
  @Inject   void init(Welcome welcome) {
    this.welcome = welcome;
  }
  public void welcomeVisitors() {
    System.out.println(welcome.buildPhrase(city));
  }
}</pre></li><li class="listitem"><p class="simpara">
						When your bean is used in the JSF view, it holds state.
					</p><pre class="programlisting language-xml">&lt;h:form&gt;
  &lt;h:inputText value="#{greeter.city}"/&gt;
  &lt;h:commandButton value="Welcome visitors" action="#{greeter.welcomeVisitors}"/&gt;
&lt;/h:form&gt;</pre></li></ol></div><p>
				Your bean is saved in the context relating to the scope that you specify, and lasts as long as the scope applies.
			</p><section class="section" id="user_a_producer_method"><div class="titlepage"><div><div><h3 class="title">7.7.1. Use a Producer Method</h3></div></div></div><p>
					A <span class="emphasis"><em>producer method</em></span> is a method that acts as a source of bean instances. When no instance exists in the specified context, the method declaration itself describes the bean, and the container invokes the method to obtain an instance of the bean. A producer method lets the application take full control of the bean instantiation process.
				</p><p>
					This section shows how to use producer methods to produce a variety of different objects that are not beans for injection.
				</p><div class="formalpara"><p class="title"><strong>Example: Use a Producer Method</strong></p><p>
						By using a producer method instead of an alternative, polymorphism after deployment is allowed.
					</p></div><p>
					The <code class="literal">@Preferred</code> annotation in the example is a qualifier annotation. For more information about qualifiers, see <a class="link" href="#about_qualifiers" title="7.3.1. Qualifiers">Qualifiers</a>.
				</p><pre class="programlisting language-java">@SessionScoped
public class Preferences implements Serializable {
   private PaymentStrategyType paymentStrategy;
   ...
   @Produces @Preferred
   public PaymentStrategy getPaymentStrategy() {
       switch (paymentStrategy) {
           case CREDIT_CARD: return new CreditCardPaymentStrategy();
           case CHECK: return new CheckPaymentStrategy();
           default: return null;
       }
   }
}</pre><p>
					The following injection point has the same type and qualifier annotations as the producer method, so it resolves to the producer method using the usual CDI injection rules. The producer method is called by the container to obtain an instance to service this injection point.
				</p><pre class="programlisting language-java">@Inject @Preferred PaymentStrategy paymentStrategy;</pre><div class="formalpara"><p class="title"><strong>Example: Assign a Scope to a Producer Method</strong></p><p>
						The default scope of a producer method is <code class="literal">@Dependent</code>. If you assign a scope to a bean, it is bound to the appropriate context. The producer method in this example is only called once per session.
					</p></div><pre class="programlisting language-java">@Produces @Preferred @SessionScoped
public PaymentStrategy getPaymentStrategy() {
   ...
}</pre><div class="formalpara"><p class="title"><strong>Example: Use an Injection Inside a Producer Method</strong></p><p>
						Objects instantiated directly by an application cannot take advantage of dependency injection and do not have interceptors. However, you can use dependency injection into the producer method to obtain bean instances.
					</p></div><pre class="programlisting language-java">@Produces @Preferred @SessionScoped
public PaymentStrategy getPaymentStrategy(CreditCardPaymentStrategy ccps,
                                          CheckPaymentStrategy cps ) {
   switch (paymentStrategy) {
      case CREDIT_CARD: return ccps;
      case CHEQUE: return cps;
      default: return null;
   }
}</pre><p>
					If you inject a request-scoped bean into a session-scoped producer, the producer method promotes the current request-scoped instance into session scope. This is almost certainly not the desired behavior, so use caution when you use a producer method in this way.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The scope of the producer method is not inherited from the bean that declares the producer method.
					</p></div></div><p>
					Producer methods allow you to inject non-bean objects and change your code dynamically.
				</p></section></section><section class="section" id="alternative_beans"><div class="titlepage"><div><div><h2 class="title">7.8. Alternative Beans</h2></div></div></div><p>
				Alternatives are beans whose implementation is specific to a particular client module or deployment scenario.
			</p><p>
				By default, <code class="literal">@Alternative</code> beans are disabled. They are enabled for a specific bean archive by editing its <code class="literal">beans.xml</code> file. However, this activation only applies to the beans in that archive. From CDI 1.1 onwards, the alternative can be enabled for the entire application using the <code class="literal">@Priority</code> annotation.
			</p><div class="formalpara"><p class="title"><strong>Example: Defining Alternatives</strong></p><p>
					This alternative defines an implementation of the <code class="literal">PaymentProcessor</code> class using both <code class="literal">@Synchronous</code> and <code class="literal">@Asynchronous</code> alternatives:
				</p></div><pre class="programlisting language-java">@Alternative @Synchronous @Asynchronous

public class MockPaymentProcessor implements PaymentProcessor {

   public void process(Payment payment) { ... }

}</pre><div class="formalpara"><p class="title"><strong>Example: Enabling <code class="literal">@Alternative</code> Using <code class="literal">beans.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;beans
   xmlns="http://xmlns.jcp.org/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://xmlns.jcp.org/xml/ns/javaee
      http://xmlns.jcp.org/xml/ns/javaee/beans_2_0.xsd"&gt;
   &lt;alternatives&gt;
         &lt;class&gt;org.mycompany.mock.MockPaymentProcessor&lt;/class&gt;
   &lt;/alternatives&gt;
&lt;/beans&gt;</pre>

				</p></div><h4 id="declaring_selected_alternatives">Declaring Selected Alternatives</h4><p>
				The <code class="literal">@Priority</code> annotation allows an alternative to be enabled for an entire application. An alternative can be given a priority for the application:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						by placing the <code class="literal">@Priority</code> annotation on the bean class of a managed bean or session bean, or
					</li><li class="listitem">
						by placing the <code class="literal">@Priority</code> annotation on the bean class that declares the producer method, field or resource.
					</li></ul></div><section class="section" id="override_injection_with_alternative"><div class="titlepage"><div><div><h3 class="title">7.8.1. Override an Injection with an Alternative</h3></div></div></div><p>
					You can use alternative beans to override existing beans. They can be thought of as a way to plug in a class which fills the same role, but functions differently. They are disabled by default.
				</p><p>
					This task shows you how to specify and enable an alternative.
				</p><h5 id="override_an_injection">Override an Injection</h5><p>
					This task assumes that you already have a <code class="literal">TranslatingWelcome</code> class in your project, but you want to override it with a "mock" <code class="literal">TranslatingWelcome</code> class. This would be the case for a test deployment, where the true <code class="literal">Translator</code> bean cannot be used.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Define the alternative.
						</p><pre class="programlisting language-java">@Alternative
@Translating
public class MockTranslatingWelcome extends Welcome {
  public String buildPhrase(string city) {
    return "Bienvenue Ã  " + city + "!");
  }
}</pre></li><li class="listitem"><p class="simpara">
							Activate the substitute implementation by adding the fully-qualified class name to your <code class="literal">META-INF/beans.xml</code> or <code class="literal">WEB-INF/beans.xml</code> file.
						</p><pre class="programlisting language-xml">&lt;beans&gt;
  &lt;alternatives&gt;
    &lt;class&gt;com.acme.MockTranslatingWelcome&lt;/class&gt;
  &lt;/alternatives&gt;
&lt;/beans&gt;</pre></li></ol></div><p>
					The alternative implementation is now used instead of the original one.
				</p></section></section><section class="section" id="stereotypes"><div class="titlepage"><div><div><h2 class="title">7.9. Stereotypes</h2></div></div></div><p>
				In many systems, use of architectural patterns produces a set of recurring bean roles. A stereotype allows you to identify such a role and declare some common metadata for beans with that role in a central place.
			</p><p>
				A stereotype encapsulates any combination of:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A default scope.
					</li><li class="listitem">
						A set of interceptor bindings.
					</li></ul></div><p>
				A stereotype can also specify either:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						All beans where the stereotypes are defaulted bean EL names.
					</li><li class="listitem">
						All beans where the stereotypes are alternatives.
					</li></ul></div><p>
				A bean can declare zero, one, or multiple stereotypes. A stereotype is an <code class="literal">@Stereotype</code> annotation that packages several other annotations. Stereotype annotations can be applied to a bean class, producer method, or field.
			</p><p>
				A class that inherits a scope from a stereotype can override that stereotype and specify a scope directly on the bean.
			</p><p>
				In addition, if a stereotype has a <code class="literal">@Named</code> annotation, any bean it is placed on has a default bean name. The bean can override this name if the <code class="literal">@Named</code> annotation is specified directly on the bean. For more information about named beans, see <a class="link" href="#about_named_beans" title="7.6. Named Beans">Named Beans</a>.
			</p><section class="section" id="use_stereotypes"><div class="titlepage"><div><div><h3 class="title">7.9.1. Use Stereotypes</h3></div></div></div><p>
					Without stereotypes, annotations can become cluttered. This task shows you how to use stereotypes to reduce the clutter and streamline your code.
				</p><div class="formalpara"><p class="title"><strong>Example: Annotation Clutter</strong></p><p>
						
<pre class="programlisting language-java">@Secure
@Transactional
@RequestScoped
@Named
public class AccountManager {
  public boolean transfer(Account a, Account b) {
    ...
  }
}</pre>

					</p></div><h5 id="define_and_use_stereotypes">Define and Use Stereotypes</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Define the stereotype.
						</p><pre class="programlisting language-java">@Secure
@Transactional
@RequestScoped
@Named
@Stereotype
@Retention(RUNTIME)
@Target(TYPE)
public @interface BusinessComponent {
 ...
}</pre></li><li class="listitem"><p class="simpara">
							Use the stereotype.
						</p><pre class="programlisting language-java">@BusinessComponent
public class AccountManager {
  public boolean transfer(Account a, Account b) {
    ...
  }
}</pre></li></ol></div></section></section><section class="section" id="observer_methods"><div class="titlepage"><div><div><h2 class="title">7.10. Observer Methods</h2></div></div></div><p>
				Observer methods receive notifications when events occur.
			</p><p>
				CDI also provides transactional observer methods, which receive event notifications during the before completion or after completion phase of the transaction in which the event was fired.
			</p><section class="section" id="fire_and_observe_events"><div class="titlepage"><div><div><h3 class="title">7.10.1. Fire and Observe Events</h3></div></div></div><div class="formalpara"><p class="title"><strong>Example: Fire an Event</strong></p><p>
						The following code shows an event being injected and used in a method.
					</p></div><pre class="programlisting language-java">public class AccountManager {
  @Inject Event&lt;Withdrawal&gt; event;

  public boolean transfer(Account a, Account b) {
    ...
    event.fire(new Withdrawal(a));
  }
}</pre><div class="formalpara"><p class="title"><strong>Example: Fire an Event with a Qualifier</strong></p><p>
						You can annotate your event injection with a qualifier, to make it more specific. For more information about qualifiers, see <a class="link" href="#about_qualifiers" title="7.3.1. Qualifiers">Qualifiers</a>.
					</p></div><pre class="programlisting language-java">public class AccountManager {
  @Inject @Suspicious Event &lt;Withdrawal&gt; event;

  public boolean transfer(Account a, Account b) {
    ...
    event.fire(new Withdrawal(a));
  }
}</pre><div class="formalpara"><p class="title"><strong>Example: Observe an Event</strong></p><p>
						To observe an event, use the <code class="literal">@Observes</code> annotation.
					</p></div><pre class="programlisting language-java">public class AccountObserver {
  void checkTran(@Observes Withdrawal w) {
    ...
  }
}</pre><p>
					You can use qualifiers to observe only specific types of events.
				</p><pre class="programlisting language-java">public class AccountObserver {
  void checkTran(@Observes @Suspicious Withdrawal w) {
    ...
  }
}</pre></section><section class="section" id="transactional_observers"><div class="titlepage"><div><div><h3 class="title">7.10.2. Transactional Observers</h3></div></div></div><p>
					Transactional observers receive the event notifications before or after the completion phase of the transaction in which the event was raised. Transactional observers are important in a stateful object model because state is often held for longer than a single atomic transaction.
				</p><p>
					There are five kinds of transactional observers:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">IN_PROGRESS</code>: By default, observers are invoked immediately.
						</li><li class="listitem">
							<code class="literal">AFTER_SUCCESS</code>: Observers are invoked after the completion phase of the transaction, but only if the transaction completes successfully.
						</li><li class="listitem">
							<code class="literal">AFTER_FAILURE</code>: Observers are invoked after the completion phase of the transaction, but only if the transaction fails to complete successfully.
						</li><li class="listitem">
							<code class="literal">AFTER_COMPLETION</code>: Observers are invoked after the completion phase of the transaction.
						</li><li class="listitem">
							<code class="literal">BEFORE_COMPLETION</code>: Observers are invoked before the completion phase of the transaction.
						</li></ul></div><p>
					The following observer method refreshes a query result set cached in the application context, but only when transactions that update the Category tree are successful:
				</p><pre class="programlisting language-java">public void refreshCategoryTree(@Observes(during = AFTER_SUCCESS) CategoryUpdateEvent event) { ... }</pre><p>
					Assume you have cached a JPA query result set in the application scope as shown in the following example:
				</p><pre class="programlisting language-java">import javax.ejb.Singleton;
import javax.enterprise.inject.Produces;

@ApplicationScoped @Singleton

public class Catalog {
   @PersistenceContext EntityManager em;
   List&lt;Product&gt; products;
   @Produces @Catalog
   List&lt;Product&gt; getCatalog() {
      if (products==null) {
         products = em.createQuery("select p from Product p where p.deleted = false")
            .getResultList();
      }
      return products;
   }
}</pre><p>
					Occasionally a <code class="literal">Product</code> is created or deleted. When this occurs, you need to refresh the <code class="literal">Product</code> catalog. But you must wait for the transaction to complete successfully before performing this refresh.
				</p><p>
					The following is an example of a bean that creates and deletes <code class="literal">Products</code> triggers events:
				</p><pre class="programlisting language-java">import javax.enterprise.event.Event;

@Stateless

public class ProductManager {
   @PersistenceContext EntityManager em;
   @Inject @Any Event&lt;Product&gt; productEvent;
   public void delete(Product product) {
      em.delete(product);
      productEvent.select(new AnnotationLiteral&lt;Deleted&gt;(){}).fire(product);
   }

   public void persist(Product product) {
      em.persist(product);
      productEvent.select(new AnnotationLiteral&lt;Created&gt;(){}).fire(product);
   }
   ...
}</pre><p>
					The <code class="literal">Catalog</code> can now observe the events after successful completion of the transaction:
				</p><pre class="programlisting language-java">import javax.ejb.Singleton;

@ApplicationScoped @Singleton
public class Catalog {
   ...
   void addProduct(@Observes(during = AFTER_SUCCESS) @Created Product product) {
      products.add(product);
   }

   void removeProduct(@Observes(during = AFTER_SUCCESS) @Deleted Product product) {
      products.remove(product);
   }

}</pre></section></section><section class="section" id="interceptors"><div class="titlepage"><div><div><h2 class="title">7.11. Interceptors</h2></div></div></div><p>
				Interceptors allow you to add functionality to the business methods of a bean without modifying the bean’s method directly. The interceptor is executed before any of the business methods of the bean. Interceptors are defined as part of the <a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=345" title="Mimir does not include content from: jcp.org">JSR 345: Enterprise JavaBeans™ 3.2</a> specification.
			</p><p>
				CDI enhances this functionality by allowing you to use annotations to bind interceptors to beans.
			</p><p>
				<span class="strong strong"><strong>Interception points</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Business method interception: A business method interceptor applies to invocations of methods of the bean by clients of the bean.
					</li><li class="listitem">
						Lifecycle callback interception: A lifecycle callback interceptor applies to invocations of lifecycle callbacks by the container.
					</li><li class="listitem">
						Timeout method interception: A timeout method interceptor applies to invocations of the EJB timeout methods by the container.
					</li></ul></div><h4 id="enabling_interceptors">Enabling Interceptors</h4><p>
				By default, all interceptors are disabled. You can enable the interceptor by using the <code class="literal">beans.xml</code> descriptor of a bean archive. However, this activation only applies to the beans in that archive. From CDI 1.1 onwards the interceptor can be enabled for the whole application using the <code class="literal">@Priority</code> annotation.
			</p><div class="formalpara"><p class="title"><strong>Example: Enabling Interceptors in <code class="literal">beans.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;beans
   xmlns="http://xmlns.jcp.org/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://xmlns.jcp.org/xml/ns/javaee
      http://xmlns.jcp.org/xml/ns/javaee/beans_2.0.xsd"&gt;
   &lt;interceptors&gt;
      &lt;class&gt;org.mycompany.myapp.TransactionInterceptor&lt;/class&gt;
   &lt;/interceptors&gt;
&lt;/beans&gt;</pre>

				</p></div><p>
				Having the XML declaration solves two problems:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						It enables you to specify an ordering for the interceptors in your system, ensuring deterministic behavior.
					</li><li class="listitem">
						It lets you enable or disable interceptor classes at deployment time.
					</li></ul></div><p>
				Interceptors enabled using <code class="literal">@Priority</code> are called before interceptors enabled using the <code class="literal">beans.xml</code> file.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Having an interceptor enabled by <code class="literal">@Priority</code> and at the same time invoked by the <code class="literal">beans.xml</code> file leads to a nonportable behavior. This combination of enablement should therefore be avoided in order to maintain consistent behavior across different CDI implementations.
				</p></div></div><section class="section" id="use_interceptors_with_cdi"><div class="titlepage"><div><div><h3 class="title">7.11.1. Use Interceptors with CDI</h3></div></div></div><p>
					CDI can simplify your interceptor code and make it easier to apply to your business code.
				</p><p>
					Without CDI, interceptors have two problems:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The bean must specify the interceptor implementation directly.
						</li><li class="listitem">
							Every bean in the application must specify the full set of interceptors in the correct order. This makes adding or removing interceptors on an application-wide basis time-consuming and error-prone.
						</li></ul></div><h5 id="using_interceptors_with_cdi">Using Interceptors with CDI</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Define the interceptor binding type.
						</p><pre class="programlisting language-java">@InterceptorBinding
@Retention(RUNTIME)
@Target({TYPE, METHOD})
public @interface Secure {}</pre></li><li class="listitem"><p class="simpara">
							Mark the interceptor implementation.
						</p><pre class="programlisting language-java">@Secure
@Interceptor
public class SecurityInterceptor {
  @AroundInvoke
  public Object aroundInvoke(InvocationContext ctx) throws Exception {
    // enforce security ...
    return ctx.proceed();
    }
}</pre></li><li class="listitem"><p class="simpara">
							Use the interceptor in your development environment.
						</p><pre class="programlisting language-java">@Secure
public class AccountManager {
  public boolean transfer(Account a, Account b) {
    ...
  }
}</pre></li><li class="listitem"><p class="simpara">
							Enable the interceptor in your deployment, by adding it to the <code class="literal">META-INF/beans.xml</code> or <code class="literal">WEB-INF/beans.xml</code> file.
						</p><pre class="programlisting language-xml">&lt;beans&gt;
  &lt;interceptors&gt;
    &lt;class&gt;com.acme.SecurityInterceptor&lt;/class&gt;
    &lt;class&gt;com.acme.TransactionInterceptor&lt;/class&gt;
  &lt;/interceptors&gt;
&lt;/beans&gt;</pre></li></ol></div><p>
					The interceptors are applied in the order listed.
				</p></section></section><section class="section" id="decorators"><div class="titlepage"><div><div><h2 class="title">7.12. Decorators</h2></div></div></div><p>
				A decorator intercepts invocations from a specific Java interface, and is aware of all the semantics attached to that interface. Decorators are useful for modeling some kinds of business concerns, but do not have the generality of interceptors. A decorator is a bean, or even an abstract class, that implements the type it decorates, and is annotated with <code class="literal">@Decorator</code>. To invoke a decorator in a CDI application, it must be specified in the <code class="literal">beans.xml</code> file.
			</p><div class="formalpara"><p class="title"><strong>Example: Invoke a Decorator Through <code class="literal">beans.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;beans
   xmlns="http://xmlns.jcp.org/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://xmlns.jcp.org/xml/ns/javaee
      http://xmlns.jcp.org/xml/ns/javaee/beans_2_0.xsd"&gt;
   &lt;decorators&gt;
         &lt;class&gt;org.mycompany.myapp.LargeTransactionDecorator&lt;/class&gt;
   &lt;/decorators&gt;
&lt;/beans&gt;</pre>

				</p></div><p>
				This declaration serves two main purposes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						It enables you to specify an ordering for decorators in your system, ensuring deterministic behavior.
					</li><li class="listitem">
						It lets you enable or disable decorator classes at deployment time.
					</li></ul></div><p>
				A decorator must have exactly one <code class="literal">@Delegate</code> injection point to obtain a reference to the decorated object.
			</p><div class="formalpara"><p class="title"><strong>Example: Decorator Class</strong></p><p>
					
<pre class="programlisting language-java">@Decorator
public abstract class LargeTransactionDecorator implements Account {

   @Inject @Delegate @Any Account account;
   @PersistenceContext EntityManager em;

   public void withdraw(BigDecimal amount) {
      ...
   }

   public void deposit(BigDecimal amount);
      ...
   }
}</pre>

				</p></div><p>
				From CDI 1.1 onwards, the decorator can be enabled for the whole application using <code class="literal">@Priority</code> annotation.
			</p><p>
				Decorators enabled using <code class="literal">@Priority</code> are called before decorators enabled using the <code class="literal">beans.xml</code> file. The lower priority values are called first.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Having a decorator enabled by <code class="literal">@Priority</code> and at the same time invoked by <code class="literal">beans.xml</code>, leads to a nonportable behavior. This combination of enablement should therefore be avoided in order to maintain consistent behavior across different CDI implementations.
				</p></div></div></section><section class="section" id="portable_extensions"><div class="titlepage"><div><div><h2 class="title">7.13. Portable Extensions</h2></div></div></div><p>
				CDI is intended to be a foundation for frameworks, extensions, and for integration with other technologies. Therefore, CDI exposes a set of SPIs for the use of developers of portable extensions to CDI.
			</p><p>
				Extensions can provide the following types of functionality:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Integration with Business Process Management engines.
					</li><li class="listitem">
						Integration with third-party frameworks, such as Spring, Seam, GWT, or Wicket.
					</li><li class="listitem">
						New technology based upon the CDI programming model.
					</li></ul></div><p>
				According to the <a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=346" title="Mimir does not include content from: jcp.org">JSR-346</a> specification, a portable extension can integrate with the container in the following ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Providing its own beans, interceptors, and decorators to the container.
					</li><li class="listitem">
						Injecting dependencies into its own objects using the dependency. injection service.
					</li><li class="listitem">
						Providing a context implementation for a custom scope.
					</li><li class="listitem">
						Augmenting or overriding the annotation-based metadata with metadata from another source.
					</li></ul></div><p>
				For more information, see <a class="link mimir-link-warn" href="http://docs.jboss.org/weld/reference/3.0.5.Final/en-US/html_single/#extend" title="Mimir does not include content from: docs.jboss.org">Portable extensions</a> in the Weld documentation.
			</p></section><section class="section" id="bean_proxies"><div class="titlepage"><div><div><h2 class="title">7.14. Bean Proxies</h2></div></div></div><p>
				Clients of an injected bean do not usually hold a direct reference to a bean instance. Unless the bean is a dependent object, scope <code class="literal">@Dependent</code>, the container must redirect all injected references to the bean using a proxy object.
			</p><p>
				A bean proxy, which can be referred to as client proxy, is responsible for ensuring the bean instance that receives a method invocation is the instance associated with the current context. The client proxy also allows beans bound to contexts, such as the session context, to be serialized to disk without recursively serializing other injected beans.
			</p><p>
				Due to Java limitations, some Java types cannot be proxied by the container. If an injection point declared with one of these types resolves to a bean with a scope other than <code class="literal">@Dependent</code>, the container aborts the deployment.
			</p><p>
				Certain Java types cannot be proxied by the container. These include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Classes that do not have a non-private constructor with no parameters.
					</li><li class="listitem">
						Classes that are declared <code class="literal">final</code> or have a <code class="literal">final</code> method.
					</li><li class="listitem">
						Arrays and primitive types.
					</li></ul></div></section><section class="section" id="use_a_proxy_in_an_injection"><div class="titlepage"><div><div><h2 class="title">7.15. Use a Proxy in an Injection</h2></div></div></div><p>
				A proxy is used for injection when the lifecycles of the beans are different from each other. The proxy is a subclass of the bean that is created at runtime, and overrides all the non-private methods of the bean class. The proxy forwards the invocation onto the actual bean instance.
			</p><p>
				In this example, the <code class="literal">PaymentProcessor</code> instance is not injected directly into <code class="literal">Shop</code>. Instead, a proxy is injected, and when the <code class="literal">processPayment()</code> method is called, the proxy looks up the current <code class="literal">PaymentProcessor</code> bean instance and calls the <code class="literal">processPayment()</code> method on it.
			</p><div class="formalpara"><p class="title"><strong>Example: Proxy Injection</strong></p><p>
					
<pre class="programlisting language-java">@ConversationScoped
class PaymentProcessor
{
  public void processPayment(int amount)
  {
    System.out.println("I'm taking $" + amount);
  }
}

@ApplicationScoped
public class Shop
{

  @Inject
  PaymentProcessor paymentProcessor;

  public void buyStuff()
  {
    paymentProcessor.processPayment(100);
  }
}</pre>

				</p></div></section></section><section class="chapter" id="jboss_eap_mbean_services"><div class="titlepage"><div><div><h1 class="title">Chapter 8. JBoss EAP MBean Services</h1></div></div></div><p>
			A managed bean, sometimes simply referred to as an MBean, is a type of JavaBean that is created with dependency injection. MBean services are the core building blocks of the JBoss EAP server.
		</p><section class="section" id="writing_jboss_mbean_services"><div class="titlepage"><div><div><h2 class="title">8.1. Writing JBoss MBean Services</h2></div></div></div><p>
				Writing a custom MBean service that relies on a JBoss service requires the service interface method pattern. A JBoss MBean service interface method pattern consists of a set of life cycle operations that inform an MBean service when it can <code class="literal">create</code>, <code class="literal">start</code>, <code class="literal">stop</code>, and <code class="literal">destroy</code> itself.
			</p><p>
				You can manage the dependency state using any of the following approaches:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If you want specific methods to be called on your MBean, declare those methods in your MBean interface. This approach allows your MBean implementation to avoid dependencies on JBoss specific classes.
					</li><li class="listitem">
						If you are not bothered about dependencies on JBoss specific classes, then you can have your MBean interface extend the <code class="literal">ServiceMBean</code> interface and <code class="literal">ServiceMBeanSupport</code> class. The <code class="literal">ServiceMBeanSupport</code> class provides implementations of the service lifecycle methods like create, start, and stop. To handle a specific event like the <code class="literal">start()</code> event, you need to override <code class="literal">startService()</code> method provided by the <code class="literal">ServiceMBeanSupport</code> class.
					</li></ul></div><section class="section" id="a_standard_mbean_example"><div class="titlepage"><div><div><h3 class="title">8.1.1. A Standard MBean Example</h3></div></div></div><p>
					This section develops two example MBean services packaged together in a service archive (<code class="literal">.sar</code>).
				</p><p>
					<code class="literal">ConfigServiceMBean</code> interface declares specific methods like the <code class="literal">start</code>, <code class="literal">getTimeout</code>, and <code class="literal">stop</code> methods to <code class="literal">start</code>, <code class="literal">hold</code>, and <code class="literal">stop</code> the MBean correctly without using any JBoss specific classes. <code class="literal">ConfigService</code> class implements <code class="literal">ConfigServiceMBean</code> interface and consequently implements the methods used within that interface.
				</p><p>
					The <code class="literal">PlainThread</code> class extends the <code class="literal">ServiceMBeanSupport</code> class and implements the <code class="literal">PlainThreadMBean</code> interface. <code class="literal">PlainThread</code> starts a thread and uses <code class="literal">ConfigServiceMBean.getTimeout()</code> to determine how long the thread should sleep.
				</p><div class="formalpara"><p class="title"><strong>Example: MBean Services Class</strong></p><p>
						
<pre class="programlisting language-java">package org.jboss.example.mbean.support;
public interface ConfigServiceMBean {
    int getTimeout();
    void start();
    void stop();
}
package org.jboss.example.mbean.support;
public class ConfigService implements ConfigServiceMBean {
    int timeout;
    @Override
    public int getTimeout() {
        return timeout;
    }
    @Override
    public void start() {
        //Create a random number between 3000 and 6000 milliseconds
        timeout = (int)Math.round(Math.random() * 3000) + 3000;
        System.out.println("Random timeout set to " + timeout + " seconds");
    }
    @Override
    public void stop() {
        timeout = 0;
    }
}

package org.jboss.example.mbean.support;
import org.jboss.system.ServiceMBean;
public interface PlainThreadMBean extends ServiceMBean {
    void setConfigService(ConfigServiceMBean configServiceMBean);
}

package org.jboss.example.mbean.support;
import org.jboss.system.ServiceMBeanSupport;
public class PlainThread extends ServiceMBeanSupport implements PlainThreadMBean {
    private ConfigServiceMBean configService;
    private Thread thread;
    private volatile boolean done;
    @Override
    public void setConfigService(ConfigServiceMBean configService) {
        this.configService = configService;
    }
    @Override
    protected void startService() throws Exception {
        System.out.println("Starting Plain Thread MBean");
        done = false;
        thread = new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    while (!done) {
                        System.out.println("Sleeping....");
                        Thread.sleep(configService.getTimeout());
                        System.out.println("Slept!");
                    }
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
        });
        thread.start();
    }
    @Override
    protected void stopService() throws Exception {
        System.out.println("Stopping Plain Thread MBean");
        done = true;
    }
}</pre>

					</p></div><p>
					The <code class="literal">jboss-service.xml</code> descriptor shows how the <code class="literal">ConfigService</code> class is injected into the <code class="literal">PlainThread</code> class using the <code class="literal">inject</code> tag. The <code class="literal">inject</code> tag establishes a dependency between <code class="literal">PlainThreadMBean</code> and <code class="literal">ConfigServiceMBean</code>, and thus allows <code class="literal">PlainThreadMBean</code> to use <code class="literal">ConfigServiceMBean</code> easily.
				</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">jboss-service.xml</code> Service Descriptor</strong></p><p>
						
<pre class="programlisting language-xml">&lt;server xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:jboss:service:7.0 jboss-service_7_0.xsd"
        xmlns="urn:jboss:service:7.0"&gt;
 &lt;mbean code="org.jboss.example.mbean.support.ConfigService" name="jboss.support:name=ConfigBean"/&gt;
 &lt;mbean code="org.jboss.example.mbean.support.PlainThread" name="jboss.support:name=ThreadBean"&gt;
  &lt;attribute name="configService"&gt;
   &lt;inject bean="jboss.support:name=ConfigBean"/&gt;
  &lt;/attribute&gt;
 &lt;/mbean&gt;
&lt;/server&gt;</pre>

					</p></div><p>
					After writing the MBeans example, you can package the classes and the <code class="literal">jboss-service.xml</code> descriptor in the <code class="literal">META-INF/</code> folder of a service archive (<code class="literal">.sar</code>).
				</p></section></section><section class="section" id="deploying_jboss_mbean_services"><div class="titlepage"><div><div><h2 class="title">8.2. Deploying JBoss MBean Services</h2></div></div></div><div class="formalpara"><p class="title"><strong>Example: Deploy and Test MBeans in a Managed Domain</strong></p><p>
					Use the following command to deploy the example MBeans (<code class="literal">ServiceMBeanTest.sar</code>) in a managed domain:
				</p></div><pre class="screen">deploy ~/Desktop/ServiceMBeanTest.sar --all-server-groups</pre><div class="formalpara"><p class="title"><strong>Example: Deploy and Test MBeans on a Standalone Server</strong></p><p>
					Use the following command to build and deploy the example MBeans (<code class="literal">ServiceMBeanTest.sar</code>) on a standalone server:
				</p></div><pre class="screen">deploy ~/Desktop/ServiceMBeanTest.sar</pre><div class="formalpara"><p class="title"><strong>Example: Undeploy the MBeans Archive</strong></p><p>
					Use the following command to undeploy the MBeans example:
				</p></div><pre class="screen">undeploy ServiceMBeanTest.sar</pre></section></section><section class="chapter" id="concurrency_utilities"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Concurrency Utilities</h1></div></div></div><p>
			Concurrency Utilities is an API that accommodates Java SE concurrency utilities into the Java EE application environment specifications. It is defined in <a class="link mimir-link-warn" href="https://jcp.org/ja/jsr/detail?id=236" title="Mimir does not include content from: jcp.org">JSR 236: Concurrency Utilities for Java™ EE</a>. JBoss EAP allows you to create, edit, and delete instances of EE concurrency utilities, thus making these instances readily available for applications to use.
		</p><p>
			Concurrency Utilities help to extend the invocation context by pulling in the existing context’s application threads and using these in its own threads. This extending of invocation context includes class loading, JNDI, and security contexts, by default.
		</p><p>
			Types of Concurrency Utilities include:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Context Service
				</li><li class="listitem">
					Managed Thread Factory
				</li><li class="listitem">
					Managed Executor Service
				</li><li class="listitem">
					Managed Scheduled Executor Service
				</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Concurrency Utilities in <code class="literal">standalone.xml</code></strong></p><p>
				
<pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:ee:4.0"&gt;
            &lt;spec-descriptor-property-replacement&gt;false&lt;/spec-descriptor-property-replacement&gt;
            &lt;concurrent&gt;
                &lt;context-services&gt;
                    &lt;context-service name="default" jndi-name="java:jboss/ee/concurrency/context/default" use-transaction-setup-provider="true"/&gt;
                &lt;/context-services&gt;
                &lt;managed-thread-factories&gt;
                    &lt;managed-thread-factory name="default" jndi-name="java:jboss/ee/concurrency/factory/default" context-service="default"/&gt;
                &lt;/managed-thread-factories&gt;
                &lt;managed-executor-services&gt;
                    &lt;managed-executor-service name="default" jndi-name="java:jboss/ee/concurrency/executor/default" context-service="default" hung-task-threshold="60000" keepalive-time="5000"/&gt;
                &lt;/managed-executor-services&gt;
                &lt;managed-scheduled-executor-services&gt;
                    &lt;managed-scheduled-executor-service name="default" jndi-name="java:jboss/ee/concurrency/scheduler/default" context-service="default" hung-task-threshold="60000" keepalive-time="3000"/&gt;
                &lt;/managed-scheduled-executor-services&gt;
            &lt;/concurrent&gt;
            &lt;default-bindings context-service="java:jboss/ee/concurrency/context/default" datasource="java:jboss/datasources/ExampleDS" managed-executor-service="java:jboss/ee/concurrency/executor/default" managed-scheduled-executor-service="java:jboss/ee/concurrency/scheduler/default" managed-thread-factory="java:jboss/ee/concurrency/factory/default"/&gt;
&lt;/subsystem&gt;</pre>

			</p></div><section class="section" id="context-service"><div class="titlepage"><div><div><h2 class="title">9.1. Context Service</h2></div></div></div><p>
				The context service (<code class="literal">javax.enterprise.concurrent.ContextService</code>) allows you to build contextual proxies from existing objects. Contextual proxy prepares the invocation context, which is used by other concurrency utilities when the context is created or invoked, before transferring the invocation to the original object.
			</p><p>
				Attributes of the context service concurrency utility include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">name</code>: A unique name within all the context services.
					</li><li class="listitem">
						<code class="literal">jndi-name</code>: Defines where the context service should be placed in JNDI.
					</li><li class="listitem">
						<code class="literal">use-transaction-setup-provider</code>: Optional. Indicates if the contextual proxies built by the context service should suspend transactions in context when invoking the proxy objects. Its value defaults to <code class="literal">false</code>, but the default context service has the value <code class="literal">true</code>.
					</li></ul></div><p>
				See the example above for the usage of the context service concurrency utility.
			</p><div class="formalpara"><p class="title"><strong>Example: Add a New Context Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/context-service=newContextService:add(jndi-name=java:jboss/ee/concurrency/contextservice/newContextService)</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Change a Context Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/context-service=newContextService:write-attribute(name=jndi-name, value=java:jboss/ee/concurrency/contextservice/changedContextService)</pre>

				</p></div><p>
				This operation requires reload.
			</p><div class="formalpara"><p class="title"><strong>Example: Remove a Context Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/context-service=newContextService:remove()</pre>

				</p></div><p>
				This operation requires reload.
			</p></section><section class="section" id="managed_thread_factory"><div class="titlepage"><div><div><h2 class="title">9.2. Managed Thread Factory</h2></div></div></div><p>
				The managed thread factory <code class="literal">(javax.enterprise.concurrent.ManagedThreadFactory)</code> concurrency utility allows Java EE applications to create Java threads. JBoss EAP handles the managed thread factory instances, hence Java EE applications cannot invoke any lifecycle related method.
			</p><p>
				Attributes of managed thread factory concurrency utility include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">context-service</code>: A unique name within all managed thread factories.
					</li><li class="listitem">
						<code class="literal">jndi-name</code>: Defines where in JNDI the managed thread factory should be placed.
					</li><li class="listitem">
						<code class="literal">priority</code>: Optional. Indicates the priority for new threads created by the factory, and defaults to <code class="literal">5</code>.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Add a New Managed Thread Factory</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-thread-factory=newManagedTF:add(context-service=newContextService, jndi-name=java:jboss/ee/concurrency/threadfactory/newManagedTF, priority=2)</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Change a Managed Thread Factory</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-thread-factory=newManagedTF:write-attribute(name=jndi-name, value=java:jboss/ee/concurrency/threadfactory/changedManagedTF)</pre>

				</p></div><p>
				This operation requires reload. Similarly, you can change other attributes as well.
			</p><div class="formalpara"><p class="title"><strong>Example: Remove a Managed Thread Factory</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-thread-factory=newManagedTF:remove()</pre>

				</p></div><p>
				This operation requires reload.
			</p></section><section class="section" id="managed_executor_service"><div class="titlepage"><div><div><h2 class="title">9.3. Managed Executor Service</h2></div></div></div><p>
				Managed executor service <code class="literal">(javax.enterprise.concurrent.ManagedExecutorService)</code> allows Java EE applications to submit tasks for asynchronous execution. JBoss EAP handles managed executor service instances, hence Java EE applications cannot invoke any lifecycle related method.
			</p><p>
				Attributes of managed executor service concurrency utility include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">context-service</code>: Optional. References an existing context service by its name. If specified, then the referenced context service will capture the invocation context present when submitting a task to the executor, which will then be used when executing the task.
					</li><li class="listitem">
						<code class="literal">jndi-name</code>: Defines where the managed thread factory should be placed in JNDI.
					</li><li class="listitem">
						<code class="literal">max-threads</code>: Defines the maximum number of threads used by the executor. If undefined, the value from <code class="literal">core-threads</code> is used.
					</li><li class="listitem">
						<code class="literal">thread-factory</code>: References an existing managed thread factory by its name, to handle the creation of internal threads. If not specified, then a managed thread factory with default configuration will be created and used internally.
					</li><li class="listitem">
						<code class="literal">core-threads</code>: Defines the minimum number of threads to be used by the executor. If this attribute is undefined, the default is calculated based on the number of processors. A value of <code class="literal">0</code> is not recommended. See the <code class="literal">queue-length</code> attribute for details on how this value is used to determine the queuing strategy.
					</li><li class="listitem">
						<code class="literal">keepalive-time</code>: Defines the time, in milliseconds, that an internal thread can be idle. The attribute default value is <code class="literal">60000</code>.
					</li><li class="listitem">
						<code class="literal">queue-length</code>: Indicates the executor’s task queue capacity. A value of <code class="literal">0</code> means direct hand-off and possible rejection will occur. If this attribute is undefined or set to <code class="literal">Integer.MAX_VALUE</code>, this indicates that an unbounded queue should be used. All other values specify an exact queue size. If an unbounded queue or direct hand-off is used, a <code class="literal">core-threads</code> value greater than <code class="literal">0</code> is required.
					</li><li class="listitem">
						<code class="literal">hung-task-threshold</code>: Defines the time, in milliseconds, after which tasks are considered hung by the managed executor service and forcefully aborted. If the value is <code class="literal">0</code>, which is the default, tasks are never considered hung.
					</li><li class="listitem">
						<code class="literal">long-running-tasks</code>: Suggests optimizing the execution of long running tasks, and defaults to <code class="literal">false</code>.
					</li><li class="listitem">
						<code class="literal">reject-policy</code>: Defines the policy to use when a task is rejected by the executor. The attribute value can be the default <code class="literal">ABORT</code>, which means an exception should be thrown, or <code class="literal">RETRY_ABORT</code>, which means the executor will try to submit it once more, before throwing an exception
					</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Add a New Managed Executor Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-executor-service=newManagedExecutorService:add(jndi-name=java:jboss/ee/concurrency/executor/newManagedExecutorService, core-threads=7, thread-factory=default)</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Change a Managed Executor Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-executor-service=newManagedExecutorService:write-attribute(name=core-threads,value=10)</pre>

				</p></div><p>
				This operation requires reload. Similarly, you can change other attributes too.
			</p><div class="formalpara"><p class="title"><strong>Example: Remove a Managed Executor Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-executor-service=newManagedExecutorService:remove()</pre>

				</p></div><p>
				This operation requires reload.
			</p></section><section class="section" id="managed_scheduled_executor_service"><div class="titlepage"><div><div><h2 class="title">9.4. Managed Scheduled Executor Service</h2></div></div></div><p>
				Managed scheduled executor service <code class="literal">(javax.enterprise.concurrent.ManagedScheduledExecutorService)</code> allows Java EE applications to schedule tasks for asynchronous execution. JBoss EAP handles managed scheduled executor service instances, hence Java EE applications cannot invoke any lifecycle related method.
			</p><p>
				Attributes of managed executor service concurrency utility include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">context-service</code>: References an existing context service by its name. If specified then the referenced context service will capture the invocation context present when submitting a task to the executor, which will then be used when executing the task.
					</li><li class="listitem">
						<code class="literal">hung-task-threshold</code>: Defines the time, in milliseconds, after which tasks are considered hung by the managed scheduled executor service and forcefully aborted. If the value is <code class="literal">0</code>, which is the default, tasks are never considered hung.
					</li><li class="listitem">
						<code class="literal">keepalive-time</code>: Defines the time, in milliseconds, that an internal thread can be idle. The attribute default value is <code class="literal">60000</code>.
					</li><li class="listitem">
						<code class="literal">reject-policy</code>: Defines the policy to use when a task is rejected by the executor. The attribute value might be the default <code class="literal">ABORT</code>, which means an exception should be thrown, or <code class="literal">RETRY_ABORT</code>, which means the executor will try to submit it once more, before throwing an exception.
					</li><li class="listitem">
						<code class="literal">core-threads</code>: Defines the minimum number of threads to be used by the scheduled executor.
					</li><li class="listitem">
						<code class="literal">jndi-name</code>: Defines where the managed scheduled executor service should be placed in JNDI .
					</li><li class="listitem">
						<code class="literal">long-running-tasks</code>: Suggests optimizing the execution of long running tasks, and defaults to false.
					</li><li class="listitem">
						<code class="literal">thread-factory</code>: References an existing managed thread factory by its name, to handle the creation of internal threads. If not specified, then a managed thread factory with default configuration will be created and used internally.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Add a New Managed Scheduled Executor Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-scheduled-executor-service=newManagedScheduledExecutorService:add(jndi-name=java:jboss/ee/concurrency/scheduledexecutor/newManagedScheduledExecutorService, core-threads=7, context-service=default)</pre>

				</p></div><p>
				This operation requires reload.
			</p><div class="formalpara"><p class="title"><strong>Example: Changed a Managed Scheduled Executor Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-scheduled-executor-service=newManagedScheduledExecutorService:write-attribute(name=core-threads, value=10)</pre>

				</p></div><p>
				This operation requires reload. Similarly, you can change other attributes.
			</p><div class="formalpara"><p class="title"><strong>Example: Remove a Managed Scheduled Executor Service</strong></p><p>
					
<pre class="programlisting language-xml">/subsystem=ee/managed-scheduled-executor-service=newManagedScheduledExecutorService:remove()</pre>

				</p></div><p>
				This operation requires reload.
			</p></section></section><section class="chapter" id="undertow"><div class="titlepage"><div><div><h1 class="title">Chapter 10. Undertow</h1></div></div></div><section class="section" id="introduction_undertow_handler"><div class="titlepage"><div><div><h2 class="title">10.1. Introduction to Undertow Handler</h2></div></div></div><p>
				Undertow is a web server designed to be used for both blocking and non-blocking tasks. It replaces JBoss Web in JBoss EAP 7. Some of its main features are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						High Performance
					</li><li class="listitem">
						Embeddable
					</li><li class="listitem">
						Servlet 4.0
					</li><li class="listitem">
						Web Sockets
					</li><li class="listitem">
						Reverse Proxy
					</li></ul></div><h4 id="request_lifecycle">Request Lifecycle</h4><p>
				When a client connects to the server, Undertow creates a <code class="literal">io.undertow.server.HttpServerConnection</code>. When the client sends a request, it is parsed by the Undertow parser, and then the resulting <code class="literal">io.undertow.server.HttpServerExchange</code> is passed to the root handler. When the root handler finishes, one of four things can happen:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The exchange is completed.
					</p><p class="simpara">
						An exchange is considered complete if both request and response channels have been fully read or written. For requests with no content, such as GET and HEAD, the request side is automatically considered fully read. The read side is considered complete when a handler has written out the full response and has closed and fully flushed the response channel. If an exchange is already complete, then no action is taken.
					</p></li><li class="listitem"><p class="simpara">
						The root handler returns normally without completing the exchange.
					</p><p class="simpara">
						In this case the exchange is completed by calling <code class="literal">HttpServerExchange.endExchange()</code>.
					</p></li><li class="listitem"><p class="simpara">
						The root handler returns with an Exception.
					</p><p class="simpara">
						In this case a response code of <code class="literal">500</code> is set and the exchange is ended using <code class="literal">HttpServerExchange.endExchange()</code>.
					</p></li><li class="listitem"><p class="simpara">
						The root handler can return after <code class="literal">HttpServerExchange.dispatch()</code> has been called, or after async IO has been started.
					</p><p class="simpara">
						In this case the dispatched task will be submitted to the dispatch executor, or if async IO has been started on either the request or response channels, then this will be started. In both of these cases, the exchange will not be finished. It is up to your async task to finish the exchange when it is done processing.
					</p></li></ul></div><p>
				By far the most common use of <code class="literal">HttpServerExchange.dispatch()</code> is to move execution from an IO thread, where blocking is not allowed, into a worker thread, which does allow for blocking operations.
			</p><div class="formalpara"><p class="title"><strong>Example: Dispatching to a Worker Thread</strong></p><p>
					
<pre class="programlisting language-java">public void handleRequest(final HttpServerExchange exchange) throws Exception {
    if (exchange.isInIoThread()) {
      exchange.dispatch(this);
      return;
    }
    //handler code
}</pre>

				</p></div><p>
				Because the exchange is not actually dispatched until the call stack returns, you can be sure that more than one thread is never active in an exchange at once. The exchange is not thread safe. However, it can be passed between multiple threads as long as both threads do not attempt to modify it at once.
			</p><h4 id="ending_the_exchange">Ending the Exchange</h4><p>
				There are two ways to end an exchange, either by fully reading the request channel and calling <code class="literal">shutdownWrites()</code> on the response channel and then flushing it, or by calling <code class="literal">HttpServerExchange.endExchange()</code>. When <code class="literal">endExchange()</code> is called, Undertow will check if the content has been generated yet. If it has, then it will simply drain the request channel and close and flush the response channel. If not and there are any default response listeners registered on the exchange, then Undertow will give each of them a chance to generate a default response. This mechanism is how default error pages are generated.
			</p><p>
				For more information on configuring Undertow, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Configuring the Web Server</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
			</p></section><section class="section" id="using_existing_handlers_with_deployment"><div class="titlepage"><div><div><h2 class="title">10.2. Using Existing Undertow Handlers with a Deployment</h2></div></div></div><p>
				Undertow provides a default set of handlers that you can use with any application deployed to JBoss EAP.
			</p><p>
				To use a handler with a deployment, you need to add a <code class="literal">WEB-INF/undertow-handlers.conf</code> file.
			</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">WEB-INF/undertow-handlers.conf</code> File</strong></p><p>
					
<pre class="screen">allowed-methods(methods='GET')</pre>

				</p></div><p>
				All handlers can also take an optional predicate to apply that handler in specific cases.
			</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">WEB-INF/undertow-handlers.conf</code> File with Optional Predicate</strong></p><p>
					
<pre class="screen">path('/my-path') -&gt; allowed-methods(methods='GET')</pre>

				</p></div><p>
				The above example will only apply the <code class="literal">allowed-methods</code> handler to the path <code class="literal">/my-path</code>.
			</p><h4 id="undertow_handler_default_parameter">Undertow Handler Default Parameter</h4><p>
				Some handlers have a default parameter, which allows you to specify the value of that parameter in the handler definition without using the name.
			</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">WEB-INF/undertow-handlers.conf</code> File Using the Default Parameter</strong></p><p>
					
<pre class="screen">path('/a') -&gt; redirect('/b')</pre>

				</p></div><p>
				You can also update the <code class="literal">WEB-INF/jboss-web.xml</code> file to include the definition of one or more handlers, but using <code class="literal">WEB-INF/undertow-handlers.conf</code> is preferred.
			</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">WEB-INF/jboss-web.xml</code> File</strong></p><p>
					
<pre class="programlisting language-xml">&lt;jboss-web&gt;
    &lt;http-handler&gt;
        &lt;class-name&gt;io.undertow.server.handlers.AllowedMethodsHandler&lt;/class-name&gt;
        &lt;param&gt;
            &lt;param-name&gt;methods&lt;/param-name&gt;
            &lt;param-value&gt;GET&lt;/param-value&gt;
        &lt;/param&gt;
    &lt;/http-handler&gt;
&lt;/jboss-web&gt;</pre>

				</p></div><p>
				A full list of the provided Undertow handlers can be found in the <a class="link" href="#undertow_available_handlers" title="A.1. Provided Undertow Handlers">Provided Undertow Handlers</a> reference.
			</p></section><section class="section" id="creating_custom_handler"><div class="titlepage"><div><div><h2 class="title">10.3. Creating Custom Handlers</h2></div></div></div><p>
				There are two ways to define custom handlers:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						<a class="link" href="#custom_handlers_jboss_web_xml" title="Defining Custom Handlers Using the WEB-INF/jboss-web.xml File">Using WEB-INF/jboss-web.xml file</a>
					</li><li class="listitem">
						<a class="link" href="#custom_handlers_undertow_handlers_conf" title="Defining Custom Handlers in the WEB-INF/undertow-handlers.conf File">In the WEB-INF/undertow-handlers.conf</a>
					</li></ol></div><h4 id="custom_handlers_jboss_web_xml">Defining Custom Handlers Using the WEB-INF/jboss-web.xml File</h4><p>
				A custom handler can be defined in the <code class="literal">WEB-INF/jboss-web.xml</code> file.
			</p><div class="formalpara"><p class="title"><strong>Example: Define Custom Handler in <code class="literal">WEB-INF/jboss-web.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;jboss-web&gt;
    &lt;http-handler&gt;
        &lt;class-name&gt;org.jboss.example.MyHttpHandler&lt;/class-name&gt;
    &lt;/http-handler&gt;
&lt;/jboss-web&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">HttpHandler</code> Class</strong></p><p>
					
<pre class="programlisting language-java">package org.jboss.example;

import io.undertow.server.HttpHandler;
import io.undertow.server.HttpServerExchange;

public class MyHttpHandler implements HttpHandler {
    private HttpHandler next;

    public MyHttpHandler(HttpHandler next) {
        this.next = next;
    }

    public void handleRequest(HttpServerExchange exchange) throws Exception {
        // do something
        next.handleRequest(exchange);
    }
}</pre>

				</p></div><p>
				Parameters can also be set for the custom handler using the <code class="literal">WEB-INF/jboss-web.xml</code> file.
			</p><div class="formalpara"><p class="title"><strong>Example: Defining Parameters in <code class="literal">WEB-INF/jboss-web.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;jboss-web&gt;
    &lt;http-handler&gt;
        &lt;class-name&gt;org.jboss.example.MyHttpHandler&lt;/class-name&gt;
        &lt;param&gt;
            &lt;param-name&gt;myParam&lt;/param-name&gt;
            &lt;param-value&gt;foobar&lt;/param-value&gt;
        &lt;/param&gt;
    &lt;/http-handler&gt;
&lt;/jboss-web&gt;</pre>

				</p></div><p>
				For these parameters to work, the handler class needs to have corresponding setters.
			</p><div class="formalpara"><p class="title"><strong>Example: Defining Setter Methods in Handler</strong></p><p>
					
<pre class="programlisting language-java">package org.jboss.example;

import io.undertow.server.HttpHandler;
import io.undertow.server.HttpServerExchange;

public class MyHttpHandler implements HttpHandler {
    private HttpHandler next;
    private String myParam;

    public MyHttpHandler(HttpHandler next) {
        this.next = next;
    }

    public void setMyParam(String myParam) {
        this.myParam = myParam;
    }

    public void handleRequest(HttpServerExchange exchange) throws Exception {
        // do something, use myParam
        next.handleRequest(exchange);
    }
}</pre>

				</p></div><h4 id="custom_handlers_undertow_handlers_conf">Defining Custom Handlers in the WEB-INF/undertow-handlers.conf File</h4><p>
				Instead of using the <code class="literal">WEB-INF/jboss-web.xml</code> for defining the handler, it could also be defined in the <code class="literal">WEB-INF/undertow-handlers.conf</code> file.
			</p><pre class="screen">myHttpHandler(myParam='foobar')</pre><p>
				For the handler defined in <code class="literal">WEB-INF/undertow-handlers.conf</code> to work, two things need to be created:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						An implementation of <code class="literal">HandlerBuilder</code>, which defines the corresponding syntax bits for <code class="literal">undertow-handlers.conf</code> and is responsible for creating the <code class="literal">HttpHandler</code>, wrapped in a <code class="literal">HandlerWrapper</code>.
					</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">HandlerBuilder</code> Class</strong></p><p>
							
<pre class="programlisting language-java">package org.jboss.example;

import io.undertow.server.HandlerWrapper;
import io.undertow.server.HttpHandler;
import io.undertow.server.handlers.builder.HandlerBuilder;

import java.util.Collections;
import java.util.Map;
import java.util.Set;

public class MyHandlerBuilder implements HandlerBuilder {
    public String name() {
        return "myHttpHandler";
    }

    public Map&lt;String, Class&lt;?&gt;&gt; parameters() {
        return Collections.&lt;String, Class&lt;?&gt;&gt;singletonMap("myParam", String.class);
    }

    public Set&lt;String&gt; requiredParameters() {
        return Collections.emptySet();

    }

    public String defaultParameter() {
        return null;

    }

    public HandlerWrapper build(final Map&lt;String, Object&gt; config) {
        return new HandlerWrapper() {
            public HttpHandler wrap(HttpHandler handler) {
                MyHttpHandler result = new MyHttpHandler(handler);
                result.setMyParam((String) config.get("myParam"));
                return result;
            }
        };
    }
}</pre>

						</p></div></li><li class="listitem"><p class="simpara">
						An entry in the file. <code class="literal">META-INF/services/io.undertow.server.handlers.builder.HandlerBuilder</code>. This file must be on the class path, for example, in <code class="literal">WEB-INF/classes</code>.
					</p><pre class="screen">org.jboss.example.MyHandlerBuilder</pre></li></ol></div></section><section class="section" id="custom_http_mechanism"><div class="titlepage"><div><div><h2 class="title">10.4. Developing a Custom HTTP Mechanism</h2></div></div></div><p>
				When Elytron is used to secure a web application, it is possible to implement custom HTTP authentication mechanisms that can be registered using the <code class="literal">elytron</code> subsystem. It is then also possible to override the configuration within the deployment to make use of this mechanism without requiring modifications to the deployment.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					All custom HTTP mechanisms are required to implement the <code class="literal">HttpServerAuthenticationMechanism</code> interface.
				</p></div></div><p>
				In general, for an HTTP mechanism, the <code class="literal">evaluateRequest</code> method is called to handle the request passing in the <code class="literal">HTTPServerRequest</code> object. The mechanism processes the request and uses one of the following callback methods on the request to indicate the outcome:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">authenticationComplete</code> - The mechanism successfully authenticated the request.
					</li><li class="listitem">
						<code class="literal">authenticationFailed</code> - Authentication was attempted but failed.
					</li><li class="listitem">
						<code class="literal">authenticationInProgress</code> - Authentication started but an additional round trip is needed.
					</li><li class="listitem">
						<code class="literal">badRequest</code> - The authentication for this mechanism failed validation of the request.
					</li><li class="listitem">
						<code class="literal">noAuthenticationInProgress</code> - The mechanism did not attempt any stage of authentication.
					</li></ul></div><p>
				After creating a custom HTTP mechanism that implements the <code class="literal">HttpServerAuthenticationMechanism</code> interface, the next step is to create a factory that returns instances of this mechanism. The factory must implement the <code class="literal">HttpAuthenticationFactory</code> interface. The most important step in the factory implementation is to double check the name of the mechanism requested. It is important for the factory to return null if it cannot create the required mechanism. The mechanism factory can also take into account properties in the map passed in to decide if it can create the requested mechanism.
			</p><p>
				There are two different approaches that can be used to advertise the availability of a mechanism factory.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The first approach is to implement a <code class="literal">java.security.Provider</code> with the <code class="literal">HttpAuthenticationFactory</code> registered as an available service once for each mechanism it supports.
					</li><li class="listitem">
						The second approach is to use a <code class="literal">java.util.ServiceLoader</code> to discover the factory instead. To achieve this, a file named <code class="literal">org.wildfly.security.http.HttpServerAuthenticationMechanismFactory</code> should be added under <code class="literal">META-INF/services</code>. The only content required in this file is the fully qualified class name of the factory implementation.
					</li></ul></div><p>
				The mechanism can then be installed in the application server, as a module ready to be used:
			</p><pre class="screen">module add --name=org.wildfly.security.examples.custom-http --resources=/path/to/custom-http-mechanism.jar --dependencies=org.wildfly.security.elytron,javax.api</pre><h4 id="using_a_custom_http_mechanism">Using a Custom HTTP Mechanism</h4><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add a custom module.
					</p><pre class="screen">/subsystem=elytron/service-loader-http-server-mechanism-factory=custom-factory:add(module=org.wildfly.security.examples.custom-http)</pre></li><li class="listitem"><p class="simpara">
						Add an <code class="literal">http-authentication-factory</code> to tie the mechanism factory to a <code class="literal">security-domain</code> that will be used for the authentication.
					</p><pre class="screen">/subsystem=elytron/http-authentication-factory=custom-mechanism:add(http-server-mechanism-factory=custom-factory,security-domain=ApplicationDomain,mechanism-configurations=[{mechanism-name=custom-mechanism}])</pre></li><li class="listitem"><p class="simpara">
						Update the <code class="literal">application-security-domain</code> resource to use the new <code class="literal">http-authentication-factory</code>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When an application is deployed, it by default uses the <code class="literal">other</code> security domain. Thus, you need to add a mapping to the application to map it to an Elytron HTTP authentication factory.
						</p><pre class="screen">/subsystem=undertow/application-security-domain=other:add(http-authentication-factory=application-http-authentication)</pre></div></div><p class="simpara">
						The <code class="literal">application-security-domain</code> resource can now be updated to use the new <code class="literal">http-authentication-factory</code>.
					</p><pre class="screen">/subsystem=undertow/application-security-domain=other:write-attribute(name=http-authentication-factory,value=custom-mechanism)

/subsystem=undertow/application-security-domain=other:write-attribute(name=override-deployment-config,value=true)</pre><p class="simpara">
						Notice that the command above overrides the deployment configuration. This means that the mechanisms from the <code class="literal">http-authentication-factory</code> will be used even if the deployment was configured to use a different mechanism. It is thus possible to override the configuration within a deployment to make use of a custom mechanism, without requiring modifications to the deployment itself.
					</p></li><li class="listitem"><p class="simpara">
						Reload the server
					</p><pre class="screen">reload</pre></li></ol></div></section></section><section class="chapter" id="java_transaction_api"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Java Transaction API (JTA)</h1></div></div></div><section class="section" id="overview"><div class="titlepage"><div><div><h2 class="title">11.1. Overview</h2></div></div></div><section class="section" id="overview_of_java_transactions_api_jta"><div class="titlepage"><div><div><h3 class="title">11.1.1. Overview of Java Transaction API (JTA)</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Introduction</span></dt><dd><p class="simpara">
								This section provides a foundational understanding of the Java Transaction API (JTA).
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#about_java_transactions_api_jta" title="11.2.5. About Java Transaction API (JTA)">About Java Transaction API (JTA)</a>
									</li><li class="listitem">
										<a class="link" href="#transaction_lifecycle" title="11.5.1. Transaction Lifecycle">Transaction Lifecycle</a>
									</li><li class="listitem">
										<a class="link" href="#jta_transaction_example" title="11.8.1. JTA Transaction Example">JTA Transaction Example</a>
									</li></ul></div></dd></dl></div></section></section><section class="section" id="transaction_concepts"><div class="titlepage"><div><div><h2 class="title">11.2. Transaction Concepts</h2></div></div></div><section class="section" id="about_transactions"><div class="titlepage"><div><div><h3 class="title">11.2.1. About Transactions</h3></div></div></div><p>
					A transaction consists of two or more actions, which must either all succeed or all fail. A successful outcome is a commit, and a failed outcome is a rollback. In a rollback, each member’s state is reverted to its state before the transaction attempted to commit.
				</p><p>
					The typical standard for a well-designed transaction is that it is Atomic, Consistent, Isolated, and Durable (ACID).
				</p></section><section class="section" id="about_acid_properties_for_transactions"><div class="titlepage"><div><div><h3 class="title">11.2.2. About ACID Properties for Transactions</h3></div></div></div><p>
					ACID is an acronym which stands for <code class="literal">Atomicity</code>, <code class="literal">Consistency</code>, <code class="literal">Isolation</code>, and <code class="literal">Durability</code>. This terminology is usually used in the context of databases or transactional operations.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Atomicity</span></dt><dd>
								For a transaction to be atomic, all transaction members must make the same decision. Either they all commit, or they all roll back. If atomicity is broken, what results is termed a heuristic outcome.
							</dd><dt><span class="term">Consistency</span></dt><dd>
								Consistency means that data written to the database is guaranteed to be valid data, in terms of the database schema. The database or other data source must always be in a consistent state. One example of an inconsistent state would be a field in which half of the data is written before an operation aborts. A consistent state would be if all the data were written, or the write were rolled back when it could not be completed.
							</dd><dt><span class="term">Isolation</span></dt><dd>
								Isolation means that data being operated on by a transaction must be locked before modification, to prevent processes outside the scope of the transaction from modifying the data.
							</dd><dt><span class="term">Durability</span></dt><dd>
								Durability means that in the event of an external failure after transaction members have been instructed to commit, all members will be able to continue committing the transaction when the failure is resolved. This failure can be related to hardware, software, network, or any other involved system.
							</dd></dl></div></section><section class="section" id="about_the_transaction_coordinator_or_transaction_manager"><div class="titlepage"><div><div><h3 class="title">11.2.3. About the Transaction Coordinator or Transaction Manager</h3></div></div></div><p>
					The terms Transaction Coordinator and Transaction Manager (TM) are mostly interchangeable in terms of transactions with JBoss EAP. The term Transaction Coordinator is usually used in the context of distributed JTS transactions.
				</p><p>
					In JTA transactions, the TM runs within JBoss EAP and communicates with transaction participants during the two-phase commit protocol.
				</p><p>
					The TM tells transaction participants whether to commit or roll back their data, depending on the outcome of other transaction participants. In this way, it ensures that transactions adhere to the ACID standard.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#about_transaction_participants" title="11.2.4. About Transaction Participants">About Transaction Participants</a>
						</li><li class="listitem">
							<a class="link" href="#about_acid_properties_for_transactions" title="11.2.2. About ACID Properties for Transactions">About ACID Properties for Transactions</a>
						</li><li class="listitem">
							<a class="link" href="#about_the_2_phase_commit_protocol" title="11.2.11. About the 2-Phase Commit Protocol">About the 2-Phase Commit Protocol</a>
						</li></ul></div></section><section class="section" id="about_transaction_participants"><div class="titlepage"><div><div><h3 class="title">11.2.4. About Transaction Participants</h3></div></div></div><p>
					A transaction participant is any resource within a transaction that has the ability to commit or to roll back state. It is generally a database or a JMS broker, but by implementing the transaction interface, application code could also act as a transaction participant. Each participant of a transaction independently decides whether it is able to commit or roll back its state, and only if all participants can commit does the transaction as a whole succeed. Otherwise, each participant rolls back its state, and the transaction as a whole fails. The TM coordinates the commit or rollback operations and determines the outcome of the transaction.
				</p></section><section class="section" id="about_java_transactions_api_jta"><div class="titlepage"><div><div><h3 class="title">11.2.5. About Java Transaction API (JTA)</h3></div></div></div><p>
					Java Transaction API (JTA) is part of Java Enterprise Edition specification. It is defined in <a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=907" title="Mimir does not include content from: jcp.org">JSR 907: Java™ Transaction API (JTA)</a>.
				</p><p>
					Implementation of JTA is done using the TM, which is covered by project Narayana for JBoss EAP application server. The TM allows applications to assign various resources, for example, database or JMS brokers, through a single global transaction. The global transaction is referred as an XA transaction. Generally resources with XA capabilities are included in such transactions, but non-XA resources could also be part of global transactions. There are several optimizations which help non-XA resources to behave as XA capable resources. For more information, see <a class="link" href="#about_the_lrco_optimization_for_single_phase_commit_1pc" title="11.3.2. About the LRCO Optimization for Single-phase Commit (1PC)">LRCO Optimization for Single-phase Commit</a>.
				</p><p>
					In this document, the term JTA refers to two things:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							The Java Transaction API, which is defined by Java EE specification.
						</li><li class="listitem">
							It indicates how the TM processes the transactions.
						</li></ol></div><p>
					The TM works in JTA transactions mode, the data is shared in memory, and the transaction context is transferred by remote EJB calls. In JTS mode, the data is shared by sending Common Object Request Broker Architecture (CORBA) messages and the transaction context is transferred by IIOP calls. Both modes support distribution of transactions over multiple JBoss EAP servers.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#about_distributed_transactions" title="11.2.13. About Distributed Transactions">About Distributed Transactions</a>
						</li><li class="listitem">
							<a class="link" href="#about_xa_datasources_and_xa_transactions" title="11.2.8. About XA Resources and XA Transactions">About XA Datasources and XA Transactions</a>
						</li></ul></div></section><section class="section" id="about_java_transaction_service_jts"><div class="titlepage"><div><div><h3 class="title">11.2.6. About Java Transaction Service (JTS)</h3></div></div></div><p>
					Java Transaction Service (JTS) is a mapping of the Object Transaction Service (OTS) to Java. Java EE applications use the JTA API to manage transactions. JTA API then interacts with a JTS transaction implementation when the transaction manager is switched to JTS mode. JTS works over the IIOP protocol. Transaction managers that use JTS communicate with each other using a process called an Object Request Broker (ORB), using a communication standard called Common Object Request Broker Architecture (CORBA). For more information, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">ORB Configuration</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
				</p><p>
					Using the JTA API from an application standpoint, a JTS transaction behaves in the same way as a JTA transaction.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The implementation of JTS included in JBoss EAP supports distributed transactions. The difference from fully-compliant JTS transactions is interoperability with external third-party ORBs. This feature is unsupported with JBoss EAP. Supported configurations distribute transactions across multiple JBoss EAP containers only.
					</p></div></div></section><section class="section" id="about_xml_transaction_service"><div class="titlepage"><div><div><h3 class="title">11.2.7. About XML Transaction Service</h3></div></div></div><p>
					The XML Transaction Service (XTS) component supports the coordination of private and public web services in a business transaction. Using XTS, you can coordinate complex business transactions in a controlled and reliable manner. The XTS API supports a transactional coordination model based on the WS-Coordination, WS-Atomic Transaction, and WS-Business Activity protocols.
				</p><section class="section" id="overview_protocols_used_by_xts"><div class="titlepage"><div><div><h4 class="title">11.2.7.1. Overview of Protocols Used by XTS</h4></div></div></div><p>
						The WS-Coordination (WS-C) specification defines a framework that allows different coordination protocols to be plugged in to coordinate work between clients, services, and participants.
					</p><p>
						The WS-Transaction (WS-T) protocol comprises the pair of transaction coordination protocols, WS-Atomic Transaction (WS-AT) and WS-Business Activity (WS-BA), which utilize the coordination framework provided by WS-C. WS-T is developed to unify existing traditional transaction processing systems, allowing them to communicate reliably with one another.
					</p></section><section class="section" id="web_services_atomic_transaction_process"><div class="titlepage"><div><div><h4 class="title">11.2.7.2. Web Services-Atomic Transaction Process</h4></div></div></div><p>
						An atomic transaction (AT) is designed to support short duration interactions where ACID semantics are appropriate. Within the scope of an AT, web services typically employ bridging to access XA resources, such as databases and message queues, under the control of the WS-T. When the transaction terminates, the participant propagates the outcome decision of the AT to the XA resources, and the appropriate commit or rollback actions are taken by each participant.
					</p><section class="section" id="atomic_transaction_process"><div class="titlepage"><div><div><h5 class="title">11.2.7.2.1. Atomic Transaction Process</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									To initiate an AT, the client application first locates a WS-C Activation Coordinator web service that supports WS-T.
								</li><li class="listitem">
									The client sends a WS-C <code class="literal">CreateCoordinationContext</code> message to the service, specifying <a class="link mimir-link-warn" href="http://schemas.xmlsoap.org/ws/2004/10/wsat" title="Mimir does not include content from: schemas.xmlsoap.org">http://schemas.xmlsoap.org/ws/2004/10/wsat</a> as its coordination type.
								</li><li class="listitem">
									The client receives an appropriate WS-T context from the activation service.
								</li><li class="listitem">
									The response to the <code class="literal">CreateCoordinationContext</code> message, the transaction context, has its <code class="literal">CoordinationType</code> element set to the WS-AT namespace, <a class="link mimir-link-warn" href="http://schemas.xmlsoap.org/ws/2004/10/wsat" title="Mimir does not include content from: schemas.xmlsoap.org">http://schemas.xmlsoap.org/ws/2004/10/wsat</a>. It also contains a reference to the atomic transaction coordinator endpoint, the WS-C Registration Service, where participants can be enlisted.
								</li><li class="listitem">
									The client normally proceeds to invoke web services and complete the transaction, either committing all the changes made by the web services, or rolling them back. In order to be able to drive this completion, the client must register itself as a participant for the completion protocol, by sending a register message to the registration service whose endpoint was returned in the coordination context.
								</li><li class="listitem">
									Once registered for completion, the client application then interacts with web services to accomplish its business-level work. With each invocation of a business web service, the client inserts the transaction context into a SOAP header block, such that each invocation is implicitly scoped by the transaction. The toolkits that support WS-AT aware web services provide facilities to correlate contexts found in SOAP header blocks with back-end operations. This ensures that modifications made by the web service are done within the scope of the same transaction as the client and subject to commit or rollback by the Transaction Coordinator.
								</li><li class="listitem">
									Once all the necessary application work is complete, the client can terminate the transaction, with the intent of making any changes to the service state permanent. The completion participant instructs the coordinator to try to commit or roll back the transaction. When the commit or rollback operation completes, a status is returned to the participant to indicate the outcome of the transaction.
								</li></ol></div><p>
							For more details, see <a class="link mimir-link-warn" href="http://narayana.io//docs/project/index.html#d0e14935" title="Mimir does not include content from: narayana.io">WS-Coordination</a> in the Naryana Project Documentation.
						</p></section><section class="section" id="wsat_dotnet_clients"><div class="titlepage"><div><div><h5 class="title">11.2.7.2.2. WS-AT Interoperability with Microsoft .NET Clients</h5></div></div></div><p>
							The <code class="literal">xts</code> subsystem can have issues communicating with Microsoft .NET clients because of differences in the .NET implementation of the WS-AT specification. The .NET implementation of the WS-AT specification forces any call to be asynchronous.
						</p><p>
							To enable interoperability with .NET clients, an asynchronous registration option is available in the JBoss EAP <code class="literal">xts</code> subsystem. XTS asynchronous registration is disabled by default, and you should only enable it if necessary.
						</p><p>
							To enable asynchronous registration for WS-AT interoperability with .NET clients, use the following management CLI command:
						</p><pre class="screen">/subsystem=xts:write-attribute(name=async-registration, value=true)</pre></section></section><section class="section" id="web_services_business_activity_process"><div class="titlepage"><div><div><h4 class="title">11.2.7.3. Web Services-Business Activity Process</h4></div></div></div><p>
						Web Services-Business Activity (WS-BA) defines a protocol for web service applications to enable existing business processing and workflow systems to wrap their proprietary mechanisms and interoperate across implementations and business boundaries.
					</p><p>
						Unlike the WS-AT protocol model, where participants inform the transaction coordinator of their state only when asked, a child activity within a WS-BA can specify its outcome to the coordinator directly, without waiting for a request. A participant can choose to exit the activity or notify the coordinator of a failure at any point. This feature is useful when tasks fail because the notification can be used to modify the goals and drive processing forward, without waiting until the end of the transaction to identify failures.
					</p><section class="section" id="ws_ba_process"><div class="titlepage"><div><div><h5 class="title">11.2.7.3.1. WS-BA Process</h5></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Services are requested to do work.
								</li><li class="listitem">
									Wherever these services have the ability to undo any work, they inform the WS-BA, in case the WS-BA later decides the cancel the work. If the WS-BA suffers a failure. it can instruct the service to execute its <code class="literal">undo</code> behavior.
								</li></ol></div><p>
							The WS-BA protocols employ a compensation-based transaction model. When a participant in a business activity completes its work, it can choose to exit the activity. This choice does not allow any subsequent rollback. Alternatively, the participant can complete its activity, signaling to the coordinator that the work it has done can be compensated if, at some later point, another participant notifies a failure to the coordinator. In this latter case, the coordinator asks each non-exited participant to compensate for the failure, giving them the opportunity to execute whatever compensating action they consider appropriate. If all participants exit or complete without failure, the coordinator notifies each completed participant that the activity has been closed.
						</p><p>
							For more details, see <a class="link mimir-link-warn" href="http://narayana.io//docs/project/index.html#d0e14935" title="Mimir does not include content from: narayana.io">WS-Coordination</a> in the Naryana Project Documentation.
						</p></section></section><section class="section" id="transaction_bridging_overview"><div class="titlepage"><div><div><h4 class="title">11.2.7.4. Transaction Bridging Overview</h4></div></div></div><p>
						Transaction Bridging describes the process of linking the Java EE and WS-T domains. The transaction bridge component, <code class="literal">txbridge</code>, provides bi-directional linkage, such that either type of transaction can encompass business logic designed for use with the other type. The technique used by the bridge is a combination of interposition and protocol mapping.
					</p><p>
						In the transaction bridge, an interposed coordinator is registered into the existing transaction and performs the additional task of protocol mapping; that is, it appears to its parent coordinator to be a resource of its native transaction type, while appearing to its children to be a coordinator of their native transaction type, even though these transaction types differ.
					</p><p>
						The transaction bridge resides in the package <code class="literal">org.jboss.jbossts.txbridge</code> and its subpackages. It consists of two distinct sets of classes, one for bridging in each direction.
					</p><p>
						For more details, see <a class="link mimir-link-warn" href="http://narayana.io//docs/project/index.html#d0e14935" title="Mimir does not include content from: narayana.io">TXBridge Guide</a> in the Naryana Project Documentation.
					</p></section></section><section class="section" id="about_xa_datasources_and_xa_transactions"><div class="titlepage"><div><div><h3 class="title">11.2.8. About XA Resources and XA Transactions</h3></div></div></div><p>
					XA stands for eXtended Architecture, which was developed by the X/Open Group to define a transaction that uses more than one back-end data store. The XA standard describes the interface between a global TM and a local resource manager. XA allows multiple resources, such as application servers, databases, caches, and message queues, to participate in the same transaction, while preserving all four ACID properties. One of the four ACID properties is atomicity, which means that if one of the participants fails to commit its changes, the other participants abort the transaction, and restore their state to the same status as before the transaction occurred. An XA resource is a resource that can participate in an XA global transaction.
				</p><p>
					An XA transaction is a transaction that can span multiple resources. It involves a coordinating TM, with one or more databases or other transactional resources, all involved in a single global XA transaction.
				</p></section><section class="section" id="about_xa_recovery"><div class="titlepage"><div><div><h3 class="title">11.2.9. About XA Recovery</h3></div></div></div><p>
					TM implements X/Open XA specification and supports XA transactions across multiple XA resources.
				</p><p>
					XA Recovery is the process of ensuring that all resources affected by a transaction are updated or rolled back, even if any of the resources that are transaction participants crash or become unavailable. Within the scope of JBoss EAP, the <code class="literal">transactions</code> subsystem provides the mechanisms for XA Recovery to any XA resources or subsystems that use them, such as XA datasources, JMS message queues, and JCA resource adapters.
				</p><p>
					XA Recovery happens without user intervention. In the event of an XA Recovery failure, errors are recorded in the log output. Contact Red Hat Global Support Services if you need assistance. The XA recovery process is driven by a periodic recovery thread which is launched by default every two minutes. The periodic recovery thread processes all unfinished transactions.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						It can take four to eight minutes to complete the recovery for an in-doubt transaction because it might require multiple runs of the recovery process.
					</p></div></div></section><section class="section" id="limitations_of_the_xa_recovery_process"><div class="titlepage"><div><div><h3 class="title">11.2.10. Limitations of the XA Recovery Process</h3></div></div></div><p>
					XA recovery has the following limitations:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The transaction log might not be cleared from a successfully committed transaction.
						</p><p class="simpara">
							If the JBoss EAP server crashes after an <code class="literal">XAResource</code> commit method successfully completes and commits the transaction, but before the coordinator can update the log, you might see the following warning message in the log when you restart the server:
						</p><pre class="screen">ARJUNA016037: Could not find new XAResource to use for recovering non-serializable XAResource XAResourceRecord</pre><p class="simpara">
							This is because upon recovery, the JBoss Transaction Manager (TM) sees the transaction participants in the log and attempts to retry the commit. Eventually the JBoss TM assumes the resources are committed and no longer retries the commit. In this situation, you can safely ignore this warning as the transaction is committed and there is no loss of data.
						</p><p class="simpara">
							To prevent the warning, set the <code class="literal">com.arjuna.ats.jta.xaAssumeRecoveryComplete</code> property value to <code class="literal">true</code> . This property is checked whenever a new <code class="literal">XAResource</code> instance cannot be located from any registered <code class="literal">XAResourceRecovery</code> instance. When set to <code class="literal">true</code>, the recovery assumes that a previous commit attempt succeeded and the instance can be removed from the log with no further recovery attempts. This property must be used with care because it is global and when used incorrectly could result in <code class="literal">XAResource</code> instances remaining in an uncommitted state.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								JBoss EAP 7.3 has an implemented enhancement to clear transaction logs after a successfully committed transaction and the above situation should not occur frequently.
							</p></div></div></li><li class="listitem"><p class="simpara">
							Rollback is not called for JTS transaction when a server crashes at the end of <code class="literal">XAResource.prepare()</code>.
						</p><p class="simpara">
							If the JBoss EAP server crashes after the completion of an <code class="literal">XAResource.prepare()</code> method call, all of the participating <code class="literal">XAResource</code> instances are locked in the prepared state and remain that way upon server restart. The transaction is not rolled back and the resources remain locked until the transaction times out or a database administrator manually rolls back the resources and clears the transaction log. For more information, see <a class="link mimir-link-warn" href="https://issues.jboss.org/browse/JBTM-2124" title="Mimir does not include content from: issues.jboss.org">https://issues.jboss.org/browse/JBTM-2124</a>
						</p></li><li class="listitem"><p class="simpara">
							Periodic recovery can occur on committed transactions.
						</p><p class="simpara">
							When the server is under excessive load, the server log might contain the following warning message, followed by a stacktrace:
						</p><pre class="screen">ARJUNA016027: Local XARecoveryModule.xaRecovery got XA exception XAException.XAER_NOTA: javax.transaction.xa.XAException</pre><p class="simpara">
							Under heavy load, the processing time taken by a transaction can overlap with the timing of the periodic recovery process’s activity. The periodic recovery process detects the transaction still in progress and attempts to initiate a rollback but in fact the transaction continues to completion. At the time the periodic recovery attempts but fails the rollback, it records the rollback failure in the server log. The underlying cause of this issue will be addressed in a future release, but in the meantime a workaround is available.
						</p><p class="simpara">
							Increase the interval between the two phases of the recovery process by setting the <code class="literal">com.arjuna.ats.jta.orphanSafetyInterval</code> property to a value higher than the default value of <code class="literal">10000</code> milliseconds. A value of <code class="literal">40000</code> milliseconds is recommended. Note that this does not solve the issue. Instead it decreases the probability that it will occur and that the warning message will be shown in the log. For more information, see <a class="link mimir-link-warn" href="https://developer.jboss.org/thread/266729" title="Mimir does not include content from: developer.jboss.org">https://developer.jboss.org/thread/266729</a>
						</p></li></ul></div></section><section class="section" id="about_the_2_phase_commit_protocol"><div class="titlepage"><div><div><h3 class="title">11.2.11. About the 2-Phase Commit Protocol</h3></div></div></div><p>
					The two-phase commit (2PC) protocol refers to an algorithm to determine the outcome of a transaction. 2PC is driven by the Transaction Manager (TM) as a process of finishing XA transactions.
				</p><h5 id="phase_1_prepare">Phase 1: Prepare</h5><p>
					In the first phase, the transaction participants notify the transaction coordinator whether they are able to commit the transaction or must roll back.
				</p><h5 id="phase_2_commit">Phase 2: Commit</h5><p>
					In the second phase, the transaction coordinator makes the decision about whether the overall transaction should commit or roll back. If any one of the participants cannot commit, the transaction must roll back. Otherwise, the transaction can commit. The coordinator directs the resources about what to do, and they notify the coordinator when they have done it. At that point, the transaction is finished.
				</p></section><section class="section" id="about_transaction_timeouts"><div class="titlepage"><div><div><h3 class="title">11.2.12. About Transaction Timeouts</h3></div></div></div><p>
					In order to preserve atomicity and adhere to the ACID standard for transactions, some parts of a transaction can be long-running. Transaction participants need to lock an XA resource that is part of database table or message in a queue when they commit. The TM needs to wait to hear back from each transaction participant before it can direct them all whether to commit or roll back. Hardware or network failures can cause resources to be locked indefinitely.
				</p><p>
					Transaction timeouts can be associated with transactions in order to control their lifecycle. If a timeout threshold passes before the transaction commits or rolls back, the timeout causes the transaction to be rolled back automatically.
				</p><p>
					You can configure default timeout values for the entire transaction subsystem, or you can disable default timeout values and specify timeouts on a per-transaction basis.
				</p></section><section class="section" id="about_distributed_transactions"><div class="titlepage"><div><div><h3 class="title">11.2.13. About Distributed Transactions</h3></div></div></div><p>
					A distributed transaction is a transaction with participants on multiple JBoss EAP servers. The Java Transaction Service (JTS) specification mandates that JTS transactions be able to be distributed across application servers from different vendors. The Java Transaction API (JTA) does not define that but JBoss EAP supports distributed JTA transactions among JBoss EAP servers.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Transaction distribution among servers from different vendors is not supported.
					</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						In other application server vendor documentation, you might find that the term distributed transaction means XA transaction. In the context of JBoss EAP documentation, the distributed transaction refers to transactions distributed among several JBoss EAP application servers. Transactions that consist of different resources, for example, database resources and JMS resources, are referred as XA transactions in this document. For more information, see <a class="link" href="#about_java_transaction_service_jts" title="11.2.6. About Java Transaction Service (JTS)">About Java Transaction Service (JTS)</a> and <a class="link" href="#about_xa_datasources_and_xa_transactions" title="11.2.8. About XA Resources and XA Transactions">About XA Datasources and XA Transactions</a>.
					</p></div></div></section><section class="section" id="about_the_orb_portability_api"><div class="titlepage"><div><div><h3 class="title">11.2.14. About the ORB Portability API</h3></div></div></div><p>
					The Object Request Broker (ORB) is a process that sends and receives messages to transaction participants, coordinators, resources, and other services distributed across multiple application servers. An ORB uses a standardized Interface Description Language (IDL) to communicate and interpret messages. Common Object Request Broker Architecture (CORBA) is the IDL used by the ORB in JBoss EAP.
				</p><p>
					The main type of service that uses an ORB is a system of distributed Java Transactions, using the Java Transaction Service (JTS) specification. Other systems, especially legacy systems, can choose to use an ORB for communication rather than other mechanisms such as remote Enterprise JavaBeans or JAX-WS or JAX-RS web services.
				</p><p>
					The ORB Portability API provides mechanisms to interact with an ORB. This API provides methods for obtaining a reference to the ORB, as well as placing an application into a mode where it listens for incoming connections from an ORB. Some of the methods in the API are not supported by all ORBs. In those cases, an exception is thrown.
				</p><p>
					The API consists of two different classes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">com.arjuna.orbportability.orb</code>
						</li><li class="listitem">
							<code class="literal">com.arjuna.orbportability.oa</code>
						</li></ul></div><p>
					See the JBoss EAP Javadocs bundle available on the <a class="link mimir-link-warn" href="https://access.redhat.com/jbossnetwork/restricted/listSoftware.html" title="This content is not included in Mimir.">Red Hat Customer Portal</a> for specific details about the methods and properties included in the ORB Portability API.
				</p></section></section><section class="section" id="transaction_optimizations"><div class="titlepage"><div><div><h2 class="title">11.3. Transaction Optimizations</h2></div></div></div><section class="section" id="overview_of_transaction_optimizations"><div class="titlepage"><div><div><h3 class="title">11.3.1. Overview of Transaction Optimizations</h3></div></div></div><p>
					The Transaction Manager (TM) of JBoss EAP includes several optimizations that your application can take advantage of.
				</p><p>
					Optimizations serve to enhance the 2-phase commit protocol in particular cases. Generally, the TM starts a global transaction, which passes through the 2-phase commit. But when you optimize these transactions, in certain cases, the TM does not need to proceed with full 2-phased commits and thus the process gets faster.
				</p><p>
					Different optimizations used by the TM are described in detail below.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#about_the_lrco_optimization_for_single_phase_commit_1pc" title="11.3.2. About the LRCO Optimization for Single-phase Commit (1PC)">About the LRCO Optimization for Single-phase Commit (1PC)</a>
						</li><li class="listitem">
							<a class="link" href="#about_the_presumed_abort_optimization" title="11.3.3. About the Presumed-Abort Optimization">About the Presumed-Abort Optimization</a>
						</li><li class="listitem">
							<a class="link" href="#about_the_read_only_optimization" title="11.3.4. About the Read-Only Optimization">About the Read-Only Optimization</a>
						</li></ul></div></section><section class="section" id="about_the_lrco_optimization_for_single_phase_commit_1pc"><div class="titlepage"><div><div><h3 class="title">11.3.2. About the LRCO Optimization for Single-phase Commit (1PC)</h3></div></div></div><h5 id="single_phase_commit_1pc">Single-phase Commit (1PC)</h5><p>
					Although the 2-phase commit protocol (2PC) is more commonly encountered with transactions, some situations do not require, or cannot accommodate, both phases. In these cases, you can use the single phase commit (1PC) protocol. The single phase commnit protocol is used when only one XA or non-XA resource is a part of the global transaction.
				</p><p>
					The prepare phase generally locks the resource until the second phase is processed. Single-phase commit means that the prepare phase is skipped and only the commit is processed on the resource. If not specified, the single-phase commit optimization is used automatically when the global transaction contains only one participant.
				</p><h5 id="last_resource_commit_optimization_lrco">Last Resource Commit Optimization (LRCO)</h5><p>
					In situations where non-XA datasource participate in XA transaction, an optimization known as the Last Resource Commit Optimization (LRCO) is employed. While this protocol allows for most transactions to complete normally, certain types of error can cause an inconsistent transaction outcome. Therefore, use this approach only as a last resort.
				</p><p>
					The non-XA resource is processed at the end of the prepare phase, and an attempt is made to commit it. If the commit succeeds, the transaction log is written and the remaining resources go through the commit phase. If the last resource fails to commit, the transaction is rolled back.
				</p><p>
					Where a single local TX datasource is used in a transaction, the LRCO is automatically applied to it.
				</p><p>
					Previously, adding non-XA resources to an XA transaction was achieved via the LRCO method. However, there is a window of failure in LRCO. The procedure for adding non-XA resources to an XA transaction using the LRCO method is as follows:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Prepare the XA transaction.
						</li><li class="listitem">
							Commit LRCO.
						</li><li class="listitem">
							Write the transaction log.
						</li><li class="listitem">
							Commit the XA transaction.
						</li></ol></div><p>
					If the procedure crashes between step 2 and step 3, this could lead to data inconsistency and you cannot commit the XA transaction. The data inconsistency is because the LRCO non-XA resource is committed but information about preparation of XA resource was not recorded. The recovery manager will rollback the resource after the server is up. Commit Markable Resource (CMR) eliminates this restriction and allows a non-XA resource to be reliably enlisted in an XA transaction.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						CMR is a special case of LRCO optimization that should only be used for datasources. It is not suitable for all non-XA resources.
					</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#about_the_2_phase_commit_protocol" title="11.2.11. About the 2-Phase Commit Protocol">About the 2-Phase Commit Protocol</a>
						</li></ul></div><section class="section" id="commit_markable_resource"><div class="titlepage"><div><div><h4 class="title">11.3.2.1. Commit Markable Resource</h4></div></div></div><h6 id="summary">Summary</h6><p>
						Configuring access to a resource manager using the Commit Markable Resource (CMR) interface ensures that a non-XA datasource can be reliably enlisted in an XA (2PC) transaction. It is an implementation of the LRCO algorithm, which makes non-XA resource fully recoverable.
					</p><p>
						To configure the CMR, you must:
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Create tables in a database.
							</li><li class="listitem">
								Enable the datasource to be connectable.
							</li><li class="listitem">
								Add a reference to <code class="literal">transactions</code> subsystem.
							</li></ol></div><h6 id="create_tables_in_database">Create Tables in Database</h6><p>
						A transaction can contain only one CMR resource. You can create a table using SQL similar to the following example.
					</p><pre class="screen">SELECT xid,actionuid FROM _tableName_ WHERE transactionManagerID IN (String[])
DELETE FROM _tableName_ WHERE xid IN (byte[[]])
INSERT INTO _tableName_ (xid, transactionManagerID, actionuid) VALUES (byte[],String,byte[])</pre><p>
						The following are examples of the SQL syntax to create tables for various database management systems.
					</p><div class="formalpara"><p class="title"><strong>Example: Sybase Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid varbinary(144), transactionManagerID varchar(64), actionuid varbinary(28))</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: Oracle Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid RAW(144), transactionManagerID varchar(64), actionuid RAW(28))
CREATE UNIQUE INDEX index_xid ON xids (xid)</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: IBM Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid VARCHAR(255) for bit data not null, transactionManagerID
varchar(64), actionuid VARCHAR(255) for bit data not null)
CREATE UNIQUE INDEX index_xid ON xids (xid)</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: SQL Server Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid varbinary(144), transactionManagerID varchar(64), actionuid varbinary(28))
CREATE UNIQUE INDEX index_xid ON xids (xid)</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: PostgreSQL Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid bytea, transactionManagerID varchar(64), actionuid bytea)
CREATE UNIQUE INDEX index_xid ON xids (xid)</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: MariaDB Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid BINARY(144), transactionManagerID varchar(64), actionuid BINARY(28))
CREATE UNIQUE INDEX index_xid ON xids (xid)</pre>

						</p></div><div class="formalpara"><p class="title"><strong>Example: MySQL Create Table Syntax</strong></p><p>
							
<pre class="screen">CREATE TABLE xids (xid VARCHAR(255), transactionManagerID varchar(64), actionuid VARCHAR(255))
CREATE UNIQUE INDEX index_xid ON xids (xid)</pre>

						</p></div><h6 id="enabling_datasource_to_be_connectable">Enabling Datasource to be Connectable</h6><p>
						By default, the CMR feature is disabled for datasources. To enable it, you must create or modify the datasource configuration and ensure that the <code class="literal">connectable</code> attribute is set to <code class="literal">true</code>. The following is an example of the datasources section of a server XML configuration file:
					</p><pre class="screen">&lt;datasource enabled="true" jndi-name="java:jboss/datasources/ConnectableDS" pool-name="ConnectableDS" jta="true" use-java-context="true" connectable="true"/&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This feature is not applicable to XA datasources.
						</p></div></div><p>
						You can also enable a resource manager as a CMR, using the management CLI, as follows:
					</p><pre class="screen">/subsystem=datasources/data-source=ConnectableDS:add(enabled="true", jndi-name="java:jboss/datasources/ConnectableDS", jta="true", use-java-context="true", connectable="true", connection-url="validConnectionURL", exception-sorter-class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter", driver-name="mssql")</pre><p>
						This command generates the following XML in the <code class="literal">datasources</code> section of the server configuration file.
					</p><pre class="programlisting language-xml">&lt;datasource jta="true" jndi-name="java:jboss/datasources/ConnectableDS" pool-name="ConnectableDS" enabled="true" use-java-context="true" connectable="true"&gt;
  &lt;connection-url&gt;validConnectionURL&lt;/connection-url&gt;
  &lt;driver&gt;mssql&lt;/driver&gt;
  &lt;validation&gt;
    &lt;exception-sorter class-name="org.jboss.jca.adapters.jdbc.extensions.mssql.MSSQLExceptionSorter"/&gt;
  &lt;/validation&gt;
&lt;/datasource&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The datasource must have a valid driver defined. The example above uses <code class="literal">mssql</code> as the <code class="literal">driver-name</code>; however the <code class="literal">mssql</code> driver does not exist. For details, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Example MySQL Datasource</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
						</p></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Use the <code class="literal">exception-sorter-class-name</code> parameter in the datasource configuration. For details, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Example Datasource Configurations</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
						</p></div></div><h6 id="updating_an_existing_resource_to_use_the_new_cmr_feature">Updating an Existing Resource to Use the New CMR Feature</h6><p>
						If you only need to update an existing datasource to use the CMR feature, then simply modify the <code class="literal">connectable</code> attribute:
					</p><pre class="screen">/subsystem=datasources/data-source=ConnectableDS:write-attribute(name=connectable,value=true)</pre><h6 id="add_a_reference_to_the_transactions_subsystem">Add a Reference to the Transactions Subsystem</h6><p>
						The <code class="literal">transactions</code> subsystem identifies the datasources that are CMR capable through an entry to the <code class="literal">transactions</code> subsystem configuration section as shown below:
					</p><pre class="programlisting language-xml">&lt;subsystem xmlns="urn:jboss:domain:transactions:5.0"&gt;
    ...
    &lt;commit-markable-resources&gt;
        &lt;commit-markable-resource jndi-name="java:jboss/datasources/ConnectableDS"&gt;
            &lt;xid-location name="xids" batch-size="100" immediate-cleanup="false"/&gt;
        &lt;/commit-markable-resource&gt;
        ...
    &lt;/commit-markable-resources&gt;
&lt;/subsystem&gt;</pre><p>
						The same result can be achieved using the management CLI:
					</p><pre class="screen">/subsystem=transactions/commit-markable-resource=java\:jboss\/datasources\/ConnectableDS/:add(batch-size=100,immediate-cleanup=false,name=xids)</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You must restart the server after adding the CMR reference under the <code class="literal">transactions</code> subsystem.
						</p></div></div></section></section><section class="section" id="about_the_presumed_abort_optimization"><div class="titlepage"><div><div><h3 class="title">11.3.3. About the Presumed-Abort Optimization</h3></div></div></div><p>
					If a transaction is going to roll back, it can record this information locally and notify all enlisted participants. This notification is only a courtesy, and has no effect on the transaction outcome. After all participants have been contacted, the information about the transaction can be removed.
				</p><p>
					If a subsequent request for the status of the transaction occurs there will be no information available. In this case, the requester assumes that the transaction has aborted and rolled back. This presumed-abort optimization means that no information about participants needs to be made persistent until the transaction has decided to commit, since any failure prior to this point will be assumed to be an abort of the transaction.
				</p></section><section class="section" id="about_the_read_only_optimization"><div class="titlepage"><div><div><h3 class="title">11.3.4. About the Read-Only Optimization</h3></div></div></div><p>
					When a participant is asked to prepare, it can indicate to the coordinator that it has not modified any data during the transaction. Such a participant does not need to be informed about the outcome of the transaction, since the fate of the participant has no affect on the transaction. This read-only participant can be omitted from the second phase of the commit protocol.
				</p></section></section><section class="section" id="transaction_outcomes"><div class="titlepage"><div><div><h2 class="title">11.4. Transaction Outcomes</h2></div></div></div><section class="section" id="about_transaction_outcomes"><div class="titlepage"><div><div><h3 class="title">11.4.1. About Transaction Outcomes</h3></div></div></div><p>
					There are three possible outcomes for a transaction.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Commit</span></dt><dd>
								If every transaction participant can commit, the transaction coordinator directs them to do so. See <a class="link" href="#about_transaction_commit" title="11.4.2. About Transaction Commit">About Transaction Commit</a> for more information.
							</dd><dt><span class="term">Rollback</span></dt><dd>
								If any transaction participant cannot commit, or if the transaction coordinator cannot direct participants to commit, the transaction is rolled back. See <a class="link" href="#about_transaction_roll_back" title="11.4.3. About Transaction Rollback">About Transaction Rollback</a> for more information.
							</dd><dt><span class="term">Heuristic outcome</span></dt><dd>
								If some transaction participants commit and others roll back, it is termed a heuristic outcome. Heuristic outcomes require human intervention. See <a class="link" href="#about_heuristic_outcomes" title="11.4.4. About Heuristic Outcomes">About Heuristic Outcomes</a> for more information.
							</dd></dl></div></section><section class="section" id="about_transaction_commit"><div class="titlepage"><div><div><h3 class="title">11.4.2. About Transaction Commit</h3></div></div></div><p>
					When a transaction participant commits, it makes its new state durable. The new state is created by the participant doing the work involved in the transaction. The most common example is when a transaction member writes records to a database.
				</p><p>
					After a commit, information about the transaction is removed from the transaction coordinator, and the newly-written state is now the durable state.
				</p></section><section class="section" id="about_transaction_roll_back"><div class="titlepage"><div><div><h3 class="title">11.4.3. About Transaction Rollback</h3></div></div></div><p>
					A transaction participant rolls back by restoring its state to reflect the state before the transaction began. After a rollback, the state is the same as if the transaction had never been started.
				</p></section><section class="section" id="about_heuristic_outcomes"><div class="titlepage"><div><div><h3 class="title">11.4.4. About Heuristic Outcomes</h3></div></div></div><p>
					A heuristic outcome, or non-atomic outcome, is a situation where the decisions of the participants in a transaction differ from that of the transaction manager. Heuristic outcomes can cause loss of integrity to the system, and usually require human intervention to resolve them. Do not write code which relies on them.
				</p><p>
					Heuristic outcomes typically occur during the second phase of the 2-phase commit (2PC) protocol. In rare cases, this outcome might occur in a 1PC. They are often caused by failures to the underlying hardware or communications subsystems of the underlying servers.
				</p><p>
					Heuristic outcomes are possible due to timeouts in various subsystems or resources even with transaction manager and full crash recovery. In any system that requires some form of distributed agreement, situations can arise where some parts of the system diverge in terms of the global outcome.
				</p><p>
					There are four different types of heuristic outcomes:
				</p><h5 id="heuristic_rollback">Heuristic rollback</h5><p>
					The commit operation was not able to commit the resources but all of the participants were able to be rolled back and so an atomic outcome was still achieved.
				</p><h5 id="heuristic_commit">Heuristic commit</h5><p>
					An attempted rollback operation failed because all of the participants unilaterally committed. This can happen if, for example, the coordinator is able to successfully prepare the transaction but then decides to roll it back because of a failure on its side, such as a failure to update its log. In the interim, the participants might decide to commit.
				</p><h5 id="heuristic_mixed">Heuristic mixed</h5><p>
					Some participants committed and others rolled back.
				</p><h5 id="heuristic_hazard">Heuristic hazard</h5><p>
					The disposition of some of the updates is unknown. For those that are known, they have either all been committed or all rolled back.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#about_the_2_phase_commit_protocol" title="11.2.11. About the 2-Phase Commit Protocol">About the 2-Phase Commit Protocol</a>
						</li></ul></div></section><section class="section" id="jboss_transactions_errors_and_exceptions"><div class="titlepage"><div><div><h3 class="title">11.4.5. JBoss Transactions Errors and Exceptions</h3></div></div></div><p>
					For details about exceptions thrown by methods of the <code class="literal">UserTransaction</code> class, see the <a class="link mimir-link-warn" href="http://docs.oracle.com/javaee/7/api/javax/transaction/UserTransaction.html" title="Mimir does not include content from: docs.oracle.com"><code class="literal">UserTransaction</code></a> API Javadoc.
				</p></section></section><section class="section" id="overview_of_the_transaction_lifecycle"><div class="titlepage"><div><div><h2 class="title">11.5. Overview of the Transaction Lifecycle</h2></div></div></div><section class="section" id="transaction_lifecycle"><div class="titlepage"><div><div><h3 class="title">11.5.1. Transaction Lifecycle</h3></div></div></div><p>
					See <a class="link" href="#about_java_transactions_api_jta" title="11.2.5. About Java Transaction API (JTA)">About Java Transaction API (JTA)</a> for more information on Java Transaction API (JTA).
				</p><p>
					When a resource asks to participate in a transaction, a chain of events is set in motion. The Transaction Manager (TM) is a process that lives within the application server and manages transactions. Transaction participants are objects which participate in a transaction. Resources are datasources, JMS connection factories, or other JCA connections.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							The application starts a new transaction.
						</p><p class="simpara">
							To begin a transaction, the application obtains an instance of class <code class="literal">UserTransaction</code> from JNDI or, if it is an EJB, from an annotation. The <code class="literal">UserTransaction</code> interface includes methods for beginning, committing, and rolling back top-level transactions. Newly created transactions are automatically associated with their invoking thread. Nested transactions are not supported in JTA, so all transactions are top-level transactions.
						</p><p class="simpara">
							An EJB starts a transaction when the <code class="literal">UserTransaction.begin()</code> method is called. The default behavior of this transaction could be affected by use of the <code class="literal">TransactionAttribute</code> annotation or the <code class="literal">ejb.xml</code> descriptor. Any resource that is used after that point is associated with the transaction. If more than one resource is enlisted, the transaction becomes an XA transaction, and participates in the two-phase commit protocol at commit time.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								By default, transactions are driven by application containers in EJBs. This is called <span class="emphasis"><em>Container Managed Transaction (CMT)</em></span>. To make the transaction user driven, change the <code class="literal">Transaction Management</code> to <span class="emphasis"><em>Bean Managed Transaction (BMT)</em></span>. In BMT, the <code class="literal">UserTransaction</code> object is available for the user to manage the transaction.
							</p></div></div></li><li class="listitem"><p class="simpara">
							The application modifies its state.
						</p><p class="simpara">
							In the next step, the application performs its work and makes changes to its state, only on enlisted resources.
						</p></li><li class="listitem"><p class="simpara">
							The application decides to commit or roll back.
						</p><p class="simpara">
							When the application has finished changing its state, it decides whether to commit or roll back. It calls the appropriate method, either <code class="literal">UserTransaction.commit()</code> or <code class="literal">UserTransaction.rollback()</code>. For a CMT, this process is driven automatically, whereas for a BMT, a method commit or rollback of the <code class="literal">UserTransaction</code> has to be explicitly called.
						</p></li><li class="listitem"><p class="simpara">
							The TM removes the transaction from its records.
						</p><p class="simpara">
							After the commit or rollback completes, the TM cleans up its records and removes information about the transaction from the transaction log.
						</p></li></ol></div><div class="formalpara"><p class="title"><strong>Failure Recovery</strong></p><p>
						If a resource, transaction participant, or the application server crashes or become unavailable, the <code class="literal">Transaction Manager</code> handles recovery when the underlying failure is resolved and the resource is available again. This process happens automatically. For more information, see <a class="link" href="#about_xa_recovery" title="11.2.9. About XA Recovery">XA Recovery</a>.
					</p></div></section></section><section class="section" id="transactions_configuration_overview"><div class="titlepage"><div><div><h2 class="title">11.6. Transaction Subsystem Configuration</h2></div></div></div><p>
				The <code class="literal">transactions</code> subsystem allows you to configure transaction manager options such as statistics, timeout values, and transaction logging. You can also manage transactions and view transaction statistics.
			</p><p>
				For more information, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Configuring Transactions</a> in the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span>.
			</p></section><section class="section" id="transactions_usage_in_practice"><div class="titlepage"><div><div><h2 class="title">11.7. Transactions Usage In Practice</h2></div></div></div><section class="section" id="transactions_usage_overview"><div class="titlepage"><div><div><h3 class="title">11.7.1. Transactions Usage Overview</h3></div></div></div><p>
					The following procedures are useful when you need to use transactions in your application.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<a class="link" href="#control_transactions" title="11.7.2. Control Transactions">Control Transactions</a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#begin_a_transaction" title="11.7.2.1. Begin a Transaction">Begin a Transaction</a>
								</li><li class="listitem">
									<a class="link" href="#commit_a_transaction" title="11.7.2.2. Commit a Transaction">Commit a Transaction</a>
								</li><li class="listitem">
									<a class="link" href="#roll_back_a_transaction" title="11.7.2.3. Roll Back a Transaction">Roll Back a Transaction</a>
								</li></ul></div></li><li class="listitem">
							<a class="link" href="#handle_a_heuristic_outcome_in_a_transaction" title="11.7.3. Handle a Heuristic Outcome in a Transaction">Handle a Heuristic Outcome in a Transaction</a>
						</li><li class="listitem">
							<a class="link" href="#handle_transaction_errors" title="11.7.4.1. Handle Transaction Errors">Handle Transaction Errors</a>
						</li><li class="listitem">
							<a class="link" href="#transaction_references" title="11.8. Transaction References">Transaction References</a>
						</li></ul></div></section><section class="section" id="control_transactions"><div class="titlepage"><div><div><h3 class="title">11.7.2. Control Transactions</h3></div></div></div><div class="formalpara"><p class="title"><strong>Introduction</strong></p><p>
						This list of procedures outlines the different ways to control transactions in your applications which use JTA APIs.
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#begin_a_transaction" title="11.7.2.1. Begin a Transaction">Begin a Transaction</a>
						</li><li class="listitem">
							<a class="link" href="#commit_a_transaction" title="11.7.2.2. Commit a Transaction">Commit a Transaction</a>
						</li><li class="listitem">
							<a class="link" href="#roll_back_a_transaction" title="11.7.2.3. Roll Back a Transaction">Roll Back a Transaction</a>
						</li></ul></div><section class="section" id="begin_a_transaction"><div class="titlepage"><div><div><h4 class="title">11.7.2.1. Begin a Transaction</h4></div></div></div><p>
						This procedure shows how to begin a new transaction. The API is the same whether you run the Transaction Manager (TM) configured with JTA or JTS.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Get an instance of <code class="literal">UserTransaction</code>.
							</p><p class="simpara">
								You can get the instance using JNDI, injection, or an EJB’s context if the EJB uses bean-managed transactions by means of a <code class="literal">@TransactionManagement(TransactionManagementType.BEAN)</code> annotation.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Get the instance using JNDI.
									</p><pre class="programlisting language-java">new InitialContext().lookup("java:comp/UserTransaction")</pre></li><li class="listitem"><p class="simpara">
										Get the instance using injection.
									</p><pre class="programlisting language-java">@Resource UserTransaction userTransaction;</pre></li><li class="listitem"><p class="simpara">
										Get the instance using the EJB context.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												In a stateless/stateful bean:
											</p><pre class="programlisting language-java">@Resource SessionContext ctx;
ctx.getUserTransaction();</pre></li><li class="listitem"><p class="simpara">
												In a message-driven bean:
											</p><pre class="programlisting language-java">@Resource MessageDrivenContext ctx;
ctx.getUserTransaction()</pre></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								Call <code class="literal">UserTransaction.begin()</code> after you connect to your datasource.
							</p><pre class="programlisting language-java">try {
    System.out.println("\nCreating connection to database: "+url);
    stmt = conn.createStatement();  // non-tx statement
    try {
        System.out.println("Starting top-level transaction.");
        userTransaction.begin();
        stmtx = conn.createStatement(); // will be a tx-statement
        ...
    }
}</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Result</strong></p><p>
							The transaction begins. All uses of your datasource are transactional until you commit or roll back the transaction.
						</p></div><p>
						For a full example, see <a class="link" href="#jta_transaction_example" title="11.8.1. JTA Transaction Example">JTA Transaction Example</a>.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							One of the benefits of EJBs (either used with CMT or BMT) is that the container manages all the internals of the transactional processing, that is, you are free from taking care of transaction being part of XA transaction or transaction distribution amongst JBoss EAP containers.
						</p></div></div><section class="section" id="nested_transactions"><div class="titlepage"><div><div><h5 class="title">11.7.2.1.1. Nested Transactions</h5></div></div></div><p>
							Nested transactions allow an application to create a transaction that is embedded in an existing transaction. In this model, multiple subtransactions can be embedded recursively in a transaction. Subtransactions can be committed or rolled back without committing or rolling back the parent transaction. However, the results of a commit operation are contingent upon the commitment of all the transaction’s ancestors.
						</p><p>
							For implementation specific information, see the <a class="link mimir-link-warn" href="http://narayana.io//docs/project/index.html" title="Mimir does not include content from: narayana.io">Narayana Project Documentation</a>.
						</p><p>
							Nested transactions are available only when used with the JTS specification. Nested transactions are not a supported feature of JBoss EAP application server. In addition, many database vendors do not support nested transactions, so consult your database vendor before you add nested transactions to your application.
						</p></section></section><section class="section" id="commit_a_transaction"><div class="titlepage"><div><div><h4 class="title">11.7.2.2. Commit a Transaction</h4></div></div></div><p>
						This procedure shows how to commit a transaction using the Java Transaction API (JTA).
					</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
							You must begin a transaction before you can commit it. For information on how to begin a transaction, see <a class="link" href="#begin_a_transaction" title="11.7.2.1. Begin a Transaction">Begin a Transaction</a>.
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Call the <code class="literal">commit()</code> method on the <code class="literal">UserTransaction</code>.
							</p><p class="simpara">
								When you call the commit() method on the <code class="literal">UserTransaction</code>, the TM attempts to commit the transaction.
							</p><pre class="programlisting language-java">@Inject
private UserTransaction userTransaction;

public void updateTable(String key, String value) {
    EntityManager entityManager = entityManagerFactory.createEntityManager();
    try {
        userTransaction.begin();
        &lt;!-- Perform some data manipulation using entityManager --&gt;
        ...
        // Commit the transaction
        userTransaction.commit();
    } catch (Exception ex) {
        &lt;!-- Log message or notify Web page --&gt;
        ...
        try {
            userTransaction.rollback();
        } catch (SystemException se) {
            throw new RuntimeException(se);
        }
        throw new RuntimeException(ex);
    } finally {
        entityManager.close();
    }
}</pre></li><li class="listitem"><p class="simpara">
								If you use Container Managed Transactions (CMT), you do not need to manually commit.
							</p><p class="simpara">
								If you configure your bean to use Container Managed Transactions, the container will manage the transaction lifecycle for you based on annotations you configure in the code.
							</p><pre class="programlisting language-java">@PersistenceContext
private EntityManager em;

@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void updateTable(String key, String value)
  &lt;!-- Perform some data manipulation using entityManager --&gt;
  ...
}</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Result</strong></p><p>
							Your datasource commits and your transaction ends, or an exception is thrown.
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For a full example, see <a class="link" href="#jta_transaction_example" title="11.8.1. JTA Transaction Example">JTA Transaction Example</a>.
						</p></div></div></section><section class="section" id="roll_back_a_transaction"><div class="titlepage"><div><div><h4 class="title">11.7.2.3. Roll Back a Transaction</h4></div></div></div><p>
						This procedure shows how to roll back a transaction using the Java Transaction API (JTA).
					</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
							You must begin a transaction before you can roll it back. For information on how to begin a transaction, see <a class="link" href="#begin_a_transaction" title="11.7.2.1. Begin a Transaction">Begin a Transaction</a>.
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Call the <code class="literal">rollback()</code> method on the <code class="literal">UserTransaction</code>.
							</p><p class="simpara">
								When you call the <code class="literal">rollback()</code> method on the <code class="literal">UserTransaction</code>, the TM attempts to roll back the transaction and return the data to its previous state.
							</p><pre class="programlisting language-java">@Inject
private UserTransaction userTransaction;

public void updateTable(String key, String value)
    EntityManager entityManager = entityManagerFactory.createEntityManager();
    try {
        userTransaction.begin():
        &lt;!-- Perform some data manipulation using entityManager --&gt;
          ...
          // Commit the transaction
        userTransaction.commit();
    } catch (Exception ex) {
        &lt;!-- Log message or notify Web page --&gt;
        ...
        try {
            userTransaction.rollback();
        } catch (SystemException se) {
            throw new RuntimeException(se);
        }
        throw new RuntimeException(e);
    } finally {
        entityManager.close();
    }
}</pre></li><li class="listitem"><p class="simpara">
								If you use Container Managed Transactions (CMT), you do not need to manually roll back the transaction.
							</p><p class="simpara">
								If you configure your bean to use Container Managed Transactions, the container will manage the transaction lifecycle for you based on annotations you configure in the code.
							</p></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Rollback for CMT occurs if RuntimeException is thrown. You can also explicitly call the setRollbackOnly method to gain the rollback. Or, use the @ApplicationException(rollback=true) for application exception to rollback.
						</p></div></div><div class="formalpara"><p class="title"><strong>Result</strong></p><p>
							Your transaction is rolled back by the TM.
						</p></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							For a full example, see <a class="link" href="#jta_transaction_example" title="11.8.1. JTA Transaction Example">JTA Transaction Example</a>.
						</p></div></div></section></section><section class="section" id="handle_a_heuristic_outcome_in_a_transaction"><div class="titlepage"><div><div><h3 class="title">11.7.3. Handle a Heuristic Outcome in a Transaction</h3></div></div></div><p>
					Heuristic transaction outcomes are uncommon and usually have exceptional causes. The word heuristic means "by hand", and that is the way that these outcomes usually have to be handled. See <a class="link" href="#about_heuristic_outcomes" title="11.4.4. About Heuristic Outcomes">About Heuristic Outcomes</a> for more information about heuristic transaction outcomes.
				</p><p>
					This procedure shows how to handle a heuristic outcome of a transaction using the Java Transaction API (JTA).
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							The cause of a heuristic outcome in a transaction is that a resource manager promised it could commit or rollback, and then failed to fulfill the promise. This could be due to a problem with a third-party component, the integration layer between the third-party component and JBoss EAP, or JBoss EAP itself.
						</p><p class="simpara">
							By far, the most common two causes of heuristic errors are transient failures in the environment and coding errors dealing with resource managers.
						</p></li><li class="listitem"><p class="simpara">
							Usually, if there is a transient failure in your environment, you will know about it before you find out about the heuristic error. This could be due to a network outage, hardware failure, database failure, power outage, or a host of other things.
						</p><p class="simpara">
							If you come across a heuristic outcome in a test environment during stress testing, it implies weaknesses in your test environment.
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								JBoss EAP automatically recovers transactions that were in a non-heuristic state at the time of failure, but it does not attempt to recover the heuristic transactions.
							</p></div></div></li><li class="listitem"><p class="simpara">
							If you have no obvious failure in your environment, or if the heuristic outcome is easily reproducible, it is probably due to a coding error. You must contact the third-party vendors to find out if a solution is available.
						</p><p class="simpara">
							If you suspect the problem is in the transaction manager of JBoss EAP itself, you must raise a support ticket.
						</p></li><li class="listitem">
							You can attempt to recover the transaction manually using the management CLI. For more information, see the <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/managing_transactions_on_jboss_eap/index/">Recovering a Transaction Participant</a> section of <span class="emphasis"><em>Managing Transactions on JBoss EAP</em></span>.
						</li><li class="listitem"><p class="simpara">
							The process of resolving the transaction outcome manually is dependent on the exact circumstance of the failure. Perform the following steps, as applicable to your environment:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Identify which resource managers were involved.
								</li><li class="listitem">
									Examine the state of the transaction manager and the resource managers.
								</li><li class="listitem">
									Manually force log cleanup and data reconciliation in one or more of the involved components.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							In a test environment, or if you do not care about the integrity of the data, deleting the transaction logs and restarting JBoss EAP gets rid of the heuristic outcome. By default, the transaction logs are located in the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/data/tx-object-store/</code> directory for a standalone server, or the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/servers/<span class="emphasis"><em>SERVER_NAME</em></span>/data/tx-object-store/</code> directory in a managed domain. In the case of a managed domain, <span class="emphasis"><em>SERVER_NAME</em></span> refers to the name of the individual server participating in a server group.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The location of the transaction log also depends on the object store in use and the values set for the <code class="literal">object-store-relative-to</code> and <code class="literal">object-store-path</code> parameters. For file system logs, such as a standard shadow and Apache ActiveMQ Artemis logs, the default directory location is used, but when using a JDBC object store, the transaction logs are stored in a database.
							</p></div></div></li></ol></div></section><section class="section" id="jta_transaction_error_handling"><div class="titlepage"><div><div><h3 class="title">11.7.4. JTA Transaction Error Handling</h3></div></div></div><section class="section" id="handle_transaction_errors"><div class="titlepage"><div><div><h4 class="title">11.7.4.1. Handle Transaction Errors</h4></div></div></div><p>
						Transaction errors are challenging to solve because they are often dependent on timing. Here are some common errors and ideas for troubleshooting them.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							These guidelines do not apply to heuristic errors. If you experience heuristic errors, refer to <a class="link" href="#handle_a_heuristic_outcome_in_a_transaction" title="11.7.3. Handle a Heuristic Outcome in a Transaction">Handle a Heuristic Outcome in a Transaction</a> and contact Red Hat Global Support Services for assistance.
						</p></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">The transaction timed out but the business logic thread did not notice</span></dt><dd><p class="simpara">
									This type of error often manifests itself when Hibernate is unable to obtain a database connection for lazy loading. If it happens frequently, you can lengthen the timeout value. See the JBoss EAP <span class="emphasis"><em>Configuration Guide</em></span> for information on <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">configuring the transaction manager</a>.
								</p><p class="simpara">
									If that is not feasible, you might be able to tune your external environment to perform more quickly, or restructure your code to be more efficient. Contact Red Hat Global Support Services if you still have trouble with timeouts.
								</p></dd><dt><span class="term">The transaction is already running on a thread, or you receive a <code class="literal">NotSupportedException</code> exception</span></dt><dd><p class="simpara">
									The <code class="literal">NotSupportedException</code> exception usually indicates that you attempted to nest a JTA transaction, and this is not supported. If you were not attempting to nest a transaction, it is likely that another transaction was started in a thread pool task, but finished the task without suspending or ending the transaction.
								</p><p class="simpara">
									Applications typically use <code class="literal">UserTransaction</code>, which handles this automatically. If so, there might be a problem with a framework.
								</p><p class="simpara">
									If your code does use <code class="literal">TransactionManager</code> or <code class="literal">Transaction</code> methods directly, be aware of the following behavior when committing or rolling back a transaction. If your code uses <code class="literal">TransactionManager</code> methods to control your transactions, committing or rolling back a transaction disassociates the transaction from the current thread. However, if your code uses <code class="literal">Transaction</code> methods, the transaction might not be associated with the running thread, and you need to disassociate it from its threads manually, before returning it to the thread pool.
								</p></dd><dt><span class="term">You are unable to enlist a second local resource</span></dt><dd>
									This error happens if you try to enlist a second non-XA resource into a transaction. If you need multiple resources in a transaction, they must be XA.
								</dd></dl></div></section></section></section><section class="section" id="transaction_references"><div class="titlepage"><div><div><h2 class="title">11.8. Transaction References</h2></div></div></div><section class="section" id="jta_transaction_example"><div class="titlepage"><div><div><h3 class="title">11.8.1. JTA Transaction Example</h3></div></div></div><p>
					This example illustrates how to begin, commit, and roll back a JTA transaction. You need to adjust the connection and datasource parameters to suit your environment, and set up two test tables in your database.
				</p><pre class="programlisting language-java">public class JDBCExample {
    public static void main (String[] args) {
        Context ctx = new InitialContext();
        // Change these two lines to suit your environment.
        DataSource ds = (DataSource)ctx.lookup("jdbc/ExampleDS");
        Connection conn = ds.getConnection("testuser", "testpwd");
        Statement stmt = null; // Non-transactional statement
        Statement stmtx = null; // Transactional statement
        Properties dbProperties = new Properties();

        // Get a UserTransaction
        UserTransaction txn = new InitialContext().lookup("java:comp/UserTransaction");

        try {
            stmt = conn.createStatement();  // non-tx statement

            // Check the database connection.
            try {
                stmt.executeUpdate("DROP TABLE test_table");
                stmt.executeUpdate("DROP TABLE test_table2");
            }
            catch (Exception e) {
                throw new RuntimeException(e);
                // assume not in database.
            }

            try {
                stmt.executeUpdate("CREATE TABLE test_table (a INTEGER,b INTEGER)");
                stmt.executeUpdate("CREATE TABLE test_table2 (a INTEGER,b INTEGER)");
            }
            catch (Exception e) {
                throw new RuntimeException(e);
            }

            try {
                System.out.println("Starting top-level transaction.");

                txn.begin();

                stmtx = conn.createStatement(); // will be a tx-statement

                // First, we try to roll back changes

                System.out.println("\nAdding entries to table 1.");

                stmtx.executeUpdate("INSERT INTO test_table (a, b) VALUES (1,2)");

                ResultSet res1 = null;

                System.out.println("\nInspecting table 1.");

                res1 = stmtx.executeQuery("SELECT * FROM test_table");

                while (res1.next()) {
                    System.out.println("Column 1: "+res1.getInt(1));
                    System.out.println("Column 2: "+res1.getInt(2));
                }
                System.out.println("\nAdding entries to table 2.");

                stmtx.executeUpdate("INSERT INTO test_table2 (a, b) VALUES (3,4)");
                res1 = stmtx.executeQuery("SELECT * FROM test_table2");

                System.out.println("\nInspecting table 2.");

                while (res1.next()) {
                    System.out.println("Column 1: "+res1.getInt(1));
                    System.out.println("Column 2: "+res1.getInt(2));
                }

                System.out.print("\nNow attempting to rollback changes.");

                txn.rollback();

                // Next, we try to commit changes
                txn.begin();
                stmtx = conn.createStatement();
                System.out.println("\nAdding entries to table 1.");
                stmtx.executeUpdate("INSERT INTO test_table (a, b) VALUES (1,2)");
                ResultSet res2 = null;

                System.out.println("\nNow checking state of table 1.");

                res2 = stmtx.executeQuery("SELECT * FROM test_table");

                while (res2.next()) {
                    System.out.println("Column 1: "+res2.getInt(1));
                    System.out.println("Column 2: "+res2.getInt(2));
                }

                System.out.println("\nNow checking state of table 2.");

                stmtx = conn.createStatement();

                res2 = stmtx.executeQuery("SELECT * FROM test_table2");

                while (res2.next()) {
                    System.out.println("Column 1: "+res2.getInt(1));
                    System.out.println("Column 2: "+res2.getInt(2));
                }

                txn.commit();
            }
            catch (Exception ex) {
                throw new RuntimeException(ex);

            }
        }
        catch (Exception sysEx) {
            sysEx.printStackTrace();
            System.exit(0);
        }
    }
}</pre></section><section class="section" id="api_documentation_for_jboss_transactions_jta"><div class="titlepage"><div><div><h3 class="title">11.8.2. Transaction API Documentation</h3></div></div></div><p>
					The transaction JTA API documentation is available as Javadoc at the following location:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							UserTransaction - <a class="link mimir-link-warn" href="http://docs.oracle.com/javaee/7/api/javax/transaction/UserTransaction.html" title="Mimir does not include content from: docs.oracle.com">http://docs.oracle.com/javaee/7/api/javax/transaction/UserTransaction.html</a>
						</li></ul></div><p>
					If you use Red Hat CodeReady Studio to develop your applications, the API documentation is included in the <span class="strong strong"><strong>Help</strong></span> menu.
				</p></section></section></section><section class="chapter" id="java_persistence_api"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Java Persistence API (JPA)</h1></div></div></div><section class="section" id="about_jpa"><div class="titlepage"><div><div><h2 class="title">12.1. About Java Persistence API (JPA)</h2></div></div></div><p>
				The Java Persistence API (JPA) is a Java specification for accessing, persisting, and managing data between Java objects or classes and a relational database. The JPA specification recognizes the interest and the success of the transparent object or relational mapping paradigm. It standardizes the basic APIs and the metadata needed for any object or relational persistence mechanism.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					JPA itself is just a specification, not a product; it cannot perform persistence or anything else by itself. JPA is just a set of interfaces, and requires an implementation.
				</p></div></div></section><section class="section" id="create_a_simple_jpa_application"><div class="titlepage"><div><div><h2 class="title">12.2. Create a Simple JPA Application</h2></div></div></div><p>
				Follow the procedure below to create a simple JPA application in Red Hat CodeReady Studio.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a JPA project in Red Hat CodeReady Studio.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In Red Hat CodeReady Studio, click <span class="strong strong"><strong>File</strong></span> → <span class="strong strong"><strong>New</strong></span> → <span class="strong strong"><strong>Project</strong></span>. Find <span class="strong strong"><strong>JPA</strong></span> in the list, expand it, and select <span class="strong strong"><strong>JPA Project</strong></span>. You are presented with the following dialog.
							</p><div class="figure" id="idm140421263010736"><p class="title"><strong>Figure 12.1. New JPA Project Dialog</strong></p><div class="figure-contents"><div class="mediaobject"><img src="/webassets/avalon/d/JBoss_Enterprise_Application_Platform_Continuous_Delivery-18-Development_Guide-en-US/images/aaa3d8c6535e2f957dea34fdba9aec02/6586.png" alt="This is the new JPA Project dialog." /></div></div></div></li><li class="listitem">
								Enter a <span class="strong strong"><strong>Project name</strong></span>.
							</li><li class="listitem">
								Select a <span class="strong strong"><strong>Target runtime</strong></span>. If no target runtime is available, follow these instructions to define a new server and runtime: <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/red_hat_codeready_studio/12.11/html-single/getting_started_with_codeready_studio_tools/#proc_downloading-installing-and-setting-up-eap-from-within-the-ide" title="This content is not included in Mimir.">Downloading, Installing, and Setting Up JBoss EAP from within the IDE</a> in the <span class="emphasis"><em>Getting Started with CodeReady Studio Tools</em></span> guide.
							</li><li class="listitem">
								Under <span class="strong strong"><strong>JPA version</strong></span>, ensure <span class="strong strong"><strong>2.1</strong></span> is selected.
							</li><li class="listitem">
								Under <span class="strong strong"><strong>Configuration</strong></span>, choose <span class="strong strong"><strong>Basic JPA Configuration</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Finish</strong></span>.
							</li><li class="listitem">
								If prompted, choose whether you wish to associate this type of project with the JPA perspective window.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create and configure a new persistence settings file.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open an EJB 3.x project in Red Hat CodeReady Studio.
							</li><li class="listitem">
								Right click the project root directory in the <span class="strong strong"><strong>Project Explorer</strong></span> panel.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>New</strong></span> → <span class="strong strong"><strong>Other…​.</strong></span>
							</li><li class="listitem">
								Select <span class="strong strong"><strong>XML File</strong></span> from the XML folder and click <span class="strong strong"><strong>Next</strong></span>.
							</li><li class="listitem">
								Select the <code class="literal">ejbModule/META-INF/</code> folder as the parent directory.
							</li><li class="listitem">
								Name the file <code class="literal">persistence.xml</code> and click <span class="strong strong"><strong>Next</strong></span>.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Create XML file from an XML schema file</strong></span> and click <span class="strong strong"><strong>Next</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Select <code class="literal">http://java.sun.com/xml/ns/persistence/persistence_2.0.xsd</code> from the <span class="strong strong"><strong>Select XML Catalog entry</strong></span> list and click <span class="strong strong"><strong>Next</strong></span>.
							</p><div class="figure" id="idm140421265484752"><p class="title"><strong>Figure 12.2. Persistence XML Schema</strong></p><div class="figure-contents"><div class="mediaobject"><img src="/webassets/avalon/d/JBoss_Enterprise_Application_Platform_Continuous_Delivery-18-Development_Guide-en-US/images/9ea504f37e1e8babad79491bb170f3bc/32.png" alt="Persistence XML Schema" /></div></div></div></li><li class="listitem"><p class="simpara">
								Click <span class="strong strong"><strong>Finish</strong></span> to create the file. The <code class="literal">persistence.xml</code> has been created in the <code class="literal">META-INF/</code> folder and is ready to be configured.
							</p><div class="formalpara"><p class="title"><strong>Example: Persistence Settings File</strong></p><p>
									
<pre class="programlisting language-xml">&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_2.xsd"
   version="2.2"&gt;
   &lt;persistence-unit name="example" transaction-type="JTA"&gt;
      &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;
      &lt;jta-data-source&gt;java:jboss/datasources/ExampleDS&lt;/jta-data-source&gt;
      &lt;mapping-file&gt;ormap.xml&lt;/mapping-file&gt;
      &lt;jar-file&gt;TestApp.jar&lt;/jar-file&gt;
      &lt;class&gt;org.test.Test&lt;/class&gt;
      &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;
      &lt;validation-mode&gt;CALLBACK&lt;/validation-mode&gt;
      &lt;properties&gt;
         &lt;property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/&gt;
         &lt;property name="hibernate.hbm2ddl.auto" value="create-drop"/&gt;
      &lt;/properties&gt;
   &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre>

								</p></div></li></ol></div></li></ol></div></section><section class="section" id="jpa-entities"><div class="titlepage"><div><div><h2 class="title">12.3. JPA Entities</h2></div></div></div><p>
				Once you have established the connection from your application to the database, you can start mapping the data in the database to Java objects. Java objects that are used to map against database tables are called entity objects.
			</p><p>
				Entities have relationships with other entities, which are expressed through object-relational metadata. The object-relational metadata can be specified either directly in the entity class file by using annotations, or in an XML descriptor file called <code class="literal">persistence.xml</code> included with the application.
			</p><p>
				The high-level mapping of Java objects to the database is as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Java classes map to the database tables.
					</li><li class="listitem">
						Java instances map to the database rows.
					</li><li class="listitem">
						Java fields map to the database columns.
					</li></ul></div></section><section class="section" id="persistence-context"><div class="titlepage"><div><div><h2 class="title">12.4. Persistence Context</h2></div></div></div><p>
				The JPA persistence context contains the entities managed by the persistence provider. The persistence context acts like a first level transactional cache for interacting with the datasource. It manages the entity instances and their lifecycle. Loaded entities are placed into the persistence context before being returned to the application. Entity changes are also placed into the persistence context to be saved in the database when the transaction commits.
			</p><p>
				The lifetime of a container-managed persistence context can either be scoped to a transaction, which is referred to as a transaction-scoped persistence context, or have a lifetime scope that extends beyond that of a single transaction, which is referred to as an extended persistence context. The <code class="literal">PersistenceContextType</code> property, which has the <code class="literal">enum</code> datatype, is used to define the persistence context lifetime scope for container-managed entity managers. The persistence context lifetime scope is defined when the <code class="literal">EntityManager</code> instance is created.
			</p><section class="section" id="transaction_scoped_persistence_context"><div class="titlepage"><div><div><h3 class="title">12.4.1. Transaction-Scoped Persistence Context</h3></div></div></div><p>
					The transaction-scoped persistence context works with the active JTA transaction. When the transaction commits, the persistence context is flushed to the datasource; the entity objects are detached but might still be referenced by the application code. All the entity changes that are expected to be saved to the datasource must be made during a transaction. Entities that are read outside the transaction are detached when the <code class="literal">EntityManager</code> invocation completes.
				</p></section><section class="section" id="extended_persistence_context"><div class="titlepage"><div><div><h3 class="title">12.4.2. Extended Persistence Context</h3></div></div></div><p>
					The extended persistence context spans multiple transactions and allows data modifications to be queued without an active JTA transaction. The container-managed extended persistence context can only be injected into a stateful session bean.
				</p></section></section><section class="section" id="jpa-entity-manager"><div class="titlepage"><div><div><h2 class="title">12.5. JPA EntityManager</h2></div></div></div><p>
				JPA entity manager represents a connection to the persistence context. You can read from and write to the database defined by the persistence context using the entity manager.
			</p><p>
				Persistence context is provided through the Java annotation <code class="literal">@PersistenceContext</code> in the <code class="literal">javax.persistence</code> package. The entity manager is provided through the Java class <code class="literal">javax.persistence.EntityManager</code>. In any managed bean, the <code class="literal">EntityManager</code> instance can be injected as shown below:
			</p><div class="formalpara"><p class="title"><strong>Example: Entity Manager Injection</strong></p><p>
					
<pre class="programlisting language-java">@Stateless
public class UserBean {
    @PersistenceContext
    EntityManager entitymanager;
    ...
}</pre>

				</p></div><section class="section" id="application_managed_entitymanager"><div class="titlepage"><div><div><h3 class="title">12.5.1. Application-Managed EntityManager</h3></div></div></div><p>
					Application-managed entity managers provide direct access to the underlying persistence provider, <code class="literal">org.hibernate.jpa.HibernatePersistenceProvider</code>. The scope of the application-managed entity manager is from when the application creates it and lasts until the application closes it. You can use the <code class="literal">@PersistenceUnit</code> annotation to inject a persistence unit into the <code class="literal">javax.persistence.EntityManagerFactory</code> interface, which returns an application-managed entity manager.
				</p><p>
					Application-managed entity managers can be used when your application needs to access a persistence context that is not propagated with the JTA transaction across <code class="literal">EntityManager</code> instances in a particular persistence unit. In this case, each <code class="literal">EntityManager</code> instance creates a new, isolated persistence context. The <code class="literal">EntityManager</code> instance and its associated <code class="literal">PersistenceContext</code> is created and destroyed explicitly by your application. Application-managed entity managers can also be used when you cannot inject <code class="literal">EntityManager</code> instances directly, because the <code class="literal">EntityManager</code> instances are not thread-safe. <code class="literal">EntityManagerFactory</code> instances are thread-safe.
				</p><div class="formalpara"><p class="title"><strong>Example: Application-Managed Entity Manager</strong></p><p>
						
<pre class="programlisting language-java">@PersistenceUnit
EntityManagerFactory emf;
EntityManager em;
@Resource
UserTransaction utx;
...
em = emf.createEntityManager();
try {
    utx.begin();
    em.persist(SomeEntity);
    em.merge(AnotherEntity);
    em.remove(ThirdEntity);
    utx.commit();
}
catch (Exception e) {
    utx.rollback();
}</pre>

					</p></div></section><section class="section" id="container_managed_entitymanager"><div class="titlepage"><div><div><h3 class="title">12.5.2. Container-Managed EntityManager</h3></div></div></div><p>
					Container-managed entity managers manage the underlying persistence provider for the application. They can use the transaction-scoped persistence contexts or the extended persistence contexts. The container-managed entity manager creates instances of the underlying persistence provider as needed. Every time a new underlying persistence provider <code class="literal">org.hibernate.jpa.HibernatePersistenceProvider</code> instance is created, a new persistence context is also created.
				</p></section></section><section class="section" id="working-with-entity-manager"><div class="titlepage"><div><div><h2 class="title">12.6. Working with the EntityManager</h2></div></div></div><p>
				When you have the <code class="literal">persistence.xml</code> file located in the <code class="literal">/META-INF</code> directory, the entity manager is loaded and has an active connection to the database. The <code class="literal">EntityManager</code> property can be used to bind the entity manager to JNDI and to add, update, remove and query entities.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					If you plan to use a security manager with Hibernate, be aware that Hibernate supports it only when <code class="literal">EntityManagerFactory</code> is bootstrapped by the JBoss EAP server. It is not supported when the <code class="literal">EntityManagerFactory</code> or <code class="literal">SessionFactory</code> is bootstrapped by the application. See <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/how_to_configure_server_security/#java_security_manager" title="This content is not included in Mimir.">Java Security Manager</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for more information about security managers.
				</p></div></div><section class="section" id="binding_the_entitymanager_to_jndi"><div class="titlepage"><div><div><h3 class="title">12.6.1. Binding the EntityManager to JNDI</h3></div></div></div><p>
					By default, JBoss EAP does not bind the <code class="literal">EntityManagerFactory</code> to JNDI. You can explicitly configure this in the <code class="literal">persistence.xml</code> file of your application by setting the <code class="literal">jboss.entity.manager.factory.jndi.name</code> property. The value of this property should be the JNDI name to which you want to bind the <code class="literal">EntityManagerFactory</code>.
				</p><p>
					You can also bind a container-managed transaction-scoped entity manager to JNDI by using the <code class="literal">jboss.entity.manager.jndi.name</code> property.
				</p><div class="formalpara"><p class="title"><strong>Example: Binding the <code class="literal">EntityManager</code> and the <code class="literal">EntityManagerFactory</code> to JNDI</strong></p><p>
						
<pre class="programlisting language-java">&lt;property name="jboss.entity.manager.jndi.name" value="java:/MyEntityManager"/&gt;
&lt;property name="jboss.entity.manager.factory.jndi.name" value="java:/MyEntityManagerFactory"/&gt;</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Example: Storing an Entity using the <code class="literal">EntityManager</code></strong></p><p>
						
<pre class="programlisting language-java">public User createUser(User user) {
    entityManager.persist(user);
    return user;
}</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Example: Updating an Entity using the <code class="literal">EntityManager</code></strong></p><p>
						
<pre class="programlisting language-java">public void updateUser(User user) {
    entityManager.merge(user);
}</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Example: Removing an Entity using the <code class="literal">EntityManager</code></strong></p><p>
						
<pre class="programlisting language-java">public void deleteUser(String user) {
    User user = findUser(username);
    if (user != null)
        entityManager.remove(user);
}</pre>

					</p></div><div class="formalpara"><p class="title"><strong>Example: Querying an Entity using the <code class="literal">EntityManager</code></strong></p><p>
						
<pre class="programlisting language-java">public User findUser(String username) {
    CriteriaBuilder builder = entityManager.getCriteriaBuilder();
    CriteriaQuery&lt;User&gt; criteria = builder.createQuery(User.class);
    Root&lt;User&gt; root = criteria.from(User.class);
    TypedQuery&lt;User&gt; query = entityManager
        .createQuery(criteria.select(root).where(
            builder.equal(root.&lt;String&gt; get("username"), username)));
    try {
        return query.getSingleResult();
    }
    catch (NoResultException e) {
        return null;
    }
}</pre>

					</p></div></section></section><section class="section" id="deploying_persistence_unit"><div class="titlepage"><div><div><h2 class="title">12.7. Deploying the Persistence Unit</h2></div></div></div><p>
				A persistence unit is a logical grouping that includes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Configuration information for an entity manager factory and its entity managers.
					</li><li class="listitem">
						Classes managed by the entity managers.
					</li><li class="listitem">
						Mapping metadata specifying the mapping of the classes to the database.
					</li></ul></div><p>
				The <code class="literal">persistence.xml</code> file contains persistence unit configuration, including the datasource name. The JAR file or the directory whose <code class="literal">/META-INF/</code> directory contains the <code class="literal">persistence.xml</code> file is termed as the root of the persistence unit.
			</p><p>
				In Java EE environments, the root of the persistence unit must be one of the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An EJB-JAR file
					</li><li class="listitem">
						The <code class="literal">/WEB-INF/classes/</code> directory of a WAR file
					</li><li class="listitem">
						A JAR file in the <code class="literal">/WEB-INF/lib/</code> directory of a WAR file
					</li><li class="listitem">
						A JAR file in the EAR library directory
					</li><li class="listitem">
						An application client JAR file
					</li></ul></div><div class="formalpara"><p class="title"><strong>Example: Persistence Settings File</strong></p><p>
					
<pre class="programlisting language-xml">&lt;persistence xmlns="http://java.sun.com/xml/ns/persistence"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_2.xsd"
   version="2.2"&gt;
   &lt;persistence-unit name="example" transaction-type="JTA"&gt;
      &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;
      &lt;jta-data-source&gt;java:jboss/datasources/ExampleDS&lt;/jta-data-source&gt;
      &lt;mapping-file&gt;ormap.xml&lt;/mapping-file&gt;
      &lt;jar-file&gt;TestApp.jar&lt;/jar-file&gt;
      &lt;class&gt;org.test.Test&lt;/class&gt;
      &lt;shared-cache-mode&gt;NONE&lt;/shared-cache-mode&gt;
      &lt;validation-mode&gt;CALLBACK&lt;/validation-mode&gt;
      &lt;properties&gt;
         &lt;property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/&gt;
         &lt;property name="hibernate.hbm2ddl.auto" value="create-drop"/&gt;
      &lt;/properties&gt;
   &lt;/persistence-unit&gt;
&lt;/persistence&gt;</pre>

				</p></div></section><section class="section" id="second_level_caches"><div class="titlepage"><div><div><h2 class="title">12.8. Second-level Caches</h2></div></div></div><section class="section" id="about_second_level_caches"><div class="titlepage"><div><div><h3 class="title">12.8.1. About Second-level Caches</h3></div></div></div><p>
					A second-level cache is a local data store that holds information persisted outside the application session. The cache is managed by the persistence provider, improving runtime by keeping the data separate from the application.
				</p><p>
					JBoss EAP supports caching for the following purposes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Web Session Clustering
						</li><li class="listitem">
							Stateful Session Bean Clustering
						</li><li class="listitem">
							SSO Clustering
						</li><li class="listitem">
							Hibernate/JPA Second-level Cache
						</li></ul></div><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Each cache container defines a <code class="literal">repl</code> and a <code class="literal">dist</code> cache. These caches should not be used directly by user applications.
					</p></div></div><section class="section" id="default_second_level_cache_provider_infinispan"><div class="titlepage"><div><div><h4 class="title">12.8.1.1. Default Second-level Cache Provider</h4></div></div></div><p>
						Infinispan is the default second-level cache provider for JBoss EAP. Infinispan is a distributed in-memory key/value data store with optional schema, available under the Apache License 2.0.
					</p><section class="section" id="configure_second_level_cache_persistence_unit"><div class="titlepage"><div><div><h5 class="title">12.8.1.1.1. Configuring a Second-level Cache in the Persistence Unit</h5></div></div></div><p>
							You can use the <code class="literal">shared-cache-mode</code> element of the persistence unit to configure the second-level cache.
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									See <a class="link" href="#create_a_simple_jpa_application" title="12.2. Create a Simple JPA Application">Create a Simple JPA Application</a> to create the <code class="literal">persistence.xml</code> file in Red Hat CodeReady Studio.
								</li><li class="listitem"><p class="simpara">
									Add the following to the <code class="literal">persistence.xml</code> file:
								</p><pre class="programlisting language-xml">&lt;persistence-unit name="..."&gt;
  (...) &lt;!-- other configuration --&gt;
  &lt;shared-cache-mode&gt;<span class="emphasis"><em>SHARED_CACHE_MODE</em></span>&lt;/shared-cache-mode&gt;
  &lt;properties&gt;
    &lt;property name="hibernate.cache.use_second_level_cache" value="true" /&gt;
    &lt;property name="hibernate.cache.use_query_cache" value="true" /&gt;
  &lt;/properties&gt;
&lt;/persistence-unit&gt;</pre><p class="simpara">
									The <code class="literal"><span class="emphasis"><em>SHARED_CACHE_MODE</em></span></code> element can take the following values:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">ALL</code>: All entities should be considered cacheable.
										</li><li class="listitem">
											<code class="literal">NONE</code>: No entities should be considered cacheable.
										</li><li class="listitem">
											<code class="literal">ENABLE_SELECTIVE</code>: Only entities marked as cacheable should be considered cacheable.
										</li><li class="listitem">
											<code class="literal">DISABLE_SELECTIVE</code>: All entities except the ones explicitly marked as not cacheable should be considered cacheable.
										</li><li class="listitem">
											<code class="literal">UNSPECIFIED</code>: Behavior is not defined. Provider-specific defaults are applicable.
										</li></ul></div></li></ol></div></section></section></section></section></section><section class="chapter" id="bean_validation"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Bean Validation</h1></div></div></div><section class="section" id="about_bean_validation"><div class="titlepage"><div><div><h2 class="title">13.1. About Bean Validation</h2></div></div></div><p>
				Bean Validation, or JavaBeans Validation, is a model for validating data in Java objects. The model uses built-in and custom annotation constraints to ensure the integrity of application data. It also offers method and constructor validation to ensure constraints on parameters and return values. The specification is documented in <a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=380" title="Mimir does not include content from: jcp.org">JSR 380: Bean Validation 2.0</a>.
			</p><p>
				Hibernate Validator is the JBoss EAP implementation of Bean Validation. It is also the reference implementation of the JSR.
			</p><p>
				JBoss EAP is 100% compliant with JSR 380 Bean Validation 2.0 specification. Hibernate Validator also provides additional features to the specification.
			</p><p>
				To get started with Bean Validation, see the <code class="literal">bean-validation</code> quickstart that ships with JBoss EAP. For information about how to download and run the quickstarts, see <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/getting_started_guide/#using_the_quickstart_examples" title="This content is not included in Mimir.">Using the Quickstart Examples</a> in the JBoss EAP <span class="emphasis"><em>Getting Started Guide</em></span>.
			</p><p>
				JBoss EAP 7.3 includes Hibernate Validator 6.0.x.
			</p><h5 id="features_hibernate_validator_6_0">Features of Hibernate Validator 6.0.x</h5><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Bean Validation 2.0 defines a metadata model and API for entity and method validation.
					</p><p class="simpara">
						The default source for the metadata is annotations, with the ability to override and extend the metadata through the use of XML.
					</p><p class="simpara">
						The API is not tied to any specific application tier or programming model. It is available for both server-side application programming and rich client Swing application development.
					</p></li><li class="listitem">
						In addition to bug fixes, this release of Hibernate Validator contains many performance improvements for the most common use cases.
					</li><li class="listitem">
						As of version 1.1, Bean Validation constraints can also be applied to the parameters and return values of methods of arbitrary Java types using the Bean Validation API.
					</li><li class="listitem"><p class="simpara">
						Hibernate Validator 6.0.x and Bean Validation 2.0 require Java 8 or later.
					</p><p class="simpara">
						For more information, see <a class="link mimir-link-warn" href="https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/" title="Mimir does not include content from: docs.jboss.org">Hibernate Validator 6.0.17.Final - JSR 380 Reference Implementation: Reference Guide</a>.
					</p></li></ul></div></section><section class="section" id="validation_constraints"><div class="titlepage"><div><div><h2 class="title">13.2. Validation Constraints</h2></div></div></div><section class="section" id="about_validation_constraints"><div class="titlepage"><div><div><h3 class="title">13.2.1. About Validation Constraints</h3></div></div></div><p>
					Validation constraints are rules applied to a Java element, such as a field, property or bean. A constraint will usually have a set of attributes used to set its limits. There are predefined constraints, and custom ones can be created. Each constraint is expressed in the form of an annotation.
				</p><p>
					The built-in validation constraints for Hibernate Validator are listed here: <a class="link" href="#hibernate_validator_constraints" title="13.2.2. Hibernate Validator Constraints">Hibernate Validator Constraints</a>.
				</p></section><section class="section" id="hibernate_validator_constraints"><div class="titlepage"><div><div><h3 class="title">13.2.2. Hibernate Validator Constraints</h3></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						When applicable, the application-level constraints lead to creation of database-level constraints that are described in the <span class="strong strong"><strong>Hibernate Metadata Impact</strong></span> column in the table below.
					</p></div></div><div class="formalpara"><p class="title"><strong>Java-specific Validation Constraints</strong></p><p>
						The following table includes validation constraints defined in the Java specifications, which are included in the <code class="literal">javax.validation.constraints</code> package.
					</p></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421267609600" scope="col">Annotation</th><th align="left" valign="top" id="idm140421267608512" scope="col">Property type</th><th align="left" valign="top" id="idm140421267607424" scope="col">Runtime checking</th><th align="left" valign="top" id="idm140421267606336" scope="col">Hibernate Metadata impact</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@AssertFalse
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Boolean
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check that the method evaluates to false. Useful for constraints expressed in code rather than annotations.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@AssertTrue
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Boolean
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check that the method evaluates to true. Useful for constraints expressed in code rather than annotations.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Digits(integerDigits=1)
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Numeric or string representation of a numeric
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check whether the property is a number having up to <code class="literal">integerDigits</code> integer digits and <code class="literal">fractionalDigits</code> fractional digits.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									Define column precision and scale.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Future
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Date or calendar
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the date is in the future.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Max(value=)
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Numeric or string representation of a numeric
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the value is less than or equal to max.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									Add a check constraint on the column.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Min(value=)
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Numeric or string representation of a numeric
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the value is more than or equal to Min.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									Add a check constraint on the column.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@NotNull
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the value is not null.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									Column(s) are not null.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Past
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Date or calendar
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the date is in the past.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									Add a check constraint on the column.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Pattern(regexp="regexp", flag=) or @Patterns( {@Pattern(…​)} )
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									String
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the property matches the regular expression given a match flag. See <code class="literal">java.util.regex.Pattern</code>.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Size(min=, max=)
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Array, collection, map
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Check if the element size is between min and max, both values included.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421267609600"> <p>
									@Valid
								</p>
								 </td><td align="left" valign="top" headers="idm140421267608512"> <p>
									Object
								</p>
								 </td><td align="left" valign="top" headers="idm140421267607424"> <p>
									Perform validation recursively on the associated object. If the object is a Collection or an array, the elements are validated recursively. If the object is a Map, the value elements are validated recursively.
								</p>
								 </td><td align="left" valign="top" headers="idm140421267606336"> <p>
									None.
								</p>
								 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The parameter <code class="literal">@Valid</code> is a part of the Bean Validation specification, even though it is located in the <code class="literal">javax.validation.constraints</code> package.
					</p></div></div><div class="formalpara"><p class="title"><strong>Hibernate Validator-specific Validation Constraints</strong></p><p>
						The following table includes vendor-specific validation constraints, which are a part of the <code class="literal">org.hibernate.validator.constraints</code> package.
					</p></div><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 25%; " class="col_2"><!--Empty--></col><col style="width: 25%; " class="col_3"><!--Empty--></col><col style="width: 25%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421264125344" scope="col">Annotation</th><th align="left" valign="top" id="idm140421264124256" scope="col">Property type</th><th align="left" valign="top" id="idm140421264123168" scope="col">Runtime checking</th><th align="left" valign="top" id="idm140421264122080" scope="col">Hibernate Metadata impact</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421264125344"> <p>
									@Length(min=, max=)
								</p>
								 </td><td align="left" valign="top" headers="idm140421264124256"> <p>
									String
								</p>
								 </td><td align="left" valign="top" headers="idm140421264123168"> <p>
									Check if the string length matches the range.
								</p>
								 </td><td align="left" valign="top" headers="idm140421264122080"> <p>
									Column length will be set to max.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421264125344"> <p>
									@CreditCardNumber
								</p>
								 </td><td align="left" valign="top" headers="idm140421264124256"> <p>
									String
								</p>
								 </td><td align="left" valign="top" headers="idm140421264123168"> <p>
									Check whether the string is a well formatted credit card number, derivative of the Luhn algorithm.
								</p>
								 </td><td align="left" valign="top" headers="idm140421264122080"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421264125344"> <p>
									@EAN
								</p>
								 </td><td align="left" valign="top" headers="idm140421264124256"> <p>
									String
								</p>
								 </td><td align="left" valign="top" headers="idm140421264123168"> <p>
									Check whether the string is a properly formatted EAN or UPC-A code.
								</p>
								 </td><td align="left" valign="top" headers="idm140421264122080"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421264125344"> <p>
									@Email
								</p>
								 </td><td align="left" valign="top" headers="idm140421264124256"> <p>
									String
								</p>
								 </td><td align="left" valign="top" headers="idm140421264123168"> <p>
									Check whether the string is conform to the e-mail address specification.
								</p>
								 </td><td align="left" valign="top" headers="idm140421264122080"> <p>
									None.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421264125344"> <p>
									@NotEmpty
								</p>
								 </td><td align="left" valign="top" headers="idm140421264124256"> </td><td align="left" valign="top" headers="idm140421264123168"> <p>
									Check if the string is not null nor empty. Check if the connection is not null nor empty.
								</p>
								 </td><td align="left" valign="top" headers="idm140421264122080"> <p>
									Columns are not null for String.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140421264125344"> <p>
									@Range(min=, max=)
								</p>
								 </td><td align="left" valign="top" headers="idm140421264124256"> <p>
									Numeric or string representation of a numeric
								</p>
								 </td><td align="left" valign="top" headers="idm140421264123168"> <p>
									Check if the value is between min and max, both values included.
								</p>
								 </td><td align="left" valign="top" headers="idm140421264122080"> <p>
									Add a check constraint on the column.
								</p>
								 </td></tr></tbody></table></div></section><section class="section" id="bean_validation_using_custom_constraint"><div class="titlepage"><div><div><h3 class="title">13.2.3. Bean Validation Using Custom Constraints</h3></div></div></div><p>
					Bean Validation API defines a set of standard constraint annotations, such as <code class="literal">@NotNull</code>, <code class="literal">@Size</code>, and so on. However, in cases where these predefined constraints are not sufficient, you can easily create custom constraints tailored to your specific validation requirements.
				</p><p>
					Creating a Bean Validation custom constraint requires that you <a class="link" href="#creating_constraint_annotation" title="13.2.3.1. Creating A Constraint Annotation">create a constraint annotation</a> and <a class="link" href="#implementing_constraint_validator" title="13.2.3.2. Implementing A Constraint Validator">implement a constraint validator</a>. The following abbreviated code examples are taken from the <code class="literal">bean-validation-custom-constraint</code> quickstart that ships with JBoss EAP. See that quickstart for a complete working example.
				</p><section class="section" id="creating_constraint_annotation"><div class="titlepage"><div><div><h4 class="title">13.2.3.1. Creating A Constraint Annotation</h4></div></div></div><p>
						The following example shows the <code class="literal">personAddress</code> field of entity <code class="literal">Person</code> is validated using a set of custom constraints defined in the class <code class="literal">AddressValidator</code>.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Create the entity <code class="literal">Person</code>.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">Person</code> Class</strong></p><p>
									
<pre class="programlisting language-java">package org.jboss.as.quickstarts.bean_validation_custom_constraint;

@Entity
@Table(name = "person")
public class Person implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name = "person_id")
    private Long personId;

    @NotNull

    @Size(min = 4)
    private String firstName;

    @NotNull
    @Size(min = 4)
    private String lastName;

    // Custom Constraint @Address for bean validation
    @NotNull
    @Address
    @OneToOne(mappedBy = "person", cascade = CascadeType.ALL)
    private PersonAddress personAddress;

    public Person() {

    }

    public Person(String firstName, String lastName, PersonAddress address) {
        this.firstName = firstName;
        this.lastName = lastName;
        this.personAddress = address;
    }

    /* getters and setters omitted for brevity*/
}</pre>

								</p></div></li><li class="listitem"><p class="simpara">
								Create the constraint validator files.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">Address</code> Interface</strong></p><p>
									
<pre class="programlisting language-java">package org.jboss.as.quickstarts.bean_validation_custom_constraint;

import java.lang.annotation.Documented;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import javax.validation.Constraint;
import javax.validation.Payload;

// Linking the AddressValidator class with @Address annotation.
@Constraint(validatedBy = { AddressValidator.class })
// This constraint annotation can be used only on fields and method parameters.
@Target({ ElementType.FIELD, ElementType.PARAMETER })
@Retention(value = RetentionPolicy.RUNTIME)
@Documented
public @interface Address {

    // The message to return when the instance of MyAddress fails the validation.
    String message() default "Address Fields must not be null/empty and obey character limit constraints";

    Class&lt;?&gt;[] groups() default {};

    Class&lt;? extends Payload&gt;[] payload() default {};
}</pre>

								</p></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">PersonAddress</code> Class</strong></p><p>
									
<pre class="programlisting language-java">package org.jboss.as.quickstarts.bean_validation_custom_constraint;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.OneToOne;
import javax.persistence.PrimaryKeyJoinColumn;
import javax.persistence.Table;

@Entity
@Table(name = "person_address")
public class PersonAddress implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "person_id", unique = true, nullable = false)
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    private Long personId;

    private String streetAddress;
    private String locality;
    private String city;
    private String state;
    private String country;
    private String pinCode;

    @OneToOne
    @PrimaryKeyJoinColumn
    private Person person;

    public PersonAddress() {

    }

    public PersonAddress(String streetAddress, String locality, String city, String state, String country, String pinCode) {
        this.streetAddress = streetAddress;
        this.locality = locality;
        this.city = city;
        this.state = state;
        this.country = country;
        this.pinCode = pinCode;
    }

    /* getters and setters omitted for brevity*/
}</pre>

								</p></div></li></ol></div></section><section class="section" id="implementing_constraint_validator"><div class="titlepage"><div><div><h4 class="title">13.2.3.2. Implementing A Constraint Validator</h4></div></div></div><p>
						Having defined the annotation, you need to create a constraint validator that is able to validate elements with an <code class="literal">@Address</code> annotation. To do so, implement the interface <code class="literal">ConstraintValidator</code> as shown below:
					</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">AddressValidator</code> Class</strong></p><p>
							
<pre class="programlisting language-java">package org.jboss.as.quickstarts.bean_validation_custom_constraint;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
import org.jboss.as.quickstarts.bean_validation_custom_constraint.PersonAddress;

public class AddressValidator implements ConstraintValidator&lt;Address, PersonAddress&gt; {

    public void initialize(Address constraintAnnotation) {
    }

    /**
     * 1. A null address is handled by the @NotNull constraint on the @Address.
     * 2. The address should have all the data values specified.
     * 3. Pin code in the address should be of at least 6 characters.
     * 4. The country in the address should be of at least 4 characters.
     */
    public boolean isValid(PersonAddress value, ConstraintValidatorContext context) {
        if (value == null) {
            return true;
        }

        if (value.getCity() == null || value.getCountry() == null || value.getLocality() == null
            || value.getPinCode() == null || value.getState() == null || value.getStreetAddress() == null) {
            return false;
        }

        if (value.getCity().isEmpty()
            || value.getCountry().isEmpty() || value.getLocality().isEmpty()
            || value.getPinCode().isEmpty() || value.getState().isEmpty() || value.getStreetAddress().isEmpty()) {
            return false;
        }

        if (value.getPinCode().length() &lt; 6) {
            return false;
        }

        if (value.getCountry().length() &lt; 4) {
            return false;
        }

        return true;
    }
}</pre>

						</p></div></section></section></section><section class="section" id="example_validation_configuration_file"><div class="titlepage"><div><div><h2 class="title">13.3. Validation Configuration</h2></div></div></div><p>
				You can configure bean validation using XML descriptors in the <code class="literal">validation.xml</code> file located in the <code class="literal">/META-INF</code> directory. If this file exists in the class path, its configuration is applied when the <code class="literal">ValidatorFactory</code> gets created.
			</p><div class="formalpara"><p class="title"><strong>Example: Validation Configuration File</strong></p><p>
					The following example shows several configuration options of the <code class="literal">validation.xml</code> file. All the settings are optional. These options can also be configured using the <code class="literal">javax.validation</code> package.
				</p></div><pre class="programlisting language-xml">&lt;validation-config xmlns="http://jboss.org/xml/ns/javax/validation/configuration"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jboss.org/xml/ns/javax/validation/configuration"&gt;

    &lt;default-provider&gt;
        org.hibernate.validator.HibernateValidator
    &lt;/default-provider&gt;
    &lt;message-interpolator&gt;
        org.hibernate.validator.messageinterpolation.ResourceBundleMessageInterpolator
    &lt;/message-interpolator&gt;
    &lt;constraint-validator-factory&gt;
        org.hibernate.validator.engine.ConstraintValidatorFactoryImpl
    &lt;/constraint-validator-factory&gt;

    &lt;constraint-mapping&gt;
        /constraints-example.xml
    &lt;/constraint-mapping&gt;

    &lt;property name="prop1"&gt;value1&lt;/property&gt;
    &lt;property name="prop2"&gt;value2&lt;/property&gt;
&lt;/validation-config&gt;</pre><p>
				The node <code class="literal">default-provider</code> allows to choose the bean validation provider. This is useful if there is more than one provider on the classpath. The <code class="literal">message-interpolator</code> and <code class="literal">constraint-validator-factory</code> properties are used to customize the used implementations for the interfaces <code class="literal">MessageInterpolator</code> and <code class="literal">ConstraintValidatorFactory</code>, which are defined in the <code class="literal">javax.validation</code> package. The <code class="literal">constraint-mapping</code> element lists additional XML files containing the actual constraint configuration.
			</p></section></section><section class="chapter" id="creating_websocket_applications"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Creating WebSocket Applications</h1></div></div></div><p>
			The WebSocket protocol provides two-way communication between web clients and servers. Communications between clients and the server are event-based, allowing for faster processing and smaller bandwidth compared with polling-based methods. WebSocket is available for use in web applications using a JavaScript API and by client WebSocket endpoints using the Java <a class="link mimir-link-warn" href="https://docs.oracle.com/javaee/7/api/javax/websocket/package-summary.html" title="Mimir does not include content from: docs.oracle.com">Websocket API</a>.
		</p><p>
			A connection is first established between client and server as an HTTP connection. The client then requests a WebSocket connection using the <code class="literal">Upgrade</code> header. All communications are then full-duplex over the same TCP/IP connection, with minimal data overhead. Because each message does not include unnecessary HTTP header content, Websocket communications require smaller bandwidth. The result is a low latency communications path suited to applications, which require real-time responsiveness.
		</p><p>
			The JBoss EAP WebSocket implementation provides full dependency injection support for server endpoints, however, it does not provide CDI services for client endpoints.
		</p><p>
			A WebSocket application requires the following components and configuration changes:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					A Java client or a WebSocket enabled HTML client. You can verify HTML client browser support at this location: <a class="link mimir-link-warn" href="http://caniuse.com/#feat=websockets" title="Mimir does not include content from: caniuse.com">http://caniuse.com/#feat=websockets</a>
				</li><li class="listitem">
					A WebSocket server endpoint class.
				</li><li class="listitem">
					Project dependencies configured to declare a dependency on the WebSocket API.
				</li></ul></div><h3 id="create_the_websocket_application">Create the WebSocket Application</h3><p>
			The code examples that follow are taken from the <code class="literal">websocket-hello</code> quickstart that ships with JBoss EAP. It is a simple example of a WebSocket application that opens a connection, sends a message, and closes a connection. It does not implement any other functions or include any error handling, which would be required for a real world application.
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Create the JavaScript HTML client.
				</p><p class="simpara">
					The following is an example of a WebSocket client. It contains these JavaScript functions:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">connect()</code>: This function creates the WebSocket connection passing the WebSocket URI. The resource location matches the resource defined in the server endpoint class. This function also intercepts and handles the WebSocket <code class="literal">onopen</code>, <code class="literal">onmessage</code>, <code class="literal">onerror</code>, and <code class="literal">onclose</code>.
						</li><li class="listitem">
							<code class="literal">sendMessage()</code>: This function gets the name entered in the form, creates a message, and sends it using a WebSocket.send() command.
						</li><li class="listitem">
							<code class="literal">disconnect()</code>: This function issues the WebSocket.close() command.
						</li><li class="listitem">
							<code class="literal">displayMessage()</code>: This function sets the display message on the page to the value returned by the WebSocket endpoint method.
						</li><li class="listitem"><p class="simpara">
							<code class="literal">displayStatus()</code>: This function displays the WebSocket connection status.
						</p><div class="formalpara"><p class="title"><strong>Example: Application <code class="literal">index.html</code> Code</strong></p><p>
								
<pre class="programlisting language-html">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;WebSocket: Say Hello&lt;/title&gt;
    &lt;link rel="stylesheet" type="text/css" href="resources/css/hello.css" /&gt;
    &lt;script type="text/javascript"&gt;
      var websocket = null;
      function connect() {
        var wsURI = 'ws://' + window.location.host + '/websocket-hello/websocket/helloName';
        websocket = new WebSocket(wsURI);
        websocket.onopen = function() {
            displayStatus('Open');
            document.getElementById('sayHello').disabled = false;
            displayMessage('Connection is now open. Type a name and click Say Hello to send a message.');
        };
        websocket.onmessage = function(event) {
            // log the event
            displayMessage('The response was received! ' + event.data, 'success');
        };
        websocket.onerror = function(event) {
            // log the event
            displayMessage('Error! ' + event.data, 'error');
        };
        websocket.onclose = function() {
            displayStatus('Closed');
            displayMessage('The connection was closed or timed out. Please click the Open Connection button to reconnect.');
            document.getElementById('sayHello').disabled = true;
        };
      }
      function disconnect() {
        if (websocket !== null) {
            websocket.close();
            websocket = null;
        }
        message.setAttribute("class", "message");
        message.value = 'WebSocket closed.';
        // log the event
      }
      function sendMessage() {
        if (websocket !== null) {
            var content = document.getElementById('name').value;
            websocket.send(content);
        } else {
            displayMessage('WebSocket connection is not established. Please click the Open Connection button.', 'error');
        }
      }
      function displayMessage(data, style) {
        var message = document.getElementById('hellomessage');
        message.setAttribute("class", style);
        message.value = data;
      }
      function displayStatus(status) {
        var currentStatus = document.getElementById('currentstatus');
        currentStatus.value = status;
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div&gt;
      &lt;h1&gt;Welcome to Red Hat JBoss Enterprise Application Platform!&lt;/h1&gt;
      &lt;div&gt;This is a simple example of a WebSocket implementation.&lt;/div&gt;
      &lt;div id="connect-container"&gt;
        &lt;div&gt;
          &lt;fieldset&gt;
            &lt;legend&gt;Connect or disconnect using websocket :&lt;/legend&gt;
            &lt;input type="button" id="connect" onclick="connect();" value="Open Connection" /&gt;
            &lt;input type="button" id="disconnect" onclick="disconnect();" value="Close Connection" /&gt;
          &lt;/fieldset&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;fieldset&gt;
              &lt;legend&gt;Type your name below, then click the `Say Hello` button :&lt;/legend&gt;
              &lt;input id="name" type="text" size="40" style="width: 40%"/&gt;
              &lt;input type="button" id="sayHello" onclick="sendMessage();" value="Say Hello" disabled="disabled"/&gt;
            &lt;/fieldset&gt;
        &lt;/div&gt;
        &lt;div&gt;Current WebSocket Connection Status: &lt;output id="currentstatus" class="message"&gt;Closed&lt;/output&gt;&lt;/div&gt;
        &lt;div&gt;
          &lt;output id="hellomessage" /&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre>

							</p></div></li></ul></div></li><li class="listitem"><p class="simpara">
					Create the WebSocket server endpoint.
				</p><p class="simpara">
					You can create a WebSocket server endpoint using either of the following methods.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">Programmatic Endpoint</code>: The endpoint extends the Endpoint class.
						</li><li class="listitem">
							<code class="literal">Annotated Endpoint</code>: The endpoint class uses annotations to interact with the WebSocket events. It is simpler to code than the programmatic endpoint.
						</li></ul></div><p class="simpara">
					The code example below uses the annotated endpoint approach and handles the following events.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The <code class="literal">@ServerEndpoint</code> annotation identifies this class as a WebSocket server endpoint and specifies the path.
						</li><li class="listitem">
							The <code class="literal">@OnOpen</code> annotation is triggered when the WebSocket connection is opened.
						</li><li class="listitem">
							The <code class="literal">@OnMessage</code> annotation is triggered when a message is received.
						</li><li class="listitem"><p class="simpara">
							The <code class="literal">@OnClose</code> annotation is triggered when the WebSocket connection is closed.
						</p><div class="formalpara"><p class="title"><strong>Example: WebSocket Endpoint Code</strong></p><p>
								
<pre class="programlisting language-java">package org.jboss.as.quickstarts.websocket_hello;

import javax.websocket.CloseReason;
import javax.websocket.OnClose;
import javax.websocket.OnMessage;
import javax.websocket.OnOpen;
import javax.websocket.Session;
import javax.websocket.server.ServerEndpoint;

@ServerEndpoint("/websocket/helloName")
public class HelloName {

    @OnMessage
    public String sayHello(String name) {
        System.out.println("Say hello to '" + name + "'");
        return ("Hello" + name);
    }

    @OnOpen
    public void helloOnOpen(Session session) {
        System.out.println("WebSocket opened: " + session.getId());
    }

    @OnClose
    public void helloOnClose(CloseReason reason) {
        System.out.println("WebSocket connection closed with CloseCode: " + reason.getCloseCode());
    }
}</pre>

							</p></div></li></ul></div></li><li class="listitem"><p class="simpara">
					Declare the WebSocket API dependency in your project POM file.
				</p><p class="simpara">
					If you use Maven, you add the following dependency to the project <code class="literal">pom.xml</code> file.
				</p><div class="formalpara"><p class="title"><strong>Example: Maven Dependency</strong></p><p>
						
<pre class="programlisting language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.jboss.spec.javax.websocket&lt;/groupId&gt;
  &lt;artifactId&gt;jboss-websocket-api_1.1_spec&lt;/artifactId&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</pre>

					</p></div></li></ol></div><p>
			The quickstarts that ship with JBoss EAP include additional WebSocket client and endpoint code examples.
		</p></section><section class="chapter" id="java_authorization_contract_for_containers_jacc"><div class="titlepage"><div><div><h1 class="title">Chapter 15. Java Authorization Contract for Containers (JACC)</h1></div></div></div><section class="section" id="about_java_authorization_contract_for_containers_jacc"><div class="titlepage"><div><div><h2 class="title">15.1. About Java Authorization Contract for Containers (JACC)</h2></div></div></div><p>
				Java Authorization Contract for Containers (JACC) is a standard which defines a contract between containers and authorization service providers, which results in the implementation of providers for use by containers. It is defined in JSR-115 of the Java Community Process. For details about the specifications, see <a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=115" title="Mimir does not include content from: jcp.org">Java™ Authorization Contract for Containers</a>.
			</p><p>
				JBoss EAP implements support for JACC within the security functionality of the <code class="literal">security</code> subsystem.
			</p></section><section class="section" id="configure_java_authorization_contract_for_containers_jacc_security"><div class="titlepage"><div><div><h2 class="title">15.2. Configure Java Authorization Contract for Containers (JACC) Security</h2></div></div></div><p>
				You can configure Java Authorization Contract for Containers (JACC) by configuring your security domain with the correct module, and then modifying your <code class="literal">jboss-web.xml</code> to include the required parameters.
			</p><div class="formalpara"><p class="title"><strong>Add JACC Support to the Security Domain</strong></p><p>
					To add JACC support to the security domain, add the <code class="literal">JACC</code> authorization policy to the authorization stack of the security domain, with the <code class="literal">required</code> flag set. The following is an example of a security domain with JACC support. However, it is recommended to configure the security domain from the management console or the management CLI, rather than directly modifying the XML.
				</p></div><div class="formalpara"><p class="title"><strong>Example: Security Domain with JACC Support</strong></p><p>
					
<pre class="programlisting language-xml">&lt;security-domain name="jacc" cache-type="default"&gt;
    &lt;authentication&gt;
        &lt;login-module code="UsersRoles" flag="required"&gt;
        &lt;/login-module&gt;
    &lt;/authentication&gt;
    &lt;authorization&gt;
        &lt;policy-module code="JACC" flag="required"/&gt;
    &lt;/authorization&gt;
&lt;/security-domain&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Configure a Web Application to Use JACC</strong></p><p>
					The <code class="literal">jboss-web.xml</code> file is located in the <code class="literal">WEB-INF/</code> directory of your deployment, and contains overrides and additional JBoss-specific configuration for the web container. To use your JACC-enabled security domain, you need to include the <code class="literal">&lt;security-domain&gt;</code> element, and also set the <code class="literal">&lt;use-jboss-authorization&gt;</code> element to <code class="literal">true</code>. The following XML is configured to use the JACC security domain above.
				</p></div><div class="formalpara"><p class="title"><strong>Example: Utilize the JACC Security Domain</strong></p><p>
					
<pre class="programlisting language-xml">&lt;jboss-web&gt;
    &lt;security-domain&gt;jacc&lt;/security-domain&gt;
    &lt;use-jboss-authorization&gt;true&lt;/use-jboss-authorization&gt;
&lt;/jboss-web&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Configure an EJB Application to Use JACC</strong></p><p>
					Configuring EJBs to use a security domain and to use JACC differs from web applications. For an EJB, you can declare method permissions on a method or group of methods, in the <code class="literal">ejb-jar.xml</code> descriptor. Within the <code class="literal">&lt;ejb-jar&gt;</code> element, any child <code class="literal">&lt;method-permission&gt;</code> elements contain information about JACC roles. See the example configuration below for details. The <code class="literal">EJBMethodPermission</code> class is part of the Java EE API, and is documented at <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/javax/security/jacc/EJBMethodPermission.html" title="This content is not included in Mimir.">https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/javax/security/jacc/EJBMethodPermission.html</a>.
				</p></div><div class="formalpara"><p class="title"><strong>Example: JACC Method Permissions in an EJB</strong></p><p>
					
<pre class="programlisting language-xml">&lt;ejb-jar&gt;
  &lt;assembly-descriptor&gt;
    &lt;method-permission&gt;
      &lt;description&gt;The employee and temp-employee roles can access any method of the EmployeeService bean &lt;/description&gt;
      &lt;role-name&gt;employee&lt;/role-name&gt;
      &lt;role-name&gt;temp-employee&lt;/role-name&gt;
      &lt;method&gt;
        &lt;ejb-name&gt;EmployeeService&lt;/ejb-name&gt;
        &lt;method-name&gt;*&lt;/method-name&gt;
      &lt;/method&gt;
    &lt;/method-permission&gt;
  &lt;/assembly-descriptor&gt;
&lt;/ejb-jar&gt;</pre>

				</p></div><p>
				You can also constrain the authentication and authorization mechanisms for an EJB by using a security domain, just as you can do for a web application. Security domains are declared in the <code class="literal">jboss-ejb3.xml</code> descriptor, in the <code class="literal">&lt;security&gt;</code> child element. In addition to the security domain, you can also specify the <code class="literal">&lt;run-as-principal&gt;</code>, which changes the principal that the EJB runs as.
			</p><div class="formalpara"><p class="title"><strong>Example: Security Domain Declaration in an EJB</strong></p><p>
					
<pre class="programlisting language-xml">&lt;ejb-jar&gt;
    &lt;assembly-descriptor&gt;
        &lt;security&gt;
        &lt;ejb-name&gt;*&lt;/ejb-name&gt;
        &lt;security-domain&gt;myDomain&lt;/security-domain&gt;
        &lt;run-as-principal&gt;myPrincipal&lt;/run-as-principal&gt;
        &lt;/security&gt;
    &lt;/assembly-descriptor&gt;
&lt;/ejb-jar&gt;</pre>

				</p></div><h4 id="enabling_jacc_using_elytron">Enabling JACC Using the <code class="literal">elytron</code> Subsystem</h4><div class="formalpara"><p class="title"><strong>Disable JACC in the Legacy Security Subsystem</strong></p><p>
					By default, the application server uses the legacy <code class="literal">security</code> subsystem to configure the JACC policy provider and factory. The default configuration maps to implementations from PicketBox.
				</p></div><p>
				In order to use Elytron to manage JACC configuration, or any other policy you want to install to the application server, you must first disable JACC in the legacy <code class="literal">security</code> subsystem. For that, you can use the following management CLI command:
			</p><pre class="screen">/subsystem=security:write-attribute(name=initialize-jacc, value=false)</pre><p>
				Failure to do so can result in the following error in the server log: <code class="literal">MSC000004: Failure during stop of service org.wildfly.security.policy: java.lang.StackOverflowError</code>.
			</p><div class="formalpara"><p class="title"><strong>Define a JACC Policy Provider</strong></p><p>
					The <code class="literal">elytron</code> subsystem provides a built-in policy provider based on JACC specification. To create the policy provider you can execute the following management CLI command:
				</p></div><pre class="screen">/subsystem=elytron/policy=jacc:add(jacc-policy={})

reload</pre><div class="formalpara"><p class="title"><strong>Enable JACC to a Web Deployment</strong></p><p>
					Once a JACC policy provider is defined, you can enable JACC for web deployments by executing the following command:
				</p></div><pre class="screen">/subsystem=undertow/application-security-domain=other:add(security-domain=ApplicationDomain,enable-jacc=true)</pre><p>
				The command above defines a default security domain for applications, if none is provided in the <code class="literal">jboss-web.xml</code> file. In case you already have a <code class="literal">application-security-domain</code> defined and just want to enable JACC you can execute the following command:
			</p><pre class="screen">/subsystem=undertow/application-security-domain=my-security-domain:write-attribute(name=enable-jacc,value=true)</pre><div class="formalpara"><p class="title"><strong>Enable JACC to an EJB Deployment</strong></p><p>
					Once a JACC policy provider is defined, you can enable JACC for EJB deployments by executing the following command:
				</p></div><pre class="screen">/subsystem=ejb3/application-security-domain=other:add(security-domain=ApplicationDomain,enable-jacc=true)</pre><p>
				The command above defines a default security domain for EJBs. In case you already have a <code class="literal">application-security-domain</code> defined and just want to enable JACC you can execute a command as follows:
			</p><pre class="screen">/subsystem=ejb3/application-security-domain=my-security-domain:write-attribute(name=enable-jacc,value=true)</pre><div class="formalpara"><p class="title"><strong>Creating a Custom Elytron Policy Provider</strong></p><p>
					A custom policy provider is used when you need a custom <code class="literal">java.security.Policy</code>, like when you want to integrate with some external authorization service in order to check permissions. To create a custom policy provider, you will need to implement the <code class="literal">java.security.Policy</code>, create and plug in a custom module with the implementation and use the implementation from the module in the <code class="literal">elytron</code> subsystem.
				</p></div><pre class="screen">/subsystem=elytron/policy=policy-provider-a:add(custom-policy={class-name=MyPolicyProviderA, module=x.y.z})</pre><p>
				For more information, see the <a class="link" href="#policy_provider_properties" title="A.3. Policy Provider Properties">Policy Provider Properties</a>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					In most cases, you can use the JACC policy provider as it is expected to be part of any Java EE compliant application server.
				</p></div></div></section></section><section class="chapter" id="java_authentication_spi_for_containers_jaspi"><div class="titlepage"><div><div><h1 class="title">Chapter 16. Java Authentication SPI for Containers (JASPI)</h1></div></div></div><section class="section" id="about_java_authentication_spi_for_containers_jaspi_security"><div class="titlepage"><div><div><h2 class="title">16.1. About Java Authentication SPI for Containers (JASPI) Security</h2></div></div></div><p>
				Java Authentication SPI for Containers (JASPI or JASPIC) is a pluggable interface for Java applications. It is defined in JSR-196 of the Java Community Process. Refer to <a class="link mimir-link-warn" href="http://www.jcp.org/en/jsr/detail?id=196" title="Mimir does not include content from: www.jcp.org">http://www.jcp.org/en/jsr/detail?id=196</a> for details about the specification.
			</p></section><section class="section" id="configure_java_authentication_spi_for_containers_jaspi_security"><div class="titlepage"><div><div><h2 class="title">16.2. Configure Java Authentication SPI for Containers (JASPI) Security</h2></div></div></div><p>
				You can authenticate a JASPI provider by adding <code class="literal">&lt;authentication-jaspi&gt;</code> element to your security domain. The configuration is similar to that of a standard authentication module, but login module elements are enclosed in a <code class="literal">&lt;login-module-stack&gt;</code> element. The structure of the configuration is:
			</p><div class="formalpara"><p class="title"><strong>Example: Structure of the <code class="literal">authentication-jaspi</code> Element</strong></p><p>
					
<pre class="programlisting language-xml">&lt;authentication-jaspi&gt;
    &lt;login-module-stack name="..."&gt;
      &lt;login-module code="..." flag="..."&gt;
        &lt;module-option name="..." value="..."/&gt;
      &lt;/login-module&gt;
    &lt;/login-module-stack&gt;
    &lt;auth-module code="..." login-module-stack-ref="..."&gt;
      &lt;module-option name="..." value="..."/&gt;
    &lt;/auth-module&gt;
&lt;/authentication-jaspi&gt;</pre>

				</p></div><p>
				The login module itself is configured the same way as a standard authentication module.
			</p><p>
				The web-based management console does not expose the configuration of JASPI authentication modules. You must stop the JBoss EAP running instance completely before adding the configuration directly to the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/domain/configuration/domain.xml</code> file or the <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/standalone/configuration/standalone.xml</code> file.
			</p></section><section class="section" id="configure_java_authentication_SPI_for_containers_JASPI_security_using_elytron"><div class="titlepage"><div><div><h2 class="title">16.3. Configure Java Authentication SPI for Containers (JASPI) Security Using Elytron</h2></div></div></div><p>
				Starting in JBoss EAP 7.3, the <code class="literal">elytron</code> subsystem provides an implementation of the <code class="literal">Servlet</code> profile from the Java Authentication SPI for Containers (JASPI). This allows tighter integration with the security features provided by Elytron.
			</p><h4 id="enabling_jaspi_for_a_web_application">Enabling JASPI for a Web Application</h4><p>
				For the JASPI integration to be enabled for a web application, the web application needs to be associated with either an Elytron <code class="literal">http-authentication-factory</code> or a <code class="literal">security-domain</code>. By doing this, the Elytron security handlers get installed for the deployment and the Elytron security framework gets activated for the deployment.
			</p><p>
				When the Elytron security framework is activated for a deployment, the globally registered <code class="literal">AuthConfigFactory</code> is queried when requests are handled. It will identify if an <code class="literal">AuthConfigProvider</code>, which should be used for that deployment, has been registered. If an <code class="literal">AuthConfigProvider</code> is found, then JASPI authentication will be used instead of the deployment’s authentication configuration. If no <code class="literal">AuthConfigProvider</code> is found, then the authentication configuration for the deployment will be used instead. This could result in one of the three possibilities:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use of authentication mechanisms from an <code class="literal">http-authentication-factory</code>.
					</li><li class="listitem">
						Use of mechanisms specified in the <code class="literal">web.xml</code>.
					</li><li class="listitem">
						No authentication is performed if the application does not have any mechanisms defined.
					</li></ul></div><p>
				Any updates made to the <code class="literal">AuthConfigFactory</code> are immediately available. This means if an <code class="literal">AuthConfigProvider</code> is registered and is a match for an existing application, it will start to be used immediately without requiring redeployment of the application.
			</p><p>
				All web applications deployed to JBoss EAP have a security domain, which will be resolved in the following order:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						From the deployment descriptors or annotations of the deployment.
					</li><li class="listitem">
						The value defined on the <code class="literal">default-security-domain</code> attribute on the <code class="literal">undertow</code> subsystem.
					</li><li class="listitem">
						Default to <code class="literal">other</code>.
					</li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					It is assumed that this security domain is a reference to the <code class="literal">PicketBox</code> security domain, so the final step in activation is ensuring this is mapped to Elytron using an <code class="literal">application-security-domain</code> resource in the <code class="literal">undertow</code> subsystem.
				</p><p>
					This mapping can do one of the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Reference an <code class="literal">elytron</code> security domain directly, for example:
						</p><pre class="screen">/subsystem=undertow/application-security-domain=MyAppSecurity:add(security-domain=ApplicationDomain)</pre></li><li class="listitem"><p class="simpara">
							Reference a <code class="literal">http-authentication-factory</code> resource to obtain instances of authentication mechanisms, for example:
						</p><pre class="screen">/subsystem=undertow/application-security-domain=MyAppSecurity:add(http-authentication-factory=application-http-authentication)</pre></li></ul></div></div></div><p>
				The minimal steps to enable the JASPI integration are:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Leave the <code class="literal">default-security-domain</code> attribute on the <code class="literal">undertow</code> subsystem undefined so that it defaults to <code class="literal">other</code>.
					</li><li class="listitem">
						Add an <code class="literal">application-security-domain</code> mapping from <code class="literal">other</code> to an Elytron security domain.
					</li></ol></div><p>
				The security domain associated with a deployment in these steps is the security domain that will be wrapped in a <code class="literal">CallbackHandler</code> to be passed into the <code class="literal">ServerAuthModule</code> instances used for authentication.
			</p><h5 id="additional_options">Additional Options</h5><p>
				Two additional attributes have been added to the <code class="literal">application-security-domain</code> resource to allow some further control of the JASPI behavior.
			</p><div class="table" id="idm140421263050064"><p class="title"><strong>Table 16.1. Attributes Added to the <code class="literal">application-security-domain</code> Resource</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421263044720" scope="col"><span class="strong strong"><strong>Attribute</strong></span></th><th align="left" valign="top" id="idm140421263043168" scope="col"><span class="strong strong"><strong>Description</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421263044720"> <p>
								<code class="literal">enable-jaspi</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263043168"> <p>
								Can be set to <code class="literal">false</code> to disable JASPI support for all deployments using this mapping.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263044720"> <p>
								<code class="literal">integrated-jaspi</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263043168"> <p>
								By default, all identities are loaded from the security domain. If set to <code class="literal">false</code>, ad-hoc identities will be created instead.
							</p>
							 </td></tr></tbody></table></div></div><h4 id="jaspi_elytron_security_subsystem_config">Subsystem Configuration</h4><p>
				One way to register a configuration that will result in an <code class="literal">AuthConfigProvider</code> being returned for a deployment is to register a <code class="literal">jaspi-configuration</code> in the <code class="literal">elytron</code> subsystem.
			</p><p>
				The following command demonstrates how to add a configuration containing two <code class="literal">ServerAuthModule</code> definitions.
			</p><pre class="screen">/subsystem=elytron/jaspi-configuration=simple-configuration:add(layer=HttpServlet, application-context="default-host /webctx", description="Elytron Test Configuration", server-auth-modules=[{class-name=org.wildfly.security.examples.jaspi.SimpleServerAuthModule, module=org.wildfly.security.examples.jaspi, flag=OPTIONAL, options={a=b, c=d}}, {class-name=org.wildfly.security.examples.jaspi.SecondServerAuthModule, module=org.wildfly.security.examples.jaspi}])</pre><p>
				This results in the following configuration being persisted.
			</p><pre class="programlisting language-xml">&lt;jaspi&gt;
    &lt;jaspi-configuration name="simple-configuration" layer="HttpServlet" application-context="default-host /webctx" description="Elytron Test Configuration"&gt;
        &lt;server-auth-modules&gt;
            &lt;server-auth-module class-name="org.wildfly.security.examples.jaspi.SimpleServerAuthModule" module="org.wildfly.security.examples.jaspi" flag="OPTIONAL"&gt;
                &lt;options&gt;
                    &lt;property name="a" value="b"/&gt;
                    &lt;property name="c" value="d"/&gt;
                &lt;/options&gt;
            &lt;/server-auth-module&gt;
            &lt;server-auth-module class-name="org.wildfly.security.examples.jaspi.SecondServerAuthModule" module="org.wildfly.security.examples.jaspi"/&gt;
        &lt;/server-auth-modules&gt;
    &lt;/jaspi-configuration&gt;
&lt;/jaspi&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The <code class="literal">name</code> attribute is just a name that allows the resource to be referenced in the management model.
				</p><p>
					The <code class="literal">layer</code> and <code class="literal">application-context</code> attributes are used when registering this configuration with the <code class="literal">AuthConfigFactory</code>. Both of these attributes can be omitted allowing wildcard matching. The <code class="literal">description</code> attribute is also optional and is used to provide a description to the <code class="literal">AuthConfigFactory</code>.
				</p></div></div><p>
				Within the configuration, one or more <code class="literal">server-auth-module</code> instances can be defined with the following attributes.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>class-name</strong></span> - The fully qualified class name of the <code class="literal">ServerAuthModule</code>.
					</li><li class="listitem">
						<span class="strong strong"><strong>module</strong></span> - The module to load the <code class="literal">ServerAuthModule</code> from.
					</li><li class="listitem">
						<span class="strong strong"><strong>flag</strong></span> - The control flag to indicate how this module operates in relation to the other modules.
					</li><li class="listitem">
						<span class="strong strong"><strong>options</strong></span> - Configuration options to be passed into the <code class="literal">ServerAuthModule</code> on initialization.
					</li></ul></div><p>
				Configuration defined in this way is immediately registered with the <code class="literal">AuthConfigFactory</code>. Any existing deployments using the Elytron security framework, that matches the <code class="literal">layer</code> and <code class="literal">application-context</code>, will immediately start making use of this configuration.
			</p><h4 id="programmatic_configuration">Programmatic Configuration</h4><p>
				The APIs defined within the JASPI specification allow for applications to dynamically register custom <code class="literal">AuthConfigProvider</code> instances. However, the specification does not provide the actual implementations to be used or any standard way to create instances of the implementations. The Elytron project contains a simple utility that deployments can use to help with this.
			</p><p>
				The following code example demonstrates how to use this API to register a configuration similar to the one illustrated in the <a class="link" href="#jaspi_elytron_security_subsystem_config" title="Subsystem Configuration">Subsystem Configuration</a> above.
			</p><pre class="programlisting language-java">String registrationId = org.wildfly.security.auth.jaspi.JaspiConfigurationBuilder.builder("HttpServlet", servletContext.getVirtualServerName() + " " + servletContext.getContextPath())
    .addAuthModuleFactory(SimpleServerAuthModule::new, Flag.OPTIONAL, Collections.singletonMap("a", "b"))
    .addAuthModuleFactory(SecondServerAuthModule::new)
.register();</pre><p>
				As an example, this code could be executed within the <code class="literal">init()</code> method of a Servlet to register the <code class="literal">AuthConfigProvider</code> specific for that deployment. In this code example, the application context has also been assembled by consulting the <code class="literal">ServletContext</code>.
			</p><p>
				The <code class="literal">register()</code> method returns the resulting registration ID that can also be used to subsequently remove this registration directly from the <code class="literal">AuthConfigFactory</code>.
			</p><p>
				As with the <a class="link" href="#jaspi_elytron_security_subsystem_config" title="Subsystem Configuration">Subsystem Configuration</a>, this call also has an immediate effect and will be live for all web applications using the Elytron security framework.
			</p><h4 id="authentication_process">Authentication Process</h4><p>
				Based on the configuration of the <code class="literal">application-security-domain</code> resource in the <code class="literal">undertow</code> subsystem, the <code class="literal">CallbackHandler</code> passed to the <code class="literal">ServerAuthModule</code> can operate in either of the following modes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#integrated_mode_authentication" title="Integrated Mode">Integrated Mode</a>
					</li><li class="listitem">
						<a class="link" href="#non_integrated_mode_authentication" title="Non-Integrated Mode">Non-integrated Mode</a>
					</li></ul></div><h5 id="integrated_mode_authentication">Integrated Mode</h5><p>
				When operating in the integrated mode, although the <code class="literal">ServerAuthModule</code> instances will be handling the actual authentication, the resulting identity will be loaded from the referenced <code class="literal">SecurityDomain</code> using the <code class="literal">SecurityRealms</code> referenced by that <code class="literal">SecurityDomain</code>. In this mode, it is still possible to override the roles that will be assigned within the servlet container.
			</p><p>
				The advantage of this mode is that <code class="literal">ServerAuthModules</code> are able to take advantage of the Elytron configuration for the loading of identities, so that the identities stored in the usual locations, such as databases and LDAP, can be loaded without the <code class="literal">ServerAuthModule</code> needing to be aware of these locations. In addition, other Elytron configuration can be applied, such as role and permission mapping. The referenced <code class="literal">SecurityDomain</code> can also be referenced in other places, such as for SASL authentication or other non JASPI applications, all backed by a common repository of identities.
			</p><div class="table" id="idm140421263300304"><p class="title"><strong>Table 16.2. Operations of the <code class="literal">CallbackHandlers</code> method in the integrated mode.</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 35%; " class="col_1"><!--Empty--></col><col style="width: 65%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421263295024" scope="col">Operation</th><th align="left" valign="top" id="idm140421263293936" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421263295024"> <p>
								<code class="literal">PasswordValidationCallback</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263293936"> <p>
								The username and password will be used with the <code class="literal">SecurityDomain</code> to perform an authentication. If successful, there will be an authenticated identity.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263295024"> <p>
								<code class="literal">CallerPrincipalCallback</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263293936"> <p>
								This <code class="literal">Callback</code> is used to establish the authorized identity or the identity that will be available once the request reached the web application.
							</p>
							 <div class="admonition note"><div class="admonition_header">Note</div><div><p>
									If an authenticated identity has already been established via the <code class="literal">PasswordValidationCallback</code>, this <code class="literal">Callback</code> is interpreted as a run-as request. In this case, authorization checks are performed to ensure the authenticated identity is authorized to run as the identity specified in this <code class="literal">Callback</code>. If no authenticated identity has been established by a <code class="literal">PasswordValidationCallback</code>, it is assumed that the <code class="literal">ServerAuthModule</code> has handled the authentication step.
								</p><p>
									If a <code class="literal">Callback</code> is received with a null Principal and name then:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											If an authenticated identity has already been established, authorization will be performed as that identity.
										</li><li class="listitem">
											If no identity has been established, authorization of the anonymous identity will be performed.
										</li></ul></div><p>
									Where authorization of the anonymous identity is performed, the <code class="literal">SecurityDomain</code> must have been configured to grant the anonymous identity the <code class="literal">LoginPermission</code>.
								</p></div></div>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263295024"> <p>
								<code class="literal">GroupPrincipalCallback</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263293936"> <p>
								In this mode, the attribute loading, role decoding, and role mapping configured on the security domain are used to establish the identity. If this <code class="literal">Callback</code> is received, the groups specified are used to determine the roles that are assigned to the identity. The request will be in the servlet container and these roles are visible in the servlet container only.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="non_integrated_mode_authentication">Non-Integrated Mode</h5><p>
				When operating in non-integrated mode, the <code class="literal">ServerAuthModules</code> are completely responsible for all authentication and identity management. The specified <code class="literal">Callbacks</code> can be used to establish an identity. The resulting identity will be created on the <code class="literal">SecurityDomain</code> but it will be independent of any identities stored in referenced <code class="literal">SecurityRealms</code>.
			</p><p>
				The advantage of this mode is that JASPI configurations that are able to completely handle the identities can be deployed to the application server without requiring anything beyond a simple <code class="literal">SecurityDomain</code> definitions. There is no need for this <code class="literal">SecurityDomain</code> to actually contain the identities that will be used at runtime. The disadvantage of this mode is that the <code class="literal">ServerAuthModule</code> is now responsible for all identity handling, potentially making the implementation much more complex.
			</p><div class="table" id="idm140421263570832"><p class="title"><strong>Table 16.3. Operations of the <code class="literal">CallbackHandlers</code> method in the non-integrated mode.</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 35%; " class="col_1"><!--Empty--></col><col style="width: 65%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421263565552" scope="col">Operation</th><th align="left" valign="top" id="idm140421263564464" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421263565552"> <p>
								<code class="literal">PasswordValidationCallback</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263564464"> <p>
								The <code class="literal">Callback</code> is not supported in this mode. The purpose of this mode is for the <code class="literal">ServerAuthModule</code> to operate independently of the referenced <code class="literal">SecurityDomain</code>. Requesting a password to be validated would not be suitable.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263565552"> <p>
								<code class="literal">CallerPrincipalCallback</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263564464"> <p>
								This <code class="literal">Callback</code> is used to establish the Principal for the resulting identity. Because the <code class="literal">ServerAuthModule</code> is handling all of the identity checking requirements, no checks are performed to verify if the identity exists in the security domain and no authorization checks are performed.
							</p>
							 <p>
								If a <code class="literal">Callback</code> is received with a null Principal and name, then the identity will be established as the anonymous identity. Because the <code class="literal">ServerAuthModule</code> is making the decisions, no authorization check will be performed with the <code class="literal">SecurityDomain</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263565552"> <p>
								<code class="literal">GroupPrincipalCallback</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263564464"> <p>
								As the identity is created in this mode without loading from the <code class="literal">SecurityDomain</code>, it will by default have no roles assigned. If this <code class="literal">Callback</code> is received, the groups will be taken and assigned to the resulting identity while the request is in the servlet container. These roles will be visible in the servlet container only.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="validaterequest">validateRequest</h5><p>
				During the call to <code class="literal">validateRequest</code> on the <code class="literal">ServerAuthContext</code>, the individual <code class="literal">ServerAuthModule</code> instances will be called in the order in which they are defined. A control flag can also be specified for each module. This flag defines how the response should be interpreted and if processing should continue to the next server authentication module or return immediately.
			</p><h6 id="control_flags">Control Flags</h6><p>
				Whether the configuration is provided within the <code class="literal">elytron</code> subsystem or using the <code class="literal">JaspiConfigurationBuilder</code> API, it is possible to associate a control flag with each <code class="literal">ServerAuthModule</code>. If one is not specified, it defaults to <code class="literal">REQUIRED</code>. The flags have the following meanings depending on their result.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"><!--Empty--></col><col style="width: 35%; " class="col_2"><!--Empty--></col><col style="width: 50%; " class="col_3"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266861392" scope="col">Flag</th><th align="left" valign="top" id="idm140421266860304" scope="col">AuthStatus.SEND_SUCCESS</th><th align="left" valign="top" id="idm140421266859216" scope="col">AuthStatus.SEND_FAILURE, AuthStatus.SEND_CONTINUE</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266861392"> <p>
								Required
							</p>
							 </td><td align="left" valign="top" headers="idm140421266860304"> <p>
								Validation will continue to the remaining modules. Provided the requirements of the remaining modules are satisfied, the request will be allowed to proceed to authorization.
							</p>
							 </td><td align="left" valign="top" headers="idm140421266859216"> <p>
								Validation will continue to the remaining modules; however, regardless of their outcomes, the validation will not be successful and control will return to the client.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266861392"> <p>
								Requisite
							</p>
							 </td><td align="left" valign="top" headers="idm140421266860304"> <p>
								Validation will continue to the remaining modules. Provided the requirements of the remaining modules are satisfied, the request will be allowed to proceed to authorization.
							</p>
							 </td><td align="left" valign="top" headers="idm140421266859216"> <p>
								The request will return immediately to the client.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266861392"> <p>
								Sufficient
							</p>
							 </td><td align="left" valign="top" headers="idm140421266860304"> <p>
								Validation is deemed successful and complete, provided no previous <code class="literal">Required</code> or <code class="literal">Requisite</code> module has returned an <code class="literal">AuthStatus</code> other than <code class="literal">AuthStatus.SUCCESS</code>. The request will proceed to authorization of the secured resource.
							</p>
							 </td><td align="left" valign="top" headers="idm140421266859216"> <p>
								Validation will continue down the list of remaining modules. This status will only affect the decision if there are no <code class="literal">REQUIRED</code> or <code class="literal">REQUISITE</code> modules.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266861392"> <p>
								Optional
							</p>
							 </td><td align="left" valign="top" headers="idm140421266860304"> <p>
								Validation will continue to the remaining modules, provided any <code class="literal">Required</code> or <code class="literal">Requisite</code> modules have not returned <code class="literal">SUCCESS</code>. This will be sufficient for validation to be deemed successful and for the request to proceed to the authorization stage and the secured resource.
							</p>
							 </td><td align="left" valign="top" headers="idm140421266859216"> <p>
								Validation will continue down the list of remaining modules. This status will only affect the decision if there are no <code class="literal">REQUIRED</code> or <code class="literal">REQUISITE</code> modules.
							</p>
							 </td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					For all <code class="literal">ServerAuthModule</code> instances, if they throw an <code class="literal">AuthException</code>, an error will be immediately reported to the client with no further module calls.
				</p></div></div><h5 id="secureresponse">secureResponse</h5><p>
				During the call to <code class="literal">secureResponse</code>, each <code class="literal">ServerAuthModule</code> is called, but this time in reverse order where a module only undertakes an action in <code class="literal">secureResponse</code>. If the module undertook an action in <code class="literal">validateResponse</code>, it is the responsibility of the module to track this.
			</p><p>
				The control flag has no effect on <code class="literal">secureResponse</code> processing. Processing ends when one of the following is true:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						All of the <code class="literal">ServerAuthModule</code> instances have been called.
					</li><li class="listitem">
						A module returns <code class="literal">AuthStatus.SEND_FAILURE</code>.
					</li><li class="listitem">
						A module throws an <code class="literal">AuthException</code>.
					</li></ul></div><h5 id="securityidentity_creation">SecurityIdentity Creation</h5><p>
				Once the authentication process has completed, the <code class="literal">org.wildfly.security.auth.server.SecurityIdentity</code> for the deployment’s <code class="literal">SecurityDomain</code> will have been created as a result of the <code class="literal">Callbacks</code> to the <code class="literal">CallbackHandler</code>. Depending on the <code class="literal">Callbacks</code>, this will either be an identity loaded directly from the <code class="literal">SecurityDomain</code>, or it will be an ad-hoc identity described by the callbacks. This <code class="literal">SecurityIdentity</code> will be associated with the request, in the same way it is done for other authentication mechanisms.
			</p></section></section><section class="chapter" id="java_ee_security_api"><div class="titlepage"><div><div><h1 class="title">Chapter 17. Java EE Security API</h1></div></div></div><section class="section" id="about-java-ee-security-api"><div class="titlepage"><div><div><h2 class="title">17.1. About Java EE Security API</h2></div></div></div><p>
				Java EE Security API defines plug-in interfaces for authentication and identity stores, and a new injectable-type SecurityContext interface that provides an access point for programmatic security. It is defined in JSR-375 of the Java Community Process. For details about the specifications, see <a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=375" title="Mimir does not include content from: jcp.org">Java EE Security API Specification</a>.
			</p></section><section class="section" id="configure-java-ee-security-api-using-elytron"><div class="titlepage"><div><div><h2 class="title">17.2. Configure Java EE Security API Using Elytron</h2></div></div></div><h4 id="enabling_java_ee_security_api_using_the_elytron_subsystem">Enabling Java EE Security API Using the elytron Subsystem</h4><p>
				The <code class="literal">SecurityContext</code> interface defined in the Java EE Security API uses the Java Authorization Contract for Containers (JACC) policy provider to access the current authenticated identity. To enable your deployments to use the <code class="literal">SecurityContext</code> interface, you must configure the <code class="literal">elytron</code> subsystem to manage the JACC configuration and define a default JACC policy provider.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Disable JACC in the legacy <code class="literal">security</code> subsystem. Skip this step if JACC is already configured to be managed by Elytron.
					</p><pre class="screen">/subsystem=security:write-attribute(name=initialize-jacc, value=false)</pre></li><li class="listitem"><p class="simpara">
						Define a JACC policy provider in the <code class="literal">etlyron</code> subsystem and reload the server.
					</p><pre class="screen">/subsystem=elytron/policy=jacc:add(jacc-policy={})
reload</pre></li></ol></div><h4 id="enabling_java_ee_security_api_for_web_applications">Enabling Java EE Security API for Web Applications</h4><p>
				To enable the Java EE Security API for a web application, the web application needs to be associated with either an Elytron <code class="literal">http-authentication-factory</code> or a <code class="literal">security-domain</code>. This installs the Elytron security handlers and activates the Elytron security framework for the deployment.
			</p><p>
				The minimal steps to enable the Java EE Security API are:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Leave the <code class="literal">default-security-domain</code> attribute on the <code class="literal">undertow</code> subsystem undefined so that it defaults to <code class="literal">other</code>.
					</li><li class="listitem"><p class="simpara">
						Add an <code class="literal">application-security-domain</code> mapping from <code class="literal">other</code> to an Elytron security domain:
					</p><pre class="screen">/subsystem=undertow/application-security-domain=other:add(security-domain=ApplicationDomain, integrated-jaspi=false)</pre><p class="simpara">
						When <code class="literal">integrated-jaspi</code> is set to <code class="literal">false</code>, ad-hoc identities are created dynamically.
					</p></li></ol></div><p>
				The Java EE Security API is built on JASPI. For information about configuring JASPI, see <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/development_guide/index/#configure_java_authentication_SPI_for_containers_JASPI_security_using_elytron">Configure Java Authentication SPI for Containers (JASPI) Security Using Elytron</a>.
			</p></section></section><section class="chapter" id="java_batch_application_development"><div class="titlepage"><div><div><h1 class="title">Chapter 18. Java Batch Application Development</h1></div></div></div><p>
			Beginning with JBoss EAP 7, JBoss EAP supports Java batch applications as defined by <a class="link mimir-link-warn" href="https://www.jcp.org/en/jsr/detail?id=352" title="Mimir does not include content from: www.jcp.org">JSR-352</a>. The <code class="literal">batch-jberet</code> subsystem in JBoss EAP facilitates batch configuration and monitoring.
		</p><p>
			To configure your application to use batch processing on JBoss EAP, you must specify the <a class="link" href="#batch_required_dependencies" title="18.1. Required Batch Dependencies">required dependencies</a>. Additional JBoss EAP features for batch processing include <a class="link" href="#batch_jsl_inheritance" title="18.2. Job Specification Language (JSL) Inheritance">Job Specification Language (JSL) inheritance</a>, and <a class="link" href="#batch_property_injections" title="18.3. Batch Property Injections">batch property injections</a>.
		</p><section class="section" id="batch_required_dependencies"><div class="titlepage"><div><div><h2 class="title">18.1. Required Batch Dependencies</h2></div></div></div><p>
				To deploy your batch application to JBoss EAP, some additional dependencies that are required for batch processing need to be declared in your application’s <code class="literal">pom.xml</code>. An example of these required dependencies is shown below. Most of the dependencies have the scope set to <code class="literal">provided</code>, as they are already included in JBoss EAP.
			</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">pom.xml</code> Batch Dependencies</strong></p><p>
					
<pre class="programlisting language-xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.spec.javax.batch&lt;/groupId&gt;
        &lt;artifactId&gt;jboss-batch-api_1.0_spec&lt;/artifactId&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;javax.enterprise&lt;/groupId&gt;
        &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.spec.javax.annotation&lt;/groupId&gt;
        &lt;artifactId&gt;jboss-annotations-api_1.2_spec&lt;/artifactId&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- Include your application's other dependencies. --&gt;
    ...
&lt;/dependencies&gt;</pre>

				</p></div></section><section class="section" id="batch_jsl_inheritance"><div class="titlepage"><div><div><h2 class="title">18.2. Job Specification Language (JSL) Inheritance</h2></div></div></div><p>
				A feature of the JBoss EAP <code class="literal">batch-jberet</code> subsystem is the ability to use Job Specification Language (JSL) inheritance to abstract out some common parts of your job definition. Although JSL inheritance is not included in the JSR-352 1.0 specification, the JBoss EAP <code class="literal">batch-jberet</code> subsystem implements JSL inheritance based on the JSL Inheritance v1 draft.
			</p><h4 id="inherit_step_and_flow_within_the_same_job_xml_file">Inherit Step and Flow Within the Same Job XML File</h4><p>
				Parent elements, for example step and flow, are marked with the attribute <code class="literal">abstract="true"</code> to exclude them from direct execution. Child elements contain a <code class="literal">parent</code> attribute, which points to the parent element.
			</p><pre class="programlisting language-xml">&lt;job id="inheritance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" version="1.0"&gt;
    &lt;!-- abstract step and flow --&gt;
    &lt;step id="step0" abstract="true"&gt;
        &lt;batchlet ref="batchlet0"/&gt;
    &lt;/step&gt;

    &lt;flow id="flow0" abstract="true"&gt;
        &lt;step id="flow0.step1" parent="step0"/&gt;
    &lt;/flow&gt;

    &lt;!-- concrete step and flow --&gt;
    &lt;step id="step1" parent="step0" next="flow1"/&gt;

    &lt;flow id="flow1" parent="flow0"/&gt;
&lt;/job&gt;</pre><h4 id="inherit_a_step_from_a_different_job_xml_file">Inherit a Step from a Different Job XML File</h4><p>
				Child elements, for example step and job, contain:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A <code class="literal">jsl-name</code> attribute, which specifies the job XML file name, without the <code class="literal">.xml</code> extension, containing the parent element.
					</li><li class="listitem">
						A <code class="literal">parent</code> attribute, which points to the parent element in the job XML file specified by <code class="literal">jsl-name</code>.
					</li></ul></div><p>
				Parent elements are marked with the attribute <code class="literal">abstract="true"</code> to exclude them from direct execution.
			</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">chunk-child.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;job id="chunk-child" xmlns="http://xmlns.jcp.org/xml/ns/javaee" version="1.0"&gt;
    &lt;step id="chunk-child-step" parent="chunk-parent-step" jsl-name="chunk-parent"&gt;
    &lt;/step&gt;
&lt;/job&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">chunk-parent.xml</code></strong></p><p>
					
<pre class="programlisting language-xml">&lt;job id="chunk-parent" &gt;
    &lt;step id="chunk-parent-step" abstract="true"&gt;
        &lt;chunk checkpoint-policy="item" skip-limit="5" retry-limit="5"&gt;
            &lt;reader ref="R1"&gt;&lt;/reader&gt;
            &lt;processor ref="P1"&gt;&lt;/processor&gt;
            &lt;writer ref="W1"&gt;&lt;/writer&gt;

            &lt;checkpoint-algorithm ref="parent"&gt;
                &lt;properties&gt;
                    &lt;property name="parent" value="parent"&gt;&lt;/property&gt;
                &lt;/properties&gt;
            &lt;/checkpoint-algorithm&gt;
            &lt;skippable-exception-classes&gt;
                &lt;include class="java.lang.Exception"&gt;&lt;/include&gt;
                &lt;exclude class="java.io.IOException"&gt;&lt;/exclude&gt;
            &lt;/skippable-exception-classes&gt;
            &lt;retryable-exception-classes&gt;
                &lt;include class="java.lang.Exception"&gt;&lt;/include&gt;
                &lt;exclude class="java.io.IOException"&gt;&lt;/exclude&gt;
            &lt;/retryable-exception-classes&gt;
            &lt;no-rollback-exception-classes&gt;
                &lt;include class="java.lang.Exception"&gt;&lt;/include&gt;
                &lt;exclude class="java.io.IOException"&gt;&lt;/exclude&gt;
            &lt;/no-rollback-exception-classes&gt;
        &lt;/chunk&gt;
    &lt;/step&gt;
&lt;/job&gt;</pre>

				</p></div></section><section class="section" id="batch_property_injections"><div class="titlepage"><div><div><h2 class="title">18.3. Batch Property Injections</h2></div></div></div><p>
				A feature of the JBoss EAP <code class="literal">batch-jberet</code> subsystem is the ability to have properties defined in the job XML file injected into fields in the batch artifact class. Properties defined in the job XML file can be injected into fields using the <code class="literal">@Inject</code> and <code class="literal">@BatchProperty</code> annotations.
			</p><p>
				The injection field can be any of the following Java types:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">java.lang.String</code>
					</li><li class="listitem">
						<code class="literal">java.lang.StringBuilder</code>
					</li><li class="listitem">
						<code class="literal">java.lang.StringBuffer</code>
					</li><li class="listitem"><p class="simpara">
						any primitive type, and its wrapper type:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">boolean</code>, <code class="literal">Boolean</code>
							</li><li class="listitem">
								<code class="literal">int</code>, <code class="literal">Integer</code>
							</li><li class="listitem">
								<code class="literal">double</code>, <code class="literal">Double</code>
							</li><li class="listitem">
								<code class="literal">long</code>, <code class="literal">Long</code>
							</li><li class="listitem">
								<code class="literal">char</code>, <code class="literal">Character</code>
							</li><li class="listitem">
								<code class="literal">float</code>, <code class="literal">Float</code>
							</li><li class="listitem">
								<code class="literal">short</code>, <code class="literal">Short</code>
							</li><li class="listitem">
								<code class="literal">byte</code>, <code class="literal">Byte</code>
							</li></ul></div></li><li class="listitem">
						<code class="literal">java.math.BigInteger</code>
					</li><li class="listitem">
						<code class="literal">java.math.BigDecimal</code>
					</li><li class="listitem">
						<code class="literal">java.net.URL</code>
					</li><li class="listitem">
						<code class="literal">java.net.URI</code>
					</li><li class="listitem">
						<code class="literal">java.io.File</code>
					</li><li class="listitem">
						<code class="literal">java.util.jar.JarFile</code>
					</li><li class="listitem">
						<code class="literal">java.util.Date</code>
					</li><li class="listitem">
						<code class="literal">java.lang.Class</code>
					</li><li class="listitem">
						<code class="literal">java.net.Inet4Address</code>
					</li><li class="listitem">
						<code class="literal">java.net.Inet6Address</code>
					</li><li class="listitem">
						<code class="literal">java.util.List</code>, <code class="literal">List&lt;?&gt;</code>, <code class="literal">List&lt;String&gt;</code>
					</li><li class="listitem">
						<code class="literal">java.util.Set</code>, <code class="literal">Set&lt;?&gt;</code>, <code class="literal">Set&lt;String&gt;</code>
					</li><li class="listitem">
						<code class="literal">java.util.Map</code>, <code class="literal">Map&lt;?, ?&gt;</code>, <code class="literal">Map&lt;String, String&gt;</code>, <code class="literal">Map&lt;String, ?&gt;</code>
					</li><li class="listitem">
						<code class="literal">java.util.logging.Logger</code>
					</li><li class="listitem">
						<code class="literal">java.util.regex.Pattern</code>
					</li><li class="listitem">
						<code class="literal">javax.management.ObjectName</code>
					</li></ul></div><p>
				The following array types are also supported:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">java.lang.String[]</code>
					</li><li class="listitem"><p class="simpara">
						any primitive type, and its wrapper type:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">boolean[]</code>, <code class="literal">Boolean[]</code>
							</li><li class="listitem">
								<code class="literal">int[]</code>, <code class="literal">Integer[]</code>
							</li><li class="listitem">
								<code class="literal">double[]</code>, <code class="literal">Double[]</code>
							</li><li class="listitem">
								<code class="literal">long[]</code>, <code class="literal">Long[]</code>
							</li><li class="listitem">
								<code class="literal">char[]</code>, <code class="literal">Character[]</code>
							</li><li class="listitem">
								<code class="literal">float[]</code>, <code class="literal">Float[]</code>
							</li><li class="listitem">
								<code class="literal">short[]</code>, <code class="literal">Short[]</code>
							</li><li class="listitem">
								<code class="literal">byte[]</code>, <code class="literal">Byte[]</code>
							</li></ul></div></li><li class="listitem">
						<code class="literal">java.math.BigInteger[]</code>
					</li><li class="listitem">
						<code class="literal">java.math.BigDecimal[]</code>
					</li><li class="listitem">
						<code class="literal">java.net.URL[]</code>
					</li><li class="listitem">
						<code class="literal">java.net.URI[]</code>
					</li><li class="listitem">
						<code class="literal">java.io.File[]</code>
					</li><li class="listitem">
						<code class="literal">java.util.jar.JarFile[]</code>
					</li><li class="listitem">
						<code class="literal">java.util.zip.ZipFile[]</code>
					</li><li class="listitem">
						<code class="literal">java.util.Date[]</code>
					</li><li class="listitem">
						<code class="literal">java.lang.Class[]</code>
					</li></ul></div><p>
				Shown below are a few examples of using batch property injections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#batch_injection_number" title="Injecting a Number into a Batchlet Class as Various Types">Injecting a Number into a Batchlet Class as Various Types</a>
					</li><li class="listitem">
						<a class="link" href="#batch_injection_array" title="Injecting a Number Sequence into a Batchlet Class as Various Arrays">Injecting a Number Sequence into a Batchlet Class as Various Arrays</a>
					</li><li class="listitem">
						<a class="link" href="#batch_injection_class" title="Injecting a Class Property into a Batchlet Class">Injecting a Class Property into a Batchlet Class</a>
					</li><li class="listitem">
						<a class="link" href="#batch_injection_default" title="Assigning a Default Value to a Field Annotated for Property Injection">Assigning a Default Value to a Field Annotated for Property Injection</a>
					</li></ul></div><h4 id="batch_injection_number">Injecting a Number into a Batchlet Class as Various Types</h4><div class="formalpara"><p class="title"><strong>Example: Job XML File</strong></p><p>
					
<pre class="programlisting language-xml">&lt;batchlet ref="myBatchlet"&gt;
    &lt;properties&gt;
        &lt;property name="number" value="10"/&gt;
    &lt;/properties&gt;
&lt;/batchlet&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Artifact Class</strong></p><p>
					
<pre class="programlisting language-java">@Named
public class MyBatchlet extends AbstractBatchlet {
    @Inject
    @BatchProperty
    int number;  // Field name is the same as batch property name.

    @Inject
    @BatchProperty (name = "number")  // Use the name attribute to locate the batch property.
    long asLong;  // Inject it as a specific data type.

    @Inject
    @BatchProperty (name = "number")
    Double asDouble;

    @Inject
    @BatchProperty (name = "number")
    private String asString;

    @Inject
    @BatchProperty (name = "number")
    BigInteger asBigInteger;

    @Inject
    @BatchProperty (name = "number")
    BigDecimal asBigDecimal;
}</pre>

				</p></div><h4 id="batch_injection_array">Injecting a Number Sequence into a Batchlet Class as Various Arrays</h4><div class="formalpara"><p class="title"><strong>Example: Job XML File</strong></p><p>
					
<pre class="programlisting language-xml">&lt;batchlet ref="myBatchlet"&gt;
    &lt;properties&gt;
        &lt;property name="weekDays" value="1,2,3,4,5,6,7"/&gt;
    &lt;/properties&gt;
&lt;/batchlet&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Artifact Class</strong></p><p>
					
<pre class="programlisting language-java">@Named
public class MyBatchlet extends AbstractBatchlet {
    @Inject
    @BatchProperty
    int[] weekDays;  // Array name is the same as batch property name.

    @Inject
    @BatchProperty (name = "weekDays")  // Use the name attribute to locate the batch property.
    Integer[] asIntegers;  // Inject it as a specific array type.

    @Inject
    @BatchProperty (name = "weekDays")
    String[] asStrings;

    @Inject
    @BatchProperty (name = "weekDays")
    byte[] asBytes;

    @Inject
    @BatchProperty (name = "weekDays")
    BigInteger[] asBigIntegers;

    @Inject
    @BatchProperty (name = "weekDays")
    BigDecimal[] asBigDecimals;

    @Inject
    @BatchProperty (name = "weekDays")
    List asList;

    @Inject
    @BatchProperty (name = "weekDays")
    List&lt;String&gt; asListString;

    @Inject
    @BatchProperty (name = "weekDays")
    Set asSet;

    @Inject
    @BatchProperty (name = "weekDays")
    Set&lt;String&gt; asSetString;
}</pre>

				</p></div><h4 id="batch_injection_class">Injecting a Class Property into a Batchlet Class</h4><div class="formalpara"><p class="title"><strong>Example: Job XML File</strong></p><p>
					
<pre class="programlisting language-xml">&lt;batchlet ref="myBatchlet"&gt;
    &lt;properties&gt;
        &lt;property name="myClass" value="org.jberet.support.io.Person"/&gt;
    &lt;/properties&gt;
&lt;/batchlet&gt;</pre>

				</p></div><div class="formalpara"><p class="title"><strong>Example: Artifact Class</strong></p><p>
					
<pre class="programlisting language-java">@Named
public class MyBatchlet extends AbstractBatchlet {
    @Inject
    @BatchProperty
    private Class myClass;
}</pre>

				</p></div><h4 id="batch_injection_default">Assigning a Default Value to a Field Annotated for Property Injection</h4><p>
				You can assign a default value to a field in an artifact Java class in the case where the target batch property is not defined in the job XML file. If the target property is resolved to a valid value, it is injected into that field; otherwise, no value is injected and the default field value is used.
			</p><div class="formalpara"><p class="title"><strong>Example: Artifact Class</strong></p><p>
					
<pre class="programlisting language-java">/**
 Comment character. If commentChar batch property is not specified in job XML file, use the default value '#'.
 */
@Inject
@BatchProperty
private char commentChar = '#';</pre>

				</p></div></section></section><section class="chapter" id="configuring_clients"><div class="titlepage"><div><div><h1 class="title">Chapter 19. Configuring Clients</h1></div></div></div><section class="section" id="client_configuration_using_the_wildfly_config_file"><div class="titlepage"><div><div><h2 class="title">19.1. Client Configuration Using the wildfly-config.xml File</h2></div></div></div><p>
				Prior to release 7.1, JBoss EAP client libraries, such as EJB and naming, used different configuration strategies. JBoss EAP 7.1 introduced the <code class="literal">wildfly-config.xml</code> file with the purpose of unifying all client configurations into one single configuration file, in a similar manner to the way the server configuration is handled.
			</p><p>
				The following table describes the clients and types of configuration that can be done using the <code class="literal">wildfly-config.xml</code> file in JBoss EAP and a link to the reference schema link for each.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265523280" scope="col">Client Configuration</th><th align="left" valign="top" id="idm140421265522192" scope="col">Schema Location / Configuration Information</th></tr></thead><tbody><tr><td rowspan="2" align="left" valign="top" headers="idm140421265523280"> <p>
								Authentication client
							</p>
							 </td><td align="left" valign="top" headers="idm140421265522192"> <p>
								The schema reference is provided in the product installation at <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/docs/schema/elytron-client-1_2.xsd</code>.
							</p>
							 <p>
								The schema is also published at <a class="link mimir-link-warn" href="http://www.jboss.org/schema/jbossas/elytron-client-1_2.xsd" title="Mimir does not include content from: www.jboss.org">http://www.jboss.org/schema/jbossas/elytron-client-1_2.xsd</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265522192"> <p>
								See <a class="link" href="#client_authentication_configuration_using_the_wildfly_config_file" title="19.1.1. Client Authentication Configuration Using the wildfly-config.xml File">Client Authentication Configuration Using the <code class="literal">wildfly-config.xml</code> File</a> for more information and for an example configuration.
							</p>
							 <p>
								Additional information can be found in <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/how_to_configure_identity_management/#elytron_client_authentication" title="This content is not included in Mimir.">Configure Client Authentication with Elytron Client</a> in <span class="emphasis"><em>How to Configure Identity Management</em></span> for JBoss EAP.
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm140421265523280"> <p>
								EJB client
							</p>
							 </td><td align="left" valign="top" headers="idm140421265522192"> <p>
								The schema reference is provided in the product installation at <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/docs/schema/wildfly-client-ejb_3_0.xsd</code>.
							</p>
							 <p>
								The schema is also published at <a class="link mimir-link-warn" href="http://www.jboss.org/schema/jbossas/wildfly-client-ejb_3_0.xsd" title="Mimir does not include content from: www.jboss.org">http://www.jboss.org/schema/jbossas/wildfly-client-ejb_3_0.xsd</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265522192"> <p>
								See <a class="link" href="#ejb_client_configuration_using_the_wildfly_config_file" title="19.1.2. EJB Client Configuration Using the wildfly-config.xml File">EJB Client Configuration Using the <code class="literal">wildfly-config.xml</code> File</a> for more information and for an example configuration.
							</p>
							 <p>
								Another simple example is located in the <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/migration_guide/#migrate_security_ejb_client_to_elytron" title="This content is not included in Mimir.">Migrate an EJB Client to Elytron</a> section of the <span class="emphasis"><em>Migration Guide</em></span> for JBoss EAP.
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm140421265523280"> <p>
								HTTP client
							</p>
							 </td><td align="left" valign="top" headers="idm140421265522192"> <p>
								The schema reference is provided in the product installation at <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/docs/schema/wildfly-http-client_1_0.xsd</code>.
							</p>
							 <p>
								The schema is also published at <a class="link mimir-link-warn" href="http://www.jboss.org/schema/jbossas/wildfly-http-client_1_0.xsd" title="Mimir does not include content from: www.jboss.org">http://www.jboss.org/schema/jbossas/wildfly-http-client_1_0.xsd</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265522192"> <div class="admonition note"><div class="admonition_header">Note</div><div><p>
									This feature is provided as a <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview</a> only.
								</p></div></div>
							 <p>
								See <a class="link" href="#http_client_configuration_using_the_wildfly_config_file" title="19.1.3. HTTP Client Configuration Using the wildfly-config.xml File">HTTP Client Configuration Using the <code class="literal">wildfly-config.xml</code> File</a> for more information and for an example configuration.
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm140421265523280"> <p>
								Remoting client
							</p>
							 </td><td align="left" valign="top" headers="idm140421265522192"> <p>
								The schema reference is provided in the product installation at <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/docs/schema/jboss-remoting_5_0.xsd</code>.
							</p>
							 <p>
								The schema is also published at <a class="link mimir-link-warn" href="http://www.jboss.org/schema/jbossas/jboss-remoting_5_0.xsd" title="Mimir does not include content from: www.jboss.org">http://www.jboss.org/schema/jbossas/jboss-remoting_5_0.xsd</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265522192"> <p>
								See <a class="link" href="#remoting_client_configuration_using_the_wildfly_config_file" title="19.1.4. Remoting Client Configuration Using the wildfly-config.xml File">Remoting Client Configuration Using the <code class="literal">wildfly-config.xml</code> File</a> for more information and for an example configuration.
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm140421265523280"> <p>
								XNIO worker client
							</p>
							 </td><td align="left" valign="top" headers="idm140421265522192"> <p>
								The schema reference is provided in the product installation at <code class="literal"><span class="emphasis"><em>EAP_HOME</em></span>/docs/schema/xnio_3_5.xsd</code>.
							</p>
							 <p>
								The schema is also published at <a class="link mimir-link-warn" href="http://www.jboss.org/schema/jbossas/xnio_3_5.xsd" title="Mimir does not include content from: www.jboss.org">http://www.jboss.org/schema/jbossas/xnio_3_5.xsd</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265522192"> <p>
								See <a class="link" href="#xnio_client_configuration_using_the_wildfly_config_file" title="19.1.5. Default XNIO Worker Configuration Using the wildfly-config.xml File">Default XNIO Worker Configuration Using the <code class="literal">wildfly-config.xml</code> File</a> for more information and for an example configuration.
							</p>
							 </td></tr></tbody></table></div><section class="section" id="client_authentication_configuration_using_the_wildfly_config_file"><div class="titlepage"><div><div><h3 class="title">19.1.1. Client Authentication Configuration Using the wildfly-config.xml File</h3></div></div></div><p>
					You can use the <code class="literal">authentication-client</code> element, which is in the <code class="literal">urn:elytron:client:1.2</code> namespace, to configure client authentication information using the <code class="literal">wildfly-config.xml</code> file. This section describes how to configure client authentication using this element.
				</p><h5 id="authentication_client_elements_and_attributes">authentication-client Elements and Attributes</h5><p>
					The <code class="literal">authentication-client</code> element can optionally contain the following top level child elements, along with their child elements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_credential_stores"><code class="literal">credential-stores</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<a class="link" href="#authentication_client_configuration_credential_store"><code class="literal">credential-store</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
											<a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#authentication_client_configuration_global"><code class="literal">global</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_use_service_loader"><code class="literal">use-service-loader</code></a>
												</li></ul></div></li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_attributes"><code class="literal">attributes</code></a>
										</li><li class="listitem"><p class="simpara">
											<a class="link" href="#authentication_client_configuration_protection_parameter_credentials"><code class="literal">protection-parameter-credentials</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#authentication_client_configuration_key_store_reference"><code class="literal">key-store-reference</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_clear_password"><code class="literal">clear-password</code></a>
												</li><li class="listitem"><p class="simpara">
													<a class="link" href="#authentication_client_configuration_key_pair"><code class="literal">key-pair</code></a>
												</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
															<a class="link" href="#authentication_client_configuration_public_key_pem"><code class="literal">public-key-pem</code></a>
														</li><li class="listitem">
															<a class="link" href="#authentication_client_configuration_private_key_pem"><code class="literal">private-key-pem</code></a>
														</li></ul></div></li><li class="listitem"><p class="simpara">
													<a class="link" href="#authentication_client_configuration_certificate"><code class="literal">certificate</code></a>
												</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
															<a class="link" href="#authentication_client_configuration_public_key_pem"><code class="literal">public-key-pem</code></a>
														</li></ul></div></li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_bearer_token"><code class="literal">bearer-token</code></a>
												</li><li class="listitem"><p class="simpara">
													<a class="link" href="#authentication_client_configuration_oauth2_bearer_token"><code class="literal">oauth2-bearer-token</code></a>
												</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
															<a class="link" href="#authentication_client_configuration_client_credentials"><code class="literal">client-credentials</code></a>
														</li><li class="listitem">
															<a class="link" href="#authentication_client_configuration_resource_owner_credentials"><code class="literal">resource-owner-credentials</code></a>
														</li></ul></div></li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_key_stores"><code class="literal">key-stores</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<a class="link" href="#authentication_client_configuration_key_store"><code class="literal">key-store</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											<a class="link" href="#authentication_client_configuration_file"><code class="literal">file</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_load_from"><code class="literal">load-from</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_resource"><code class="literal">resource</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_key_store_clear_password"><code class="literal">key-store-clear-password</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a>
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_authentication_rules"><code class="literal">authentication-rules</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<a class="link" href="#authentication_client_configuration_authentication_rule"><code class="literal">rule</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_no_user"><code class="literal">match-no-user</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_user"><code class="literal">match-user</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_protocol"><code class="literal">match-protocol</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_host"><code class="literal">match-host</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_path"><code class="literal">match-path</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_port"><code class="literal">match-port</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_urn"><code class="literal">match-urn</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_domain_name"><code class="literal">match-domain-name</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_abstract_type"><code class="literal">match-abstract-type</code></a>
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_authentication_configurations"><code class="literal">authentication-configurations</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<a class="link" href="#authentication_client_configuration_configuration"><code class="literal">configuration</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_host_name"><code class="literal">set-host-name</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_port_number"><code class="literal">set-port-number</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_protocol"><code class="literal">set-protocol</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_user_name"><code class="literal">set-user-name</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_anonymous"><code class="literal">set-anonymous</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_mechanism_realm_name"><code class="literal">set-mechanism-realm-name</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_rewrite_user_name_regex"><code class="literal">rewrite-user-name-regex</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_sasl_mechanism_selector"><code class="literal">sasl-mechanism-selector</code></a>
										</li><li class="listitem"><p class="simpara">
											<a class="link" href="#authentication_client_configuration_set_mechanism_properties"><code class="literal">set-mechanism-properties</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#authentication_client_configuration_property"><code class="literal">property</code></a>
												</li></ul></div></li><li class="listitem"><p class="simpara">
											<a class="link" href="#authentication_client_configuration_credentials"><code class="literal">credentials</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#authentication_client_configuration_key_store_reference"><code class="literal">key-store-reference</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_clear_password"><code class="literal">clear-password</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_key_pair"><code class="literal">key-pair</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_certificate"><code class="literal">certificate</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_public_key_pem"><code class="literal">public-key-pem</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_bearer_token"><code class="literal">bearer-token</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_oauth2_bearer_token"><code class="literal">oauth2-bearer-token</code></a>
												</li></ul></div></li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_set_authorization_name"><code class="literal">set-authorization-name</code></a>
										</li><li class="listitem"><p class="simpara">
											<a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#authentication_client_configuration_global"><code class="literal">global</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_use_service_loader"><code class="literal">use-service-loader</code></a>
												</li></ul></div></li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_use_provider_sasl_factory"><code class="literal">use-provider-sasl-factory</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_use_service_loader_sasl_factory"><code class="literal">use-service-loader-sasl-factory</code></a>
										</li></ul></div></li></ul></div></li><li class="listitem">
							<a class="link" href="#authentication_client_configuration_net_authenticator"><code class="literal">net-authenticator</code></a>
						</li><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_ssl_context_rules"><code class="literal">ssl-context-rules</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<a class="link" href="#authentication_client_configuration_ssl_context_rule"><code class="literal">rule</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_no_user"><code class="literal">match-no-user</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_user"><code class="literal">match-user</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_protocol"><code class="literal">match-protocol</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_host"><code class="literal">match-host</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_path"><code class="literal">match-path</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_port"><code class="literal">match-port</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_urn"><code class="literal">match-urn</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_domain_name"><code class="literal">match-domain-name</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_match_abstract_type"><code class="literal">match-abstract-type</code></a>
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_ssl_contexts"><code class="literal">ssl-contexts</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#authentication_client_configuration_default_ssl_context"><code class="literal">default-ssl-context</code></a>
								</li><li class="listitem"><p class="simpara">
									<a class="link" href="#authentication_client_configuration_ssl_context"><code class="literal">ssl-context</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											<a class="link" href="#authentication_client_configuration_key_store_ssl_cert"><code class="literal">key-store-ssl-certificate</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_trust_store"><code class="literal">trust-store</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_cipher_suite"><code class="literal">cipher-suite</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_protocol"><code class="literal">protocol</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_provider_name"><code class="literal">provider-name</code></a>
										</li><li class="listitem">
											<a class="link" href="#authentication_client_configuration_cert_revocation_list"><code class="literal">certificate-revocation-list</code></a>
										</li><li class="listitem"><p class="simpara">
											<a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#authentication_client_configuration_global"><code class="literal">global</code></a>
												</li><li class="listitem">
													<a class="link" href="#authentication_client_configuration_use_service_loader"><code class="literal">use-service-loader</code></a>
												</li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#authentication_client_configuration_global"><code class="literal">global</code></a>
								</li><li class="listitem">
									<a class="link" href="#authentication_client_configuration_use_service_loader"><code class="literal">use-service-loader</code></a>
								</li></ul></div></li></ul></div><div class="variablelist" id="authentication_client_configuration_credential_stores"><dl class="variablelist"><dt><span class="term"><code class="literal">credential-stores</code></span></dt><dd><p class="simpara">
								This optional element defines credential stores that are referenced from elsewhere in the configuration as an alternative to embedding credentials within the configuration.
							</p><p class="simpara">
								It can contain any number of <a class="link" href="#authentication_client_configuration_credential_store"><code class="literal">credential-store</code></a> elements.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">credential-stores</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    &lt;credential-stores&gt;
      &lt;credential-store name="..." type="..." provider="..." &gt;
        &lt;attributes&gt;
          &lt;attribute name="..." value="..." /&gt;
        &lt;/attributes&gt;
        &lt;protection-parameter-credentials&gt;...&lt;/protection-parameter-credentials&gt;
      &lt;/credential-store&gt;
    &lt;/credential-stores&gt;
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_credential_store"><dl class="variablelist"><dt><span class="term"><code class="literal">credential-store</code></span></dt><dd><p class="simpara">
								This element defines a credential store that is referenced from elsewhere in the configuration.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264620192" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264619104" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264620192"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264619104"> <p>
												The name of the credential store. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264620192"> <p>
												type
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264619104"> <p>
												The type of credential store. This attribute is optional.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264620192"> <p>
												provider
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264619104"> <p>
												The name of the <code class="literal">java.security.Provider</code> to use to load the credential store. This attribute is optional.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								It can contain one and only one of each of the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_attributes"><code class="literal">attributes</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_protection_parameter_credentials"><code class="literal">protection-parameter-credentials</code></a>
									</li></ul></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_attributes"><dl class="variablelist"><dt><span class="term"><code class="literal">attributes</code></span></dt><dd><p class="simpara">
								This element defines the configuration attributes used to initialize the credential store and can be repeated as many times as is required for the configuration.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">attributes</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;attributes&gt;
  &lt;attribute name="..." value="..." /&gt;
&lt;/attributes&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_protection_parameter_credentials"><dl class="variablelist"><dt><span class="term"><code class="literal">protection-parameter-credentials</code></span></dt><dd><p class="simpara">
								This element contains one or more credentials to be assembled into a protection parameter to be used when initializing the credential store.
							</p><p class="simpara">
								It can contain one or more of the following child elements, which are dependent on the credential store implementation:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_reference"><code class="literal">key-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_clear_password"><code class="literal">clear-password</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_pair"><code class="literal">key-pair</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_certificate"><code class="literal">certificate</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_public_key_pem"><code class="literal">public-key-pem</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_bearer_token"><code class="literal">bearer-token</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_oauth2_bearer_token"><code class="literal">oauth2-bearer-token</code></a>
									</li></ul></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">protection-parameter-credentials</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;protection-parameter-credentials&gt;
  &lt;key-store-reference&gt;...&lt;/key-store-reference&gt;
  &lt;credential-store-reference store="..." alias="..." clear-text="..." /&gt;
  &lt;clear-password password="..." /&gt;
  &lt;key-pair public-key-pem="..." private-key-pem="..." /&gt;
  &lt;certificate private-key-pem="..." pem="..." /&gt;
  &lt;public-key-pem&gt;...&lt;/public-key-pem&gt;
  &lt;bearer-token value="..." /&gt;
  &lt;oauth2-bearer-token token-endpoint-uri="..."&gt;...&lt;/oauth2-bearer-token&gt;
&lt;/protection-parameter-credentials&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_store_reference"><dl class="variablelist"><dt><span class="term"><code class="literal">key-store-reference</code></span></dt><dd><p class="simpara">
								This element, which is <a class="link" href="#elements_not_used" title="Important">not currently used</a> by any authentication mechanisms in JBoss EAP, defines a reference to a keystore.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264375952" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264374864" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264375952"> <p>
												key-store-name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264374864"> <p>
												The keystore name. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264375952"> <p>
												alias
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264374864"> <p>
												The alias of the entry to load from the referenced keystore. This can be omitted only for keystores that contain just a single entry.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								It can contain one and only one of the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_clear_password"><code class="literal">key-store-clear-password</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a>
									</li></ul></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">key-store-reference</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;key-store-reference key-store-name="..." alias="..."&gt;
  &lt;key-store-clear-password password="..." /&gt;
  &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
&lt;/key-store-reference&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_credential_store_reference"><dl class="variablelist"><dt><span class="term"><code class="literal">credential-store-reference</code></span></dt><dd><p class="simpara">
								This element defines a reference to a credential store.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421266606992" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421266605904" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266606992"> <p>
												store
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266605904"> <p>
												The credential store name.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266606992"> <p>
												alias
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266605904"> <p>
												The alias of the entry to load from the referenced credential store. This can be omitted only for keystores that contain just a single entry.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266606992"> <p>
												clear-text
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266605904"> <p>
												The clear text password.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_clear_password"><dl class="variablelist"><dt><span class="term"><code class="literal">clear-password</code></span></dt><dd>
								This element defines a clear text password.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_pair"><dl class="variablelist"><dt><span class="term"><code class="literal">key-pair</code></span></dt><dd><p class="simpara">
								This element, which is <a class="link" href="#elements_not_used" title="Important">not currently used</a> by any authentication mechanisms in JBoss EAP, defines a public and private key pair.
							</p><p class="simpara">
								It can contain the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_public_key_pem"><code class="literal">public-key-pem</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_private_key_pem"><code class="literal">private-key-pem</code></a>
									</li></ul></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_public_key_pem"><dl class="variablelist"><dt><span class="term"><code class="literal">public-key-pem</code></span></dt><dd>
								This element, which is <a class="link" href="#elements_not_used" title="Important">not currently used</a> by any authentication mechanisms in JBoss EAP, defines the PEM-encoded public key.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_private_key_pem"><dl class="variablelist"><dt><span class="term"><code class="literal">private-key-pem</code></span></dt><dd>
								This element defines the PEM-encoded private key.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_certificate"><dl class="variablelist"><dt><span class="term"><code class="literal">certificate</code></span></dt><dd><p class="simpara">
								This element, which is <a class="link" href="#elements_not_used" title="Important">not currently used</a> by any authentication mechanisms in JBoss EAP, specifies a certificate.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264602192" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264601104" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264602192"> <p>
												private-key-pem
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264601104"> <p>
												A PEM-encoded private key.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264602192"> <p>
												pem
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264601104"> <p>
												The corresponding certificate.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_bearer_token"><dl class="variablelist"><dt><span class="term"><code class="literal">bearer-token</code></span></dt><dd>
								This element defines a bearer token.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_oauth2_bearer_token"><dl class="variablelist"><dt><span class="term"><code class="literal">oauth2-bearer-token</code></span></dt><dd><p class="simpara">
								This element defines an OAuth 2 bearer token.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264580304" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264579216" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264580304"> <p>
												token-endpoint-uri
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264579216"> <p>
												The URI of the token endpoint.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								It can contain one and only one of each of the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_client_credentials"><code class="literal">client-credentials</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_resource_owner_credentials"><code class="literal">resource-owner-credentials</code></a>
									</li></ul></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_client_credentials"><dl class="variablelist"><dt><span class="term"><code class="literal">client-credentials</code></span></dt><dd><p class="simpara">
								This element defines the client credentials.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264249232" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264248144" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264249232"> <p>
												client-id
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264248144"> <p>
												The client ID. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264249232"> <p>
												client-secret
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264248144"> <p>
												The client secret. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_resource_owner_credentials"><dl class="variablelist"><dt><span class="term"><code class="literal">resource-owner-credentials</code></span></dt><dd><p class="simpara">
								This element defines the resource owner credentials.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264230448" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264229360" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264230448"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264229360"> <p>
												The resource name. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264230448"> <p>
												pasword
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264229360"> <p>
												The password. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_stores"><dl class="variablelist"><dt><span class="term"><code class="literal">key-stores</code></span></dt><dd><p class="simpara">
								This optional element defines keystores that are referenced from elsewhere in the configuration.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">key-stores</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    &lt;key-stores&gt;
      &lt;key-store name="..."&gt;
        &lt;!-- The following 3 elements specify where to load the keystore from. --&gt;
        &lt;file name="..." /&gt;
        &lt;load-from uri="..." /&gt;
        &lt;resource name="..." /&gt;
        &lt;!-- One of the following to specify the protection parameter to unlock the keystore. --&gt;
        &lt;key-store-clear-password password="..." /&gt;
        &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
      &lt;/key-store&gt;
    &lt;/key-stores&gt;
   ...
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_store"><dl class="variablelist"><dt><span class="term"><code class="literal">key-store</code></span></dt><dd><p class="simpara">
								This optional element defines a keystore that is referenced from elsewhere in the configuration.
							</p><p class="simpara">
								The <code class="literal">key-store</code> has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263205376" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263204288" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263205376"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263204288"> <p>
												The name of the keystore. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263205376"> <p>
												type
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263204288"> <p>
												The keystore type, for example, <code class="literal">JCEKS</code>. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263205376"> <p>
												provider
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263204288"> <p>
												The name of the <code class="literal">java.security.Provider</code> to use to load the credential store. This attribute is optional.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263205376"> <p>
												wrap-passwords
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263204288"> <p>
												If true, <code class="literal">passwords</code> will wrap. The passwords are stored by taking the clear password contents, encoding them in UTF-8, and storing the resultant bytes as a secret key. Defaults to <code class="literal">false</code>.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								It must contain exactly one of the following elements, which define where to load the keystore from.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_file"><code class="literal">file</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_load_from"><code class="literal">load-from</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_resource"><code class="literal">resource</code></a>
									</li></ul></div><p class="simpara">
								It must also contain one of the following elements, which specifies the protection parameter to use when initializing the keystore.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_clear_password"><code class="literal">key-store-clear-password</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a>
									</li></ul></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_file"><dl class="variablelist"><dt><span class="term"><code class="literal">file</code></span></dt><dd><p class="simpara">
								This element specifies the name of the keystore file.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267692400" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267691312" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267692400"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267691312"> <p>
												The fully qualified file path and name of the file.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_load_from"><dl class="variablelist"><dt><span class="term"><code class="literal">load-from</code></span></dt><dd><p class="simpara">
								This element specifies the URI of the keystore file.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267677344" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267676256" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267677344"> <p>
												uri
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267676256"> <p>
												The URI for the keystore file.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_resource"><dl class="variablelist"><dt><span class="term"><code class="literal">resource</code></span></dt><dd><p class="simpara">
								This element specifies the name of the resource to load from the <code class="literal">Thread</code> context class loader.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421266013808" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421266012720" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266013808"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266012720"> <p>
												The name of the resource.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_store_clear_password"><dl class="variablelist"><dt><span class="term"><code class="literal">key-store-clear-password</code></span></dt><dd><p class="simpara">
								This element specifies the clear text password.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265998784" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421265997696" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265998784"> <p>
												password
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265997696"> <p>
												The clear text password.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_store_credential"><dl class="variablelist"><dt><span class="term"><code class="literal">key-store-credential</code></span></dt><dd><p class="simpara">
								This element specifies a reference to another keystore that obtains an entry to use as the protection parameter to access this keystore.
							</p><p class="simpara">
								The <code class="literal">key-store-credential</code> element has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265983056" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421265981968" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265983056"> <p>
												key-store-name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265981968"> <p>
												The keystore name. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265983056"> <p>
												alias
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265981968"> <p>
												The alias of the entry to load from the referenced keystore. This can be omitted only for keystores that contain just a single entry.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								It can contain one and only one of the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_clear_password"><code class="literal">key-store-clear-password</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a>
									</li></ul></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">key-store-credential</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;key-store-credential key-store-name="..." alias="..."&gt;
  &lt;key-store-clear-password password="..." /&gt;
  &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
&lt;/key-store-credential&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_authentication_rules"><dl class="variablelist"><dt><span class="term"><code class="literal">authentication-rules</code></span></dt><dd><p class="simpara">
								This element defines the rules to match against the outbound connection to apply the appropriate authentication configuration. When an <code class="literal">authentication-configuration</code> is required, the URI of the accessed resources as well as an optional abstract type and abstract type authority are matched against the rules defined in the configuration to identify which <code class="literal">authentication-configuration</code> should be used.
							</p><p class="simpara">
								This element can contain one or more child <a class="link" href="#authentication_client_configuration_authentication_rule"><code class="literal">rule</code></a> elements.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">authentication-rules</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    ...
    &lt;authentication-rules&gt;
      &lt;rule use-configuration="..."&gt;
        ...
      &lt;/rule&gt;
     &lt;/authentication-rules&gt;
     ...
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_authentication_rule"><dl class="variablelist"><dt><span class="term"><code class="literal">rule</code></span></dt><dd><p class="simpara">
								This element defines the rules to match against the outbound connection to apply the appropriate authentication configuration.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265904720" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421265903632" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265904720"> <p>
												use-configuration
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265903632"> <p>
												The authentication configuration that is chosen when rules match.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								Authentication configuration rule matching is independent of SSL context rule matching. The authentication rule structure is identical to the SSL context rule structure, except that it references an authentication configuration, while the SSL context rule references an SSL context.
							</p><p class="simpara">
								It can contain the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_no_user"><code class="literal">match-no-user</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_user"><code class="literal">match-user</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_protocol"><code class="literal">match-protocol</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_host"><code class="literal">match-host</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_path"><code class="literal">match-path</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_port"><code class="literal">match-port</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_urn"><code class="literal">match-urn</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_domain_name"><code class="literal">match-domain-name</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_abstract_type"><code class="literal">match-abstract-type</code></a>
									</li></ul></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">rule</code> Configuration for Authentication</strong></p><p>
									
<pre class="programlisting language-xml">&lt;rule use-configuration="..."&gt;
    &lt;!-- At most one of the following two can be defined. --&gt;
    &lt;match-no-user /&gt;
    &lt;match-user name="..." /&gt;
    &lt;!-- Each of the following can be defined at most once. --&gt;
    &lt;match-protocol name="..." /&gt;
    &lt;match-host name="..." /&gt;
    &lt;match-path name="..." /&gt;
    &lt;match-port number="..." /&gt;
    &lt;match-urn name="..." /&gt;
    &lt;match-domain name="..." /&gt;
    &lt;match-abstract-type name="..." authority="..." /&gt;
&lt;/rule&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_no_user"><dl class="variablelist"><dt><span class="term"><code class="literal">match-no-user</code></span></dt><dd>
								This rule matches when there is no <code class="literal">user-info</code> embedded within the URI.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_user"><dl class="variablelist"><dt><span class="term"><code class="literal">match-user</code></span></dt><dd>
								This rule matches when the <code class="literal">user-info</code> embedded in the URI matches the <code class="literal">name</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_protocol"><dl class="variablelist"><dt><span class="term"><code class="literal">match-protocol</code></span></dt><dd>
								This rule matches when the protocol within the URI matches the protocol <code class="literal">name</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_host"><dl class="variablelist"><dt><span class="term"><code class="literal">match-host</code></span></dt><dd>
								This rule matches when the host name specified within the URI matches the host <code class="literal">name</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_path"><dl class="variablelist"><dt><span class="term"><code class="literal">match-path</code></span></dt><dd>
								This rule matches when the path specified within the URI matches the path <code class="literal">name</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_port"><dl class="variablelist"><dt><span class="term"><code class="literal">match-port</code></span></dt><dd>
								This rule matches when the port number specified within the URI matches the port <code class="literal">number</code> attribute specified in this element. This only matches against the number specified within the URI and not against any default port number derived from the protocol.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_urn"><dl class="variablelist"><dt><span class="term"><code class="literal">match-urn</code></span></dt><dd>
								This rule matches when the scheme specific part of the URI matches the <code class="literal">name</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_domain_name"><dl class="variablelist"><dt><span class="term"><code class="literal">match-domain-name</code></span></dt><dd>
								This rule matches when the protocol of the URI is <code class="literal">domain</code> and the scheme specific part of the URI matches the <code class="literal">name</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_match_abstract_type"><dl class="variablelist"><dt><span class="term"><code class="literal">match-abstract-type</code></span></dt><dd>
								This rule matches when the abstract type matches the <code class="literal">name</code> attribute and the authority matches the <code class="literal">authority</code> attribute specified in this element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_authentication_configurations"><dl class="variablelist"><dt><span class="term"><code class="literal">authentication-configurations</code></span></dt><dd><p class="simpara">
								This element defines named authentication configurations that are to be chosen by the authentication rules.
							</p><p class="simpara">
								It can contain one or more <a class="link" href="#authentication_client_configuration_configuration"><code class="literal">configuration</code></a> elements.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">authentication-configurations</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    &lt;authentication-configurations&gt;
      &lt;configuration name="..."&gt;
        &lt;!-- Destination Overrides. --&gt;
        &lt;set-host name="..." /&gt;
        &lt;set-port number="..." /&gt;
        &lt;set-protocol name="..." /&gt;
        &lt;!-- At most one of the following two elements. --&gt;
        &lt;set-user-name name="..." /&gt;
        &lt;set-anonymous /&gt;
        &lt;set-mechanism-realm name="..." /&gt;
        &lt;rewrite-user-name-regex pattern="..." replacement="..." /&gt;
        &lt;sasl-mechanism-selector selector="..." /&gt;
        &lt;set-mechanism-properties&gt;
          &lt;property key="..." value="..." /&gt;
        &lt;/set-mechanism-properties&gt;
        &lt;credentials&gt;...&lt;/credentials&gt;
        &lt;set-authorization-name name="..." /&gt;
        &lt;providers&gt;...&lt;/providers&gt;
        &lt;!-- At most one of the following two elements. --&gt;
        &lt;use-provider-sasl-factory /&gt;
        &lt;use-service-loader-sasl-factory module-name="..." /&gt;
      &lt;/configuration&gt;
    &lt;/authentication-configurations&gt;
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_configuration"><dl class="variablelist"><dt><span class="term"><code class="literal">configuration</code></span></dt><dd><p class="simpara">
								This element defines named authentication configurations that are to be chosen by the authentication rules.
							</p><p class="simpara">
								It can contain the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The optional <a class="link" href="#authentication_client_configuration_set_host_name"><code class="literal">set-host-name</code></a>, <a class="link" href="#authentication_client_configuration_set_port_number"><code class="literal">set-port-number</code></a>, and <a class="link" href="#authentication_client_configuration_set_protocol"><code class="literal">set-protocol</code></a> elements can override the destination.
									</li><li class="listitem">
										The optional <a class="link" href="#authentication_client_configuration_set_user_name"><code class="literal">set-user-name</code></a> and <a class="link" href="#authentication_client_configuration_set_anonymous"><code class="literal">set-anonymous</code></a> elements are mutually exclusive and can be used to set the name for authentication or switch to anonymous authentication.
									</li><li class="listitem">
										Next are the <a class="link" href="#authentication_client_configuration_set_mechanism_realm_name"><code class="literal">set-mechanism-realm-name</code></a>, <a class="link" href="#authentication_client_configuration_rewrite_user_name_regex"><code class="literal">rewrite-user-name-regex</code></a>, <a class="link" href="#authentication_client_configuration_sasl_mechanism_selector"><code class="literal">sasl-mechanism-selector</code></a>, <a class="link" href="#authentication_client_configuration_set_mechanism_properties"><code class="literal">set-mechanism-properties</code></a>, <a class="link" href="#authentication_client_configuration_credentials"><code class="literal">credentials</code></a>, <a class="link" href="#authentication_client_configuration_set_authorization_name"><code class="literal">set-authorization-name</code></a>, and <a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a> optional elements.
									</li><li class="listitem">
										The final two optional <a class="link" href="#authentication_client_configuration_use_provider_sasl_factory"><code class="literal">use-provider-sasl-factory</code></a> and <a class="link" href="#authentication_client_configuration_use_service_loader_sasl_factory"><code class="literal">use-service-loader-sasl-factory</code></a> elements are mutually exclusive and define how the SASL mechanism factories are discovered for authentication.
									</li></ul></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_host_name"><dl class="variablelist"><dt><span class="term"><code class="literal">set-host-name</code></span></dt><dd><p class="simpara">
								This element overrides the host name for the authenticated call.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421271575840" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421271574752" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421271575840"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271574752"> <p>
												The host name.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_port_number"><dl class="variablelist"><dt><span class="term"><code class="literal">set-port-number</code></span></dt><dd><p class="simpara">
								This element overrides the port number for the authenticated call.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421271560928" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421271559840" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421271560928"> <p>
												number
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271559840"> <p>
												The port number.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_protocol"><dl class="variablelist"><dt><span class="term"><code class="literal">set-protocol</code></span></dt><dd><p class="simpara">
								This element overrides the protocol for the authenticated call.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421271545888" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421271544800" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421271545888"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421271544800"> <p>
												The protocol.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_user_name"><dl class="variablelist"><dt><span class="term"><code class="literal">set-user-name</code></span></dt><dd><p class="simpara">
								This element sets the user name to use for the authentication. It should not be used with the <a class="link" href="#authentication_client_configuration_set_anonymous"><code class="literal">set-anonymous</code></a> element.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263174752" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263173664" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263174752"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263173664"> <p>
												The user name to use for authentication.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_anonymous"><dl class="variablelist"><dt><span class="term"><code class="literal">set-anonymous</code></span></dt><dd>
								The element is used to switch to anonymous authentication. It should not be used with the <a class="link" href="#authentication_client_configuration_set_user_name"><code class="literal">set-user-name</code></a> element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_mechanism_realm_name"><dl class="variablelist"><dt><span class="term"><code class="literal">set-mechanism-realm-name</code></span></dt><dd><p class="simpara">
								This element specifies the name of the realm that will be selected by the SASL mechanism if required.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263155392" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263154304" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263155392"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263154304"> <p>
												The name of the realm.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_rewrite_user_name_regex"><dl class="variablelist"><dt><span class="term"><code class="literal">rewrite-user-name-regex</code></span></dt><dd><p class="simpara">
								This element defines a regular expression pattern and replacement to rewrite the user name used for authentication.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263140256" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263139168" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263140256"> <p>
												pattern
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263139168"> <p>
												A regular expression pattern.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263140256"> <p>
												replacement
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263139168"> <p>
												The replacement to use to rewrite the user name used for authentication.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_sasl_mechanism_selector"><dl class="variablelist"><dt><span class="term"><code class="literal">sasl-mechanism-selector</code></span></dt><dd><p class="simpara">
								This element specifies a SASL mechanism selector using the syntax from the <a class="link mimir-link-warn" href="http://wildfly-security.github.io/wildfly-elytron/1.1.x/org/wildfly/security/sasl/SaslMechanismSelector.html#fromString-java.lang.String-" title="Mimir does not include content from: wildfly-security.github.io"><code class="literal">org.wildfly.security.sasl.SaslMechanismSelector.fromString(string)</code></a> method.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267651072" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267649984" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267651072"> <p>
												selector
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267649984"> <p>
												The SASL mechanism selector.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								For more information about the grammar required for the <code class="literal">sasl-mechanism-selector</code>, see <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/how_to_configure_server_security/#sasl_mechanism_selector_grammar" title="This content is not included in Mimir."><code class="literal">sasl-mechanism-selector</code> Grammar</a> in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP.
							</p></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_mechanism_properties"><dl class="variablelist"><dt><span class="term"><code class="literal">set-mechanism-properties</code></span></dt><dd>
								This element can contain one or more <a class="link" href="#authentication_client_configuration_property"><code class="literal">property</code></a> elements that are to be passed to the authentication mechanisms.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_property"><dl class="variablelist"><dt><span class="term"><code class="literal">property</code></span></dt><dd><p class="simpara">
								This element defines a property to be passed to the authentication mechanisms.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267628864" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267627776" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267628864"> <p>
												key
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267627776"> <p>
												The property name.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267628864"> <p>
												value
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267627776"> <p>
												The property value.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_credentials"><dl class="variablelist"><dt><span class="term"><code class="literal">credentials</code></span></dt><dd><p class="simpara">
								This element defines one or more credentials available for use during authentication.
							</p><p class="simpara">
								It can contain one or more of the following child elements, which are dependent on the credential store implementation:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_reference"><code class="literal">key-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_clear_password"><code class="literal">clear-password</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_pair"><code class="literal">key-pair</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_certificate"><code class="literal">certificate</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_public_key_pem"><code class="literal">public-key-pem</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_bearer_token"><code class="literal">bearer-token</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_oauth2_bearer_token"><code class="literal">oauth2-bearer-token</code></a>.
									</li></ul></div><p class="simpara">
								These are the same child elements as those contained in the <a class="link" href="#authentication_client_configuration_protection_parameter_credentials"><code class="literal">protection-parameter-credentials</code></a> element. See the <a class="link" href="#authentication_client_configuration_protection_parameter_credentials"><code class="literal">protection-parameter-credentials</code></a> element for details and an example configuration.
							</p></dd></dl></div><div class="variablelist" id="authentication_client_configuration_set_authorization_name"><dl class="variablelist"><dt><span class="term"><code class="literal">set-authorization-name</code></span></dt><dd><p class="simpara">
								This element specifies the name that should be used for authorization if it is different from the authentication identity.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421264521872" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421264520784" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421264521872"> <p>
												name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421264520784"> <p>
												The name that should be used for authorization.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_use_provider_sasl_factory"><dl class="variablelist"><dt><span class="term"><code class="literal">use-provider-sasl-factory</code></span></dt><dd>
								This element specifies the <code class="literal">java.security.Provider</code> instances that are either inherited or defined in this configuration and that are to be used to locate the available SASL client factories. This element should not be used with the <a class="link" href="#authentication_client_configuration_use_service_loader_sasl_factory"><code class="literal">use-service-loader-sasl-factory</code></a> element.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_use_service_loader_sasl_factory"><dl class="variablelist"><dt><span class="term"><code class="literal">use-service-loader-sasl-factory</code></span></dt><dd><p class="simpara">
								This element specifies the module that is to be used to discover the SASL client factories using the service loader discovery mechanism. If no module is specified, the class loader that loaded the configuration is used. This element should not be used with the <a class="link" href="#authentication_client_configuration_use_provider_sasl_factory"><code class="literal">use-provider-sasl-factory</code></a> element.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265304768" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421265303680" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265304768"> <p>
												module-name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265303680"> <p>
												The name of the module.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_net_authenticator"><dl class="variablelist"><dt><span class="term"><code class="literal">net-authenticator</code></span></dt><dd><p class="simpara">
								This element contains no configuration. If present, the <code class="literal">org.wildfly.security.auth.util.ElytronAuthenticator</code> is registered with <code class="literal">java.net.Authenticator.setDefault(Authenticator)</code>. This allows the Elytron authentication client configuration to be used for authentication when JDK APIs are used for HTTP calls that require authentication.
							</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
									Because the JDK caches the authentication on the first call across the JVM, it is better to use this approach only on standalone processes that do not require different credentials for different calls to the same URI.
								</p></div></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_ssl_context_rules"><dl class="variablelist"><dt><span class="term"><code class="literal">ssl-context-rules</code></span></dt><dd><p class="simpara">
								This optional element defines the SSL context rules. When an <code class="literal">ssl-context</code> is required, the URI of the accessed resources as well as an optional abstract type and abstract type authority are matched against the rules defined in the configuration to identify which <code class="literal">ssl-context</code> should be used.
							</p><p class="simpara">
								This element can contain one or more child <a class="link" href="#authentication_client_configuration_authentication_rule"><code class="literal">rule</code></a> elements.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">ssl-context-rules</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    &lt;ssl-context-rules&gt;
      &lt;rule use-ssl-context="..."&gt;
        ...
      &lt;/rule&gt;
    &lt;/ssl-context-rules&gt;
    ...
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_ssl_context_rule"><dl class="variablelist"><dt><span class="term"><code class="literal">rule</code></span></dt><dd><p class="simpara">
								This element defines the rule to match on the SSL context definitions.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265275040" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421265273952" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265275040"> <p>
												use-ssl-context
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265273952"> <p>
												The SSL context definition that is chosen when rules match.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								SSL context rule matching is independent of authentication rule matching. The SSL context rule structure is identical to the authentication configuration rule structure, except that it references an SSL context, while the authentication rule references an authentication configuration.
							</p><p class="simpara">
								It can contain the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_no_user"><code class="literal">match-no-user</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_user"><code class="literal">match-user</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_protocol"><code class="literal">match-protocol</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_host"><code class="literal">match-host</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_path"><code class="literal">match-path</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_port"><code class="literal">match-port</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_urn"><code class="literal">match-urn</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_domain_name"><code class="literal">match-domain-name</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_match_abstract_type"><code class="literal">match-abstract-type</code></a>
									</li></ul></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">rule</code> Configuration for SSL Context</strong></p><p>
									
<pre class="programlisting language-xml">&lt;rule use-ssl-context="..."&gt;
  &lt;!-- At most one of the following two can be defined. --&gt;
  &lt;match-no-user /&gt;
  &lt;match-user name="..." /&gt;
  &lt;!-- Each of the following can be defined at most once. --&gt;
  &lt;match-protocol name="..." /&gt;
  &lt;match-host name="..." /&gt;
  &lt;match-path name="..." /&gt;
  &lt;match-port number="..." /&gt;
  &lt;match-urn name="..." /&gt;
  &lt;match-domain name="..." /&gt;
  &lt;match-abstract-type name="..." authority="..." /&gt;
&lt;/rule&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_ssl_contexts"><dl class="variablelist"><dt><span class="term"><code class="literal">ssl-contexts</code></span></dt><dd><p class="simpara">
								This optional element defines SSL context definitions that are to be chosen by the SSL context rules.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">ssl-contexts</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    &lt;ssl-contexts&gt;
      &lt;default-ssl-context name="..."/&gt;
      &lt;ssl-context name="..."&gt;
        &lt;key-store-ssl-certificate&gt;...&lt;/key-store-ssl-certificate&gt;
        &lt;trust-store key-store-name="..." /&gt;
        &lt;cipher-suite selector="..." /&gt;
        &lt;protocol names="... ..." /&gt;
        &lt;provider-name name="..." /&gt;
        &lt;providers&gt;...&lt;/providers&gt;
        &lt;certificate-revocation-list path="..." maximum-cert-path="..." /&gt;
      &lt;/ssl-context&gt;
    &lt;/ssl-contexts&gt;
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_default_ssl_context"><dl class="variablelist"><dt><span class="term"><code class="literal">default-ssl-context</code></span></dt><dd>
								This element takes the <code class="literal">SSLContext</code> returned by <code class="literal">javax.net.ssl.SSLContext.getDefault()</code> and assigns it a name so it can referenced from the <code class="literal">ssl-context-rules</code>. This element can be repeated, meaning the default SSL context can be referenced using different names.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_ssl_context"><dl class="variablelist"><dt><span class="term"><code class="literal">ssl-context</code></span></dt><dd><p class="simpara">
								This element defines an SSL context to use for connections.
							</p><p class="simpara">
								It can optionally contain one of each of the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_ssl_cert"><code class="literal">key-store-ssl-certificate</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_trust_store"><code class="literal">trust-store</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_cipher_suite"><code class="literal">cipher-suite</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_protocol"><code class="literal">protocol</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_provider_name"><code class="literal">provider-name</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_providers"><code class="literal">providers</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_cert_revocation_list"><code class="literal">certificate-revocation-list</code></a>
									</li></ul></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_key_store_ssl_cert"><dl class="variablelist"><dt><span class="term"><code class="literal">key-store-ssl-certificate</code></span></dt><dd><p class="simpara">
								This element defines a reference to an entry within a keystore for the key and certificate to use for this SSL context.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263309344" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421268009296" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263309344"> <p>
												key-store-name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421268009296"> <p>
												The keystore name. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263309344"> <p>
												alias
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421268009296"> <p>
												The alias of the entry to load from the referenced keystore. This can be omitted only for keystores that contain just a single entry.
											</p>
											 </td></tr></tbody></table></div><p class="simpara">
								It can contain the following child elements:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_clear_password"><code class="literal">key-store-clear-password</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_credential_store_reference"><code class="literal">credential-store-reference</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a>
									</li></ul></div><p class="simpara">
								This structure is nearly identical to the structure used in the <a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a> configuration with the exception that here it obtains the entry for the key and for the certificate. However, the nested <a class="link" href="#authentication_client_configuration_key_store_clear_password"><code class="literal">key-store-clear-password</code></a> and <a class="link" href="#authentication_client_configuration_key_store_credential"><code class="literal">key-store-credential</code></a> elements still provide the protection parameter to unlock the entry.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">key-store-ssl-certificate</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;key-store-ssl-certificate key-store-name="..." alias="..."&gt;
  &lt;key-store-clear-password password="..." /&gt;
  &lt;key-store-credential&gt;...&lt;/key-store-credential&gt;
&lt;/key-store-ssl-certificate&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_trust_store"><dl class="variablelist"><dt><span class="term"><code class="literal">trust-store</code></span></dt><dd><p class="simpara">
								This element is a reference to the keystore that is to be used to initialize the <code class="literal">TrustManager</code>.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267977168" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267976080" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267977168"> <p>
												key-store-name
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267976080"> <p>
												The keystore name. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_cipher_suite"><dl class="variablelist"><dt><span class="term"><code class="literal">cipher-suite</code></span></dt><dd><p class="simpara">
								This element configures the filter for the enabled cipher suites.
							</p><p class="simpara">
								It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267962112" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267961024" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267962112"> <p>
												selector
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267961024"> <p>
												The selector to filter the cipher suites. The selector uses the format of the OpenSSL-style cipher list string created by the <a class="link mimir-link-warn" href="http://wildfly-security.github.io/wildfly-elytron/1.1.x/org/wildfly/security/ssl/CipherSuiteSelector.html#fromString-java.lang.String-" title="Mimir does not include content from: wildfly-security.github.io"><code class="literal">org.wildfly.security.ssl.CipherSuiteSelector.fromString(selector)</code></a> method.
											</p>
											 </td></tr></tbody></table></div><div class="formalpara"><p class="title"><strong>Example: <code class="literal">cipher-suite</code> Configuration Using Default Filtering</strong></p><p>
									
<pre class="programlisting language-xml">&lt;cipher-suite selector="DEFAULT" /&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_protocol"><dl class="variablelist"><dt><span class="term"><code class="literal">protocol</code></span></dt><dd>
								This element defines a space separated list of the protocols to be supported. See the <a class="link mimir-link-warn" href="https://access.redhat.com/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/how_to_configure_server_security/#client_ssl_context_attributes" title="This content is not included in Mimir.">client-ssl-context Attributes</a> table in <span class="emphasis"><em>How to Configure Server Security</em></span> for JBoss EAP for the list of available protocols. Red Hat recommends that you use <code class="literal">TLSv1.2</code>.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_provider_name"><dl class="variablelist"><dt><span class="term"><code class="literal">provider-name</code></span></dt><dd>
								Once the available providers have been identified, only the provider with the name defined on this element is used.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_cert_revocation_list"><dl class="variablelist"><dt><span class="term"><code class="literal">certificate-revocation-list</code></span></dt><dd><p class="simpara">
								This element defines both the path to the certificate revocation list and the maximum number of non-self-issued intermediate certificates that can exist in a certification path. The presence of this element enables checking the peer’s certificate against the certificate revocation list.
							</p><p class="simpara">
								It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421266802112" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421266801024" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266802112"> <p>
												path
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266801024"> <p>
												The path to the certification list. This attribute is optional.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266802112"> <p>
												maximum-cert-path
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266801024"> <p>
												The maximum number of non-self-issued intermediate certificates that can exist in a certification path. This attribute is optional.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_providers"><dl class="variablelist"><dt><span class="term"><code class="literal">providers</code></span></dt><dd><p class="simpara">
								This element defines how <code class="literal">java.security.Provider</code> instances are located when required.
							</p><p class="simpara">
								It can contain the following child elements.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<a class="link" href="#authentication_client_configuration_global"><code class="literal">global</code></a>
									</li><li class="listitem">
										<a class="link" href="#authentication_client_configuration_use_service_loader"><code class="literal">use-service-loader</code></a>
									</li></ul></div><p class="simpara">
								Because the configuration sections of <code class="literal">authentication-client</code> are independent of each other, this element can be configured in the following locations.
							</p><div class="formalpara"><p class="title"><strong>Example: Locations of <code class="literal">providers</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;configuration&gt;
  &lt;authentication-client xmlns="urn:elytron:client:1.2"&gt;
    &lt;providers /&gt;
    ...
    &lt;credential-stores&gt;
      &lt;credential-store name="..."&gt;
        ...
        &lt;providers /&gt;
      &lt;/credential-store&gt;
    &lt;/credential-stores&gt;
    ...
    &lt;authentication-configurations&gt;
      &lt;authentication-configuration name="..."&gt;
        ...
        &lt;providers /&gt;
      &lt;/authentication-configuration&gt;
    &lt;/authentication-configurations&gt;
    ...
    &lt;ssl-contexts&gt;
      &lt;ssl-context name="..."&gt;
        ...
        &lt;providers /&gt;
      &lt;/ssl-context&gt;
    &lt;/ssl-contexts&gt;
  &lt;/authentication-client&gt;
&lt;/configuration&gt;</pre>

								</p></div><p class="simpara">
								The <code class="literal">providers</code> configuration applies to the element in which it is defined and to any of its child elements unless it is overridden. The specification of a <code class="literal">providers</code> in a child element overrides a <code class="literal">providers</code> specified in any of its parent elements. If no <code class="literal">providers</code> configuration is specified, the default behavior is the equivalent of the following, which gives the Elytron provider priority over any globally registered providers, but also allows for the use of globally registered providers.
							</p><div class="formalpara"><p class="title"><strong>Example: <code class="literal">providers</code> Configuration</strong></p><p>
									
<pre class="programlisting language-xml">&lt;providers&gt;
  &lt;use-service-loader /&gt;
  &lt;global /&gt;
&lt;/providers&gt;</pre>

								</p></div></dd></dl></div><div class="variablelist" id="authentication_client_configuration_global"><dl class="variablelist"><dt><span class="term"><code class="literal">global</code></span></dt><dd>
								This empty element specifies to use the global providers loaded by the <a class="link mimir-link-warn" href="https://docs.oracle.com/javase/8/docs/api/java/security/Security.html" title="Mimir does not include content from: docs.oracle.com"><code class="literal">java.security.Security.getProviders()</code></a> method call.
							</dd></dl></div><div class="variablelist" id="authentication_client_configuration_use_service_loader"><dl class="variablelist"><dt><span class="term"><code class="literal">use-service-loader</code></span></dt><dd>
								This empty element specifies to use the providers that are loaded by the specified module. If no module is specified, the class loader that loaded the authentication client is used.
							</dd></dl></div><div class="admonition important" id="elements_not_used"><div class="admonition_header">Important</div><div><p>
						<span class="strong strong"><strong>Elements Not Currently Used By Any JBoss EAP Authentication Mechanisms</strong></span>
					</p><p>
						The following child elements of the <code class="literal">credentials</code> element in the Elytron client configuration are not currently used by any authentication mechanisms in JBoss EAP. They can be used in your own custom implementations of authentication mechanism; however, they are not supported.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								<code class="literal">key-pair</code>
							</li><li class="listitem">
								<code class="literal">public-key-pem</code>
							</li><li class="listitem">
								<code class="literal">key-store-reference</code>
							</li><li class="listitem">
								<code class="literal">certificate</code>
							</li></ol></div></div></div></section><section class="section" id="ejb_client_configuration_using_the_wildfly_config_file"><div class="titlepage"><div><div><h3 class="title">19.1.2. EJB Client Configuration Using the wildfly-config.xml File</h3></div></div></div><p>
					You can use the <code class="literal">jboss-ejb-client</code> element, which is in the <code class="literal">urn:jboss:wildfly-client-ejb:3.0</code> namespace, to configure EJB client connections, global interceptors, and invocation timeouts using the <code class="literal">wildfly-config.xml</code> file. This section describes how to configure an EJB client using this element.
				</p><h5 id="jboss_ejb_client_elements_and_attributes">jboss-ejb-client Elements and Attributes</h5><p>
					The <code class="literal">jboss-ejb-client</code> element can optionally contain the following three top level child elements, along with their child elements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#ejb_client_configuration_invocation_timeout"><code class="literal">invocation-timeout</code></a>
						</li><li class="listitem"><p class="simpara">
							<a class="link" href="#ejb_client_configuration_global_interceptors"><code class="literal">global-interceptors</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#ejb_client_configuration_interceptor"><code class="literal">interceptor</code></a>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#ejb_client_configuration_connections"><code class="literal">connections</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									<a class="link" href="#ejb_client_configuration_connection"><code class="literal">connection</code></a>
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
											<a class="link" href="#ejb_client_configuration_interceptors"><code class="literal">interceptors</code></a>
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													<a class="link" href="#ejb_client_configuration_interceptor"><code class="literal">interceptor</code></a>
												</li></ul></div></li></ul></div></li></ul></div></li></ul></div><div class="variablelist" id="ejb_client_configuration_invocation_timeout"><dl class="variablelist"><dt><span class="term"><code class="literal">invocation-timeout</code></span></dt><dd><p class="simpara">
								This optional element specifies the EJB invocation timeout. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421266424048" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421266423072" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266424048"> <p>
												seconds
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266423072"> <p>
												The timeout, in seconds, for the EJB handshake or the method invocation request/response cycle. This attribute is required.
											</p>
											 <p>
												If the execution of a method takes longer than the timeout period, the invocation throws a <code class="literal">java.util.concurrent.TimeoutException</code>; however, the server side will not be interrupted.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="ejb_client_configuration_global_interceptors"><dl class="variablelist"><dt><span class="term"><code class="literal">global-interceptors</code></span></dt><dd>
								This optional element specifies the global EJB client interceptors. It can contain any number of <a class="link" href="#ejb_client_configuration_interceptor"><code class="literal">interceptor</code></a> elements.
							</dd></dl></div><div class="variablelist" id="ejb_client_configuration_interceptor"><dl class="variablelist"><dt><span class="term"><code class="literal">interceptor</code></span></dt><dd><p class="simpara">
								This element is used to specify an EJB client interceptor. It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421266404240" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421266403152" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266404240"> <p>
												class
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266403152"> <p>
												The name of a class that implements the <code class="literal">org.jboss.ejb.client.EJBClientInterceptor</code> interface. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266404240"> <p>
												module
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266403152"> <p>
												The name of the module that should be used to load the interceptor class. This attribute is optional.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="ejb_client_configuration_connections"><dl class="variablelist"><dt><span class="term"><code class="literal">connections</code></span></dt><dd>
								This element is used to specify EJB client connections. It can contain any number of <a class="link" href="#ejb_client_configuration_connection"><code class="literal">connection</code></a> elements.
							</dd></dl></div><div class="variablelist" id="ejb_client_configuration_connection"><dl class="variablelist"><dt><span class="term"><code class="literal">connection</code></span></dt><dd><p class="simpara">
								This element is used to specify an EJB client connection. It can optionally contain an <a class="link" href="#ejb_client_configuration_interceptors"><code class="literal">interceptors</code></a> element. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421266380368" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421266379280" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421266380368"> <p>
												uri
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421266379280"> <p>
												The destination URI for the connection. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="ejb_client_configuration_interceptors"><dl class="variablelist"><dt><span class="term"><code class="literal">interceptors</code></span></dt><dd>
								This element is used to specify EJB client interceptors and can contain any number of <a class="link" href="#ejb_client_configuration_interceptor"><code class="literal">interceptor</code></a> elements.
							</dd></dl></div><h5 id="example_ejb_client_configuration_in_the_wildfly_config_file">Example EJB Client Configuration in the <code class="literal">wildfly-config.xml</code> File</h5><p>
					The following is an example that configures the EJB client connections, global interceptors, and invocation timeout using the <code class="literal">jboss-ejb-client</code> element in the <code class="literal">wildfly-config.xml</code> file.
				</p><pre class="programlisting language-xml">&lt;configuration&gt;
...
    &lt;jboss-ejb-client xmlns="urn:jboss:wildfly-client-ejb:3.0"&gt;
        &lt;invocation-timeout seconds="10"/&gt;
        &lt;connections&gt;
            &lt;connection uri="remote+http://10.20.30.40:8080"/&gt;
        &lt;/connections&gt;
        &lt;global-interceptors&gt;
            &lt;interceptor class="org.jboss.example.ExampleInterceptor"/&gt;
        &lt;/global-interceptors&gt;
    &lt;/jboss-ejb-client&gt;
...
&lt;/configuration&gt;</pre></section><section class="section" id="http_client_configuration_using_the_wildfly_config_file"><div class="titlepage"><div><div><h3 class="title">19.1.3. HTTP Client Configuration Using the wildfly-config.xml File</h3></div></div></div><p>
					The following is an example of how to configure HTTP clients using the <code class="literal">wildfly-config.xml</code> file.
				</p><pre class="programlisting language-xml">&lt;configuration&gt;
...
    &lt;http-client xmlns="urn:wildfly-http-client:1.0"&gt;
        &lt;defaults&gt;
            &lt;eagerly-acquire-session value="true" /&gt;
            &lt;buffer-pool buffer-size="2000" max-size="10" direct="true" thread-local-size="1" /&gt;
        &lt;/defaults&gt;
    &lt;/http-client&gt;
...
&lt;/configuration&gt;</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						HTTP client configuration using the <code class="literal">wildfly-config.xml</code> file is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
					</p><p>
						See <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
					</p></div></div></section><section class="section" id="remoting_client_configuration_using_the_wildfly_config_file"><div class="titlepage"><div><div><h3 class="title">19.1.4. Remoting Client Configuration Using the wildfly-config.xml File</h3></div></div></div><p>
					You can use the <code class="literal">endpoint</code> element, which is in the <code class="literal">urn:jboss-remoting:5.0</code> namespace, to configure a remoting client using the <code class="literal">wildfly-config.xml</code> file. This section describes how to configure a remoting client using this element.
				</p><h5 id="endpoint_elements_and_attributes">endpoint Elements and Attributes</h5><p>
					The <code class="literal">endpoint</code> element can optionally contain the following two top level child elements, along with their child elements.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<a class="link" href="#remoting_configuration_providers"><code class="literal">providers</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#remoting_configuration_provider"><code class="literal">provider</code></a>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<a class="link" href="#remoting_configuration_connections"><code class="literal">connections</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#remoting_configuration_connection"><code class="literal">connection</code></a>
								</li></ul></div></li></ul></div><p>
					It also has the following attribute:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421263236976" scope="col">Attribute Name</th><th align="left" valign="top" id="idm140421263235888" scope="col">Attribute Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421263236976"> <p>
									name
								</p>
								 </td><td align="left" valign="top" headers="idm140421263235888"> <p>
									The endpoint name. This attribute is optional. If not provided, an endpoint name is derived from the system’s host name, if possible.
								</p>
								 </td></tr></tbody></table></div><div class="variablelist" id="remoting_configuration_providers"><dl class="variablelist"><dt><span class="term"><code class="literal">providers</code></span></dt><dd>
								This optional element specifies transport providers for the remote endpoint. It can contain any number of <a class="link" href="#remoting_configuration_provider"><code class="literal">provider</code></a> elements.
							</dd></dl></div><div class="variablelist" id="remoting_configuration_provider"><dl class="variablelist"><dt><span class="term"><code class="literal">provider</code></span></dt><dd><p class="simpara">
								This element defines a remote transport provider. It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263218512" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267159568" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263218512"> <p>
												scheme
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267159568"> <p>
												The primary URI scheme that corresponds to this provider. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263218512"> <p>
												aliases
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267159568"> <p>
												The space-separated list of of other URI scheme names that are also recognized for this provider. This attribute is optional.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263218512"> <p>
												module
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267159568"> <p>
												The name of the module that contains the provider implementation. This attribute is optional. If not provided, the class loader that loads JBoss Remoting searches for the provider class.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263218512"> <p>
												class
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267159568"> <p>
												The name of the class that implements the transport provider. This attribute is optional. If not provided, the <code class="literal">java.util.ServiceLoader</code> facility is used to search for the provider class.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="remoting_configuration_connections"><dl class="variablelist"><dt><span class="term"><code class="literal">connections</code></span></dt><dd>
								This optional element specifies connections for the remote endpoint. It can contain any number of <a class="link" href="#remoting_configuration_connection"><code class="literal">connection</code></a> elements.
							</dd></dl></div><div class="variablelist" id="remoting_configuration_connection"><dl class="variablelist"><dt><span class="term"><code class="literal">connection</code></span></dt><dd><p class="simpara">
								This element defines a connection for the remote endpoint. It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421267130192" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421267129104" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267130192"> <p>
												destination
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267129104"> <p>
												The destination URI for the endpoint. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267130192"> <p>
												read-timeout
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267129104"> <p>
												The timeout, in seconds, for read operations on the corresponding socket. This attribute is optional; however, it should be provided only if a <code class="literal">heartbeat-interval</code> is defined.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267130192"> <p>
												write-timeout
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267129104"> <p>
												The timeout, in seconds, for a write operation. This attribute is optional; however, it should be provided only if a <code class="literal">heartbeat-interval</code> is defined.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267130192"> <p>
												ip-traffic-class
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267129104"> <p>
												Defines the numeric IP traffic class to use for this connection’s traffic. This attribute is optional.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267130192"> <p>
												tcp-keepalive
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267129104"> <p>
												Boolean setting that determines whether to use TCP keepalive. This attribute is optional.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421267130192"> <p>
												heartbeat-interval
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421267129104"> <p>
												The interval, in milliseconds, to use when checking for a connection heartbeat. This attribute is optional.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><h5 id="example_remoting_client_configuration_in_the_wildfly_config_file">Example Remoting Client Configuration in the <code class="literal">wildfly-config.xml</code> File</h5><p>
					The following is an example that configures a remoting client using the <code class="literal">wildfly-config.xml</code> file.
				</p><pre class="programlisting language-xml">&lt;configuration&gt;
  ...
  &lt;endpoint xmlns="urn:jboss-remoting:5.0"&gt;
    &lt;connections&gt;
      &lt;connection destination="remote+http://10.20.30.40:8080" read-timeout="50" write-timeout="50" heartbeat-interval="10000"/&gt;
    &lt;/connections&gt;
  &lt;/endpoint&gt;
  ...
&lt;/configuration&gt;</pre></section><section class="section" id="xnio_client_configuration_using_the_wildfly_config_file"><div class="titlepage"><div><div><h3 class="title">19.1.5. Default XNIO Worker Configuration Using the wildfly-config.xml File</h3></div></div></div><p>
					You can use the <code class="literal">worker</code> element, which is in the <code class="literal">urn:xnio:3.5</code> namespace, to configure an XNIO worker using the <code class="literal">wildfly-config.xml</code> file. This section describes how to configure an XNIO worker client using this element.
				</p><h5 id="worker_elements_and_attributes">worker Elements and Attributes</h5><p>
					The <code class="literal">worker</code> element can optionally contain the following top level child elements, along with their child elements:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#xnio_client_configuration_daemon_threads"><code class="literal">daemon-threads</code></a>
						</li><li class="listitem">
							<a class="link" href="#xnio_client_configuration_worker_name"><code class="literal">worker-name</code></a>
						</li><li class="listitem">
							<a class="link" href="#xnio_client_configuration_pool_size"><code class="literal">pool-size</code></a>
						</li><li class="listitem">
							<a class="link" href="#xnio_client_configuration_task_keepalive"><code class="literal">task-keepalive</code></a>
						</li><li class="listitem">
							<a class="link" href="#xnio_client_configuration_io_threads"><code class="literal">io-threads</code></a>
						</li><li class="listitem">
							<a class="link" href="#xnio_client_configuration_stack_size"><code class="literal">stack-size</code></a>
						</li><li class="listitem"><p class="simpara">
							<a class="link" href="#xnio_client_configuration_outbound_bind_addresses"><code class="literal">outbound-bind-addresses</code></a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<a class="link" href="#xnio_client_configuration_bind_address"><code class="literal">bind-address</code></a>
								</li></ul></div></li></ul></div><div class="variablelist" id="xnio_client_configuration_daemon_threads"><dl class="variablelist"><dt><span class="term"><code class="literal">daemon-threads</code></span></dt><dd><p class="simpara">
								This optional element specifies whether worker and task threads should be daemon threads. This element has no content. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265840576" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421265839488" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265840576"> <p>
												value
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421265839488"> <p>
												A boolean value that specifies whether worker and task threads should be daemon threads. A value of <code class="literal">true</code> indicates that worker and task threads should be daemon threads. A value of <code class="literal">false</code> indicates that they should not be daemon threads. This attribute is required.
											</p>
											 <p>
												If this element is not provided, a value of <code class="literal">true</code> is assumed.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="xnio_client_configuration_worker_name"><dl class="variablelist"><dt><span class="term"><code class="literal">worker-name</code></span></dt><dd><p class="simpara">
								This element defines the name of the worker. The worker name appears in thread dumps and in JMX. This element has no content. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421265823824" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263549200" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421265823824"> <p>
												value
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263549200"> <p>
												The name of the worker. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="xnio_client_configuration_pool_size"><dl class="variablelist"><dt><span class="term"><code class="literal">pool-size</code></span></dt><dd><p class="simpara">
								This optional element defines the maximum size of the worker’s task thread pool. This element has no content. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263535536" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263534448" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263535536"> <p>
												max-threads
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263534448"> <p>
												A positive integer that specifies the maximum number of threads that should be created. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="xnio_client_configuration_task_keepalive"><dl class="variablelist"><dt><span class="term"><code class="literal">task-keepalive</code></span></dt><dd><p class="simpara">
								This optional element establishes the keep-alive time of task threads before they can be expired. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263520832" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263519744" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263520832"> <p>
												value
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263519744"> <p>
												A positive integer that specifies the minimum number of seconds to keep idle threads alive. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="xnio_client_configuration_io_threads"><dl class="variablelist"><dt><span class="term"><code class="literal">io-threads</code></span></dt><dd><p class="simpara">
								This optional element determines how many I/O selector threads should be maintained. Generally this number should be a small constant that is a multiple of the number of available cores. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263506112" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263505024" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263506112"> <p>
												value
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263505024"> <p>
												A positive integer that specifies the number of I/O threads. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="xnio_client_configuration_stack_size"><dl class="variablelist"><dt><span class="term"><code class="literal">stack-size</code></span></dt><dd><p class="simpara">
								This optional element establishes the desired minimum thread stack size for worker threads. This element should only be defined in very specialized situations where density is at a premium. It has the following attribute.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263911776" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263910688" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263911776"> <p>
												value
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263910688"> <p>
												A positive integer that specifies the requested stack size, in bytes. This attribute is required.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><div class="variablelist" id="xnio_client_configuration_outbound_bind_addresses"><dl class="variablelist"><dt><span class="term"><code class="literal">outbound-bind-addresses</code></span></dt><dd>
								This optional element specifies the bind addresses to use for outbound connections. Each bind address mapping consists of a destination IP address block, and a bind address and optional port number to use for connections to destinations within that block. It can contain any number of <a class="link" href="#xnio_client_configuration_bind_address"><code class="literal">bind-address</code></a> elements.
							</dd></dl></div><div class="variablelist" id="xnio_client_configuration_bind_address"><dl class="variablelist"><dt><span class="term"><code class="literal">bind-address</code></span></dt><dd><p class="simpara">
								This optional element defines an individual bind address mapping. It has the following attributes.
							</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--></col><col style="width: 75%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm140421263892864" scope="col">Attribute Name</th><th style="text-align: left; vertical-align: top; " id="idm140421263891776" scope="col">Attribute Description</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263892864"> <p>
												match
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263891776"> <p>
												The IP address block, in CIDR notation, to match.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263892864"> <p>
												bind-address
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263891776"> <p>
												The IP address to bind to if the address block matches. This attribute is required.
											</p>
											 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm140421263892864"> <p>
												bind-port
											</p>
											 </td><td style="text-align: left; vertical-align: top; " headers="idm140421263891776"> <p>
												The port number to bind to if the address block matches. This value defauts to <code class="literal">0</code>, meaning it binds to any port. This attribute is optional.
											</p>
											 </td></tr></tbody></table></div></dd></dl></div><h5 id="example_xnio_worker_configuration_in_the_wildfly_config_file">Example XNIO Worker Configuration in the <code class="literal">wildfly-config.xml</code> File</h5><p>
					The following is an example of how to configure the default XNIO worker using the <code class="literal">wildfly-config.xml</code> file.
				</p><pre class="programlisting language-xml">&lt;configuration&gt;
  ...
  &lt;worker xmlns="urn:xnio:3.5"&gt;
    &lt;io-threads value="10"/&gt;
    &lt;task-keepalive value="100"/&gt;
  &lt;/worker&gt;
  ...
&lt;/configuration&gt;</pre></section></section></section><section class="chapter" id="eclipse_microprofile"><div class="titlepage"><div><div><h1 class="title">Chapter 20. Eclipse MicroProfile</h1></div></div></div><section class="section" id="using_microprofile_opentracing_smallrye_tracer"><div class="titlepage"><div><div><h2 class="title">20.1. Using Eclipse MicroProfile OpenTracing to Trace Requests</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Eclipse Microprofile OpenTracing is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div></div><p>
				Eclipse Microprofile OpenTracing functionality is provided by the <code class="literal">microprofile-opentracing-smallrye</code> subsystem. This subsystem ships with the <a class="link mimir-link-warn" href="https://github.com/jaegertracing/jaeger-client-java" title="Mimir does not include content from: github.com">Jaeger Java Client</a> as the default tracer and provides a set of instrumentation libraries for components commonly used in Java EE applications, such as JAX-RS and CDI. See <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Tracing Requests with the MicroProfile OpenTracing SmallRye Subsystem</a> in the <span class="emphasis"><em>Configuration Guide</em></span> for more information about this subsystem.
			</p><p>
				The following sections describe how to customize tracing for <a class="link" href="#microprofile_opentracing_smallrye_tracer_cdi" title="20.1.1. Enable or Disable Tracing for CDI Beans">CDI beans</a> and other <a class="link" href="#microprofile_opentracing_smallrye_tracer_jaxrs_endpoints" title="20.1.2. Enable or Disable Tracing for JAX-RS Endpoints">JAX-RS endpoints</a>, and how to implement a <a class="link" href="#microprofile_opentracing_smallrye_tracer_custom_implementation" title="20.1.3. Implement a Custom Tracer">custom tracer</a>.
			</p><section class="section" id="microprofile_opentracing_smallrye_tracer_cdi"><div class="titlepage"><div><div><h3 class="title">20.1.1. Enable or Disable Tracing for CDI Beans</h3></div></div></div><p>
					As defined by the Eclipse MicroProfile OpenTracing specification, CDI beans are traced if the <a class="link mimir-link-warn" href="http://download.eclipse.org/microprofile/microprofile-2.0-javadocs-test/apidocs/org/eclipse/microprofile/opentracing/Traced.html" title="Mimir does not include content from: download.eclipse.org"><code class="literal">org.eclipse.microprofile.opentracing.Traced</code></a> annotation is present, either at the class or at the method level. Tracing can be disabled by setting the annotation value to <code class="literal">false</code>. Similarly, a custom operation name can be set by specifying the parameter <code class="literal">operationName</code> for that annotation. The semantics are defined by the <a class="link mimir-link-warn" href="https://github.com/eclipse/microprofile-opentracing/blob/master/spec/src/main/asciidoc/microprofile-opentracing.asciidoc" title="Mimir does not include content from: github.com">MicroProfile OpenTracing specification</a>.
				</p><p>
					The following example demonstrates how to configure tracing for a CDI bean. Note that tracing can be specified at the method level.
				</p><pre class="programlisting language-java">import org.eclipse.microprofile.opentracing.Traced;

@Traced
public class TracedBean {
    public void doSomething() {
    }

    @Traced(true)
    public void doSomethingTraced() {
    }

    @Traced(false)
    public void doSomethingNotTraced() {
    }
}</pre><p>
					The following example demonstrates how to specify an operation name for the OpenTracing Span for this trace point.
				</p><pre class="programlisting language-java">import org.eclipse.microprofile.opentracing.Traced;

@Traced(operationName = "my-custom-class-operation-name")
public class CustomOperationNameBean {

    @Traced(operationName = "my-custom-method-operation-name")
    public void doSomething() {
    }

    @Traced
    public void doSomethingElse() {
    }
}</pre></section><section class="section" id="microprofile_opentracing_smallrye_tracer_jaxrs_endpoints"><div class="titlepage"><div><div><h3 class="title">20.1.2. Enable or Disable Tracing for JAX-RS Endpoints</h3></div></div></div><p>
					JAX-RS endpoints are traced by default if the <code class="literal">microprofile-opentracing-smallrye</code> subsystem is present in the server configuration.
				</p><p>
					To disable tracing for JAX-RS endpoints, add the <code class="literal">@Traced(false)</code> annotation to the JAX-RS endpoint at the class or method level as described in <a class="link" href="#microprofile_opentracing_smallrye_tracer_cdi" title="20.1.1. Enable or Disable Tracing for CDI Beans">Enable or Disable Tracing for CDI Beans</a> above.
				</p></section><section class="section" id="microprofile_opentracing_smallrye_tracer_custom_implementation"><div class="titlepage"><div><div><h3 class="title">20.1.3. Implement a Custom Tracer</h3></div></div></div><p>
					If you need something more complex than what is provided by the default Jaeger Java Client, you can provide your own tracer by implementing a <a class="link mimir-link-warn" href="https://github.com/opentracing-contrib/java-tracerresolver" title="Mimir does not include content from: github.com"><code class="literal">TracerResolver</code></a> that returns the <a class="link mimir-link-warn" href="http://static.javadoc.io/io.opentracing/opentracing-api/0.32.0-RC1/io/opentracing/Tracer.html" title="Mimir does not include content from: static.javadoc.io"><code class="literal">Tracer</code></a> with the desired state. In this case, the default tracer will <span class="emphasis"><em>not</em></span> be used.
				</p><p>
					The following example demonstrates how to create a new implementation of <code class="literal">TracerResolver</code> that returns a custom implementation of the <code class="literal">Tracer</code> class.
				</p><pre class="programlisting language-java">import io.opentracing.Tracer;
import io.opentracing.contrib.tracerresolver.TracerResolver;
import org.myproject.opentracing.CustomTracer;

public static class MyTracerResolver extends TracerResolver {
    @Override
    protected Tracer resolve() {
        return new CustomTracer();
    }
}</pre></section></section><section class="section" id="using_microprofile_health_smallrye"><div class="titlepage"><div><div><h2 class="title">20.2. Using Eclipse MicroProfile Health to Monitor Server Health</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Eclipse MicroProfile Health is provided as Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend to use them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link mimir-link-warn" href="https://access.redhat.com/support/offerings/techpreview" title="This content is not included in Mimir.">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div></div><p>
				<a class="link mimir-link-warn" href="https://github.com/eclipse/microprofile-health/" title="Mimir does not include content from: github.com">Eclipse Microprofile Health</a> functionality is provided by the <code class="literal">microprofile-health-smallrye</code> subsystem. See <a class="link" href="/documentation/en-us/jboss_enterprise_application_platform_continuous_delivery/18/html-single/configuration_guide/index/">Monitor Server Health Using Eclipse MicroProfile Health</a> in the <span class="emphasis"><em>Configuration Guide</em></span> for more information about this subsystem.
			</p><p>
				The following section describe how to <a class="link" href="#microprofile_health_smallrye_custom_check" title="20.2.1. Implement a Custom Health Check">implement a custom health check</a>.
			</p><section class="section" id="microprofile_health_smallrye_custom_check"><div class="titlepage"><div><div><h3 class="title">20.2.1. Implement a Custom Health Check</h3></div></div></div><p>
					The default implementation provided by the <code class="literal">microprofile-health-smallrye</code> subsystem performs a basic health check. For more detailed information, on either the server or application status, custom health checks may be included. Any CDI beans that include the <a class="link mimir-link-warn" href="https://openliberty.io/javadocs/microprofile-1.2-javadoc/org/eclipse/microprofile/health/Health.html" title="Mimir does not include content from: openliberty.io"><code class="literal">org.eclipse.microprofile.health.Health</code></a> annotation at the class level are automatically discovered and invoked at runtime.
				</p><p>
					The following example demonstrates how to create a new implementation of a health check that returns an <code class="literal">UP</code> state.
				</p><pre class="programlisting language-java">import org.eclipse.microprofile.health.Health;
import org.eclipse.microprofile.health.HealthCheck;
import org.eclipse.microprofile.health.HealthCheckResponse;

@Health
public class HealthTest implements HealthCheck {

    @Override
    public HealthCheckResponse call() {
        return HealthCheckResponse.named("health-test").up().build();
    }
}</pre><p>
					Once deployed, any subsequent health check queries will include the custom checks, as seen below.
				</p><pre class="screen">/subsystem=microprofile-health-smallrye:check
{
    "outcome" =&gt; "success",
    "result" =&gt; {
        "outcome" =&gt; "UP",
        "checks" =&gt; [{
            "name" =&gt; "health-test",
            "state" =&gt; "UP"
        }]
    }
}</pre></section></section></section><section class="appendix" id="reference_material"><div class="titlepage"><div><div><h1 class="title">Appendix A. Reference Material</h1></div></div></div><section class="section" id="undertow_available_handlers"><div class="titlepage"><div><div><h2 class="title">A.1. Provided Undertow Handlers</h2></div></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					For the complete list of handlers, you must check the source JAR file of the Undertow core in the version that matches the Undertow core in your JBoss EAP installation. You can download the Undertow core source JAR file from the <a class="link mimir-link-warn" href="https://maven.repository.redhat.com/ga/io/undertow/undertow-core/" title="Mimir does not include content from: maven.repository.redhat.com">JBoss EAP Maven Repository</a>, and then refer to the available handlers in the <code class="literal">/io/undertow/server/handlers/</code> directory.
				</p><p>
					You can verify the Undertow core version used in your current installation of JBoss EAP by searching the <code class="literal">server.log</code> file for the <code class="literal">INFO</code> message that is printed during JBoss EAP server startup, similar to the one shown in the example below:
				</p><pre class="screen">INFO [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0003: Undertow 1.4.18.Final-redhat-1 starting</pre></div></div><h5 id="accesscontrollisthandler">AccessControlListHandler</h5><p>
				Class Name: <code class="literal">io.undertow.server.handlers.AccessControlListHandler</code>
			</p><p>
				Name: <code class="literal">access-control</code>
			</p><p>
				Handler that can accept or reject a request based on an attribute of the remote peer.
			</p><div class="table" id="idm140421264012752"><p class="title"><strong>Table A.1. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421264007920" scope="col">Name</th><th align="left" valign="top" id="idm140421264006832" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421264007920"> <p>
								acl
							</p>
							 </td><td align="left" valign="top" headers="idm140421264006832"> <p>
								ACL rules. This parameter is required.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264007920"> <p>
								attribute
							</p>
							 </td><td align="left" valign="top" headers="idm140421264006832"> <p>
								Exchange attribute string. This parameter is required.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264007920"> <p>
								default-allow
							</p>
							 </td><td align="left" valign="top" headers="idm140421264006832"> <p>
								Boolean specifying whether handler accepts or rejects a request by default. Defaults to <code class="literal">false</code>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="accessloghandler">AccessLogHandler</h5><p>
				Class Name: <code class="literal">io.undertow.server.handlers.accesslog.AccessLogHandler</code>
			</p><p>
				Name: <code class="literal">access-log</code>
			</p><p>
				Access log handler. This handler generates access log messages based on the provided format string and pass these messages into the provided <code class="literal">AccessLogReceiver</code>.
			</p><p>
				This handler can log any attribute that is provided via the <code class="literal">ExchangeAttribute</code> mechanism.
			</p><p>
				This factory produces token handlers for the following patterns.
			</p><div class="table" id="idm140421265622192"><p class="title"><strong>Table A.2. Patterns</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265617360" scope="col">Pattern</th><th align="left" valign="top" id="idm140421265616272" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%a
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Remote IP address
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%A
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Local IP address
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%b
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Bytes sent, excluding HTTP headers or <code class="literal">-</code> if no bytes were sent
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%B
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Bytes sent, excluding HTTP headers
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%h
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Remote host name
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%H
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Request protocol
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%l
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Remote logical username from <code class="literal">identd</code> (always returns <code class="literal">-</code>)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%m
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Request method
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%p
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Local port
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%q
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Query string (excluding the <code class="literal">?</code> character)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%r
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								First line of the request
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%s
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								HTTP status code of the response
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%t
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Date and time, in Common Log Format format
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%u
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Remote user that was authenticated
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%U
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Requested URL path
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%v
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Local server name
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%D
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Time taken to process the request, in milliseconds
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%T
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Time taken to process the request, in seconds
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								%I
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								Current Request thread name (can compare later with stack traces)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								common
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								<code class="literal">%h %l %u %t "%r" %s %b</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265617360"> <p>
								combined
							</p>
							 </td><td align="left" valign="top" headers="idm140421265616272"> <p>
								<code class="literal">%h %l %u %t "%r" %s %b "%{i,Referer}" "%{i,User-Agent}"</code>
							</p>
							 </td></tr></tbody></table></div></div><p>
				There is also support to write information from the cookie, incoming header, or the session.
			</p><p>
				It is modeled after the Apache syntax:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">%{i,xxx}</code> for incoming headers
					</li><li class="listitem">
						<code class="literal">%{o,xxx}</code> for outgoing response headers
					</li><li class="listitem">
						<code class="literal">%{c,xxx}</code> for a specific cookie
					</li><li class="listitem">
						<code class="literal">%{r,xxx}</code> where <code class="literal">xxx</code> is an attribute in the <code class="literal">ServletRequest</code>
					</li><li class="listitem">
						<code class="literal">%{s,xxx}</code> where <code class="literal">xxx</code> is an attribute in the <code class="literal">HttpSession</code>
					</li></ul></div><div class="table" id="idm140421265198224"><p class="title"><strong>Table A.3. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265193392" scope="col">Name</th><th align="left" valign="top" id="idm140421265192304" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265193392"> <p>
								format
							</p>
							 </td><td align="left" valign="top" headers="idm140421265192304"> <p>
								Format used to generate the log messages. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="allowedmethodshandler">AllowedMethodsHandler</h5><p>
				Handler that whitelists certain HTTP methods. Only requests with a method in the allowed methods set are allowed to continue.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.AllowedMethodsHandler</code>
			</p><p>
				Name: <code class="literal">allowed-methods</code>
			</p><div class="table" id="idm140421265714352"><p class="title"><strong>Table A.4. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265709520" scope="col">Name</th><th align="left" valign="top" id="idm140421265708432" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265709520"> <p>
								methods
							</p>
							 </td><td align="left" valign="top" headers="idm140421265708432"> <p>
								Methods to allow, for example <code class="literal">GET</code>, <code class="literal">POST</code>, <code class="literal">PUT</code>, and so on. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="blockinghandler">BlockingHandler</h5><p>
				An HttpHandler that initiates a blocking request. If the thread is currently running in the I/O thread it is dispatched.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.BlockingHandler</code>
			</p><p>
				Name: <code class="literal">blocking</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="byterangehandler">ByteRangeHandler</h5><p>
				Handler for range requests. This is a generic handler that can handle range requests to any resource of a fixed content length, for example, any resource where the <code class="literal">content-length</code> header has been set. This is not necessarily the most efficient way to handle range requests, as the full content is generated and then discarded. At present this handler can only handle simple, single range requests. If multiple ranges are requested the <code class="literal">Range</code> header is ignored.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.ByteRangeHandler</code>
			</p><p>
				Name: <code class="literal">byte-range</code>
			</p><div class="table" id="idm140421265690304"><p class="title"><strong>Table A.5. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265685472" scope="col">Name</th><th align="left" valign="top" id="idm140421265684384" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265685472"> <p>
								send-accept-ranges
							</p>
							 </td><td align="left" valign="top" headers="idm140421265684384"> <p>
								Boolean value on whether or not to send accept ranges. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="canonicalpathhandler">CanonicalPathHandler</h5><p>
				This handler transforms a relative path to a canonical path.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.CanonicalPathHandler</code>
			</p><p>
				Name: <code class="literal">canonical-path</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="disablecachehandler">DisableCacheHandler</h5><p>
				Handler that disables response caching by browsers and proxies.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.DisableCacheHandler</code>
			</p><p>
				Name: <code class="literal">disable-cache</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="disallowedmethodshandler">DisallowedMethodsHandler</h5><p>
				Handler that blacklists certain HTTP methods.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.DisallowedMethodsHandler</code>
			</p><p>
				Name: <code class="literal">disallowed-methods</code>
			</p><div class="table" id="idm140421265664480"><p class="title"><strong>Table A.6. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265659648" scope="col">Name</th><th align="left" valign="top" id="idm140421265658560" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265659648"> <p>
								methods
							</p>
							 </td><td align="left" valign="top" headers="idm140421265658560"> <p>
								Methods to disallow, for example <code class="literal">GET</code>, <code class="literal">POST</code>, <code class="literal">PUT</code>, and so on. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="encodinghandler">EncodingHandler</h5><p>
				This handler serves as the basis for content encoding implementations. Encoding handlers are added as delegates to this handler, with a specified server side priority.
			</p><p>
				The <code class="literal">q</code> value will be used to determine the correct handler. If a request comes in with no <code class="literal">q</code> value then the server picks the handler with the highest priority as the encoding to use.
			</p><p>
				If no handler matches then the identity encoding is assumed. If the identity encoding has been specifically disallowed due to a <code class="literal">q</code> value of <code class="literal">0</code> then the handler sets the response code <code class="literal">406 (Not Acceptable)</code> and returns.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.encoding.EncodingHandler</code>
			</p><p>
				Name: <code class="literal">compress</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="fileerrorpagehandler">FileErrorPageHandler</h5><p>
				Handler that serves up a file from disk to serve as an error page. This handler does not serve up any response codes by default, you must configure the response codes it responds to.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.error.FileErrorPageHandler</code>
			</p><p>
				Name: <code class="literal">error-file</code>
			</p><div class="table" id="idm140421264313504"><p class="title"><strong>Table A.7. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421264308672" scope="col">Name</th><th align="left" valign="top" id="idm140421264307584" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421264308672"> <p>
								file
							</p>
							 </td><td align="left" valign="top" headers="idm140421264307584"> <p>
								Location of file to serve up as an error page.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264308672"> <p>
								response-codes
							</p>
							 </td><td align="left" valign="top" headers="idm140421264307584"> <p>
								List of response codes that result in a redirect to the defined error page file.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="httptracehandler">HttpTraceHandler</h5><p>
				A handler that handles HTTP trace requests.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.HttpTraceHandler</code>
			</p><p>
				Name: <code class="literal">trace</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="ipaddressaccesscontrolhandler">IPAddressAccessControlHandler</h5><p>
				Handler that can accept or reject a request based on the IP address of the remote peer.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.IPAddressAccessControlHandler</code>
			</p><p>
				Name: <code class="literal">ip-access-control</code>
			</p><div class="table" id="idm140421264289248"><p class="title"><strong>Table A.8. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421264284416" scope="col">Name</th><th align="left" valign="top" id="idm140421264283328" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421264284416"> <p>
								acl
							</p>
							 </td><td align="left" valign="top" headers="idm140421264283328"> <p>
								String representing the access control list. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264284416"> <p>
								failure-status
							</p>
							 </td><td align="left" valign="top" headers="idm140421264283328"> <p>
								Integer representing the status code to return on rejected requests.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264284416"> <p>
								default-allow
							</p>
							 </td><td align="left" valign="top" headers="idm140421264283328"> <p>
								Boolean representing whether or not to allow by default.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="jdbcloghandler">JDBCLogHandler</h5><p>
				Class Name: <code class="literal">io.undertow.server.handlers.JDBCLogHandler</code>
			</p><p>
				Name: <code class="literal">jdbc-access-log</code>
			</p><div class="table" id="idm140421264265728"><p class="title"><strong>Table A.9. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421264260896" scope="col">Name</th><th align="left" valign="top" id="idm140421265162304" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								format
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Specifies the JDBC Log pattern. Default value is <code class="literal">common</code>. You can also use <code class="literal">combined</code>, which adds the VirtualHost, request method, referrer, and user agent information to the log message.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								datasource
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Name of the datasource to log. This parameter is required and is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								tableName
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Table name.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								remoteHostField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Remote Host address.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								userField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Username.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								timestampField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Timestamp.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								virtualHostField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								VirtualHost.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								methodField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Method.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								queryField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Query.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								statusField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Status.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								bytesField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Bytes.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								refererField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								Referrer.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421264260896"> <p>
								userAgentField
							</p>
							 </td><td align="left" valign="top" headers="idm140421265162304"> <p>
								UserAgent.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="learningpushhandler">LearningPushHandler</h5><p>
				Handler that builds up a cache of resources that a browser requests, and uses server push to push them when supported.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.LearningPushHandler</code>
			</p><p>
				Name: <code class="literal">learning-push</code>
			</p><div class="table" id="idm140421265106656"><p class="title"><strong>Table A.10. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265101824" scope="col">Name</th><th align="left" valign="top" id="idm140421265100736" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265101824"> <p>
								max-age
							</p>
							 </td><td align="left" valign="top" headers="idm140421265100736"> <p>
								Integer representing the maximum time of a cache entry.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265101824"> <p>
								max-entries
							</p>
							 </td><td align="left" valign="top" headers="idm140421265100736"> <p>
								Integer representing the maximum number of cache entries
							</p>
							 </td></tr></tbody></table></div></div><h5 id="localnameresolvinghandler">LocalNameResolvingHandler</h5><p>
				A handler that performs DNS lookup to resolve a local address. Unresolved local address can be created when a front end server has sent a <code class="literal">X-forwarded-host</code> header or AJP is in use.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.LocalNameResolvingHandler</code>
			</p><p>
				Name: <code class="literal">resolve-local-name</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="pathseparatorhandler">PathSeparatorHandler</h5><p>
				A handler that translates non-slash separator characters in the URL into a slash. In general this will translate backslash into slash on Windows systems.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.PathSeparatorHandler</code>
			</p><p>
				Name: <code class="literal">path-separator</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="peernameresolvinghandler">PeerNameResolvingHandler</h5><p>
				A handler that performs reverse DNS lookup to resolve a peer address.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.PeerNameResolvingHandler</code>
			</p><p>
				Name: <code class="literal">resolve-peer-name</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="proxypeeraddresshandler">ProxyPeerAddressHandler</h5><p>
				Handler that sets the peer address to the value of the <code class="literal">X-Forwarded-For</code> header. This should only be used behind a proxy that always sets this header, otherwise it is possible for an attacker to forge their peer address.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.ProxyPeerAddressHandler</code>
			</p><p>
				Name: <code class="literal">proxy-peer-address</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="redirecthandler">RedirectHandler</h5><p>
				A redirect handler that redirects to the specified location via a <code class="literal">302</code> redirect. The location is specified as an exchange attribute string.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.RedirectHandler</code>
			</p><p>
				Name: <code class="literal">redirect</code>
			</p><div class="table" id="idm140421267213632"><p class="title"><strong>Table A.11. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421267208800" scope="col">Name</th><th align="left" valign="top" id="idm140421267207712" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421267208800"> <p>
								value
							</p>
							 </td><td align="left" valign="top" headers="idm140421267207712"> <p>
								Destination for the redirect. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="requestbufferinghandler">RequestBufferingHandler</h5><p>
				Handler that buffers all request data.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.RequestBufferingHandler</code>
			</p><p>
				Name: <code class="literal">buffer-request</code>
			</p><div class="table" id="idm140421267197056"><p class="title"><strong>Table A.12. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421267192224" scope="col">Name</th><th align="left" valign="top" id="idm140421267191136" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421267192224"> <p>
								buffers
							</p>
							 </td><td align="left" valign="top" headers="idm140421267191136"> <p>
								Integer that defines the maximum number of buffers. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="requestdumpinghandler">RequestDumpingHandler</h5><p>
				Handler that dumps an exchange to a log.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.RequestDumpingHandler</code>
			</p><p>
				Name: <code class="literal">dump-request</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="requestlimitinghandler">RequestLimitingHandler</h5><p>
				A handler that limits the maximum number of concurrent requests. Requests beyond the limit will block until the previous request is complete.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.RequestLimitingHandler</code>
			</p><p>
				Name: <code class="literal">request-limit</code>
			</p><div class="table" id="idm140421267175792"><p class="title"><strong>Table A.13. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421267170960" scope="col">Name</th><th align="left" valign="top" id="idm140421267169872" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421267170960"> <p>
								requests
							</p>
							 </td><td align="left" valign="top" headers="idm140421267169872"> <p>
								Integer that represents the maximum number of concurrent requests. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a> and is required.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="resourcehandler">ResourceHandler</h5><p>
				A handler for serving resources.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.resource.ResourceHandler</code>
			</p><p>
				Name: <code class="literal">resource</code>
			</p><div class="table" id="idm140421266769152"><p class="title"><strong>Table A.14. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266764320" scope="col">Name</th><th align="left" valign="top" id="idm140421266763232" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266764320"> <p>
								location
							</p>
							 </td><td align="left" valign="top" headers="idm140421266763232"> <p>
								Location of resources. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a> and is required.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266764320"> <p>
								allow-listing
							</p>
							 </td><td align="left" valign="top" headers="idm140421266763232"> <p>
								Boolean value to determine whether or not to allow directory listings.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="responseratelimitinghandler">ResponseRateLimitingHandler</h5><p>
				Handler that limits the download rate to a set number of bytes/time.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.ResponseRateLimitingHandler</code>
			</p><p>
				Name: <code class="literal">response-rate-limit</code>
			</p><div class="table" id="idm140421266748688"><p class="title"><strong>Table A.15. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266743856" scope="col">Name</th><th align="left" valign="top" id="idm140421266742768" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266743856"> <p>
								bytes
							</p>
							 </td><td align="left" valign="top" headers="idm140421266742768"> <p>
								Number of bytes to limit the download rate. This parameter is required.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266743856"> <p>
								time
							</p>
							 </td><td align="left" valign="top" headers="idm140421266742768"> <p>
								Time in seconds to limit the download rate. This parameter is required.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="setheaderhandler">SetHeaderHandler</h5><p>
				A handler that sets a fixed response header.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.SetHeaderHandler</code>
			</p><p>
				Name: <code class="literal">header</code>
			</p><div class="table" id="idm140421266729184"><p class="title"><strong>Table A.16. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266724352" scope="col">Name</th><th align="left" valign="top" id="idm140421266723264" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266724352"> <p>
								header
							</p>
							 </td><td align="left" valign="top" headers="idm140421266723264"> <p>
								Name of header attribute. This parameter is required.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266724352"> <p>
								value
							</p>
							 </td><td align="left" valign="top" headers="idm140421266723264"> <p>
								Value of header attribute. This parameter is required.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="sslheaderhandler">SSLHeaderHandler</h5><p>
				Handler that sets SSL information on the connection based on the following headers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						SSL_CLIENT_CERT
					</li><li class="listitem">
						SSL_CIPHER
					</li><li class="listitem">
						SSL_SESSION_ID
					</li></ul></div><p>
				If this handler is present in the chain it always overrides the SSL session information, even if these headers are not present.
			</p><p>
				This handler <span class="emphasis"><em>must</em></span> only be used on servers that are behind a reverse proxy, where the reverse proxy has been configured to always set these headers for <span class="emphasis"><em>every</em></span> request or to strip existing headers with these names if no SSL information is present. Otherwise it might be possible for a malicious client to spoof an SSL connection.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.SSLHeaderHandler</code>
			</p><p>
				Name: <code class="literal">ssl-headers</code>
			</p><p>
				This handler has no parameters.
			</p><h5 id="stuckthreaddetectionhandler">StuckThreadDetectionHandler</h5><p>
				This handler detects requests that take a long time to process, which might indicate that the thread that is processing it is stuck.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.StuckThreadDetectionHandler</code>
			</p><p>
				Name: <code class="literal">stuck-thread-detector</code>
			</p><div class="table" id="idm140421272324192"><p class="title"><strong>Table A.17. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421272319360" scope="col">Name</th><th align="left" valign="top" id="idm140421272318272" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421272319360"> <p>
								threshhold
							</p>
							 </td><td align="left" valign="top" headers="idm140421272318272"> <p>
								Integer value in seconds that determines the threshold for how long a request should take to process. Default value is <code class="literal">600</code> (10 minutes). This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a>.
							</p>
							 </td></tr></tbody></table></div></div><h5 id="urldecodinghandler">URLDecodingHandler</h5><p>
				A handler that decodes the URL and query parameters to the specified charset. If you are using this handler you must set the <a class="link mimir-link-warn" href="https://access.redhat.com/webassets/avalon/d/jboss_enterprise_application_platform_continuous_delivery/18/javadocs/io/undertow/UndertowOptions.html#DECODE_URL" title="This content is not included in Mimir.">UndertowOptions.DECODE_URL</a> parameter to <code class="literal">false</code>.
			</p><p>
				This is not as efficient as using the parser’s built in UTF-8 decoder. Unless you need to decode to something other than UTF-8 you should rely on the parsers decoding instead.
			</p><p>
				Class Name: <code class="literal">io.undertow.server.handlers.URLDecodingHandler</code>
			</p><p>
				Name: <code class="literal">url-decoding</code>
			</p><div class="table" id="idm140421272304704"><p class="title"><strong>Table A.18. Parameters</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 50%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421272299872" scope="col">Name</th><th align="left" valign="top" id="idm140421272298784" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421272299872"> <p>
								charset
							</p>
							 </td><td align="left" valign="top" headers="idm140421272298784"> <p>
								Charset to decode. This is the <a class="link" href="#undertow_handler_default_parameter" title="Undertow Handler Default Parameter">default parameter</a> and it is required.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="persistence_unit_properties"><div class="titlepage"><div><div><h2 class="title">A.2. Persistence Unit Properties</h2></div></div></div><p>
				Persistence unit definition supports the following properties, which can be configured from the <code class="literal">persistence.xml</code> file.
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421272285184" scope="col">Property</th><th align="left" valign="top" id="idm140421272284096" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.providerModule
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Name of the persistence provider module. Default is <code class="literal">org.hibernate</code>. Should be the application name if a persistence provider is packaged with the application.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.adapterModule
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Name of the integration classes that help JBoss EAP to work with the persistence provider.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.adapterClass
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Class name of the integration adapter.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.managed
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Set to <code class="literal">false</code> to disable container-managed JPA access to the persistence unit. The default is <code class="literal">true</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.classtransformer
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Set to <code class="literal">false</code> to disable class transformers for the persistence unit. The default is <code class="literal">true</code>, which allows class transforming.
							</p>
							 <p>
								Hibernate also needs persistence unit property <code class="literal">hibernate.ejb.use_class_enhancer</code> to be <code class="literal">true</code> for class transforming to be enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.scopedname
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Specify the qualified application-scoped persistence unit name to be used. By default, this is set to the application name and persistence unit name, collectively. The <code class="literal">hibernate.cache.region_prefix</code> defaults to whatever you set <code class="literal">jboss.as.jpa.scopedname</code> to. Make sure you set the <code class="literal">jboss.as.jpa.scopedname</code> value to a value not already in use by other applications deployed on the same application server instance.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								jboss.as.jpa.deferdetach
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Controls whether transaction-scoped persistence context used in non-JTA transaction thread, will detach loaded entities after each <code class="literal">EntityManager</code> invocation or when the persistence context is closed. The default value is <code class="literal">false</code>. If set to <code class="literal">true</code>, the detach is deferred until the context is closed.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								wildfly.jpa.default-unit
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Set to <code class="literal">true</code> to choose the default persistence unit in an application. This is useful if you inject a persistence context without specifying the <code class="literal">unitName</code>, but have multiple persistence units specified in your <code class="literal">persistence.xml</code> file.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								wildfly.jpa.twophasebootstrap
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Persistence providers allow a two-phase persistence unit bootstrap, which improves JPA integration with CDI. Setting the <code class="literal">wildfly.jpa.twophasebootstrap</code> value to <code class="literal">false</code> disables the two-phase bootstrap for the persistence unit that contains the value.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								wildfly.jpa.allowdefaultdatasourceuse
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Set to <code class="literal">false</code> to prevent persistence unit from using the default datasource. The default value is <code class="literal">true</code>. This is only important for persistence units that do not specify a datasource.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421272285184"> <p>
								wildfly.jpa.hibernate.search.module
							</p>
							 </td><td align="left" valign="top" headers="idm140421272284096"> <p>
								Controls which version of Hibernate Search to include on the classpath. The default is <code class="literal">auto</code>; other valid values are <code class="literal">none</code> or a full module identifier to use an alternative version.
							</p>
							 </td></tr></tbody></table></div></section><section class="section" id="policy_provider_properties"><div class="titlepage"><div><div><h2 class="title">A.3. Policy Provider Properties</h2></div></div></div><div class="table" id="idm140421266479440"><p class="title"><strong>Table A.19. policy-provider Attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266474592" scope="col">Property</th><th align="left" valign="top" id="idm140421266473504" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266474592"> <p>
								custom-policy
							</p>
							 </td><td align="left" valign="top" headers="idm140421266473504"> <p>
								A custom policy provider definition.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266474592"> <p>
								jacc-policy
							</p>
							 </td><td align="left" valign="top" headers="idm140421266473504"> <p>
								A policy provider definition that sets up JACC and related services.
							</p>
							 </td></tr></tbody></table></div></div><div class="table" id="idm140421266463936"><p class="title"><strong>Table A.20. custom-policy Attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266459088" scope="col">Property</th><th align="left" valign="top" id="idm140421266458000" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266459088"> <p>
								class-name
							</p>
							 </td><td align="left" valign="top" headers="idm140421266458000"> <p>
								The name of a <code class="literal">java.security.Policy</code> implementation referencing a policy provider.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266459088"> <p>
								module
							</p>
							 </td><td align="left" valign="top" headers="idm140421266458000"> <p>
								The name of the module to load the provider from.
							</p>
							 </td></tr></tbody></table></div></div><div class="table" id="idm140421266447984"><p class="title"><strong>Table A.21. jacc-policy Attributes</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--></col><col style="width: 70%; " class="col_2"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266443152" scope="col">Property</th><th align="left" valign="top" id="idm140421266442064" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266443152"> <p>
								policy
							</p>
							 </td><td align="left" valign="top" headers="idm140421266442064"> <p>
								The name of a <code class="literal">java.security.Policy</code> implementation referencing a policy provider.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266443152"> <p>
								configuration-factory
							</p>
							 </td><td align="left" valign="top" headers="idm140421266442064"> <p>
								The name of a <code class="literal">javax.security.jacc.PolicyConfigurationFactory</code> implementation referencing a policy configuration factory provider.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266443152"> <p>
								module
							</p>
							 </td><td align="left" valign="top" headers="idm140421266442064"> <p>
								The name of the module to load the provider from.
							</p>
							 </td></tr></tbody></table></div></div></section><section class="section" id="java_ee_profiles_and_technologies_reference"><div class="titlepage"><div><div><h2 class="title">A.4. Java EE 8 Profiles and Technologies Reference</h2></div></div></div><p>
				The following tables list the Java EE 8 technologies and JSRs by category and note whether they are included in the Web Profile or Full Platform profiles.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#java_ee_web_application_technologies" title="Table A.22. Java EE 8 Web Application Technologies">Java EE 8 Web Application Technologies</a>
					</li><li class="listitem">
						<a class="link" href="#java_ee_enterprise_application_technologies" title="Table A.23. Java EE 8 Enterprise Application Technologies">Java EE 8 Enterprise Application Technologies</a>
					</li><li class="listitem">
						<a class="link" href="#java_ee_web_services_technologies" title="Table A.24. Java EE 8 Web Services Technologies">Java EE 8 Web Services Technologies</a>
					</li><li class="listitem">
						<a class="link" href="#java_ee_management_security_technologies" title="Table A.25. Java EE 8 Management and Security Technologies">Java EE 8 Management and Security Technologies</a>
					</li><li class="listitem">
						<a class="link" href="#java_ee_related_specifications_in_java_se" title="Table A.26. Java SE Specifications Related to Java EE 8">Java SE Specifications Related to Java EE 8</a>
					</li></ul></div><p>
				See <a class="link mimir-link-warn" href="https://www.oracle.com/technetwork/java/javaee/tech/index.html" title="Mimir does not include content from: www.oracle.com">Java™ EE 8 Technologies</a> for the complete list of Java EE 8 APIs.
			</p><div class="table" id="java_ee_web_application_technologies"><p class="title"><strong>Table A.22. Java EE 8 Web Application Technologies</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 18%; " class="col_3"><!--Empty--></col><col style="width: 18%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421265380528" scope="col">Technology</th><th align="left" valign="top" id="idm140421265379440" scope="col">JSR</th><th align="left" valign="top" id="idm140421265378352" scope="col">Web Profile</th><th align="left" valign="top" id="idm140421265377264" scope="col">Full Platform</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								Java API for WebSocket 1.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=356" title="Mimir does not include content from: jcp.org">JSR 356</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								Java API for JSON Binding 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=367" title="Mimir does not include content from: jcp.org">JSR 367</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								Java API for JSON Processing 1.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=374" title="Mimir does not include content from: jcp.org">JSR 374</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								Java Servlet 4.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=369" title="Mimir does not include content from: jcp.org">JSR 369</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								JavaServer Faces 2.3
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=372" title="Mimir does not include content from: jcp.org">JSR 372</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								Expression Language 3.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="https://jcp.org/en/jsr/detail?id=341" title="Mimir does not include content from: jcp.org">JSR 341</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								JavaServer Pages 2.3
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=245" title="Mimir does not include content from: jcp.org">JSR 245</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421265380528"> <p>
								Standard Tag Library for JavaServer Pages (JSTL) 1.2 <sup>1</sup>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265379440"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=52" title="Mimir does not include content from: jcp.org">JSR 52</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421265378352"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421265377264"> <p>
								✔
							</p>
							 </td></tr></tbody></table></div></div><p>
				<sup>1</sup> Additional Standard Tag Library (JSTL) information:
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					A known security risk in JBoss EAP exists where the Java Standard Tag Library (JSTL) allows the processing of external entity references in untrusted XML documents which could access resources on the host system and, potentially, allow arbitrary code execution.
				</p><p>
					To avoid this, the JBoss EAP server has to be run with system property <code class="literal">org.apache.taglibs.standard.xml.accessExternalEntity</code> correctly set, usually with an empty string as value. This can be done in two ways:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Configuring the system properties and restarting the server.
						</p><pre class="screen">org.apache.taglibs.standard.xml.accessExternalEntity</pre></li><li class="listitem">
							Passing <code class="literal">-Dorg.apache.taglibs.standard.xml.accessExternalEntity=""</code> as an argument to the <code class="literal">standalone.sh</code> or <code class="literal">domain.sh</code> scripts.
						</li></ul></div></div></div><div class="table" id="java_ee_enterprise_application_technologies"><p class="title"><strong>Table A.23. Java EE 8 Enterprise Application Technologies</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 18%; " class="col_3"><!--Empty--></col><col style="width: 18%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421266353408" scope="col">Technology</th><th align="left" valign="top" id="idm140421266352320" scope="col">JSR</th><th align="left" valign="top" id="idm140421266351232" scope="col">Web Profile</th><th align="left" valign="top" id="idm140421266350144" scope="col">Full Platform</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Batch Applications for the Java Platform 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=352" title="Mimir does not include content from: jcp.org">JSR 352</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Concurrency Utilities for Java EE 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=236" title="Mimir does not include content from: jcp.org">JSR 236</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Contexts and Dependency Injection for Java 2.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=365" title="Mimir does not include content from: jcp.org">JSR 365</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Dependency Injection for Java 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=330" title="Mimir does not include content from: jcp.org">JSR 330</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Bean Validation 2.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=380" title="Mimir does not include content from: jcp.org">JSR 380</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Managed Beans 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								N/A
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Enterprise JavaBeans 3.2
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=345" title="Mimir does not include content from: jcp.org">JSR 345</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Interceptors 1.2
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=318" title="Mimir does not include content from: jcp.org">JSR 318</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Java EE Connector Architecture 1.7
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=322" title="Mimir does not include content from: jcp.org">JSR 322</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Java Persistence 2.2
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=338" title="Mimir does not include content from: jcp.org">JSR 338</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Common Annotations for the Java Platform 1.3
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=250" title="Mimir does not include content from: jcp.org">JSR 250</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Java Message Service API 2.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=343" title="Mimir does not include content from: jcp.org">JSR 343</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								Java Transaction API (JTA) 1.2
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=907" title="Mimir does not include content from: jcp.org">JSR 907</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421266353408"> <p>
								JavaMail 1.6
							</p>
							 </td><td align="left" valign="top" headers="idm140421266352320"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=919" title="Mimir does not include content from: jcp.org">JSR 919</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421266351232"> </td><td align="left" valign="top" headers="idm140421266350144"> <p>
								✔
							</p>
							 </td></tr></tbody></table></div></div><div class="table" id="java_ee_web_services_technologies"><p class="title"><strong>Table A.24. Java EE 8 Web Services Technologies</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 18%; " class="col_3"><!--Empty--></col><col style="width: 18%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421271379600" scope="col">Technology</th><th align="left" valign="top" id="idm140421271378512" scope="col">JSR</th><th align="left" valign="top" id="idm140421271377424" scope="col">Web Profile</th><th align="left" valign="top" id="idm140421271376336" scope="col">Full Platform</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421271379600"> <p>
								Java API for RESTful Web Services (JAX-RS) 2.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421271378512"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=370" title="Mimir does not include content from: jcp.org">JSR 370</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421271377424"> </td><td align="left" valign="top" headers="idm140421271376336"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421271379600"> <p>
								Implementing Enterprise Web Services 1.3
							</p>
							 </td><td align="left" valign="top" headers="idm140421271378512"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=109" title="Mimir does not include content from: jcp.org">JSR 109</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421271377424"> </td><td align="left" valign="top" headers="idm140421271376336"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421271379600"> <p>
								Web Services Metadata for the Java Platform 2.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421271378512"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=181" title="Mimir does not include content from: jcp.org">JSR 181</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421271377424"> </td><td align="left" valign="top" headers="idm140421271376336"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421271379600"> <p>
								Java API for XML-Based RPC (JAX-RPC) 1.1 (Optional)
							</p>
							 </td><td align="left" valign="top" headers="idm140421271378512"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=101" title="Mimir does not include content from: jcp.org">JSR 101</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421271377424"> </td><td align="left" valign="top" headers="idm140421271376336"> </td></tr><tr><td align="left" valign="top" headers="idm140421271379600"> <p>
								Java API for XML Registries (JAXR) 1.0 (Optional)
							</p>
							 </td><td align="left" valign="top" headers="idm140421271378512"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=93" title="Mimir does not include content from: jcp.org">JSR 93</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421271377424"> </td><td align="left" valign="top" headers="idm140421271376336"> </td></tr></tbody></table></div></div><div class="table" id="java_ee_management_security_technologies"><p class="title"><strong>Table A.25. Java EE 8 Management and Security Technologies</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 18%; " class="col_3"><!--Empty--></col><col style="width: 18%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421263671920" scope="col">Technology</th><th align="left" valign="top" id="idm140421263670832" scope="col">JSR</th><th align="left" valign="top" id="idm140421263669744" scope="col">Web Profile</th><th align="left" valign="top" id="idm140421263668656" scope="col">Full Platform</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421263671920"> <p>
								Java EE Security API 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421263670832"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=375" title="Mimir does not include content from: jcp.org">JSR 375</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263669744"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421263668656"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263671920"> <p>
								Java Authentication Service Provider Interface for Containers 1.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421263670832"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=196" title="Mimir does not include content from: jcp.org">JSR 196</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263669744"> <p>
								✔
							</p>
							 </td><td align="left" valign="top" headers="idm140421263668656"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263671920"> <p>
								Java Authorization Contract for Containers 1.5
							</p>
							 </td><td align="left" valign="top" headers="idm140421263670832"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=115" title="Mimir does not include content from: jcp.org">JSR 115</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263669744"> </td><td align="left" valign="top" headers="idm140421263668656"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263671920"> <p>
								Java EE Application Deployment 1.2 (Optional)
							</p>
							 </td><td align="left" valign="top" headers="idm140421263670832"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=88" title="Mimir does not include content from: jcp.org">JSR 88</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263669744"> </td><td align="left" valign="top" headers="idm140421263668656"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263671920"> <p>
								J2EE Management 1.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421263670832"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=77" title="Mimir does not include content from: jcp.org">JSR 77</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263669744"> </td><td align="left" valign="top" headers="idm140421263668656"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263671920"> <p>
								Debugging Support for Other Languages 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421263670832"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=45" title="Mimir does not include content from: jcp.org">JSR 45</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263669744"> </td><td align="left" valign="top" headers="idm140421263668656"> <p>
								✔
							</p>
							 </td></tr></tbody></table></div></div><div class="table" id="java_ee_related_specifications_in_java_se"><p class="title"><strong>Table A.26. Java SE Specifications Related to Java EE 8</strong></p><div class="table-contents"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--></col><col style="width: 14%; " class="col_2"><!--Empty--></col><col style="width: 18%; " class="col_3"><!--Empty--></col><col style="width: 18%; " class="col_4"><!--Empty--></col></colgroup><thead><tr><th align="left" valign="top" id="idm140421263615872" scope="col">Technology</th><th align="left" valign="top" id="idm140421263614784" scope="col">JSR</th><th align="left" valign="top" id="idm140421263613696" scope="col">Web Profile</th><th align="left" valign="top" id="idm140421263612608" scope="col">Full Platform</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								Java Management Extensions (JMX) 2.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=3" title="Mimir does not include content from: jcp.org">JSR 3</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								SOAP with Attachments API for Java (SAAJ) Specification 1.3
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=67" title="Mimir does not include content from: jcp.org">JSR 67</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								Streaming API for XML (StAX) 1.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=173" title="Mimir does not include content from: jcp.org">JSR 173</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								Java API for XML Processing (JAXP) 1.6
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=206" title="Mimir does not include content from: jcp.org">JSR 206</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								Java Database Connectivity 4.0
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=221" title="Mimir does not include content from: jcp.org">JSR 221</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								Java Architecture for XML Binding (JAXB) 2.2
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=222" title="Mimir does not include content from: jcp.org">JSR 222</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								Java API for XML-Based Web Services (JAX-WS) 2.2
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=224" title="Mimir does not include content from: jcp.org">JSR 224</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140421263615872"> <p>
								JavaBeans Activation Framework (JAF) 1.1
							</p>
							 </td><td align="left" valign="top" headers="idm140421263614784"> <p>
								<a class="link mimir-link-warn" href="http://jcp.org/en/jsr/detail?id=925" title="Mimir does not include content from: jcp.org">JSR 925</a>
							</p>
							 </td><td align="left" valign="top" headers="idm140421263613696"> </td><td align="left" valign="top" headers="idm140421263612608"> <p>
								✔
							</p>
							 </td></tr></tbody></table></div></div><p>
				<br/><br/><br/><br/>
			</p><p>
				<span class="emphasis"><em><span class="right right">Revised on 2019-12-05 13:41:50 UTC</span></em></span>
			</p></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140421288954720"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2019 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri mimir-link-warn" href="http://creativecommons.org/licenses/by-sa/3.0/" title="Mimir does not include content from: creativecommons.org">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></body>

        
        
    </div>
    

</div> 


                            </bdo>
                        </main>
                    </div>
                </main>
            </div>
        
            <!--#include virtual="/includes/footer/index.html" -->
        </div>
    </body>
</html>
