import{d as u}from"./chunk-W477FRAI.js";u();u();var o={};o.page=function(e){if(!(e=e||{}).page)throw new Error("A pageId is required to initialize.");this.apiKey=e.apiKey||null,this.error=e.error||this.error,this.format=e.format||"json",this.pageId=e.page,this.version=e.version||"v2",this.secure=!("secure"in e)||e.secure,this.protocol=this.secure?"https":"http",this.host=e.host||"statuspage.io",this.host_with_port_and_protocol=e.test?"":this.protocol+"://"+this.pageId+"."+this.host},o.page.prototype.serialize=function(e,t){var s=[],a={sms:"email_sms",webhook:"endpoint"};for(var r in e)if(r!=="to_sentence"){var n=r;r=r in a?a[r]:r;var i=t?t+"["+r+"]":r,c=e[n];s.push(typeof c=="object"?this.serialize(c,i):encodeURIComponent(i)+"="+encodeURIComponent(c))}return s.join("&")};o.page.prototype.createStatusPageCORSRequest=function(e,t){var s=new XMLHttpRequest;return"withCredentials"in s?s.open(e,t,!0):typeof XDomainRequest!="undefined"?(s=new XDomainRequest).open(e,t):s=null,s};o.page.prototype.executeRequestAndCallbackWithResponse=function(e){if(!e.path)throw new Error("A path is required to make a request");var t=e.path,s=e.method||"GET",a=e.success||null,r=e.error||this.error,n=this.host_with_port_and_protocol+"/api/"+this.version+"/"+t+"."+this.format,i=this.createStatusPageCORSRequest(s,n);if(i)if(this.apiKey&&(console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"),console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"),console.log("!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!"),i.setRequestHeader("Authorization","OAuth "+this.apiKey)),i.onload=function(){var h=JSON.parse(i.responseText);a&&a(h)},i.error=r,s==="POST"||s==="DELETE"){var c=e.data||{};i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(this.serialize(c))}else i.send()};o.page.prototype.get=function(e,t){if(t=t||{},!e)throw new Error("Path is required.");if(!t.success)throw new Error("Success Callback is required.");var s=t.success||{},a=t.error||{};this.executeRequestAndCallbackWithResponse({path:e,success:s,error:a,method:"GET"})};o.page.prototype.post=function(e,t){if(t=t||{},!e)throw new Error("Path is required.");var s={};if(e==="subscribers"){if(!t.subscriber)throw new Error("Subscriber is required to post.");s.subscriber=t.subscriber}else{if(!t.data)throw new Error("Data is required to post.");s=t.data}var a=t.success||{},r=t.error||{};this.executeRequestAndCallbackWithResponse({data:s,path:e,success:a,error:r,method:"POST"})};o.page.prototype.delete=function(e,t){if(t=t||{},!e)throw new Error("Path is required.");if(!t.subscriber)throw new Error("Data is required to delete.");var s={};e==="subscribers"?s.subscriber=t.subscriber:s=t.data;var a=t.success||{},r=t.error||{};this.executeRequestAndCallbackWithResponse({data:s,path:e,success:a,error:r,method:"DELETE"})};o.page.prototype.error=function(){console.log("There was an error with your request")};o.page.prototype.summary=function(e){this.get("summary",e)};o.page.prototype.status=function(e){this.get("status",e)};o.page.prototype.components=function(e){this.get("components",e)};o.page.prototype.incidents=function(e){switch(e.filter){case"unresolved":this.get("incidents/unresolved",e);break;case"resolved":this.get("incidents/resolved",e);break;default:this.get("incidents",e)}};o.page.prototype.scheduled_maintenances=function(e){switch(e.filter){case"active":this.get("scheduled-maintenances/active",e);break;case"upcoming":this.get("scheduled-maintenances/upcoming",e);break;default:this.get("scheduled-maintenances",e)}};o.page.prototype.subscribe=function(e){if(!e||!e.subscriber)throw new Error("A subscriber object is required.");this.post("subscribers",e)};o.page.prototype.unsubscribe=function(e){if(!e||!e.subscriber)throw new Error("A subscriber object is required.");if(!e.subscriber.id)throw new Error("You must supply a subscriber.id in order to cancel a subscription.");this.delete("subscribers",e)};var p=o;function g({statusPageId:e}){let t=new p.page({page:e}),s={"Partially Degraded Service":"Partial service"},a={critical:"status-critical",major:"status-partial",minor:"status-minor",none:"status-good"};t.summary({success:function(r){let n=r.status.description,i=document.querySelector('[data-js="status-page-widget"]');i.removeAttribute("hidden");let c=s[n]||n.charAt(0).toUpperCase()+n.substr(1).toLowerCase();i.querySelector('[data-js="status-description"]').textContent=c,i.querySelector('[data-js="status-icon"]').classList.add(a[r.status.indicator])}})}export{g as init};
//# sourceMappingURL=status-widget-6IQQGEI6.js.map
