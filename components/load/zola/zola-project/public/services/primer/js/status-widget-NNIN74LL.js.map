{
  "version": 3,
  "sources": ["../../../../src/status-widget.js", "../../../../src/statuspage.js"],
  "sourcesContent": ["import StatusPage from \"./statuspage.js\";\n\nexport function init({ statusPageId }) {\n  // const sp = new StatusPage.page({page: 'dn6mqn7xvzz3'});\n  const sp = new StatusPage.page({ page: statusPageId });\n\n  // map statuspage.io's text to our text; at least one of their status\n  // strings is too long for the space we have\n  const textMap = {\n    \"Partially Degraded Service\": \"Partial service\",\n  };\n\n  // map statuspage.io's statuses to colorful css classes for the circle\n  const classMap = {\n    critical: 'status-critical',\n    major: 'status-partial',\n    minor: 'status-minor',\n    none: 'status-good',\n  };\n\n  sp.summary({\n    success: function (data) {\n      // get the current status text\n      const currStatus = data.status.description;\n      const widget = document.querySelector('[data-js=\"status-page-widget\"]');\n\n      // un-hide the status widget\n      widget.removeAttribute(\"hidden\");\n\n      // see if we have mapped text for this string, if not use the string from statuspage.io\n      const statusText =\n        textMap[currStatus] ||\n        currStatus.charAt(0).toUpperCase() + currStatus.substr(1).toLowerCase();\n\n      // adds the text description to the dropdown\n      widget.querySelector('[data-js=\"status-description\"]').textContent = statusText;\n      // add a class to the status dot to give it an appropriate color for each status state\n      widget\n        .querySelector('[data-js=\"status-icon\"]')\n        .classList.add(classMap[data.status.indicator]);\n    },\n  });\n}\n", "/** @type {any} */\nconst StatusPage = {};\n\n(StatusPage.page = function (e) {\n  if (!(e = e || {}).page)\n    throw new Error(\"A pageId is required to initialize.\");\n  (this.apiKey = e.apiKey || null),\n    (this.error = e.error || this.error),\n    (this.format = e.format || \"json\"),\n    (this.pageId = e.page),\n    (this.version = e.version || \"v2\"),\n    (this.secure = !(\"secure\" in e) || e.secure),\n    (this.protocol = this.secure ? \"https\" : \"http\"),\n    (this.host = e.host || \"statuspage.io\"),\n    (this.host_with_port_and_protocol = e.test\n      ? \"\"\n      : this.protocol + \"://\" + this.pageId + \".\" + this.host);\n}),\n  (StatusPage.page.prototype.serialize = function (e, t) {\n    var s = [],\n      r = {\n        sms: \"email_sms\",\n        webhook: \"endpoint\",\n      };\n    for (var o in e)\n      if (\"to_sentence\" !== o) {\n        var i = o;\n        o = o in r ? r[o] : o;\n        var a = t ? t + \"[\" + o + \"]\" : o,\n          n = e[i];\n        s.push(\n          \"object\" == typeof n\n            ? this.serialize(n, a)\n            : encodeURIComponent(a) + \"=\" + encodeURIComponent(n)\n        );\n      }\n    return s.join(\"&\");\n  });\n\nStatusPage.page.prototype.createStatusPageCORSRequest = function (e, t) {\n  var s = new XMLHttpRequest();\n  return (\n    \"withCredentials\" in s\n      ? s.open(e, t, !0)\n      : \"undefined\" != typeof XDomainRequest\n      ? (s = new XDomainRequest()).open(e, t)\n      : (s = null),\n    s\n  );\n};\n\nStatusPage.page.prototype.executeRequestAndCallbackWithResponse = function (e) {\n  if (!e.path) throw new Error(\"A path is required to make a request\");\n  var t = e.path,\n    s = e.method || \"GET\",\n    r = e.success || null,\n    o = e.error || this.error,\n    i =\n      this.host_with_port_and_protocol +\n      \"/api/\" +\n      this.version +\n      \"/\" +\n      t +\n      \".\" +\n      this.format,\n    a = this.createStatusPageCORSRequest(s, i);\n  if (a)\n    if (\n      (this.apiKey &&\n        (console.log(\n          \"!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!\"\n        ),\n        console.log(\n          \"!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!\"\n        ),\n        console.log(\n          \"!!! API KEY IN USE - REMOVE BEFORE DEPLOYING TO PRODUCTION !!!\"\n        ),\n        a.setRequestHeader(\"Authorization\", \"OAuth \" + this.apiKey)),\n      (a.onload = function () {\n        var e = JSON.parse(a.responseText);\n        r && r(e);\n      }),\n      (a.error = o),\n      \"POST\" === s || \"DELETE\" === s)\n    ) {\n      var n = e.data || {};\n      a.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\"),\n        a.send(this.serialize(n));\n    } else a.send();\n};\n\nStatusPage.page.prototype.get = function (e, t) {\n  if (((t = t || {}), !e)) throw new Error(\"Path is required.\");\n  if (!t.success) throw new Error(\"Success Callback is required.\");\n  var s = t.success || {},\n    r = t.error || {};\n  this.executeRequestAndCallbackWithResponse({\n    path: e,\n    success: s,\n    error: r,\n    method: \"GET\",\n  });\n};\n\nStatusPage.page.prototype.post = function (e, t) {\n  if (((t = t || {}), !e)) throw new Error(\"Path is required.\");\n  var s = {};\n  if (\"subscribers\" === e) {\n    if (!t.subscriber) throw new Error(\"Subscriber is required to post.\");\n    s.subscriber = t.subscriber;\n  } else {\n    if (!t.data) throw new Error(\"Data is required to post.\");\n    s = t.data;\n  }\n  var r = t.success || {},\n    o = t.error || {};\n  this.executeRequestAndCallbackWithResponse({\n    data: s,\n    path: e,\n    success: r,\n    error: o,\n    method: \"POST\",\n  });\n};\n\nStatusPage.page.prototype[\"delete\"] = function (e, t) {\n  if (((t = t || {}), !e)) throw new Error(\"Path is required.\");\n  if (!t.subscriber) throw new Error(\"Data is required to delete.\");\n  var s = {};\n  \"subscribers\" === e ? (s.subscriber = t.subscriber) : (s = t.data);\n  var r = t.success || {},\n    o = t.error || {};\n  this.executeRequestAndCallbackWithResponse({\n    data: s,\n    path: e,\n    success: r,\n    error: o,\n    method: \"DELETE\",\n  });\n};\n\nStatusPage.page.prototype.error = function () {\n  console.log(\"There was an error with your request\");\n};\n\nStatusPage.page.prototype.summary = function (e) {\n  this.get(\"summary\", e);\n};\n\nStatusPage.page.prototype.status = function (e) {\n  this.get(\"status\", e);\n};\n\nStatusPage.page.prototype.components = function (e) {\n  this.get(\"components\", e);\n};\n\nStatusPage.page.prototype.incidents = function (e) {\n  switch (e.filter) {\n    case \"unresolved\":\n      this.get(\"incidents/unresolved\", e);\n      break;\n    case \"resolved\":\n      this.get(\"incidents/resolved\", e);\n      break;\n    default:\n      this.get(\"incidents\", e);\n  }\n};\n\nStatusPage.page.prototype.scheduled_maintenances = function (e) {\n  switch (e.filter) {\n    case \"active\":\n      this.get(\"scheduled-maintenances/active\", e);\n      break;\n    case \"upcoming\":\n      this.get(\"scheduled-maintenances/upcoming\", e);\n      break;\n    default:\n      this.get(\"scheduled-maintenances\", e);\n  }\n};\n\nStatusPage.page.prototype.subscribe = function (e) {\n  if (!e || !e.subscriber) throw new Error(\"A subscriber object is required.\");\n  this.post(\"subscribers\", e);\n};\n\nStatusPage.page.prototype.unsubscribe = function (e) {\n  if (!e || !e.subscriber) throw new Error(\"A subscriber object is required.\");\n  if (!e.subscriber.id)\n    throw new Error(\n      \"You must supply a subscriber.id in order to cancel a subscription.\"\n    );\n  this[\"delete\"](\"subscribers\", e);\n};\n\nexport default StatusPage;\n"],
  "mappings": "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",
  "names": []
}
