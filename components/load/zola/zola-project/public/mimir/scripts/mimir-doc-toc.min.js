const DEBUG=!1;let currentHeading,currentSection,currentTocLink,dot=null,toc=document.querySelector("#mimir-doc-toc"),tocInner=document.querySelector("#mimir-doc-toc .mimir-doc-toc-inner"),offset=0;window.addEventListener("scroll",selectSection,{passive:!0}),toc.addEventListener("click",navigateToc),selectSection(!!location.hash);function createDot(){const e=document.createElement("div");return e.style.position="fixed",e.style.width="2px",e.style.height="2px",e.style.background="red",e.style.zIndex=1e5,e.style.display="none",document.body.appendChild(e),e}function moveDot(e,t){dot&&(dot.style.left=e+"px",dot.style.top=t+4+"px",document.body.style.setProperty("--mimir-doc-toc-heading-buffer",`${t}px`))}function selectSection(e,t=!1){const i=window.innerWidth*.6,o=window.innerHeight/6;let n=document.elementsFromPoint(i+20,o+20).find(c=>{let s=c.matches(".preface,.section,.chapter,.mimir-doc-title"),l=toc.querySelector(`a[href$="#${getId(c)}"]`)!=null;return s&&l});n||(n=document.querySelector("#doc-wrapper")),n&&(moveDot(i,o),setActive(n,t,!1),offset=o)}function getId(e){return e.id.replace(/^mimir-doc--/,"")}function setActive(e,t=!1,i=!1){const o=e!=currentSection;!!e&&(o&&(currentSection&&unhighlightTocLink(getId(currentSection)),setInactive(currentHeading)),highlightTocLink(getId(e)),currentHeading=e.querySelector(".title,.legalnotice"),currentSection=e,t&&currentHeading.classList.add("mimir-doc-toc__active"))}function highlightTocLink(e){const t=toc.querySelector(`a[href$="${location.pathname}#${e}"]`)||toc.querySelector(`a[href$="#${e}"]`),i=window.innerWidth>1200;if(shouldScroll()&&t){if(i)if(t.scrollIntoViewIfNeeded)t.scrollIntoViewIfNeeded();else{let o=t.offsetTop,r=tocInner.offsetTop,n=window.innerHeight/3,c=o-n;tocInner.scrollTo(0,c)}t.classList.add("mimir-doc-toc__active")}}function shouldScroll(){return!(tocInner.getBoundingClientRect().y<0)}function navigateToc(e){if(e.target.constructor==HTMLAnchorElement){const i=e.target.href.split("#")[1];if(i){const o=document.querySelector(`#${i}`);setActive(o,!0,!0)}}}function tocScrollTo(e,t){return e?(window.scrollTo({top:e.offsetTop-t,behavior:"instant"}),!0):!1}function unhighlightTocLink(e){const t=toc.querySelector(`a[href$="${location.pathname}#${e}"]`)||toc.querySelector(`a[href$="#${e}"]`);t&&t.classList.remove("mimir-doc-toc__active")}function setInactive(e){e&&e.classList.remove("mimir-doc-toc__active")}
